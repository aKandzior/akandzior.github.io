var ru=Object.defineProperty;var Fa=n=>{throw TypeError(n)};var au=(n,t,e)=>t in n?ru(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var ge=(n,t,e)=>au(n,typeof t!="symbol"?t+"":t,e),ou=(n,t,e)=>t.has(n)||Fa("Cannot "+e);var Ma=(n,t,e)=>t.has(n)?Fa("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e);var gi=(n,t,e)=>(ou(n,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();const Q=n=>typeof n=="string",Ln=()=>{let n,t;const e=new Promise((i,r)=>{n=i,t=r});return e.resolve=n,e.reject=t,e},Ra=n=>n==null?"":""+n,su=(n,t,e)=>{n.forEach(i=>{t[i]&&(e[i]=t[i])})},lu=/###/g,Pa=n=>n&&n.indexOf("###")>-1?n.replace(lu,"."):n,Ia=n=>!n||Q(n),Hn=(n,t,e)=>{const i=Q(t)?t.split("."):t;let r=0;for(;r<i.length-1;){if(Ia(n))return{};const a=Pa(i[r]);!n[a]&&e&&(n[a]=new e),Object.prototype.hasOwnProperty.call(n,a)?n=n[a]:n={},++r}return Ia(n)?{}:{obj:n,k:Pa(i[r])}},Oa=(n,t,e)=>{const{obj:i,k:r}=Hn(n,t,Object);if(i!==void 0||t.length===1){i[r]=e;return}let a=t[t.length-1],o=t.slice(0,t.length-1),s=Hn(n,o,Object);for(;s.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),s=Hn(n,o,Object),s&&s.obj&&typeof s.obj[`${s.k}.${a}`]<"u"&&(s.obj=void 0);s.obj[`${s.k}.${a}`]=e},uu=(n,t,e,i)=>{const{obj:r,k:a}=Hn(n,t,Object);r[a]=r[a]||[],r[a].push(e)},Oi=(n,t)=>{const{obj:e,k:i}=Hn(n,t);if(e)return e[i]},cu=(n,t,e)=>{const i=Oi(n,e);return i!==void 0?i:Oi(t,e)},es=(n,t,e)=>{for(const i in t)i!=="__proto__"&&i!=="constructor"&&(i in n?Q(n[i])||n[i]instanceof String||Q(t[i])||t[i]instanceof String?e&&(n[i]=t[i]):es(n[i],t[i],e):n[i]=t[i]);return n},an=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var du={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const hu=n=>Q(n)?n.replace(/[&<>"'\/]/g,t=>du[t]):n;class fu{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const e=this.regExpMap.get(t);if(e!==void 0)return e;const i=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,i),this.regExpQueue.push(t),i}}const gu=[" ",",","?","!",";"],mu=new fu(20),pu=(n,t,e)=>{t=t||"",e=e||"";const i=gu.filter(o=>t.indexOf(o)<0&&e.indexOf(o)<0);if(i.length===0)return!0;const r=mu.getRegExp(`(${i.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!r.test(n);if(!a){const o=n.indexOf(e);o>0&&!r.test(n.substring(0,o))&&(a=!0)}return a},Rr=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[t])return n[t];const i=t.split(e);let r=n;for(let a=0;a<i.length;){if(!r||typeof r!="object")return;let o,s="";for(let l=a;l<i.length;++l)if(l!==a&&(s+=e),s+=i[l],o=r[s],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<i.length-1)continue;a+=l-a+1;break}r=o}return r},$i=n=>n&&n.replace("_","-"),bu={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,t){console&&console[n]&&console[n].apply(console,t)}};class Gi{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,e)}init(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||bu,this.options=e,this.debug=e.debug}log(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.forward(e,"log","",!0)}warn(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.forward(e,"warn","",!0)}error(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.forward(e,"error","")}deprecate(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,i,r){return r&&!this.debug?null:(Q(t[0])&&(t[0]=`${i}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new Gi(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Gi(this.logger,t)}}var gt=new Gi;let qi=class{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const r=this.observers[i].get(e)||0;this.observers[i].set(e,r+1)}),this}off(t,e){if(this.observers[t]){if(!e){delete this.observers[t];return}this.observers[t].delete(e)}}emit(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(o=>{let[s,l]=o;for(let u=0;u<l;u++)s(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[s,l]=o;for(let u=0;u<l;u++)s.apply(s,[t,...i])})}};class $a extends qi{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,o=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;t.indexOf(".")>-1?s=t.split("."):(s=[t,e],i&&(Array.isArray(i)?s.push(...i):Q(i)&&a?s.push(...i.split(a)):s.push(i)));const l=Oi(this.data,s);return!l&&!e&&!i&&t.indexOf(".")>-1&&(t=s[0],e=s[1],i=s.slice(2).join(".")),l||!o||!Q(i)?l:Rr(this.data&&this.data[t]&&this.data[t][e],i,a)}addResource(t,e,i,r){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let s=[t,e];i&&(s=s.concat(o?i.split(o):i)),t.indexOf(".")>-1&&(s=t.split("."),r=e,e=s[1]),this.addNamespaces(e),Oa(this.data,s,r),a.silent||this.emit("added",t,e,i,r)}addResources(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const a in i)(Q(i[a])||Array.isArray(i[a]))&&this.addResource(t,e,a,i[a],{silent:!0});r.silent||this.emit("added",t,e,i)}addResourceBundle(t,e,i,r,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},s=[t,e];t.indexOf(".")>-1&&(s=t.split("."),r=i,i=e,e=s[1]),this.addNamespaces(e);let l=Oi(this.data,s)||{};o.skipCopy||(i=JSON.parse(JSON.stringify(i))),r?es(l,i,a):l={...l,...i},Oa(this.data,s,l),o.silent||this.emit("added",t,e,i)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return this.getResource(t,e)!==void 0}getResourceBundle(t,e){return e||(e=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,e)}:this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find(r=>e[r]&&Object.keys(e[r]).length>0)}toJSON(){return this.data}}var ts={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,t,e,i,r){return n.forEach(a=>{this.processors[a]&&(t=this.processors[a].process(t,e,i,r))}),t}};const Ga={};class zi extends qi{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),su(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=gt.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const i=this.resolve(t,e);return i&&i.res!==void 0}extractFromKey(t,e){let i=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const r=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator;let a=e.ns||this.options.defaultNS||[];const o=i&&t.indexOf(i)>-1,s=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!pu(t,i,r);if(o&&!s){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:Q(a)?[a]:a};const u=t.split(i);(i!==r||i===r&&this.options.ns.indexOf(u[0])>-1)&&(a=u.shift()),t=u.join(r)}return{key:t,namespaces:Q(a)?[a]:a}}translate(t,e,i){if(typeof e!="object"&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),typeof e=="object"&&(e={...e}),e||(e={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const r=e.returnDetails!==void 0?e.returnDetails:this.options.returnDetails,a=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(t[t.length-1],e),l=s[s.length-1],u=e.lng||this.language,c=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const w=e.nsSeparator||this.options.nsSeparator;return r?{res:`${l}${w}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(e)}:`${l}${w}${o}`}return r?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(e)}:o}const d=this.resolve(t,e);let h=d&&d.res;const f=d&&d.usedKey||o,p=d&&d.exactUsedKey||o,b=Object.prototype.toString.apply(h),y=["[object Number]","[object Function]","[object RegExp]"],E=e.joinArrays!==void 0?e.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,v=!Q(h)&&typeof h!="boolean"&&typeof h!="number";if(_&&h&&v&&y.indexOf(b)<0&&!(Q(E)&&Array.isArray(h))){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,h,{...e,ns:s}):`key '${o} (${this.language})' returned an object instead of string.`;return r?(d.res=w,d.usedParams=this.getUsedParamsDetails(e),d):w}if(a){const w=Array.isArray(h),N=w?[]:{},k=w?p:f;for(const x in h)if(Object.prototype.hasOwnProperty.call(h,x)){const T=`${k}${a}${x}`;N[x]=this.translate(T,{...e,joinArrays:!1,ns:s}),N[x]===T&&(N[x]=h[x])}h=N}}else if(_&&Q(E)&&Array.isArray(h))h=h.join(E),h&&(h=this.extendTranslation(h,t,e,i));else{let w=!1,N=!1;const k=e.count!==void 0&&!Q(e.count),x=zi.hasDefaultValue(e),T=k?this.pluralResolver.getSuffix(u,e.count,e):"",M=e.ordinal&&k?this.pluralResolver.getSuffix(u,e.count,{ordinal:!1}):"",L=k&&!e.ordinal&&e.count===0&&this.pluralResolver.shouldUseIntlApi(),O=L&&e[`defaultValue${this.options.pluralSeparator}zero`]||e[`defaultValue${T}`]||e[`defaultValue${M}`]||e.defaultValue;!this.isValidLookup(h)&&x&&(w=!0,h=O),this.isValidLookup(h)||(N=!0,h=o);const R=(e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&N?void 0:h,z=x&&O!==h&&this.options.updateMissing;if(N||w||z){if(this.logger.log(z?"updateKey":"missingKey",u,l,o,z?O:h),a){const V=this.resolve(o,{...e,keySeparator:!1});V&&V.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let j=[];const Y=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Y&&Y[0])for(let V=0;V<Y.length;V++)j.push(Y[V]);else this.options.saveMissingTo==="all"?j=this.languageUtils.toResolveHierarchy(e.lng||this.language):j.push(e.lng||this.language);const te=(V,X,ne)=>{const re=x&&ne!==h?ne:R;this.options.missingKeyHandler?this.options.missingKeyHandler(V,l,X,re,z,e):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(V,l,X,re,z,e),this.emit("missingKey",V,l,X,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?j.forEach(V=>{const X=this.pluralResolver.getSuffixes(V,e);L&&e[`defaultValue${this.options.pluralSeparator}zero`]&&X.indexOf(`${this.options.pluralSeparator}zero`)<0&&X.push(`${this.options.pluralSeparator}zero`),X.forEach(ne=>{te([V],o+ne,e[`defaultValue${ne}`]||O)})}):te(j,o,O))}h=this.extendTranslation(h,t,e,d,i),N&&h===o&&this.options.appendNamespaceToMissingKey&&(h=`${l}:${o}`),(N||w)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,w?h:void 0):h=this.options.parseMissingKeyHandler(h))}return r?(d.res=h,d.usedParams=this.getUsedParamsDetails(e),d):h}extendTranslation(t,e,i,r,a){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const u=Q(t)&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const h=t.match(this.interpolator.nestingRegexp);c=h&&h.length}let d=i.replace&&!Q(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),t=this.interpolator.interpolate(t,d,i.lng||this.language||r.usedLng,i),u){const h=t.match(this.interpolator.nestingRegexp),f=h&&h.length;c<f&&(i.nest=!1)}!i.lng&&this.options.compatibilityAPI!=="v1"&&r&&r.res&&(i.lng=this.language||r.usedLng),i.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var h=arguments.length,f=new Array(h),p=0;p<h;p++)f[p]=arguments[p];return a&&a[0]===f[0]&&!i.context?(o.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${e[0]}`),null):o.translate(...f,e)},i)),i.interpolation&&this.interpolator.reset()}const s=i.postProcess||this.options.postProcess,l=Q(s)?[s]:s;return t!=null&&l&&l.length&&i.applyPostProcessor!==!1&&(t=ts.handle(l,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),t}resolve(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,r,a,o,s;return Q(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(i))return;const u=this.extractFromKey(l,e),c=u.key;r=c;let d=u.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const h=e.count!==void 0&&!Q(e.count),f=h&&!e.ordinal&&e.count===0&&this.pluralResolver.shouldUseIntlApi(),p=e.context!==void 0&&(Q(e.context)||typeof e.context=="number")&&e.context!=="",b=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);d.forEach(y=>{this.isValidLookup(i)||(s=y,!Ga[`${b[0]}-${y}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(Ga[`${b[0]}-${y}`]=!0,this.logger.warn(`key "${r}" for languages "${b.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(E=>{if(this.isValidLookup(i))return;o=E;const _=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(_,c,E,y,e);else{let w;h&&(w=this.pluralResolver.getSuffix(E,e.count,e));const N=`${this.options.pluralSeparator}zero`,k=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(_.push(c+w),e.ordinal&&w.indexOf(k)===0&&_.push(c+w.replace(k,this.options.pluralSeparator)),f&&_.push(c+N)),p){const x=`${c}${this.options.contextSeparator}${e.context}`;_.push(x),h&&(_.push(x+w),e.ordinal&&w.indexOf(k)===0&&_.push(x+w.replace(k,this.options.pluralSeparator)),f&&_.push(x+N))}}let v;for(;v=_.pop();)this.isValidLookup(i)||(a=v,i=this.getResource(E,y,v,e))}))})}),{res:i,usedKey:r,exactUsedKey:a,usedLng:o,usedNS:s}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,i,r):this.resourceStore.getResource(t,e,i,r)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=t.replace&&!Q(t.replace);let r=i?t.replace:t;if(i&&typeof t.count<"u"&&(r.count=t.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!i){r={...r};for(const a of e)delete r[a]}return r}static hasDefaultValue(t){const e="defaultValue";for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e===i.substring(0,e.length)&&t[i]!==void 0)return!0;return!1}}const lr=n=>n.charAt(0).toUpperCase()+n.slice(1);class za{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=gt.create("languageUtils")}getScriptPartFromCode(t){if(t=$i(t),!t||t.indexOf("-")<0)return null;const e=t.split("-");return e.length===2||(e.pop(),e[e.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(t){if(t=$i(t),!t||t.indexOf("-")<0)return t;const e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if(Q(t)&&t.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let r=Intl.getCanonicalLocales(t)[0];if(r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r)return r}catch{}const e=["hans","hant","latn","cyrl","cans","mong","arab"];let i=t.split("-");return this.options.lowerCaseLng?i=i.map(r=>r.toLowerCase()):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),e.indexOf(i[1].toLowerCase())>-1&&(i[1]=lr(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),e.indexOf(i[1].toLowerCase())>-1&&(i[1]=lr(i[1].toLowerCase())),e.indexOf(i[2].toLowerCase())>-1&&(i[2]=lr(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach(i=>{if(e)return;const r=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(r))&&(e=r)}),!e&&this.options.supportedLngs&&t.forEach(i=>{if(e)return;const r=this.getLanguagePartFromCode(i);if(this.isSupportedCode(r))return e=r;e=this.options.supportedLngs.find(a=>{if(a===r)return a;if(!(a.indexOf("-")<0&&r.indexOf("-")<0)&&(a.indexOf("-")>0&&r.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===r||a.indexOf(r)===0&&r.length>1))return a})}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if(typeof t=="function"&&(t=t(e)),Q(t)&&(t=[t]),Array.isArray(t))return t;if(!e)return t.default||[];let i=t[e];return i||(i=t[this.getScriptPartFromCode(e)]),i||(i=t[this.formatLanguageCode(e)]),i||(i=t[this.getLanguagePartFromCode(e)]),i||(i=t.default),i||[]}toResolveHierarchy(t,e){const i=this.getFallbackCodes(e||this.options.fallbackLng||[],t),r=[],a=o=>{o&&(this.isSupportedCode(o)?r.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Q(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):Q(t)&&a(this.formatLanguageCode(t)),i.forEach(o=>{r.indexOf(o)<0&&a(this.formatLanguageCode(o))}),r}}let vu=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],yu={1:n=>+(n>1),2:n=>+(n!=1),3:n=>0,4:n=>n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2,5:n=>n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5,6:n=>n==1?0:n>=2&&n<=4?1:2,7:n=>n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2,8:n=>n==1?0:n==2?1:n!=8&&n!=11?2:3,9:n=>+(n>=2),10:n=>n==1?0:n==2?1:n<7?2:n<11?3:4,11:n=>n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3,12:n=>+(n%10!=1||n%100==11),13:n=>+(n!==0),14:n=>n==1?0:n==2?1:n==3?2:3,15:n=>n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2,16:n=>n%10==1&&n%100!=11?0:n!==0?1:2,17:n=>n==1||n%10==1&&n%100!=11?0:1,18:n=>n==0?0:n==1?1:2,19:n=>n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3,20:n=>n==1?0:n==0||n%100>0&&n%100<20?1:2,21:n=>n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0,22:n=>n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3};const wu=["v1","v2","v3"],_u=["v4"],Ba={zero:0,one:1,two:2,few:3,many:4,other:5},ku=()=>{const n={};return vu.forEach(t=>{t.lngs.forEach(e=>{n[e]={numbers:t.nr,plurals:yu[t.fc]}})}),n};class Su{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=e,this.logger=gt.create("pluralResolver"),(!this.options.compatibilityJSON||_u.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=ku(),this.pluralRulesCache={}}addRule(t,e){this.rules[t]=e}clearCache(){this.pluralRulesCache={}}getRule(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const i=$i(t==="dev"?"en":t),r=e.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:i,type:r});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(i,{type:r})}catch{if(!t.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(l,e)}return this.pluralRulesCache[a]=o,o}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(t,e);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,i).map(r=>`${e}${r}`)}getSuffixes(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(t,e);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((r,a)=>Ba[r]-Ba[a]).map(r=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${r}`):i.numbers.map(r=>this.getSuffix(t,r,e)):[]}getSuffix(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.getRule(t,i);return r?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r.select(e)}`:this.getSuffixRetroCompatible(r,e):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,e){const i=t.noAbs?t.plurals(e):t.plurals(Math.abs(e));let r=t.numbers[i];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(r===2?r="plural":r===1&&(r=""));const a=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return this.options.compatibilityJSON==="v1"?r===1?"":typeof r=="number"?`_plural_${r.toString()}`:a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?a():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!wu.includes(this.options.compatibilityJSON)}}const Ua=function(n,t,e){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=cu(n,t,e);return!a&&r&&Q(e)&&(a=Rr(n,e,i),a===void 0&&(a=Rr(t,e,i))),a},ur=n=>n.replace(/\$/g,"$$$$");class xu{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=gt.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(e=>e),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:e,escapeValue:i,useRawValueToEscape:r,prefix:a,prefixEscaped:o,suffix:s,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:h,nestingPrefixEscaped:f,nestingSuffix:p,nestingSuffixEscaped:b,nestingOptionsSeparator:y,maxReplaces:E,alwaysFormat:_}=t.interpolation;this.escape=e!==void 0?e:hu,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=a?an(a):o||"{{",this.suffix=s?an(s):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=h?an(h):f||an("$t("),this.nestingSuffix=p?an(p):b||an(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=E||1e3,this.alwaysFormat=_!==void 0?_:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(e,i)=>e&&e.source===i?(e.lastIndex=0,e):new RegExp(i,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,e,i,r){let a,o,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=f=>{if(f.indexOf(this.formatSeparator)<0){const E=Ua(e,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,i,{...r,...e,interpolationkey:f}):E}const p=f.split(this.formatSeparator),b=p.shift().trim(),y=p.join(this.formatSeparator).trim();return this.format(Ua(e,l,b,this.options.keySeparator,this.options.ignoreJSONStructure),y,i,{...r,...e,interpolationkey:b})};this.resetRegExp();const c=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>ur(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?ur(this.escape(f)):ur(f)}].forEach(f=>{for(s=0;a=f.regex.exec(t);){const p=a[1].trim();if(o=u(p),o===void 0)if(typeof c=="function"){const y=c(t,a,r);o=Q(y)?y:""}else if(r&&Object.prototype.hasOwnProperty.call(r,p))o="";else if(d){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${t}`),o="";else!Q(o)&&!this.useRawValueToEscape&&(o=Ra(o));const b=f.safeValue(o);if(t=t.replace(a[0],b),d?(f.regex.lastIndex+=o.length,f.regex.lastIndex-=a[0].length):f.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),t}nest(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,a,o;const s=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const d=l.split(new RegExp(`${c}[ ]*{`));let h=`{${d[1]}`;l=d[0],h=this.interpolate(h,o);const f=h.match(/'/g),p=h.match(/"/g);(f&&f.length%2===0&&!p||p.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),u&&(o={...u,...o})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,b),`${l}${c}${h}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;r=this.nestingRegexp.exec(t);){let l=[];o={...i},o=o.replace&&!Q(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){const c=r[1].split(this.formatSeparator).map(d=>d.trim());r[1]=c.shift(),l=c,u=!0}if(a=e(s.call(this,r[1].trim(),o),o),a&&r[0]===t&&!Q(a))return a;Q(a)||(a=Ra(a)),a||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${t}`),a=""),u&&(a=l.reduce((c,d)=>this.format(c,d,i.lng,{...i,interpolationkey:r[1].trim()}),a.trim())),t=t.replace(r[0],a),this.regexp.lastIndex=0}return t}}const Eu=n=>{let t=n.toLowerCase().trim();const e={};if(n.indexOf("(")>-1){const i=n.split("(");t=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);t==="currency"&&r.indexOf(":")<0?e.currency||(e.currency=r.trim()):t==="relativetime"&&r.indexOf(":")<0?e.range||(e.range=r.trim()):r.split(";").forEach(o=>{if(o){const[s,...l]=o.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=s.trim();e[c]||(e[c]=u),u==="false"&&(e[c]=!1),u==="true"&&(e[c]=!0),isNaN(u)||(e[c]=parseInt(u,10))}})}return{formatName:t,formatOptions:e}},on=n=>{const t={};return(e,i,r)=>{let a=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(a={...a,[r.interpolationkey]:void 0});const o=i+JSON.stringify(a);let s=t[o];return s||(s=n($i(i),r),t[o]=s),s(e)}};class Tu{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=gt.create("formatter"),this.options=t,this.formats={number:on((e,i)=>{const r=new Intl.NumberFormat(e,{...i});return a=>r.format(a)}),currency:on((e,i)=>{const r=new Intl.NumberFormat(e,{...i,style:"currency"});return a=>r.format(a)}),datetime:on((e,i)=>{const r=new Intl.DateTimeFormat(e,{...i});return a=>r.format(a)}),relativetime:on((e,i)=>{const r=new Intl.RelativeTimeFormat(e,{...i});return a=>r.format(a,i.range||"day")}),list:on((e,i)=>{const r=new Intl.ListFormat(e,{...i});return a=>r.format(a)})},this.init(t)}init(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=e.interpolation.formatSeparator||","}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=on(e)}format(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=e.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(s=>s.indexOf(")")>-1)){const s=a.findIndex(l=>l.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,s)].join(this.formatSeparator)}return a.reduce((s,l)=>{const{formatName:u,formatOptions:c}=Eu(l);if(this.formats[u]){let d=s;try{const h=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},f=h.locale||h.lng||r.locale||r.lng||i;d=this.formats[u](s,f,{...c,...r,...h})}catch(h){this.logger.warn(h)}return d}else this.logger.warn(`there was no format function for ${u}`);return s},t)}}const Cu=(n,t)=>{n.pending[t]!==void 0&&(delete n.pending[t],n.pendingCount--)};class Du extends qi{constructor(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=e,this.services=i,this.languageUtils=i.languageUtils,this.options=r,this.logger=gt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,r.backend,r)}queueLoad(t,e,i,r){const a={},o={},s={},l={};return t.forEach(u=>{let c=!0;e.forEach(d=>{const h=`${u}|${d}`;!i.reload&&this.store.hasResourceBundle(u,d)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,c=!1,o[h]===void 0&&(o[h]=!0),a[h]===void 0&&(a[h]=!0),l[d]===void 0&&(l[d]=!0)))}),c||(s[u]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(t,e,i){const r=t.split("|"),a=r[0],o=r[1];e&&this.emit("failedLoading",a,o,e),!e&&i&&this.store.addResourceBundle(a,o,i,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2,e&&i&&(this.state[t]=0);const s={};this.queue.forEach(l=>{uu(l.loaded,[a],o),Cu(l,t),e&&l.errors.push(e),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{s[u]||(s[u]={});const c=l.loaded[u];c.length&&c.forEach(d=>{s[u][d]===void 0&&(s[u][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:e,fcName:i,tried:r,wait:a,callback:o});return}this.readingCalls++;const s=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(u&&c&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,t,e,i,r+1,a*2,o)},a);return}o(u,c)},l=this.backend[i].bind(this.backend);if(l.length===2){try{const u=l(t,e);u&&typeof u.then=="function"?u.then(c=>s(null,c)).catch(s):s(null,u)}catch(u){s(u)}return}return l(t,e,s)}prepareLoading(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Q(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Q(e)&&(e=[e]);const a=this.queueLoad(t,e,i,r);if(!a.toLoad.length)return a.pending.length||r(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(t,e,i){this.prepareLoading(t,e,{},i)}reload(t,e,i){this.prepareLoading(t,e,{reload:!0},i)}loadOne(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=t.split("|"),r=i[0],a=i[1];this.read(r,a,"read",void 0,void 0,(o,s)=>{o&&this.logger.warn(`${e}loading namespace ${a} for language ${r} failed`,o),!o&&s&&this.logger.log(`${e}loaded namespace ${a} for language ${r}`,s),this.loaded(t,o,s)})}saveMissing(t,e,i,r,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)){this.logger.warn(`did not save key "${i}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:a},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(t,e,i,r,l):c=u(t,e,i,r),c&&typeof c.then=="function"?c.then(d=>s(null,d)).catch(s):s(null,c)}catch(c){s(c)}else u(t,e,i,r,s,l)}!t||!t[0]||this.store.addResource(t[0],e,i,r)}}}const Ha=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let t={};if(typeof n[1]=="object"&&(t=n[1]),Q(n[1])&&(t.defaultValue=n[1]),Q(n[2])&&(t.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const e=n[3]||n[2];Object.keys(e).forEach(i=>{t[i]=e[i]})}return t},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Wa=n=>(Q(n.ns)&&(n.ns=[n.ns]),Q(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Q(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n),mi=()=>{},Au=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{typeof n[e]=="function"&&(n[e]=n[e].bind(n))})};class Xn extends qi{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Wa(t),this.services={},this.logger=gt,this.modules={external:[]},Au(this),e&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,e),this;setTimeout(()=>{this.init(t,e)},0)}}init(){var t=this;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof e=="function"&&(i=e,e={}),!e.defaultNS&&e.defaultNS!==!1&&e.ns&&(Q(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=Ha();this.options={...r,...this.options,...Wa(e)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const a=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?gt.init(a(this.modules.logger),this.options):gt.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=Tu);const d=new za(this.options);this.store=new $a(this.options.resources,this.options);const h=this.services;h.logger=gt,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new Su(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(h.formatter=a(c),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new xu(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Du(a(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(f){for(var p=arguments.length,b=new Array(p>1?p-1:0),y=1;y<p;y++)b[y-1]=arguments[y];t.emit(f,...b)}),this.modules.languageDetector&&(h.languageDetector=a(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=a(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new zi(this.services,this.options),this.translator.on("*",function(f){for(var p=arguments.length,b=new Array(p>1?p-1:0),y=1;y<p;y++)b[y-1]=arguments[y];t.emit(f,...b)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,i||(i=mi),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return t.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return t.store[c](...arguments),t}});const l=Ln(),u=()=>{const c=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),i(d,h)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(t){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi;const r=Q(t)?t:this.language;if(typeof t=="function"&&(i=t),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const a=[],o=s=>{if(!s||s==="cimode")return;this.services.languageUtils.toResolveHierarchy(s).forEach(u=>{u!=="cimode"&&a.indexOf(u)<0&&a.push(u)})};r?o(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(s=>o(s)),this.services.backendConnector.load(a,this.options.ns,s=>{!s&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(s)})}else i(null)}reloadResources(t,e,i){const r=Ln();return typeof t=="function"&&(i=t,t=void 0),typeof e=="function"&&(i=e,e=void 0),t||(t=this.languages),e||(e=this.options.ns),i||(i=mi),this.services.backendConnector.reload(t,e,a=>{r.resolve(),i(a)}),r}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&ts.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let e=0;e<this.languages.length;e++){const i=this.languages[e];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(t,e){var i=this;this.isLanguageChangingTo=t;const r=Ln();this.emit("languageChanging",t);const a=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,u)=>{u?(a(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve(function(){return i.t(...arguments)}),e&&e(l,function(){return i.t(...arguments)})},s=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=Q(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||a(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{o(c,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(t),r}getFixedT(t,e,i){var r=this;const a=function(o,s){let l;if(typeof s!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),d=2;d<u;d++)c[d-2]=arguments[d];l=r.options.overloadTranslationOptionHandler([o,s].concat(c))}else l={...s};l.lng=l.lng||a.lng,l.lngs=l.lngs||a.lngs,l.ns=l.ns||a.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||i||a.keyPrefix);const h=r.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(o)?f=o.map(p=>`${l.keyPrefix}${h}${p}`):f=l.keyPrefix?`${l.keyPrefix}${h}${o}`:o,r.t(f,l)};return Q(t)?a.lng=t:a.lngs=t,a.ns=e,a.keyPrefix=i,a}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=e.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=this.services.backendConnector.state[`${s}|${l}`];return u===-1||u===0||u===2};if(e.precheck){const s=e.precheck(this,o);if(s!==void 0)return s}return!!(this.hasResourceBundle(i,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(i,t)&&(!r||o(a,t)))}loadNamespaces(t,e){const i=Ln();return this.options.ns?(Q(t)&&(t=[t]),t.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{i.resolve(),e&&e(r)}),i):(e&&e(),Promise.resolve())}loadLanguages(t,e){const i=Ln();Q(t)&&(t=[t]);const r=this.options.preload||[],a=t.filter(o=>r.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=r.concat(a),this.loadResources(o=>{i.resolve(),e&&e(o)}),i):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new za(Ha());return e.indexOf(i.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Xn(t,e)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mi;const i=t.forkResourceStore;i&&delete t.forkResourceStore;const r={...this.options,...t,isClone:!0},a=new Xn(r);return(t.debug!==void 0||t.prefix!==void 0)&&(a.logger=a.logger.clone(t)),["store","services","language"].forEach(s=>{a[s]=this[s]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},i&&(a.store=new $a(this.store.data,r),a.services.resourceStore=a.store),a.translator=new zi(a.services,r),a.translator.on("*",function(s){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];a.emit(s,...u)}),a.init(r,e),a.translator.options=r,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const we=Xn.createInstance();we.createInstance=Xn.createInstance;we.createInstance;we.dir;we.init;we.loadResources;we.reloadResources;we.use;we.changeLanguage;we.getFixedT;we.t;we.exists;we.setDefaultNamespace;we.hasLoadedNamespace;we.loadNamespaces;we.loadLanguages;const aa={en:{translation:{"label.appTitle":"Pro Football Tour Planner 2025","label.language":"Language","label.theme":"Theme","label.tourStartDate":"Time window begin","label.tourEndDate":"Time window end","label.routesHeading":"Best scored tours","label.routesHeading.running":"Searching for tours","label.helpTopicsHeading":"How the app works","label.weight":"Weight","label.unknownStadium":"Unknown stadium","label.unknownCity":"Unknown city","label.unknownLocation":"Unknown location","label.homeTeamUnknown":"Home team unknown","label.homeTeamFallback":"Home","label.awayTeamFallback":"Away","label.stadiumTbd":"TBD","label.gameDetailsHeading":"Game Details","label.game":"Game","label.week":"Week","label.kickoff":"Kickoff","label.stadium":"Stadium","label.location":"Location","label.routeScore":"Score","label.travelDistance":"Travel distance","label.travelTime":"Travel time","label.routeLength_one":"{{count}} game","label.routeLength_other":"{{count}} games","label.routeTitle.single":"{{firstCity}}","label.routeTitle.range":"From {{firstCity}} to {{lastCity}}","label.routeTitle.via":"From {{firstCity}} to {{lastCity}} via {{viaList}}","label.routeTitle.viaOverflow":"From {{firstCity}} to {{lastCity}} via {{viaList}} and {{remainingLabel}}","label.routeTitle.remaining_one":"{{count}} more","label.routeTitle.remaining_other":"{{count}} more","label.editRouteTitle":"Edit title","label.routeWeekSingle":"Week {{week}}","label.routeWeeksRange":"Weeks {{start}}  {{end}}","label.weekNumber":"Week {{week}}","label.weekUnknown":"Week ?","label.durationZeroHours":"0.0 hours","label.durationDays_one":"{{count}} day","label.durationDays_other":"{{count}} days","label.graphNode":"Week {{week}}: {{away}} @ {{home}}{{tagSuffix}}","label.graphNodeTagSuffix":" ({{tag}})","label.unknown":"Unknown","message.routesLoading":"Tours are loading","message.routesAwaitingSearch":"Tours will appear here once a search completes.","message.routesEmpty":"No tours found within the configured tour window.","message.calculatingRoutes":"Calculating tours","message.graphSelectPrompt":"Select a game to see the details.","message.favoritesEmpty":"No tours saved yet.","message.favoritesImportSummary":"Imported {{added}} tours  Skipped {{skipped}} duplicates.","error.favoritesImportInvalid":"Could not import tours: invalid file.","message.favoritesRemoveConfirm":"Really remove tour","message.help.empty":"Help content is not available yet.","button.help":"Help","button.searchStart":"Start search","button.searchStop":"End search","button.addFavorite":"Save tour","button.removeFavorite":"Remove saved tour","button.moveUp":"Move up","button.moveDown":"Move down","button.exportFavorites":"Export tours","button.importFavorites":"Import tours","button.close":"Close","button.cancel":"Cancel","button.remove":"Remove","button.save":"Save","button.restoreDefaults":"Restore defaults","dialog.teamPreferences.title":"Team preferences","dialog.cityPreferences.title":"City preferences","dialog.routingParameters.title":"Routing parameters","dialog.routingGraph.title":"Routing graph","dialog.favorites.title":"Saved tours","dialog.favorites.importStatusTitle":"Tour import status","dialog.favorites.removeConfirmTitle":"Remove saved tour","dialog.help.title":"Help","option.language.en":"English","option.language.de":"German","option.theme.system":"System","option.theme.light":"Light","option.theme.dark":"Dark","option.startDay.any":"Any day","option.startDay.sunday":"Sunday","option.startDay.monday":"Monday","option.startDay.thursday":"Thursday","option.enabled":"Enabled","option.disabled":"Disabled","aria.closeDialog":"Close dialog","aria.teamLogo":"{{team}} logo","aria.languageSelector":"Select interface language","aria.themeSelector":"Select interface theme","aria.appMenuOpen":"Open menu","aria.appMenuClose":"Close menu","status.searchStopped":"Stopped","status.searchFinished":"Finished","status.nodeSummary":"Processed {{processed}} of {{total}} start nodes.","log.elapsed":"Runtime:","log.progress":"Start games checked:","log.evaluated":"Tours evaluated:","log.remaining":"Remaining time:","label.routing.maxRoutes":"Max results","label.routing.maxTourLength":"Tour duration (days)","label.routing.allowFlights":"Allow flights","label.routing.expertMode":"Expert mode","label.routing.requiredStartDay":"Start day","label.routing.estimatedGamesPerWeek":"Est games per week","label.routing.maxSearchMinutesPerStartGame":"Max search minutes per game","label.routing.beamWidthPerStartGame":"Beam width/start game","label.routing.specialGameDayPenalty":"Special game day score multiplier","label.routing.cacheBucketHours":"Cache bucket (hours)","label.routing.minTimeToNextGameHoursFlight":"Min hours to next game (flight)","label.routing.maxTimeToNextGameHours":"Max hours to next game","label.routing.oneDayGap":"One-day gap (hours)","label.routing.maxDriveOneDayGap":"Max drive time on one day","label.routing.twoDayGap":"Two-day gap (hours)","label.routing.maxDriveTwoDayGap":"Max drive time two days","label.routing.threeDayGap":"Three-day gap (hours)","label.routing.maxDriveThreeDayGap":"Max drive time three days","label.routing.fourDayGap":"Four-day gap (hours)","label.routing.maxDriveFourDayGap":"Max drive time four days","label.routing.revisitMultiplierFloor":"City revisit score multiplier","label.routing.travelMultiplierFloor":"Travel multiplier floor","label.routing.travelMultiplierCeilingFlight":"Flight travel score multiplier","label.routing.enableRouteCache":"Enable route cache"}},de:{translation:{"label.appTitle":"Pro-Football Tour Planer 2025","label.language":"Sprache","label.theme":"Design","label.tourStartDate":"Zeitfenster von","label.tourEndDate":"Zeitfenster bis","label.routesHeading":"Bestbewertete Touren","label.routesHeading.running":"Tourensuche luft","label.helpTopicsHeading":"So funktioniert die App","label.weight":"Gewichtung","label.unknownStadium":"Unbekanntes Stadion","label.unknownCity":"Unbekannte Stadt","label.unknownLocation":"Unbekannter Ort","label.homeTeamUnknown":"Heimmannschaft unbekannt","label.homeTeamFallback":"Heim","label.awayTeamFallback":"Auswrts","label.stadiumTbd":"Noch offen","label.gameDetailsHeading":"Spieldetails","label.game":"Spiel","label.week":"Woche","label.kickoff":"Kickoff","label.stadium":"Stadion","label.location":"Ort","label.routeScore":"Wertung","label.travelDistance":"Reisedistanz","label.travelTime":"Reisezeit","label.routeLength_one":"{{count}} Spiel","label.routeLength_other":"{{count}} Spiele","label.routeTitle.single":"{{firstCity}}","label.routeTitle.range":"Von {{firstCity}} nach {{lastCity}}","label.routeTitle.via":"Von {{firstCity}} nach {{lastCity}} ber {{viaList}}","label.routeTitle.viaOverflow":"Von {{firstCity}} nach {{lastCity}} ber {{viaList}} und {{remainingLabel}}","label.routeTitle.remaining_one":"{{count}} weitere Stadt","label.routeTitle.remaining_other":"{{count}} weitere Stdte","label.editRouteTitle":"Titel bearbeiten","label.routeWeekSingle":"Woche {{week}}","label.routeWeeksRange":"Wochen {{start}}{{end}}","label.weekNumber":"Woche {{week}}","label.weekUnknown":"Woche ?","label.durationZeroHours":"0,0 Stunden","label.durationDays_one":"{{count}} Tag","label.durationDays_other":"{{count}} Tage","label.graphNode":"Woche {{week}}: {{away}} @ {{home}}{{tagSuffix}}","label.graphNodeTagSuffix":" ({{tag}})","label.unknown":"Unbekannt","message.routesLoading":"Touren werden geladen","message.routesAwaitingSearch":"Touren erscheinen hier nach einer abgeschlossenen Suche.","message.routesEmpty":"Keine Touren innerhalb des gewhlten Reisezeitraums gefunden.","message.calculatingRoutes":"Surche Touren","message.graphSelectPrompt":"Spiel auswhlen, um Details anzuzeigen.","message.favoritesEmpty":"Noch keine Touren gespeichert.","message.favoritesImportSummary":"Importiert: {{added}}  bersprungen: {{skipped}}.","error.favoritesImportInvalid":"Touren konnten nicht importiert werden: Datei ungltig.","message.favoritesRemoveConfirm":"Tour wirklich entfernen?","message.help.empty":"Hilfeinhalte sind derzeit nicht verfgbar.","button.help":"Hilfe","button.searchStart":"Suche starten","button.searchStop":"Suche beenden","button.addFavorite":"Tour merken","button.removeFavorite":"Gemerkte Tour entfernen","button.moveUp":"Nach oben","button.moveDown":"Nach unten","button.exportFavorites":"Touren exportieren","button.importFavorites":"Touren importieren","button.close":"Schlieen","button.cancel":"Abbrechen","button.remove":"Entfernen","button.save":"Speichern","button.restoreDefaults":"Auf Standardwerte zurcksetzen","dialog.teamPreferences.title":"Teamprferenzen","dialog.cityPreferences.title":"Stadtprferenzen","dialog.routingParameters.title":"Routing-Parameter","dialog.routingGraph.title":"Routing-Graph","dialog.favorites.title":"Gemerkte Touren","dialog.favorites.importStatusTitle":"Tour-Importstatus","dialog.favorites.removeConfirmTitle":"Gemerkte Tour entfernen","dialog.help.title":"Hilfe","option.language.en":"English","option.language.de":"Deutsch","option.theme.system":"System","option.theme.light":"Hell","option.theme.dark":"Dunkel","option.startDay.any":"Beliebiger Tag","option.startDay.sunday":"Sonntag","option.startDay.monday":"Montag","option.startDay.thursday":"Donnerstag","option.enabled":"Aktiviert","option.disabled":"Deaktiviert","aria.closeDialog":"Dialog schlieen","aria.teamLogo":"{{team}} Logo","aria.languageSelector":"Sprache auswhlen","aria.themeSelector":"Design auswhlen","aria.appMenuOpen":"Men ffnen","aria.appMenuClose":"Men schlieen","status.searchStopped":"Angehalten","status.searchFinished":"Abgeschlossen","status.nodeSummary":"{{processed}} von {{total}} Spielen verarbeitet.","log.elapsed":"Laufzeit:","log.progress":"Startspiele geprft:","log.evaluated":"Touren geprft:","log.remaining":"Restzeit:","label.routing.maxRoutes":"Max Anzahl Ergebnisse","label.routing.maxTourLength":"Reisedauer (Tage)","label.routing.allowFlights":"Flge erlauben","label.routing.expertMode":"Experten-Modus","label.routing.requiredStartDay":"Starttag","label.routing.estimatedGamesPerWeek":"Erw Spiele pro Woche","label.routing.maxSearchMinutesPerStartGame":"Max Suchminuten pro Spiel","label.routing.beamWidthPerStartGame":"Beam-Width/Startspiel","label.routing.cacheBucketHours":"Cache-Bucket (Stunden)","label.routing.minTimeToNextGameHoursFlight":"Min Stunden bis zum nchsten Spiel (Flug)","label.routing.maxTimeToNextGameHours":"Max Stunden bis zum nchsten Spiel","label.routing.oneDayGap":"Ein-Tages-Abstand (Stunden)","label.routing.maxDriveOneDayGap":"Max Fahrtzeit an einem Tag","label.routing.twoDayGap":"Zwei-Tages-Abstand (Stunden)","label.routing.maxDriveTwoDayGap":"Max Fahrtzeit an zwei Tagen","label.routing.threeDayGap":"Drei-Tages-Abstand (Stunden)","label.routing.maxDriveThreeDayGap":"Max Fahrtzeit an drei Tagen","label.routing.fourDayGap":"Vier-Tages-Abstand (Stunden)","label.routing.maxDriveFourDayGap":"Max Fahrtzeit an vier Tagen","label.routing.specialGameDayPenalty":"Bewertungsmultiplikator fr besondere Spieltage","label.routing.travelMultiplierFloor":"Mindestmultiplikator fr Reisezeit","label.routing.revisitMultiplierFloor":"Bewertungsmultiplikator fr Stadt-Wiederbesuche","label.routing.travelMultiplierCeilingFlight":"Bewertungsmultiplikator fr Flge","label.routing.enableRouteCache":"Routen-Cache aktivieren"}}};let ja=!1;async function Nu(){if(ja)return;const n=ns();await we.init({lng:n,fallbackLng:"en",resources:aa,interpolation:{escapeValue:!1}}),ja=!0}function F(n,t){return we.t(n,t)}function Lu(n){return we.changeLanguage(n)}function ct(){return we.language||ns()}function Fu(){return Object.keys(aa)}function Wt(n){return we.on("languageChanged",n),()=>we.off("languageChanged",n)}function ns(){if(typeof navigator>"u")return"en";const n=Array.isArray(navigator.languages)&&navigator.languages.length>0?navigator.languages[0]:navigator.language;return typeof n=="string"&&n.toLowerCase().startsWith("de")?"de":"en"}const is=[{season:2025,stadium:"State Farm Stadium",home_team:["ARI"],location_name:"Glendale, Arizona",city_name:"Arizona",timezone:"America/Phoenix",timezone_label:"MT",stadium_id:"PHO00",location_geo:[-112.263,33.528],googleMapUrl:"https://www.google.com/maps?q=33.528,-112.263"},{season:2025,stadium:"Mercedes-Benz Stadium",home_team:["ATL"],location_name:"Atlanta, Georgia",city_name:"Atlanta",timezone:"America/New_York",timezone_label:"ET",stadium_id:"ATL97",location_geo:[-84.4,33.75555555555555],googleMapUrl:"https://www.google.com/maps?q=33.75555555555555,-84.4"},{season:2025,stadium:"M&T Bank Stadium",home_team:["BAL"],location_name:"Baltimore, Maryland",city_name:"Baltimore",timezone:"America/New_York",timezone_label:"ET",stadium_id:"BAL00",location_geo:[-76.62277777777777,39.278055555555554],googleMapUrl:"https://www.google.com/maps?q=39.278055555555554,-76.62277777777777"},{season:2025,stadium:"Highmark Stadium",home_team:["BUF"],location_name:"Orchard Park, New York",city_name:"Buffalo",timezone:"America/New_York",timezone_label:"ET",stadium_id:"BUF00",location_geo:[-78.787,42.774],googleMapUrl:"https://www.google.com/maps?q=42.774,-78.787"},{season:2025,stadium:"Bank of America Stadium",home_team:["CAR"],location_name:"Charlotte, NC",city_name:"Carolina",timezone:"America/New_York",timezone_label:"ET",stadium_id:"CAR00",location_geo:[-80.85277777777777,35.225833333333334],googleMapUrl:"https://www.google.com/maps?q=35.225833333333334,-80.85277777777777"},{season:2025,stadium:"Soldier Field",home_team:["CHI"],location_name:"Chicago, Illinois",city_name:"Chicago",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"CHI98",location_geo:[-87.6167,41.8623],googleMapUrl:"https://www.google.com/maps?q=41.8623,-87.6167"},{season:2025,stadium:"Paycor Stadium",home_team:["CIN"],location_name:"Cincinnati, Ohio",city_name:"Cincinnati",timezone:"America/New_York",timezone_label:"ET",stadium_id:"CIN00",location_geo:[-84.516,39.095],googleMapUrl:"https://www.google.com/maps?q=39.095,-84.516"},{season:2025,stadium:"Huntington Bank Field",home_team:["CLE"],location_name:"Cleveland, Ohio",city_name:"Cleveland",timezone:"America/New_York",timezone_label:"ET",stadium_id:"CLE00",location_geo:[-81.699444,41.506111],googleMapUrl:"https://www.google.com/maps?q=41.506111,-81.699444"},{season:2025,stadium:"AT&T Stadium",home_team:["DAL"],location_name:"Arlington, Texas",city_name:"Dallas",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"DAL00",location_geo:[-97.09277777777777,32.74777777777778],googleMapUrl:"https://www.google.com/maps?q=32.74777777777778,-97.09277777777777"},{season:2025,stadium:"Empower Field at Mile High",home_team:["DEN"],location_name:"Denver, Colorado",city_name:"Denver",timezone:"America/Denver",timezone_label:"MT",stadium_id:"DEN00",location_geo:[-104.9849,39.7392],googleMapUrl:"https://www.google.com/maps?q=39.7392,-104.9849"},{season:2025,stadium:"Ford Field",home_team:["DET"],location_name:"Detroit, Michigan",city_name:"Detroit",timezone:"America/Detroit",timezone_label:"ET",stadium_id:"DET00",location_geo:[-83.04555555555555,42.34],googleMapUrl:"https://www.google.com/maps?q=42.34,-83.04555555555555"},{season:2025,stadium:"Lambeau Field",home_team:["GB"],location_name:"Green Bay, Wisconsin",city_name:"Green Bay",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"GNB00",location_geo:[-88.06222222222222,44.50138888888889],googleMapUrl:"https://www.google.com/maps?q=44.50138888888889,-88.06222222222222"},{season:2025,stadium:"NRG Stadium",home_team:["HOU"],location_name:"Houston, Texas",city_name:"Houston",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"HOU00",location_geo:[-95.41083333333334,29.684722222222224],googleMapUrl:"https://www.google.com/maps?q=29.684722222222224,-95.41083333333334"},{season:2025,stadium:"Lucas Oil Stadium",home_team:["IND"],location_name:"Indianapolis, Indiana",city_name:"Indianapolis",timezone:"America/Indiana/Indianapolis",timezone_label:"ET",stadium_id:"IND00",location_geo:[-86.16380555555556,39.76005555555555],googleMapUrl:"https://www.google.com/maps?q=39.76005555555555,-86.16380555555556"},{season:2025,stadium:"EverBank Stadium",home_team:["JAX"],location_name:"Jacksonville, Florida",city_name:"Jacksonville",timezone:"America/New_York",timezone_label:"ET",stadium_id:"JAX00",location_geo:[-81.6375,30.323888888888888],googleMapUrl:"https://www.google.com/maps?q=30.323888888888888,-81.6375"},{season:2025,stadium:"GEHA Field at Arrowhead Stadium",home_team:["KC"],location_name:"Kansas City, Missouri",city_name:"Kansas City",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"KAN00",location_geo:[-94.483889,39.048889],googleMapUrl:"https://www.google.com/maps?q=39.048889,-94.483889"},{season:2025,stadium:"SoFi Stadium",home_team:["LAC","LA"],location_name:"Inglewood, CA",city_name:"Los Angeles",timezone:"America/Los_Angeles",timezone_label:"PT",stadium_id:"LAX01",location_geo:[-118.339,33.953],googleMapUrl:"https://www.google.com/maps?q=33.953,-118.339"},{season:2025,stadium:"Allegiant Stadium",home_team:["LV"],location_name:"Paradise, Nevada",city_name:"Las Vegas",timezone:"America/Los_Angeles",timezone_label:"PT",stadium_id:"VEG00",location_geo:[-115.18388888888889,36.09055555555556],googleMapUrl:"https://www.google.com/maps?q=36.09055555555556,-115.18388888888889"},{season:2025,stadium:"Hard Rock Stadium",home_team:["MIA"],location_name:"Coral Gables, Florida",city_name:"Miami",timezone:"America/New_York",timezone_label:"ET",stadium_id:"MIA00",location_geo:[-80.2388888888889,25.958055555555553],googleMapUrl:"https://www.google.com/maps?q=25.958055555555553,-80.2388888888889"},{season:2025,stadium:"U.S. Bank Stadium",home_team:["MIN"],location_name:"Minneapolis, Minnesota",city_name:"Minnesota",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"MIN01",location_geo:[-93.258,44.974],googleMapUrl:"https://www.google.com/maps?q=44.974,-93.258"},{season:2025,stadium:"Gillette Stadium",home_team:["NE"],location_name:"Foxborough, Massachusetts",city_name:"New England",timezone:"America/New_York",timezone_label:"ET",stadium_id:"BOS00",location_geo:[-71.264,42.091],googleMapUrl:"https://www.google.com/maps?q=42.091,-71.264"},{season:2025,stadium:"Caesars Superdome",home_team:["NO"],location_name:"New Orleans, Louisiana",city_name:"New Orleans",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"NOR00",location_geo:[-90.08111111111111,29.950833333333332],googleMapUrl:"https://www.google.com/maps?q=29.950833333333332,-90.08111111111111"},{season:2025,stadium:"MetLife Stadium",home_team:["NYG","NYJ"],location_name:"East Rutherford, New Jersey",city_name:"New York",timezone:"America/New_York",timezone_label:"ET",stadium_id:"NYC01",location_geo:[-74.074444,40.813611],googleMapUrl:"https://www.google.com/maps?q=40.813611,-74.074444"},{season:2025,stadium:"Lincoln Financial Field",home_team:["PHI"],location_name:"Philadelphia, Pennsylvania",city_name:"Philadelphia",timezone:"America/New_York",timezone_label:"ET",stadium_id:"PHI00",location_geo:[-75.1675,39.90083333333333],googleMapUrl:"https://www.google.com/maps?q=39.90083333333333,-75.1675"},{season:2025,stadium:"Acrisure Stadium",home_team:["PIT"],location_name:"Pittsburgh, Pennsylvania",city_name:"Pittsburgh",timezone:"America/New_York",timezone_label:"ET",stadium_id:"PIT00",location_geo:[-80.015833,40.446667],googleMapUrl:"https://www.google.com/maps?q=40.446667,-80.015833"},{season:2025,stadium:"Lumen Field",home_team:["SEA"],location_name:"Seattle, WA",city_name:"Seattle",timezone:"America/Los_Angeles",timezone_label:"PT",stadium_id:"SEA00",location_geo:[-122.3316,47.5952],googleMapUrl:"https://www.google.com/maps?q=47.5952,-122.3316"},{season:2025,stadium:"Levi's Stadium",home_team:["SF"],location_name:"Santa Clara, California",city_name:"San Francisco",timezone:"America/Los_Angeles",timezone_label:"PT",stadium_id:"SFO01",location_geo:[-121.97,37.403],googleMapUrl:"https://www.google.com/maps?q=37.403,-121.97"},{season:2025,stadium:"Raymond James Stadium",home_team:["TB"],location_name:"Tampa Bay, Florida",city_name:"Tampa Bay",timezone:"America/New_York",timezone_label:"ET",stadium_id:"TAM00",location_geo:[-82.50333333333333,27.97583333333333],googleMapUrl:"https://www.google.com/maps?q=27.97583333333333,-82.50333333333333"},{season:2025,stadium:"Nissan Stadium",home_team:["TEN"],location_name:"Nashville, Tennessee",city_name:"Tennessee",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"NAS00",location_geo:[-86.7713888888889,36.16638888888889],googleMapUrl:"https://www.google.com/maps?q=36.16638888888889,-86.7713888888889"},{season:2025,stadium:"Northwest Stadium",home_team:["WAS"],location_name:"Landover, Maryland",city_name:"Washington",timezone:"America/New_York",timezone_label:"ET",stadium_id:"WAS00",location_geo:[-76.864444,38.907778],googleMapUrl:"https://www.google.com/maps?q=38.907778,-76.864444"}],rs=[{season:2025,team:"ARI",team_name:"Arizona Cardinals",team_id:"3800",team_nick:"Cardinals",team_conf:"NFC",team_division:"NFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/7/72/Arizona_Cardinals_logo.svg/179px-Arizona_Cardinals_logo.svg.png",team_wordmark:"/images/wordmarks/ARI.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/ARI.png",stadium_id:"PHO00",stadium:"State Farm Stadium",color_city_dot:"#fff",color_helmet_shell:"#fff",color_city_border:"#97233F",color_helmet_logo:"#97233F",color_helmet_mask:"#8b999d"},{season:2025,team:"ATL",team_name:"Atlanta Falcons",team_id:"200",team_nick:"Falcons",team_conf:"NFC",team_division:"NFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/c/c5/Atlanta_Falcons_logo.svg/192px-Atlanta_Falcons_logo.svg.png",team_wordmark:"/images/wordmarks/ATL.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/ATL.png",stadium_id:"ATL97",stadium:"Mercedes-Benz Stadium",color_city_dot:"#000",color_helmet_shell:"#000",color_city_border:"#a30d2d",color_helmet_logo:"#a30d2d",color_helmet_mask:"#8b999d"},{season:2025,team:"BAL",team_name:"Baltimore Ravens",team_id:"325",team_nick:"Ravens",team_conf:"AFC",team_division:"AFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/1/16/Baltimore_Ravens_logo.svg/193px-Baltimore_Ravens_logo.svg.png",team_wordmark:"/images/wordmarks/BAL.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/BAL.png",stadium_id:"BAL00",stadium:"M&T Bank Stadium",color_city_dot:"#b79a3e",color_helmet_shell:"#241773",color_city_border:"#513481",color_helmet_logo:"#9E7C0C",color_helmet_mask:"#9E7C0C"},{season:2025,team:"BUF",team_name:"Buffalo Bills",team_id:"610",team_nick:"Bills",team_conf:"AFC",team_division:"AFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/7/77/Buffalo_Bills_logo.svg/189px-Buffalo_Bills_logo.svg.png",team_wordmark:"/images/wordmarks/BUF.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/BUF.png",stadium_id:"BUF00",stadium:"Highmark Stadium",color_city_dot:"#00338D",color_helmet_shell:"#C60C30",color_city_border:"#C60C30",color_helmet_logo:"#00338D",color_helmet_mask:"#eee"},{season:2025,team:"CAR",team_name:"Carolina Panthers",team_id:"750",team_nick:"Panthers",team_conf:"NFC",team_division:"NFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/1/1c/Carolina_Panthers_logo.svg/100px-Carolina_Panthers_logo.svg.png",team_wordmark:"/images/wordmarks/CAR.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/CAR.png",stadium_id:"CAR00",stadium:"Bank of America Stadium",color_city_dot:"#0085CA",color_helmet_shell:"#0085CA",color_city_border:"#000",color_helmet_logo:"#000",color_helmet_mask:"#8b999d"},{season:2025,team:"CHI",team_name:"Chicago Bears",team_id:"810",team_nick:"Bears",team_conf:"NFC",team_division:"NFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Chicago_Bears_logo.svg/100px-Chicago_Bears_logo.svg.png",team_wordmark:"/images/wordmarks/CHI.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/CHI.png",stadium_id:"CHI98",stadium:"Soldier Field",color_city_dot:"#E64100",color_helmet_shell:"#0B162A",color_city_border:"#0B162A",color_helmet_logo:"#E64100",color_helmet_mask:"#0B162A"},{season:2025,team:"CIN",team_name:"Cincinnati Bengals",team_id:"920",team_nick:"Bengals",team_conf:"AFC",team_division:"AFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/81/Cincinnati_Bengals_logo.svg/100px-Cincinnati_Bengals_logo.svg.png",team_wordmark:"/images/wordmarks/CIN.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/CIN.png",stadium_id:"CIN00",stadium:"Paycor Stadium",color_city_dot:"#000",color_helmet_shell:"#FB4F14",color_city_border:"#FB4F14",color_helmet_logo:"#000",color_helmet_mask:"#000"},{season:2025,team:"CLE",team_name:"Cleveland Browns",team_id:"1050",team_nick:"Browns",team_conf:"AFC",team_division:"AFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/d/d9/Cleveland_Browns_logo.svg/100px-Cleveland_Browns_logo.svg.png",team_wordmark:"/images/wordmarks/CLE.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/CLE.png",stadium_id:"CLE00",stadium:"Huntington Bank Field",color_city_dot:"#FF3C00",color_helmet_shell:"#FF3C00",color_city_border:"#FF3C00",color_helmet_logo:"#FF3C00",color_helmet_mask:"#a5acaf"},{season:2025,team:"DAL",team_name:"Dallas Cowboys",team_id:"1200",team_nick:"Cowboys",team_conf:"NFC",team_division:"NFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Dallas_Cowboys.svg/100px-Dallas_Cowboys.svg.png",team_wordmark:"/images/wordmarks/DAL.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/DAL.png",stadium_id:"DAL00",stadium:"AT&T Stadium",color_city_dot:"#002244",color_helmet_shell:"#acc0c6",color_city_border:"#acc0c6",color_helmet_logo:"#002244",color_helmet_mask:"#8b999d"},{season:2025,team:"DEN",team_name:"Denver Broncos",team_id:"1400",team_nick:"Broncos",team_conf:"AFC",team_division:"AFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/4/44/Denver_Broncos_logo.svg/100px-Denver_Broncos_logo.svg.png",team_wordmark:"/images/wordmarks/DEN.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/DEN.png",stadium_id:"DEN00",stadium:"Empower Field at Mile High",color_city_dot:"#f75",color_helmet_shell:"#002244",color_city_border:"#002244",color_helmet_logo:"#FB4F14",color_helmet_mask:"#00234c"},{season:2025,team:"DET",team_name:"Detroit Lions",team_id:"1540",team_nick:"Lions",team_conf:"NFC",team_division:"NFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/7/71/Detroit_Lions_logo.svg/100px-Detroit_Lions_logo.svg.png",team_wordmark:"/images/wordmarks/DET.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/DET.png",stadium_id:"DET00",stadium:"Ford Field",color_city_dot:"#B0B7BC",color_helmet_shell:"#0076B6",color_city_border:"#0076B6",color_helmet_logo:"#B0B7BC",color_helmet_mask:"#B0B7BC"},{season:2025,team:"GB",team_name:"Green Bay Packers",team_id:"1800",team_nick:"Packers",team_conf:"NFC",team_division:"NFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Green_Bay_Packers_logo.svg/100px-Green_Bay_Packers_logo.svg.png",team_wordmark:"/images/wordmarks/GB.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/GB.png",stadium_id:"GNB00",stadium:"Lambeau Field",color_city_dot:"#FFB612",color_helmet_shell:"#FFB612",color_city_border:"#1c2d25",color_helmet_logo:"#1c2d25",color_helmet_mask:"#1c2d25"},{season:2025,team:"HOU",team_name:"Houston Texans",team_id:"2120",team_nick:"Texans",team_conf:"AFC",team_division:"AFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/2/28/Houston_Texans_logo.svg/100px-Houston_Texans_logo.svg.png",team_wordmark:"/images/wordmarks/HOU.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/HOU.png",stadium_id:"HOU00",stadium:"NRG Stadium",color_city_dot:"#A71930",color_helmet_shell:"#03202F",color_city_border:"#03202F",color_helmet_logo:"#A71930",color_helmet_mask:"#00071c"},{season:2025,team:"IND",team_name:"Indianapolis Colts",team_id:"2200",team_nick:"Colts",team_conf:"AFC",team_division:"AFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Indianapolis_Colts_logo.svg/100px-Indianapolis_Colts_logo.svg.png",team_wordmark:"/images/wordmarks/IND.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/IND.png",stadium_id:"IND00",stadium:"Lucas Oil Stadium",color_city_dot:"#fff",color_helmet_shell:"#fff",color_city_border:"#002C5F",color_helmet_logo:"#002C5F",color_helmet_mask:"#8b999d"},{season:2025,team:"JAX",team_name:"Jacksonville Jaguars",team_id:"2250",team_nick:"Jaguars",team_conf:"AFC",team_division:"AFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/7/74/Jacksonville_Jaguars_logo.svg/100px-Jacksonville_Jaguars_logo.svg.png",team_wordmark:"/images/wordmarks/JAX.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/JAX.png",stadium_id:"JAX00",stadium:"EverBank Stadium",color_city_dot:"#000",color_helmet_shell:"#006778",color_city_border:"#006778",color_helmet_logo:"#9f792c",color_helmet_mask:"#9f792c"},{season:2025,team:"KC",team_name:"Kansas City Chiefs",team_id:"2310",team_nick:"Chiefs",team_conf:"AFC",team_division:"AFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/e/e1/Kansas_City_Chiefs_logo.svg/100px-Kansas_City_Chiefs_logo.svg.png",team_wordmark:"/images/wordmarks/KC.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/KC.png",stadium_id:"KAN00",stadium:"GEHA Field at Arrowhead Stadium",color_city_dot:"#fff",color_helmet_shell:"#E31837",color_city_border:"#E31837",color_helmet_logo:"#fff",color_helmet_mask:"#FFB612"},{season:2025,team:"LAC",team_name:"Los Angeles Chargers",team_id:"4400",team_nick:"Chargers",team_conf:"AFC",team_division:"AFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/7/72/NFL_Chargers_logo.svg/100px-NFL_Chargers_logo.svg.png",team_wordmark:"/images/wordmarks/LAC.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/LAC.png",stadium_id:"LAX01",stadium:"SoFi Stadium",color_city_dot:"#fff",color_helmet_shell:"#007BC7",color_city_border:"#007BC7",color_helmet_logo:"#ffc20e",color_helmet_mask:"#ffb612"},{season:2025,team:"LA",team_name:"Los Angeles Rams",team_id:"2510",team_nick:"Rams",team_conf:"NFC",team_division:"NFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/8/8a/Los_Angeles_Rams_logo.svg/100px-Los_Angeles_Rams_logo.svg.png",team_wordmark:"/images/wordmarks/LA.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/LA.png",stadium_id:"LAX01",stadium:"SoFi Stadium",color_city_dot:"#FFD100",color_helmet_shell:"#003594",color_city_border:"#003594",color_helmet_logo:"#FFD100",color_helmet_mask:"#002467"},{season:2025,team:"LV",team_name:"Las Vegas Raiders",team_id:"2520",team_nick:"Raiders",team_conf:"AFC",team_division:"AFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/4/48/Las_Vegas_Raiders_logo.svg/100px-Las_Vegas_Raiders_logo.svg.png",team_wordmark:"/images/wordmarks/LV.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/LV.png",stadium_id:"VEG00",stadium:"Allegiant Stadium",color_city_dot:"#A5ACAF",color_helmet_shell:"#000",color_city_border:"#000",color_helmet_logo:"#A5ACAF",color_helmet_mask:"#a6aeb0"},{season:2025,team:"MIA",team_name:"Miami Dolphins",team_id:"2700",team_nick:"Dolphins",team_conf:"AFC",team_division:"AFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/3/37/Miami_Dolphins_logo.svg/100px-Miami_Dolphins_logo.svg.png",team_wordmark:"/images/wordmarks/MIA.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/MIA.png",stadium_id:"MIA00",stadium:"Hard Rock Stadium",color_city_dot:"#F58220",color_helmet_shell:"#008E97",color_city_border:"#008E97",color_helmet_logo:"#fff",color_helmet_mask:"#F58220"},{season:2025,team:"MIN",team_name:"Minnesota Vikings",team_id:"3000",team_nick:"Vikings",team_conf:"NFC",team_division:"NFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/4/48/Minnesota_Vikings_logo.svg/98px-Minnesota_Vikings_logo.svg.png",team_wordmark:"/images/wordmarks/MIN.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/MIN.png",stadium_id:"MIN01",stadium:"U.S. Bank Stadium",color_city_dot:"#fff",color_helmet_shell:"#4F2683",color_city_border:"#4F2683",color_helmet_logo:"#fff",color_helmet_mask:"#FFC62F"},{season:2025,team:"NE",team_name:"New England Patriots",team_id:"3200",team_nick:"Patriots",team_conf:"AFC",team_division:"AFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/b/b9/New_England_Patriots_logo.svg/100px-New_England_Patriots_logo.svg.png",team_wordmark:"/images/wordmarks/NE.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/NE.png",stadium_id:"BOS00",stadium:"Gillette Stadium",color_city_dot:"#b0b7bc",color_helmet_shell:"#b0b7bc",color_city_border:"#002244",color_helmet_logo:"#002244",color_helmet_mask:"#C60C30"},{season:2025,team:"NO",team_name:"New Orleans Saints",team_id:"3300",team_nick:"Saints",team_conf:"NFC",team_division:"NFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/New_Orleans_Saints_logo.svg/98px-New_Orleans_Saints_logo.svg.png",team_wordmark:"/images/wordmarks/NO.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/NO.png",stadium_id:"NOR00",stadium:"Caesars Superdome",color_city_dot:"#000",color_helmet_shell:"#9f8958",color_city_border:"#D3BC8D",color_helmet_logo:"#000",color_helmet_mask:"#000"},{season:2025,team:"NYG",team_name:"New York Giants",team_id:"3410",team_nick:"Giants",team_conf:"NFC",team_division:"NFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/New_York_Giants_logo.svg/100px-New_York_Giants_logo.svg.png",team_wordmark:"/images/wordmarks/NYG.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/NYG.png",stadium_id:"NYC01",stadium:"MetLife Stadium",color_city_dot:"#A71930",color_helmet_shell:"#0B2265",color_city_border:"#0B2265",color_helmet_logo:"#fff",color_helmet_mask:"#A71930"},{season:2025,team:"NYJ",team_name:"New York Jets",team_id:"3430",team_nick:"Jets",team_conf:"AFC",team_division:"AFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/6/6b/New_York_Jets_logo.svg/100px-New_York_Jets_logo.svg.png",team_wordmark:"/images/wordmarks/NYJ.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/NYJ.png",stadium_id:"NYC01",stadium:"MetLife Stadium",color_city_dot:"#fff",color_helmet_shell:"#003F2D",color_city_border:"#003F2D",color_helmet_logo:"#fff",color_helmet_mask:"#006347"},{season:2025,team:"PHI",team_name:"Philadelphia Eagles",team_id:"3700",team_nick:"Eagles",team_conf:"NFC",team_division:"NFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/8/8e/Philadelphia_Eagles_logo.svg/100px-Philadelphia_Eagles_logo.svg.png",team_wordmark:"/images/wordmarks/PHI.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/PHI.png",stadium_id:"PHI00",stadium:"Lincoln Financial Field",color_city_dot:"#004C54",color_helmet_shell:"#004C54",color_city_border:"#b0b7bc",color_helmet_logo:"#b0b7bc",color_helmet_mask:"#000"},{season:2025,team:"PIT",team_name:"Pittsburgh Steelers",team_id:"3900",team_nick:"Steelers",team_conf:"AFC",team_division:"AFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Pittsburgh_Steelers_logo.svg/100px-Pittsburgh_Steelers_logo.svg.png",team_wordmark:"/images/wordmarks/PIT.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/PIT.png",stadium_id:"PIT00",stadium:"Acrisure Stadium",color_city_dot:"#FFB612",color_helmet_shell:"#000000",color_city_border:"#000000",color_helmet_logo:"#fff",color_helmet_mask:"#FFB612"},{season:2025,team:"SEA",team_name:"Seattle Seahawks",team_id:"4600",team_nick:"Seahawks",team_conf:"NFC",team_division:"NFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/8/8e/Seattle_Seahawks_logo.svg/100px-Seattle_Seahawks_logo.svg.png",team_wordmark:"/images/wordmarks/SEA.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/SEA.png",stadium_id:"SEA00",stadium:"Lumen Field",color_city_dot:"#002244",color_helmet_shell:"#002244",color_city_border:"#69be28",color_helmet_logo:"#69be28",color_helmet_mask:"#a5acaf"},{season:2025,team:"SF",team_name:"San Francisco 49ers",team_id:"4500",team_nick:"49ers",team_conf:"NFC",team_division:"NFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/San_Francisco_49ers_logo.svg/100px-San_Francisco_49ers_logo.svg.png",team_wordmark:"/images/wordmarks/SF.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/SF.png",stadium_id:"SFO01",stadium:"Levi's Stadium",color_city_dot:"#AA0000",color_helmet_shell:"#a18a54",color_city_border:"#a18a54",color_helmet_logo:"#AA0000",color_helmet_mask:"#AA0000"},{season:2025,team:"TB",team_name:"Tampa Bay Buccaneers",team_id:"4900",team_nick:"Buccaneers",team_conf:"NFC",team_division:"NFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/a/a2/Tampa_Bay_Buccaneers_logo.svg/100px-Tampa_Bay_Buccaneers_logo.svg.png",team_wordmark:"/images/wordmarks/TB.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/TB.png",stadium_id:"TAM00",stadium:"Raymond James Stadium",color_city_dot:"#A71930",color_helmet_shell:"#50483d",color_city_border:"#6c5d49",color_helmet_logo:"#A71930",color_helmet_mask:"#000"},{season:2025,team:"TEN",team_name:"Tennessee Titans",team_id:"2100",team_nick:"Titans",team_conf:"AFC",team_division:"AFC South",team_logo_wikipedia:"https://github.com/nflverse/nflverse-pbp/raw/master/titans.png",team_wordmark:"/images/wordmarks/TEN.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/TEN.png",stadium_id:"NAS00",stadium:"Nissan Stadium",color_city_dot:"#002244",color_helmet_shell:"#4B92DB",color_city_border:"#4B92DB",color_helmet_logo:"#002244",color_helmet_mask:"#c60c30"},{season:2025,team:"WAS",team_name:"Washington Commanders",team_id:"5110",team_nick:"Commanders",team_conf:"NFC",team_division:"NFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Washington_commanders.svg/100px-Washington_commanders.svg.png",team_wordmark:"/images/wordmarks/WAS.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/WAS.png",stadium_id:"WAS00",stadium:"Northwest Stadium",color_city_dot:"#FFB612",color_helmet_shell:"#5A1414",color_city_border:"#6c1010",color_helmet_logo:"#FFB612",color_helmet_mask:"#FFB612"}],oa="America/New_York",as=/^\d{4}-\d{2}-\d{2}$/,Mu=24*60*60*1e3;function Bi(n){return Number.isFinite(n)?Pr(new Date(n)):""}function St(n){if(!n)return null;if(n instanceof Date)return n.getTime();if(typeof n=="string"&&as.test(n)){const e=ss(n);return Number.isFinite(e)?e:null}const t=Date.parse(n);return Number.isFinite(t)?t:null}function pi(n,t,e){if(!Number.isFinite(n))return n;const i=Number.isFinite(t)?t:n,r=Number.isFinite(e)?e:n;return Math.min(Math.max(n,i),r)}const Va={en:"en-US",de:"de-DE"},Ru={weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"},Pu={weekday:"short",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"};function Iu(n){return typeof n!="string"?"en":n.toLowerCase().startsWith("de")?"de":"en"}function Ou(n,t,e={}){if(!(n instanceof Date)||Number.isNaN(n.getTime()))return"";const i=Iu(t),r=i==="de"?Va.de:Va.en,o={...i==="de"?Pu:Ru};e.timeZone&&typeof e.timeZone=="string"&&(o.timeZone=e.timeZone);try{return new Intl.DateTimeFormat(r,o).format(n)}catch{return""}}function os(n,t){const e=(n==null?void 0:n.gamedateTimestamp)??(n==null?void 0:n.gamedate);if(!e)return F("label.unknown");const i=new Date(e);if(Number.isNaN(i.getTime()))return String(e);const r=n!=null&&n.stadium_id?t.get(n.stadium_id):null,a=r==null?void 0:r.timezone,o=r==null?void 0:r.timezone_label,s=ct();let l=Ou(i,s,{timeZone:a});return l||(l=i.toISOString()),o?`${l} ${o}`:l}function Pr(n,t=oa){return new Intl.DateTimeFormat("en-CA",{timeZone:t,year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(n))}function $u(n,t,e,i=oa){var d;const r=new Date(Date.UTC(n,t-1,e,12,0,0)),s=(((d=new Intl.DateTimeFormat("en-US",{timeZone:i,timeZoneName:"shortOffset",hour:"numeric"}).formatToParts(r).find(h=>h.type==="timeZoneName"))==null?void 0:d.value)??"GMT").match(/GMT([+-])(\d{1,2})(?::?(\d{2}))?/i);if(!s)return 0;const l=s[1]==="-"?-1:1,u=Number(s[2]),c=s[3]?Number(s[3]):0;return l*(u*60+c)}function ss(n,t=oa){if(typeof n!="string"||!/^\d{4}-\d{2}-\d{2}$/.test(n))return null;const[e,i,r]=n.split("-"),a=Number(e),o=Number(i),s=Number(r);if(!Number.isFinite(a)||!Number.isFinite(o)||!Number.isFinite(s))return null;const l=$u(a,o,s,t);return Date.UTC(a,o-1,s,0,0,0)-l*60*1e3}function Gu(n,{endOfDay:t=!1}={}){if(n==null)return null;if(typeof n=="number"&&Number.isFinite(n))return n;if(n instanceof Date)return n.getTime();if(typeof n=="string"&&as.test(n)){const i=ss(n);return Number.isFinite(i)?t?i+Mu-1:i:null}const e=Date.parse(n);return Number.isFinite(e)?e:null}const zu="data/pro-tour-schedule.js";async function sa(){var a;if(!((a=globalThis==null?void 0:globalThis.location)!=null&&a.origin))throw new Error("Cannot resolve schedule URL without a browser location.");const n=Bu("/pro-tour/"),e=await import(new URL(zu,new URL(n,globalThis.location.origin)).href),i=e==null?void 0:e.proTourSchedule;if(!i)throw new Error("Schedule module did not provide proTourSchedule.");const r=St(e==null?void 0:e.proTourScheduleDate);return{schedule:i,scheduleDate:r}}function Bu(n){const t=n.startsWith("/")?n:`/${n}`;return t.endsWith("/")?t:`${t}/`}function bi(n){return Number.isFinite(n)?Pr(n):Pr(Date.now())}function Uu(n=[]){let t=1/0,e=-1/0;if((n??[]).forEach(i=>{const r=typeof(i==null?void 0:i.gamedate)=="string"?i.gamedate:i==null?void 0:i.gameday,a=Date.parse(r);Number.isFinite(a)&&(a<t&&(t=a),a>e&&(e=a))}),!Number.isFinite(t)||!Number.isFinite(e)){const i=Date.now();return{startMs:i,endMs:i,startDate:bi(i),endDate:bi(i)}}return{startMs:t,endMs:e,startDate:bi(t),endDate:bi(e)}}async function Hu(n){const{schedule:t,scheduleDate:e}=await qu(n),i=Wu(),r=ju(),a=Vu(t),o=Uu(t);return{stadiumLookup:i,teamLookup:r,scheduleLookup:a,scheduleRange:o,scheduleDate:e}}function Wu(){const n=new Map;return(is??[]).forEach(t=>{t!=null&&t.stadium_id&&n.set(t.stadium_id,t)}),n}function ju(){const n=new Map;return(rs??[]).forEach(t=>{t!=null&&t.team&&n.set(t.team.toUpperCase(),t)}),n}function Vu(n=[]){const t=new Map;return(n??[]).forEach(e=>{e!=null&&e.game_id&&!t.has(e.game_id)&&t.set(e.game_id,e)}),t}function Ku(n){const t=typeof n=="string"?n.toUpperCase():"";return t?(is??[]).find(e=>Array.isArray(e==null?void 0:e.home_team)?e.home_team.some(i=>String(i).toUpperCase()===t):!1)??null:null}function Yu(n,t){const e=t.get(String(n).toUpperCase());return(e==null?void 0:e.team_name)??n}async function qu(n){return Array.isArray(n)?{schedule:n,scheduleDate:null}:sa()}const Me={dateStart:null,dateEnd:null,requiredStartDayOfWeek:null,maxTourLengthDays:14,allowFlights:!1,expertMode:!1,maxDriveOneDayGap:5,maxDriveTwoDayGap:10,maxDriveThreeDayGap:15,maxDriveFourDayGap:18,maxRoutesToFind:20,oneDayGap:12,twoDayGap:36,threeDayGap:12+24*2,fourDayGap:12+24*3,minTimeToNextGameHoursFlight:36,maxTimeToNextGameHours:8*24+16,specialGameDayPenalty:.75,revisitMultiplierFloor:.1,travelMultiplierFloor:.1,travelMultiplierCeilingFlight:.2,maxSearchMinutesPerStartGame:1,estimatedGamesPerWeek:2.4,beamWidthPerStartGame:20,cacheBucketHours:36,enableRouteCache:!0,shortWindowDays:22},ls={ATL97:1,BAL00:1,BOS00:1,BUF00:1,CAR00:1,CHI98:1,CIN00:1,CLE00:1,DAL00:1,DEN00:1,DET00:1,GNB00:1,HOU00:1,IND00:1,JAX00:1,KAN00:1,LAX01:1,MIA00:1,MIN01:1,NAS00:1,NOR00:1,NYC01:1,PHI00:1,PHO00:1,PIT00:1,SEA00:1,SFO01:1,TAM00:1,VEG00:1,WAS00:1},us={ARI:1,ATL:1,BAL:1,BUF:1,CAR:1,CHI:1,CIN:1,CLE:1,DAL:1,DEN:1,DET:1,GB:1,HOU:1,IND:1,JAX:1,KC:1,LA:1,LAC:1,LV:1,MIA:1,MIN:1,NE:1,NO:1,NYG:1,NYJ:1,PHI:1,PIT:1,SEA:1,SF:1,TB:1,TEN:1,WAS:1},Mt={restrictions:"pro-tour-restrictions",teamWeights:"pro-tour-team-weights",stadiumWeights:"pro-tour-stadium-weights",favorites:"pro-tour-favorites"},gn=[{value:"Any day",labelKey:"option.startDay.any"},{value:"Sunday",labelKey:"option.startDay.sunday"},{value:"Monday",labelKey:"option.startDay.monday"},{value:"Thursday",labelKey:"option.startDay.thursday"}];let bt=null,cs=null;function Zu(n){cs=n;const t=nc(Me,n);return bt={teamWeights:Ka(us,Mt.teamWeights),stadiumWeights:Ka(ls,Mt.stadiumWeights),restrictions:t,isSearching:!1,isExpertMode:!!(t!=null&&t.expertMode)},bt}function dt(){if(!bt)throw new Error("Application state is not initialized.");return bt}function Ui(){return dt().teamWeights}function Ju(n){return dt().teamWeights=zt(n),bt.teamWeights}function Hi(){return dt().stadiumWeights}function Xu(n){return dt().stadiumWeights=zt(n),bt.stadiumWeights}function Ge(){return dt().restrictions}function Qu(n){const t=cs;if(!t)return dt().restrictions=n?JSON.parse(JSON.stringify(n)):{},bt.restrictions;const e=n?JSON.parse(JSON.stringify(n)):Me;return dt().restrictions=la(e,t),bt.restrictions}function ds(){return!!dt().isSearching}function ec(n){return dt().isSearching=!!n,bt.isSearching}function Qn(){return!!dt().isExpertMode}function tc(n){return dt().isExpertMode=!!n,bt.isExpertMode}function zt(n={}){return Object.fromEntries(Object.entries(n).map(([t,e])=>[t,Number.isFinite(Number(e))?Number(e):1]))}function nc(n={},t){const e=ic(),i=e&&typeof e=="object"?{...n,...e}:n,r=la(i,t);return e&&fn(r),r}function la(n,t){const e=JSON.parse(JSON.stringify(n??{})),i=St(e==null?void 0:e.dateStart),r=St(e==null?void 0:e.dateEnd);return e.dateStart=Bi(Number.isFinite(i)?i:t.startMs),e.dateEnd=Bi(Number.isFinite(r)?r:t.endMs),(!Number.isFinite(e.shortWindowDays)||e.shortWindowDays<=0)&&(e.shortWindowDays=Me.shortWindowDays),typeof e.expertMode=="string"?e.expertMode=e.expertMode.toLowerCase()==="true":e.expertMode=!!e.expertMode,e}function Ir(n,t,e,i,r){const a=r.startMs,o=r.endMs;let s=St(e),l=St(i);if(n==="dateStart")s=pi(St(t)??s??a,a,o),(!Number.isFinite(l)||s>l)&&(l=s);else{const u=St(t);Number.isFinite(u)?l=u+24*60*60*1e3-1:l=pi(l??o,a,o),(!Number.isFinite(s)||l<s)&&(s=l)}return s=pi(Number.isFinite(s)?s:a,a,o),l=pi(Number.isFinite(l)?l:o,a,o),{dateStart:Bi(s),dateEnd:Bi(l)}}function fn(n){gs(Mt.restrictions,n)}function hs({label:n=F("button.restoreDefaults"),getDefaults:t,applyDefaults:e}){const i=document.createElement("button");return i.type="button",i.textContent=n,i.classList.add("btn","btn-text","btn-muted","btn-restore"),i.addEventListener("click",()=>{const r=t==null?void 0:t();r!==void 0&&(e==null||e(r))}),i}function Ka(n={},t){const e=fs(t),i=e&&typeof e=="object"?{...n,...e}:n,r=zt(i);return e&&gs(t,r),r}function ic(){const n=fs(Mt.restrictions);return n&&typeof n=="object"?n:null}function fs(n){if(typeof window>"u"||!window.localStorage)return null;try{const t=window.localStorage.getItem(n);return t?JSON.parse(t):null}catch{return null}}function gs(n,t){if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(n,JSON.stringify(t))}catch{}}var cr=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],mn={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var t=new Date(n.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},ei={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var t=n%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Be=function(n,t){return t===void 0&&(t=2),("000"+n).slice(t*-1)},Ze=function(n){return n===!0?1:0};function Ya(n,t){var e;return function(){var i=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return n.apply(i,r)},t)}}var dr=function(n){return n instanceof Array?n:[n]};function $e(n,t,e){if(e===!0)return n.classList.add(t);n.classList.remove(t)}function se(n,t,e){var i=window.document.createElement(n);return t=t||"",e=e||"",i.className=t,e!==void 0&&(i.textContent=e),i}function vi(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function ms(n,t){if(t(n))return n;if(n.parentNode)return ms(n.parentNode,t)}function yi(n,t){var e=se("div","numInputWrapper"),i=se("input","numInput "+n),r=se("span","arrowUp"),a=se("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?i.type="number":(i.type="text",i.pattern="\\d*"),t!==void 0)for(var o in t)i.setAttribute(o,t[o]);return e.appendChild(i),e.appendChild(r),e.appendChild(a),e}function Ue(n){try{if(typeof n.composedPath=="function"){var t=n.composedPath();return t[0]}return n.target}catch{return n.target}}var hr=function(){},Wi=function(n,t,e){return e.months[t?"shorthand":"longhand"][n]},rc={D:hr,F:function(n,t,e){n.setMonth(e.months.longhand.indexOf(t))},G:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},H:function(n,t){n.setHours(parseFloat(t))},J:function(n,t){n.setDate(parseFloat(t))},K:function(n,t,e){n.setHours(n.getHours()%12+12*Ze(new RegExp(e.amPM[1],"i").test(t)))},M:function(n,t,e){n.setMonth(e.months.shorthand.indexOf(t))},S:function(n,t){n.setSeconds(parseFloat(t))},U:function(n,t){return new Date(parseFloat(t)*1e3)},W:function(n,t,e){var i=parseInt(t),r=new Date(n.getFullYear(),0,2+(i-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(n,t){n.setFullYear(parseFloat(t))},Z:function(n,t){return new Date(t)},d:function(n,t){n.setDate(parseFloat(t))},h:function(n,t){n.setHours((n.getHours()>=12?12:0)+parseFloat(t))},i:function(n,t){n.setMinutes(parseFloat(t))},j:function(n,t){n.setDate(parseFloat(t))},l:hr,m:function(n,t){n.setMonth(parseFloat(t)-1)},n:function(n,t){n.setMonth(parseFloat(t)-1)},s:function(n,t){n.setSeconds(parseFloat(t))},u:function(n,t){return new Date(parseFloat(t))},w:hr,y:function(n,t){n.setFullYear(2e3+parseFloat(t))}},Ot={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Wn={Z:function(n){return n.toISOString()},D:function(n,t,e){return t.weekdays.shorthand[Wn.w(n,t,e)]},F:function(n,t,e){return Wi(Wn.n(n,t,e)-1,!1,t)},G:function(n,t,e){return Be(Wn.h(n,t,e))},H:function(n){return Be(n.getHours())},J:function(n,t){return t.ordinal!==void 0?n.getDate()+t.ordinal(n.getDate()):n.getDate()},K:function(n,t){return t.amPM[Ze(n.getHours()>11)]},M:function(n,t){return Wi(n.getMonth(),!0,t)},S:function(n){return Be(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,t,e){return e.getWeek(n)},Y:function(n){return Be(n.getFullYear(),4)},d:function(n){return Be(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return Be(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,t){return t.weekdays.longhand[n.getDay()]},m:function(n){return Be(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},ps=function(n){var t=n.config,e=t===void 0?mn:t,i=n.l10n,r=i===void 0?ei:i,a=n.isMobile,o=a===void 0?!1:a;return function(s,l,u){var c=u||r;return e.formatDate!==void 0&&!o?e.formatDate(s,l,c):l.split("").map(function(d,h,f){return Wn[d]&&f[h-1]!=="\\"?Wn[d](s,c,e):d!=="\\"?d:""}).join("")}},Or=function(n){var t=n.config,e=t===void 0?mn:t,i=n.l10n,r=i===void 0?ei:i;return function(a,o,s,l){if(!(a!==0&&!a)){var u=l||r,c,d=a;if(a instanceof Date)c=new Date(a.getTime());else if(typeof a!="string"&&a.toFixed!==void 0)c=new Date(a);else if(typeof a=="string"){var h=o||(e||mn).dateFormat,f=String(a).trim();if(f==="today")c=new Date,s=!0;else if(e&&e.parseDate)c=e.parseDate(a,h);else if(/Z$/.test(f)||/GMT$/.test(f))c=new Date(a);else{for(var p=void 0,b=[],y=0,E=0,_="";y<h.length;y++){var v=h[y],w=v==="\\",N=h[y-1]==="\\"||w;if(Ot[v]&&!N){_+=Ot[v];var k=new RegExp(_).exec(a);k&&(p=!0)&&b[v!=="Y"?"push":"unshift"]({fn:rc[v],val:k[++E]})}else w||(_+=".")}c=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),b.forEach(function(x){var T=x.fn,M=x.val;return c=T(c,M,u)||c}),c=p?c:void 0}}if(!(c instanceof Date&&!isNaN(c.getTime()))){e.errorHandler(new Error("Invalid date provided: "+d));return}return s===!0&&c.setHours(0,0,0,0),c}}};function He(n,t,e){return e===void 0&&(e=!0),e!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):n.getTime()-t.getTime()}var ac=function(n,t,e){return n>Math.min(t,e)&&n<Math.max(t,e)},fr=function(n,t,e){return n*3600+t*60+e},oc=function(n){var t=Math.floor(n/3600),e=(n-t*3600)/60;return[t,e,n-t*3600-e*60]},sc={DAY:864e5};function gr(n){var t=n.defaultHour,e=n.defaultMinute,i=n.defaultSeconds;if(n.minDate!==void 0){var r=n.minDate.getHours(),a=n.minDate.getMinutes(),o=n.minDate.getSeconds();t<r&&(t=r),t===r&&e<a&&(e=a),t===r&&e===a&&i<o&&(i=n.minDate.getSeconds())}if(n.maxDate!==void 0){var s=n.maxDate.getHours(),l=n.maxDate.getMinutes();t=Math.min(t,s),t===s&&(e=Math.min(l,e)),t===s&&e===l&&(i=n.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:i}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var i=function(s){s&&Object.keys(s).forEach(function(l){return n[l]=s[l]})},r=0,a=t;r<a.length;r++){var o=a[r];i(o)}return n});var Pe=function(){return Pe=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Pe.apply(this,arguments)},qa=function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var i=Array(n),r=0,t=0;t<e;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,r++)i[r]=a[o];return i},lc=300;function uc(n,t){var e={config:Pe(Pe({},mn),ve.defaultConfig),l10n:ei};e.parseDate=Or({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=b,e._setHoursFromDate=h,e._positionCalendar=yt,e.changeMonth=re,e.changeYear=Se,e.clear=Le,e.close=de,e.onMouseOver=ht,e._createElement=se,e.createDay=k,e.destroy=_e,e.isEnabled=Ce,e.jumpToDate=_,e.updateValue=it,e.open=oi,e.redraw=Tn,e.set=Yt,e.setDate=ui,e.toggle=di;function i(){e.utils={getDaysInMonth:function(g,m){return g===void 0&&(g=e.currentMonth),m===void 0&&(m=e.currentYear),g===1&&(m%4===0&&m%100!==0||m%400===0)?29:e.l10n.daysInMonth[g]}}}function r(){e.element=e.input=n,e.isOpen=!1,si(),En(),Tt(),ir(),i(),e.isMobile||N(),E(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&h(e.config.noCalendar?e.latestSelectedDateObj:void 0),it(!1)),s();var g=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&g&&yt(),fe("onReady")}function a(){var g;return((g=e.calendarContainer)===null||g===void 0?void 0:g.getRootNode()).activeElement||document.activeElement}function o(g){return g.bind(e)}function s(){var g=e.config;g.weekNumbers===!1&&g.showMonths===1||g.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var m=(e.days.offsetWidth+1)*g.showMonths;e.daysContainer.style.width=m+"px",e.calendarContainer.style.width=m+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function l(g){if(e.selectedDates.length===0){var m=e.config.minDate===void 0||He(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),S=gr(e.config);m.setHours(S.hours,S.minutes,S.seconds,m.getMilliseconds()),e.selectedDates=[m],e.latestSelectedDateObj=m}g!==void 0&&g.type!=="blur"&&Nn(g);var C=e._input.value;d(),it(),e._input.value!==C&&e._debouncedChange()}function u(g,m){return g%12+12*Ze(m===e.l10n.amPM[1])}function c(g){switch(g%24){case 0:case 12:return 12;default:return g%12}}function d(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var g=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,m=(parseInt(e.minuteElement.value,10)||0)%60,S=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(g=u(g,e.amPM.textContent));var C=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&He(e.latestSelectedDateObj,e.config.minDate,!0)===0,A=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&He(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var D=fr(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),G=fr(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),$=fr(g,m,S);if($>G&&$<D){var U=oc(D);g=U[0],m=U[1],S=U[2]}}else{if(A){var I=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;g=Math.min(g,I.getHours()),g===I.getHours()&&(m=Math.min(m,I.getMinutes())),m===I.getMinutes()&&(S=Math.min(S,I.getSeconds()))}if(C){var K=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;g=Math.max(g,K.getHours()),g===K.getHours()&&m<K.getMinutes()&&(m=K.getMinutes()),m===K.getMinutes()&&(S=Math.max(S,K.getSeconds()))}}f(g,m,S)}}function h(g){var m=g||e.latestSelectedDateObj;m&&m instanceof Date&&f(m.getHours(),m.getMinutes(),m.getSeconds())}function f(g,m,S){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(g%24,m,S||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=Be(e.config.time_24hr?g:(12+g)%12+12*Ze(g%12===0)),e.minuteElement.value=Be(m),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[Ze(g>=12)]),e.secondElement!==void 0&&(e.secondElement.value=Be(S)))}function p(g){var m=Ue(g),S=parseInt(m.value)+(g.delta||0);(S/1e3>1||g.key==="Enter"&&!/[^\d]/.test(S.toString()))&&Se(S)}function b(g,m,S,C){if(m instanceof Array)return m.forEach(function(A){return b(g,A,S,C)});if(g instanceof Array)return g.forEach(function(A){return b(A,m,S,C)});g.addEventListener(m,S,C),e._handlers.push({remove:function(){return g.removeEventListener(m,S,C)}})}function y(){fe("onChange")}function E(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(S){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+S+"]"),function(C){return b(C,"click",e[S])})}),e.isMobile){Dn();return}var g=Ya(xn,50);if(e._debouncedChange=Ya(y,lc),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&b(e.daysContainer,"mouseover",function(S){e.config.mode==="range"&&ht(Ue(S))}),b(e._input,"keydown",nt),e.calendarContainer!==void 0&&b(e.calendarContainer,"keydown",nt),!e.config.inline&&!e.config.static&&b(window,"resize",g),window.ontouchstart!==void 0?b(window.document,"touchstart",Te):b(window.document,"mousedown",Te),b(window.document,"focus",Te,{capture:!0}),e.config.clickOpens===!0&&(b(e._input,"focus",e.open),b(e._input,"click",e.open)),e.daysContainer!==void 0&&(b(e.monthNav,"click",An),b(e.monthNav,["keyup","increment"],p),b(e.daysContainer,"click",je)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var m=function(S){return Ue(S).select()};b(e.timeContainer,["increment"],l),b(e.timeContainer,"blur",l,{capture:!0}),b(e.timeContainer,"click",v),b([e.hourElement,e.minuteElement],["focus","click"],m),e.secondElement!==void 0&&b(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&b(e.amPM,"click",function(S){l(S)})}e.config.allowInput&&b(e._input,"blur",tt)}function _(g,m){var S=g!==void 0?e.parseDate(g):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),C=e.currentYear,A=e.currentMonth;try{S!==void 0&&(e.currentYear=S.getFullYear(),e.currentMonth=S.getMonth())}catch(D){D.message="Invalid date supplied: "+S,e.config.errorHandler(D)}m&&e.currentYear!==C&&(fe("onYearChange"),R()),m&&(e.currentYear!==C||e.currentMonth!==A)&&fe("onMonthChange"),e.redraw()}function v(g){var m=Ue(g);~m.className.indexOf("arrow")&&w(g,m.classList.contains("arrowUp")?1:-1)}function w(g,m,S){var C=g&&Ue(g),A=S||C&&C.parentNode&&C.parentNode.firstChild,D=qt("increment");D.delta=m,A&&A.dispatchEvent(D)}function N(){var g=window.document.createDocumentFragment();if(e.calendarContainer=se("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(g.appendChild(Y()),e.innerContainer=se("div","flatpickr-innerContainer"),e.config.weekNumbers){var m=ne(),S=m.weekWrapper,C=m.weekNumbers;e.innerContainer.appendChild(S),e.weekNumbers=C,e.weekWrapper=S}e.rContainer=se("div","flatpickr-rContainer"),e.rContainer.appendChild(V()),e.daysContainer||(e.daysContainer=se("div","flatpickr-days"),e.daysContainer.tabIndex=-1),H(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),g.appendChild(e.innerContainer)}e.config.enableTime&&g.appendChild(te()),$e(e.calendarContainer,"rangeMode",e.config.mode==="range"),$e(e.calendarContainer,"animate",e.config.animate===!0),$e(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(g);var A=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!A&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var D=se("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(D,e.element),D.appendChild(e.element),e.altInput&&D.appendChild(e.altInput),D.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function k(g,m,S,C){var A=Ce(m,!0),D=se("span",g,m.getDate().toString());return D.dateObj=m,D.$i=C,D.setAttribute("aria-label",e.formatDate(m,e.config.ariaDateFormat)),g.indexOf("hidden")===-1&&He(m,e.now)===0&&(e.todayDateElem=D,D.classList.add("today"),D.setAttribute("aria-current","date")),A?(D.tabIndex=-1,Zt(m)&&(D.classList.add("selected"),e.selectedDateElem=D,e.config.mode==="range"&&($e(D,"startRange",e.selectedDates[0]&&He(m,e.selectedDates[0],!0)===0),$e(D,"endRange",e.selectedDates[1]&&He(m,e.selectedDates[1],!0)===0),g==="nextMonthDay"&&D.classList.add("inRange")))):D.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Jt(m)&&!Zt(m)&&D.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&g!=="prevMonthDay"&&C%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(m)+"</span>"),fe("onDayCreate",D),D}function x(g){g.focus(),e.config.mode==="range"&&ht(g)}function T(g){for(var m=g>0?0:e.config.showMonths-1,S=g>0?e.config.showMonths:-1,C=m;C!=S;C+=g)for(var A=e.daysContainer.children[C],D=g>0?0:A.children.length-1,G=g>0?A.children.length:-1,$=D;$!=G;$+=g){var U=A.children[$];if(U.className.indexOf("hidden")===-1&&Ce(U.dateObj))return U}}function M(g,m){for(var S=g.className.indexOf("Month")===-1?g.dateObj.getMonth():e.currentMonth,C=m>0?e.config.showMonths:-1,A=m>0?1:-1,D=S-e.currentMonth;D!=C;D+=A)for(var G=e.daysContainer.children[D],$=S-e.currentMonth===D?g.$i+m:m<0?G.children.length-1:0,U=G.children.length,I=$;I>=0&&I<U&&I!=(m>0?U:-1);I+=A){var K=G.children[I];if(K.className.indexOf("hidden")===-1&&Ce(K.dateObj)&&Math.abs(g.$i-I)>=Math.abs(m))return x(K)}e.changeMonth(A),L(T(A),0)}function L(g,m){var S=a(),C=ke(S||document.body),A=g!==void 0?g:C?S:e.selectedDateElem!==void 0&&ke(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&ke(e.todayDateElem)?e.todayDateElem:T(m>0?1:-1);A===void 0?e._input.focus():C?M(A,m):x(A)}function O(g,m){for(var S=(new Date(g,m,1).getDay()-e.l10n.firstDayOfWeek+7)%7,C=e.utils.getDaysInMonth((m-1+12)%12,g),A=e.utils.getDaysInMonth(m,g),D=window.document.createDocumentFragment(),G=e.config.showMonths>1,$=G?"prevMonthDay hidden":"prevMonthDay",U=G?"nextMonthDay hidden":"nextMonthDay",I=C+1-S,K=0;I<=C;I++,K++)D.appendChild(k("flatpickr-day "+$,new Date(g,m-1,I),I,K));for(I=1;I<=A;I++,K++)D.appendChild(k("flatpickr-day",new Date(g,m,I),I,K));for(var J=A+1;J<=42-S&&(e.config.showMonths===1||K%7!==0);J++,K++)D.appendChild(k("flatpickr-day "+U,new Date(g,m+1,J%A),J,K));var ie=se("div","dayContainer");return ie.appendChild(D),ie}function H(){if(e.daysContainer!==void 0){vi(e.daysContainer),e.weekNumbers&&vi(e.weekNumbers);for(var g=document.createDocumentFragment(),m=0;m<e.config.showMonths;m++){var S=new Date(e.currentYear,e.currentMonth,1);S.setMonth(e.currentMonth+m),g.appendChild(O(S.getFullYear(),S.getMonth()))}e.daysContainer.appendChild(g),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&ht()}}function R(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var g=function(C){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&C<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&C>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var m=0;m<12;m++)if(g(m)){var S=se("option","flatpickr-monthDropdown-month");S.value=new Date(e.currentYear,m).getMonth().toString(),S.textContent=Wi(m,e.config.shorthandCurrentMonth,e.l10n),S.tabIndex=-1,e.currentMonth===m&&(S.selected=!0),e.monthsDropdownContainer.appendChild(S)}}}function z(){var g=se("div","flatpickr-month"),m=window.document.createDocumentFragment(),S;e.config.showMonths>1||e.config.monthSelectorType==="static"?S=se("span","cur-month"):(e.monthsDropdownContainer=se("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),b(e.monthsDropdownContainer,"change",function(G){var $=Ue(G),U=parseInt($.value,10);e.changeMonth(U-e.currentMonth),fe("onMonthChange")}),R(),S=e.monthsDropdownContainer);var C=yi("cur-year",{tabindex:"-1"}),A=C.getElementsByTagName("input")[0];A.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&A.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(A.setAttribute("max",e.config.maxDate.getFullYear().toString()),A.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var D=se("div","flatpickr-current-month");return D.appendChild(S),D.appendChild(C),m.appendChild(D),g.appendChild(m),{container:g,yearElement:A,monthElement:S}}function j(){vi(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var g=e.config.showMonths;g--;){var m=z();e.yearElements.push(m.yearElement),e.monthElements.push(m.monthElement),e.monthNav.appendChild(m.container)}e.monthNav.appendChild(e.nextMonthNav)}function Y(){return e.monthNav=se("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=se("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=se("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,j(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(g){e.__hidePrevMonthArrow!==g&&($e(e.prevMonthNav,"flatpickr-disabled",g),e.__hidePrevMonthArrow=g)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(g){e.__hideNextMonthArrow!==g&&($e(e.nextMonthNav,"flatpickr-disabled",g),e.__hideNextMonthArrow=g)}}),e.currentYearElement=e.yearElements[0],Xt(),e.monthNav}function te(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var g=gr(e.config);e.timeContainer=se("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var m=se("span","flatpickr-time-separator",":"),S=yi("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=S.getElementsByTagName("input")[0];var C=yi("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=C.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=Be(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?g.hours:c(g.hours)),e.minuteElement.value=Be(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():g.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(S),e.timeContainer.appendChild(m),e.timeContainer.appendChild(C),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var A=yi("flatpickr-second");e.secondElement=A.getElementsByTagName("input")[0],e.secondElement.value=Be(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():g.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(se("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(A)}return e.config.time_24hr||(e.amPM=se("span","flatpickr-am-pm",e.l10n.amPM[Ze((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function V(){e.weekdayContainer?vi(e.weekdayContainer):e.weekdayContainer=se("div","flatpickr-weekdays");for(var g=e.config.showMonths;g--;){var m=se("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(m)}return X(),e.weekdayContainer}function X(){if(e.weekdayContainer){var g=e.l10n.firstDayOfWeek,m=qa(e.l10n.weekdays.shorthand);g>0&&g<m.length&&(m=qa(m.splice(g,m.length),m.splice(0,g)));for(var S=e.config.showMonths;S--;)e.weekdayContainer.children[S].innerHTML=`
      <span class='flatpickr-weekday'>
        `+m.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function ne(){e.calendarContainer.classList.add("hasWeeks");var g=se("div","flatpickr-weekwrapper");g.appendChild(se("span","flatpickr-weekday",e.l10n.weekAbbreviation));var m=se("div","flatpickr-weeks");return g.appendChild(m),{weekWrapper:g,weekNumbers:m}}function re(g,m){m===void 0&&(m=!0);var S=m?g:g-e.currentMonth;S<0&&e._hidePrevMonthArrow===!0||S>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=S,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,fe("onYearChange"),R()),H(),fe("onMonthChange"),Xt())}function Le(g,m){if(g===void 0&&(g=!0),m===void 0&&(m=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,m===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var S=gr(e.config),C=S.hours,A=S.minutes,D=S.seconds;f(C,A,D)}e.redraw(),g&&fe("onChange")}function de(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),fe("onClose")}function _e(){e.config!==void 0&&fe("onDestroy");for(var g=e._handlers.length;g--;)e._handlers[g].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var m=e.calendarContainer.parentNode;if(m.lastChild&&m.removeChild(m.lastChild),m.parentNode){for(;m.firstChild;)m.parentNode.insertBefore(m.firstChild,m);m.parentNode.removeChild(m)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(S){try{delete e[S]}catch{}})}function me(g){return e.calendarContainer.contains(g)}function Te(g){if(e.isOpen&&!e.config.inline){var m=Ue(g),S=me(m),C=m===e.input||m===e.altInput||e.element.contains(m)||g.path&&g.path.indexOf&&(~g.path.indexOf(e.input)||~g.path.indexOf(e.altInput)),A=!C&&!S&&!me(g.relatedTarget),D=!e.config.ignoredFocusElements.some(function(G){return G.contains(m)});A&&D&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&l(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function Se(g){if(!(!g||e.config.minDate&&g<e.config.minDate.getFullYear()||e.config.maxDate&&g>e.config.maxDate.getFullYear())){var m=g,S=e.currentYear!==m;e.currentYear=m||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),S&&(e.redraw(),fe("onYearChange"),R())}}function Ce(g,m){var S;m===void 0&&(m=!0);var C=e.parseDate(g,void 0,m);if(e.config.minDate&&C&&He(C,e.config.minDate,m!==void 0?m:!e.minDateHasTime)<0||e.config.maxDate&&C&&He(C,e.config.maxDate,m!==void 0?m:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(C===void 0)return!1;for(var A=!!e.config.enable,D=(S=e.config.enable)!==null&&S!==void 0?S:e.config.disable,G=0,$=void 0;G<D.length;G++){if($=D[G],typeof $=="function"&&$(C))return A;if($ instanceof Date&&C!==void 0&&$.getTime()===C.getTime())return A;if(typeof $=="string"){var U=e.parseDate($,void 0,!0);return U&&U.getTime()===C.getTime()?A:!A}else if(typeof $=="object"&&C!==void 0&&$.from&&$.to&&C.getTime()>=$.from.getTime()&&C.getTime()<=$.to.getTime())return A}return!A}function ke(g){return e.daysContainer!==void 0?g.className.indexOf("hidden")===-1&&g.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(g):!1}function tt(g){var m=g.target===e._input,S=e._input.value.trimEnd()!==Qt();m&&S&&!(g.relatedTarget&&me(g.relatedTarget))&&e.setDate(e._input.value,!0,g.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function nt(g){var m=Ue(g),S=e.config.wrap?n.contains(m):m===e._input,C=e.config.allowInput,A=e.isOpen&&(!C||!S),D=e.config.inline&&S&&!C;if(g.keyCode===13&&S){if(C)return e.setDate(e._input.value,!0,m===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),m.blur();e.open()}else if(me(m)||A||D){var G=!!e.timeContainer&&e.timeContainer.contains(m);switch(g.keyCode){case 13:G?(g.preventDefault(),l(),Cn()):je(g);break;case 27:g.preventDefault(),Cn();break;case 8:case 46:S&&!e.config.allowInput&&(g.preventDefault(),e.clear());break;case 37:case 39:if(!G&&!S){g.preventDefault();var $=a();if(e.daysContainer!==void 0&&(C===!1||$&&ke($))){var U=g.keyCode===39?1:-1;g.ctrlKey?(g.stopPropagation(),re(U),L(T(1),0)):L(void 0,U)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:g.preventDefault();var I=g.keyCode===40?1:-1;e.daysContainer&&m.$i!==void 0||m===e.input||m===e.altInput?g.ctrlKey?(g.stopPropagation(),Se(e.currentYear-I),L(T(1),0)):G||L(void 0,I*7):m===e.currentYearElement?Se(e.currentYear-I):e.config.enableTime&&(!G&&e.hourElement&&e.hourElement.focus(),l(g),e._debouncedChange());break;case 9:if(G){var K=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(ee){return ee}),J=K.indexOf(m);if(J!==-1){var ie=K[J+(g.shiftKey?-1:1)];g.preventDefault(),(ie||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(m)&&g.shiftKey&&(g.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&m===e.amPM)switch(g.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],d(),it();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],d(),it();break}(S||me(m))&&fe("onKeyDown",g)}function ht(g,m){if(m===void 0&&(m="flatpickr-day"),!(e.selectedDates.length!==1||g&&(!g.classList.contains(m)||g.classList.contains("flatpickr-disabled")))){for(var S=g?g.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),C=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),A=Math.min(S,e.selectedDates[0].getTime()),D=Math.max(S,e.selectedDates[0].getTime()),G=!1,$=0,U=0,I=A;I<D;I+=sc.DAY)Ce(new Date(I),!0)||(G=G||I>A&&I<D,I<C&&(!$||I>$)?$=I:I>C&&(!U||I<U)&&(U=I));var K=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+m));K.forEach(function(J){var ie=J.dateObj,ee=ie.getTime(),he=$>0&&ee<$||U>0&&ee>U;if(he){J.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(oe){J.classList.remove(oe)});return}else if(G&&!he)return;["startRange","inRange","endRange","notAllowed"].forEach(function(oe){J.classList.remove(oe)}),g!==void 0&&(g.classList.add(S<=e.selectedDates[0].getTime()?"startRange":"endRange"),C<S&&ee===C?J.classList.add("startRange"):C>S&&ee===C&&J.classList.add("endRange"),ee>=$&&(U===0||ee<=U)&&ac(ee,C,S)&&J.classList.add("inRange"))})}}function xn(){e.isOpen&&!e.config.static&&!e.config.inline&&yt()}function oi(g,m){if(m===void 0&&(m=e._positionElement),e.isMobile===!0){if(g){g.preventDefault();var S=Ue(g);S&&S.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),fe("onOpen");return}else if(e._input.disabled||e.config.inline)return;var C=e.isOpen;e.isOpen=!0,C||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),fe("onOpen"),yt(m)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(g===void 0||!e.timeContainer.contains(g.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function Kt(g){return function(m){var S=e.config["_"+g+"Date"]=e.parseDate(m,e.config.dateFormat),C=e.config["_"+(g==="min"?"max":"min")+"Date"];S!==void 0&&(e[g==="min"?"minDateHasTime":"maxDateHasTime"]=S.getHours()>0||S.getMinutes()>0||S.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(A){return Ce(A)}),!e.selectedDates.length&&g==="min"&&h(S),it()),e.daysContainer&&(Tn(),S!==void 0?e.currentYearElement[g]=S.getFullYear().toString():e.currentYearElement.removeAttribute(g),e.currentYearElement.disabled=!!C&&S!==void 0&&C.getFullYear()===S.getFullYear())}}function si(){var g=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],m=Pe(Pe({},JSON.parse(JSON.stringify(n.dataset||{}))),t),S={};e.config.parseDate=m.parseDate,e.config.formatDate=m.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(K){e.config._enable=ci(K)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(K){e.config._disable=ci(K)}});var C=m.mode==="time";if(!m.dateFormat&&(m.enableTime||C)){var A=ve.defaultConfig.dateFormat||mn.dateFormat;S.dateFormat=m.noCalendar||C?"H:i"+(m.enableSeconds?":S":""):A+" H:i"+(m.enableSeconds?":S":"")}if(m.altInput&&(m.enableTime||C)&&!m.altFormat){var D=ve.defaultConfig.altFormat||mn.altFormat;S.altFormat=m.noCalendar||C?"h:i"+(m.enableSeconds?":S K":" K"):D+(" h:i"+(m.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:Kt("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:Kt("max")});var G=function(K){return function(J){e.config[K==="min"?"_minTime":"_maxTime"]=e.parseDate(J,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:G("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:G("max")}),m.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,S,m);for(var $=0;$<g.length;$++)e.config[g[$]]=e.config[g[$]]===!0||e.config[g[$]]==="true";cr.filter(function(K){return e.config[K]!==void 0}).forEach(function(K){e.config[K]=dr(e.config[K]||[]).map(o)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var $=0;$<e.config.plugins.length;$++){var U=e.config.plugins[$](e)||{};for(var I in U)cr.indexOf(I)>-1?e.config[I]=dr(U[I]).map(o).concat(e.config[I]):typeof m[I]>"u"&&(e.config[I]=U[I])}m.altInputClass||(e.config.altInputClass=vt().className+" "+e.config.altInputClass),fe("onParseConfig")}function vt(){return e.config.wrap?n.querySelector("[data-input]"):n}function En(){typeof e.config.locale!="object"&&typeof ve.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=Pe(Pe({},ve.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?ve.l10ns[e.config.locale]:void 0),Ot.D="("+e.l10n.weekdays.shorthand.join("|")+")",Ot.l="("+e.l10n.weekdays.longhand.join("|")+")",Ot.M="("+e.l10n.months.shorthand.join("|")+")",Ot.F="("+e.l10n.months.longhand.join("|")+")",Ot.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var g=Pe(Pe({},t),JSON.parse(JSON.stringify(n.dataset||{})));g.time_24hr===void 0&&ve.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=ps(e),e.parseDate=Or({config:e.config,l10n:e.l10n})}function yt(g){if(typeof e.config.position=="function")return void e.config.position(e,g);if(e.calendarContainer!==void 0){fe("onPreCalendarPosition");var m=g||e._positionElement,S=Array.prototype.reduce.call(e.calendarContainer.children,function(Pt,tn){return Pt+tn.offsetHeight},0),C=e.calendarContainer.offsetWidth,A=e.config.position.split(" "),D=A[0],G=A.length>1?A[1]:null,$=m.getBoundingClientRect(),U=window.innerHeight-$.bottom,I=D==="above"||D!=="below"&&U<S&&$.top>S,K=window.pageYOffset+$.top+(I?-S-2:m.offsetHeight+2);if($e(e.calendarContainer,"arrowTop",!I),$e(e.calendarContainer,"arrowBottom",I),!e.config.inline){var J=window.pageXOffset+$.left,ie=!1,ee=!1;G==="center"?(J-=(C-$.width)/2,ie=!0):G==="right"&&(J-=C-$.width,ee=!0),$e(e.calendarContainer,"arrowLeft",!ie&&!ee),$e(e.calendarContainer,"arrowCenter",ie),$e(e.calendarContainer,"arrowRight",ee);var he=window.document.body.offsetWidth-(window.pageXOffset+$.right),oe=J+C>window.document.body.offsetWidth,pe=he+C>window.document.body.offsetWidth;if($e(e.calendarContainer,"rightMost",oe),!e.config.static)if(e.calendarContainer.style.top=K+"px",!oe)e.calendarContainer.style.left=J+"px",e.calendarContainer.style.right="auto";else if(!pe)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=he+"px";else{var xe=tr();if(xe===void 0)return;var Ve=window.document.body.offsetWidth,rt=Math.max(0,Ve/2-C/2),Ct=".flatpickr-calendar.centerMost:before",Dt=".flatpickr-calendar.centerMost:after",en=xe.cssRules.length,hi="{left:"+$.left+"px;right:auto;}";$e(e.calendarContainer,"rightMost",!1),$e(e.calendarContainer,"centerMost",!0),xe.insertRule(Ct+","+Dt+hi,en),e.calendarContainer.style.left=rt+"px",e.calendarContainer.style.right="auto"}}}}function tr(){for(var g=null,m=0;m<document.styleSheets.length;m++){var S=document.styleSheets[m];if(S.cssRules){try{S.cssRules}catch{continue}g=S;break}}return g??nr()}function nr(){var g=document.createElement("style");return document.head.appendChild(g),g.sheet}function Tn(){e.config.noCalendar||e.isMobile||(R(),Xt(),H())}function Cn(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function je(g){g.preventDefault(),g.stopPropagation();var m=function(K){return K.classList&&K.classList.contains("flatpickr-day")&&!K.classList.contains("flatpickr-disabled")&&!K.classList.contains("notAllowed")},S=ms(Ue(g),m);if(S!==void 0){var C=S,A=e.latestSelectedDateObj=new Date(C.dateObj.getTime()),D=(A.getMonth()<e.currentMonth||A.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=C,e.config.mode==="single")e.selectedDates=[A];else if(e.config.mode==="multiple"){var G=Zt(A);G?e.selectedDates.splice(parseInt(G),1):e.selectedDates.push(A)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=A,e.selectedDates.push(A),He(A,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(K,J){return K.getTime()-J.getTime()}));if(d(),D){var $=e.currentYear!==A.getFullYear();e.currentYear=A.getFullYear(),e.currentMonth=A.getMonth(),$&&(fe("onYearChange"),R()),fe("onMonthChange")}if(Xt(),H(),it(),!D&&e.config.mode!=="range"&&e.config.showMonths===1?x(C):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var U=e.config.mode==="single"&&!e.config.enableTime,I=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(U||I)&&Cn()}y()}}var wt={locale:[En,X],showMonths:[j,s,V],minDate:[_],maxDate:[_],positionElement:[Rt],clickOpens:[function(){e.config.clickOpens===!0?(b(e._input,"focus",e.open),b(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function Yt(g,m){if(g!==null&&typeof g=="object"){Object.assign(e.config,g);for(var S in g)wt[S]!==void 0&&wt[S].forEach(function(C){return C()})}else e.config[g]=m,wt[g]!==void 0?wt[g].forEach(function(C){return C()}):cr.indexOf(g)>-1&&(e.config[g]=dr(m));e.redraw(),it(!0)}function li(g,m){var S=[];if(g instanceof Array)S=g.map(function(C){return e.parseDate(C,m)});else if(g instanceof Date||typeof g=="number")S=[e.parseDate(g,m)];else if(typeof g=="string")switch(e.config.mode){case"single":case"time":S=[e.parseDate(g,m)];break;case"multiple":S=g.split(e.config.conjunction).map(function(C){return e.parseDate(C,m)});break;case"range":S=g.split(e.l10n.rangeSeparator).map(function(C){return e.parseDate(C,m)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(g)));e.selectedDates=e.config.allowInvalidPreload?S:S.filter(function(C){return C instanceof Date&&Ce(C,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(C,A){return C.getTime()-A.getTime()})}function ui(g,m,S){if(m===void 0&&(m=!1),S===void 0&&(S=e.config.dateFormat),g!==0&&!g||g instanceof Array&&g.length===0)return e.clear(m);li(g,S),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),_(void 0,m),h(),e.selectedDates.length===0&&e.clear(!1),it(m),m&&fe("onChange")}function ci(g){return g.slice().map(function(m){return typeof m=="string"||typeof m=="number"||m instanceof Date?e.parseDate(m,void 0,!0):m&&typeof m=="object"&&m.from&&m.to?{from:e.parseDate(m.from,void 0),to:e.parseDate(m.to,void 0)}:m}).filter(function(m){return m})}function ir(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var g=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);g&&li(g,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function Tt(){if(e.input=vt(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=se(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Rt()}function Rt(){e._positionElement=e.config.positionElement||e._input}function Dn(){var g=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=se("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=g,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=g==="datetime-local"?"Y-m-d\\TH:i:S":g==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}b(e.mobileInput,"change",function(m){e.setDate(Ue(m).value,!1,e.mobileFormatStr),fe("onChange"),fe("onClose")})}function di(g){if(e.isOpen===!0)return e.close();e.open(g)}function fe(g,m){if(e.config!==void 0){var S=e.config[g];if(S!==void 0&&S.length>0)for(var C=0;S[C]&&C<S.length;C++)S[C](e.selectedDates,e.input.value,e,m);g==="onChange"&&(e.input.dispatchEvent(qt("change")),e.input.dispatchEvent(qt("input")))}}function qt(g){var m=document.createEvent("Event");return m.initEvent(g,!0,!0),m}function Zt(g){for(var m=0;m<e.selectedDates.length;m++){var S=e.selectedDates[m];if(S instanceof Date&&He(S,g)===0)return""+m}return!1}function Jt(g){return e.config.mode!=="range"||e.selectedDates.length<2?!1:He(g,e.selectedDates[0])>=0&&He(g,e.selectedDates[1])<=0}function Xt(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(g,m){var S=new Date(e.currentYear,e.currentMonth,1);S.setMonth(e.currentMonth+m),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[m].textContent=Wi(S.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=S.getMonth().toString(),g.value=S.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Qt(g){var m=g||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(S){return e.formatDate(S,m)}).filter(function(S,C,A){return e.config.mode!=="range"||e.config.enableTime||A.indexOf(S)===C}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function it(g){g===void 0&&(g=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Qt(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=Qt(e.config.altFormat)),g!==!1&&fe("onValueUpdate")}function An(g){var m=Ue(g),S=e.prevMonthNav.contains(m),C=e.nextMonthNav.contains(m);S||C?re(S?-1:1):e.yearElements.indexOf(m)>=0?m.select():m.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):m.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function Nn(g){g.preventDefault();var m=g.type==="keydown",S=Ue(g),C=S;e.amPM!==void 0&&S===e.amPM&&(e.amPM.textContent=e.l10n.amPM[Ze(e.amPM.textContent===e.l10n.amPM[0])]);var A=parseFloat(C.getAttribute("min")),D=parseFloat(C.getAttribute("max")),G=parseFloat(C.getAttribute("step")),$=parseInt(C.value,10),U=g.delta||(m?g.which===38?1:-1:0),I=$+G*U;if(typeof C.value<"u"&&C.value.length===2){var K=C===e.hourElement,J=C===e.minuteElement;I<A?(I=D+I+Ze(!K)+(Ze(K)&&Ze(!e.amPM)),J&&w(void 0,-1,e.hourElement)):I>D&&(I=C===e.hourElement?I-D-Ze(!e.amPM):A,J&&w(void 0,1,e.hourElement)),e.amPM&&K&&(G===1?I+$===23:Math.abs(I-$)>G)&&(e.amPM.textContent=e.l10n.amPM[Ze(e.amPM.textContent===e.l10n.amPM[0])]),C.value=Be(I)}}return r(),e}function pn(n,t){for(var e=Array.prototype.slice.call(n).filter(function(o){return o instanceof HTMLElement}),i=[],r=0;r<e.length;r++){var a=e[r];try{if(a.getAttribute("data-fp-omit")!==null)continue;a._flatpickr!==void 0&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=uc(a,t||{}),i.push(a._flatpickr)}catch(o){console.error(o)}}return i.length===1?i[0]:i}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return pn(this,n)},HTMLElement.prototype.flatpickr=function(n){return pn([this],n)});var ve=function(n,t){return typeof n=="string"?pn(window.document.querySelectorAll(n),t):n instanceof Node?pn([n],t):pn(n,t)};ve.defaultConfig={};ve.l10ns={en:Pe({},ei),default:Pe({},ei)};ve.localize=function(n){ve.l10ns.default=Pe(Pe({},ve.l10ns.default),n)};ve.setDefaults=function(n){ve.defaultConfig=Pe(Pe({},ve.defaultConfig),n)};ve.parseDate=Or({});ve.formatDate=ps({});ve.compareDates=He;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return pn(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=ve);var cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $r={exports:{}};(function(n,t){(function(e,i){i(t)})(cc,function(e){var i=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},r={weekdays:{shorthand:["So","Mo","Di","Mi","Do","Fr","Sa"],longhand:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},months:{shorthand:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],longhand:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},firstDayOfWeek:1,weekAbbreviation:"KW",rangeSeparator:" bis ",scrollTitle:"Zum ndern scrollen",toggleTitle:"Zum Umschalten klicken",time_24hr:!0};i.l10ns.de=r;var a=i.l10ns;e.German=r,e.default=a,Object.defineProperty(e,"__esModule",{value:!0})})})($r,$r.exports);var hc=$r.exports;const ua="Y-m-d",Za="__LOCALIZED_FLATPICKR__",fc={en:"en-US",de:"de-DE"};function gc(n,t){!n||!t||(ft(n,"min",t.startDate),ft(n,"max",t.endDate))}function bs(n,t,e){if(!n||!t||!e)return{refresh:()=>{}};const i=e.startDate??"",r=e.endDate??"",a=()=>{const s=n.value??"",l=t.value??"";i?(ft(n,"min",i),ft(t,"min",(s&&s!==i?s:i)||i)):(ft(n,"min",null),ft(t,"min",null)),r?(ft(t,"max",r),ft(n,"max",(l&&l!==r?l:r)||r)):(ft(n,"max",null),ft(t,"max",null))},o=()=>{a()};return n.addEventListener("change",o),t.addEventListener("change",o),a(),{refresh:a}}function Gr(n,{onChange:t}={}){if(!n)return{refresh:()=>{},destroy:()=>{}};n.type="text",n.autocomplete="off",n.inputMode="none",n.dataset.datePicker="true";const e=ve(n,{dateFormat:ua,defaultDate:n.value||null,altInput:!0,altFormat:Za,allowInput:!1,clickOpens:!0,monthSelectorType:"static",disableMobile:!1,locale:Xa(ct()),onChange:(r,a)=>{const o=typeof a=="string"?a:n.value??"";t==null||t(o),n.dispatchEvent(new Event("change",{bubbles:!0}))},formatDate(r,a){return a===Za?mc(r,ct()):ve.formatDate(r,a)}}),i=Wt(()=>{e.set("locale",Xa(ct())),ti(n)});return{refresh:()=>ti(n),destroy:()=>{i==null||i(),e.destroy()}}}function ti(n,t){n&&(typeof t=="string"&&(n.value=t),n._flatpickr&&n._flatpickr.setDate(n.value||null,!1,ua))}function Ja(n,t){var r;if(!n)return;const e=!!t;n.disabled=e;const i=(r=n._flatpickr)==null?void 0:r.altInput;i&&(i.disabled=e)}function ft(n,t,e){if(!n)return;const i=typeof e=="string"&&e.length>0?e:null;i?n[t]=i:n.removeAttribute(t);const r=n._flatpickr;if(r){const a=t==="min"?"minDate":"maxDate";r.set(a,i||null)}}function Xa(n){return vs(n)==="de"?hc.German:void 0}function vs(n){return typeof n!="string"?"en":n.toLowerCase().startsWith("de")?"de":"en"}function mc(n,t){if(!(n instanceof Date)||Number.isNaN(n.getTime()))return"";const e=vs(t),i=fc[e];try{return new Intl.DateTimeFormat(i,{year:"numeric",month:"2-digit",day:"2-digit"}).format(n)}catch{return ve.formatDate(n,ua)}}const Ni=Object.freeze([{value:"true",labelKey:"option.enabled"},{value:"false",labelKey:"option.disabled"}]),zr=[{key:"dateStart",labelKey:"label.tourStartDate",type:"date",expert:!1},{key:"dateEnd",labelKey:"label.tourEndDate",type:"date",expert:!1},{key:"requiredStartDayOfWeek",labelKey:"label.routing.requiredStartDay",type:"select",options:gn,expert:!1},{key:"maxTourLengthDays",labelKey:"label.routing.maxTourLength",type:"number",min:1,step:1,expert:!1},{key:"allowFlights",labelKey:"label.routing.allowFlights",type:"select",options:Ni,valueType:"boolean",expert:!1},{key:"maxDriveOneDayGap",labelKey:"label.routing.maxDriveOneDayGap",type:"number",min:0,step:1,expert:!1},{key:"maxDriveTwoDayGap",labelKey:"label.routing.maxDriveTwoDayGap",type:"number",min:0,step:1,expert:!1},{key:"maxDriveThreeDayGap",labelKey:"label.routing.maxDriveThreeDayGap",type:"number",min:0,step:1,expert:!1},{key:"maxDriveFourDayGap",labelKey:"label.routing.maxDriveFourDayGap",type:"number",min:0,step:1,expert:!1},{key:"maxRoutesToFind",labelKey:"label.routing.maxRoutes",type:"number",min:1,step:1,expert:!0},{key:"oneDayGap",labelKey:"label.routing.oneDayGap",type:"number",min:0,step:1,expert:!0},{key:"twoDayGap",labelKey:"label.routing.twoDayGap",type:"number",min:0,step:1,expert:!0},{key:"threeDayGap",labelKey:"label.routing.threeDayGap",type:"number",min:0,step:1,expert:!0},{key:"fourDayGap",labelKey:"label.routing.fourDayGap",type:"number",min:0,step:1,expert:!0},{key:"minTimeToNextGameHoursFlight",labelKey:"label.routing.minTimeToNextGameHoursFlight",type:"number",min:0,step:.5,expert:!0},{key:"maxTimeToNextGameHours",labelKey:"label.routing.maxTimeToNextGameHours",type:"number",min:1,step:1,expert:!0},{key:"travelMultiplierCeilingFlight",labelKey:"label.routing.travelMultiplierCeilingFlight",type:"number",min:0,step:.05,expert:!0},{key:"specialGameDayPenalty",labelKey:"label.routing.specialGameDayPenalty",type:"number",min:0,step:.05,expert:!0},{key:"revisitMultiplierFloor",labelKey:"label.routing.revisitMultiplierFloor",type:"number",min:0,step:.05,expert:!0},{key:"travelMultiplierFloor",labelKey:"label.routing.travelMultiplierFloor",type:"number",min:0,step:.05,expert:!0},{key:"estimatedGamesPerWeek",labelKey:"label.routing.estimatedGamesPerWeek",type:"number",min:0,step:.1,expert:!0},{key:"maxSearchMinutesPerStartGame",labelKey:"label.routing.maxSearchMinutesPerStartGame",type:"number",min:0,step:.1,expert:!0},{key:"beamWidthPerStartGame",labelKey:"label.routing.beamWidthPerStartGame",type:"number",min:1,step:1,expert:!0},{key:"cacheBucketHours",labelKey:"label.routing.cacheBucketHours",type:"number",min:1,step:1,expert:!0},{key:"enableRouteCache",labelKey:"label.routing.enableRouteCache",type:"select",options:Ni,valueType:"boolean",expert:!0},{key:"expertMode",labelKey:"label.routing.expertMode",type:"select",options:Ni,valueType:"boolean",expert:!1}],sn=5,mr=35,pc=24*60*60*1e3;var Qo;const wi=((Qo=gn==null?void 0:gn[0])==null?void 0:Qo.value)??"";function bc({ui:n,scheduleRange:t}){const e=Gr(n.tourStartInput,{onChange:k=>s("dateStart",k)}),i=Gr(n.tourEndInput,{onChange:k=>s("dateEnd",k)}),r=bs(n.tourStartInput,n.tourEndInput,t);function a(){N({refreshBounds:!0}),e.refresh(),i.refresh()}function o(){const k=Ge();ti(n.tourStartInput,k.dateStart??t.startDate),ti(n.tourEndInput,k.dateEnd??t.endDate),N({refreshBounds:!0})}function s(k,x){const T=Ge(),M=Ir(k,x,T.dateStart,T.dateEnd,t);T.dateStart=M.dateStart,T.dateEnd=M.dateEnd,o(),fn(T)}function l(k){const x=typeof k=="string"&&k.length>0?k:wi,T=Ge();T.requiredStartDayOfWeek=x,p(),fn(T)}function u(k){const x=Ge(),T=_(),M=Number(k),L=E(Number.isFinite(M)?M:x.maxTourLengthDays,T);x.maxTourLengthDays=L,y(),fn(x)}function c(k){const x=Ge();x.allowFlights=k==="true",b(),fn(x)}function d(k){ec(k),n.teamButton.disabled=k,n.cityButton.disabled=k,n.routingButton.disabled=k,Ja(n.tourStartInput,k),Ja(n.tourEndInput,k),n.requiredStartDaySelect.disabled=k,n.maxTourLengthSelect.disabled=k,n.allowFlightsInput.disabled=k,h(k),k&&n.searchButton.removeAttribute("disabled"),n.searchButton.classList.toggle("btn-primary",!k)}return Wt(()=>{d(ds()),N({refreshBounds:!1})}),{initializeDateInputs:a,syncDateInputs:o,handleDateInputChange:s,handleRequiredStartDayChange:l,handleMaxTourLengthChange:u,handleAllowFlightsChange:c,setSearchState:d};function h(k){const x=n.searchButton,T=n.routesHeading,M=n.routesPanel,L=k?"button.searchStop":"button.searchStart",O=k?"label.routesHeading.running":"label.routesHeading",H=F(L);x&&(x.textContent=H,x.setAttribute("data-i18n",L),x.setAttribute("aria-label",H)),T&&(T.textContent=F(O),T.setAttribute("data-i18n",O)),M&&(M.classList.toggle("search-running",!!k),M.classList.toggle("search-finished",!k))}function f(){const k=n.requiredStartDaySelect;if(!k)return;const x=document.createDocumentFragment();(gn??[]).forEach(T=>{const M=document.createElement("option");M.value=T.value,M.textContent=T.labelKey?F(T.labelKey):T.label??T.value,x.appendChild(M)}),k.innerHTML="",k.appendChild(x)}function p(){const k=n.requiredStartDaySelect;if(!k)return;const x=Ge(),T=typeof x.requiredStartDayOfWeek=="string"&&x.requiredStartDayOfWeek.length>0?x.requiredStartDayOfWeek:wi,L=new Set((gn??[]).map(O=>O.value)).has(T)?T:wi;k.value=L,x.requiredStartDayOfWeek!==L&&(L!==wi||x.requiredStartDayOfWeek)&&(x.requiredStartDayOfWeek=L)}function b(){const k=n.allowFlightsInput;k&&(k.value=Ge().allowFlights?"true":"false")}function y(){const k=n.maxTourLengthSelect;if(!k)return;const x=_(),T=document.createDocumentFragment();for(let O=sn;O<=x;O+=1){const H=document.createElement("option");H.value=String(O),H.textContent=String(O),T.appendChild(H)}k.innerHTML="",k.appendChild(T);const M=Ge(),L=E(M.maxTourLengthDays,x);k.value=String(L),M.maxTourLengthDays!==L&&(M.maxTourLengthDays=L)}function E(k,x){const T=Ge(),M=Number.isFinite(T==null?void 0:T.maxTourLengthDays)?T.maxTourLengthDays:Number(Me==null?void 0:Me.maxTourLengthDays)||sn,L=Number.isFinite(k)?Math.trunc(k):M,O=Math.max(sn,Number(x)||mr);return Math.min(Math.max(L,sn),O)}function _(){const k=Ge(),x=Number.isFinite(k==null?void 0:k.maxTourLengthDays)?k.maxTourLengthDays:Number(Me==null?void 0:Me.maxTourLengthDays)||sn,T=v();return Number.isFinite(T)?Math.min(Math.max(Math.floor(T),sn),Math.max(mr,x)):mr}function v(){const k=St(n.tourStartInput.value),x=St(n.tourEndInput.value);if(!Number.isFinite(k)||!Number.isFinite(x))return null;const T=Math.floor((x-k)/pc)+1;return T>0?T:null}function w(){const k=n.allowFlightsInput;if(!k)return;const x=document.createDocumentFragment();(Ni??[]).forEach(T=>{const M=document.createElement("option");M.value=T.value,M.textContent=T.labelKey?F(T.labelKey):T.label??T.value,x.appendChild(M)}),k.innerHTML="",k.appendChild(x)}function N({refreshBounds:k=!0}={}){k&&r.refresh(),f(),w(),y(),p(),b()}}const Qa="has-open-modal";function vc({root:n}){const t=n??document.body;let e=0,i=null,r=0;const a=new Map;function o(f){if(!f||!f.isConnected)return;const p=f.parentElement;p&&p.lastElementChild!==f&&p.appendChild(f)}function s(){e+=1,e===1&&(i=document.body.style.overflow,document.body.style.overflow="hidden")}function l(){e=Math.max(e-1,0),e===0&&i!==null&&(document.body.style.overflow=i,i=null)}function u({onBackgroundPointerDown:f,className:p}={}){const b=document.createElement("div");return b.className=["modal-overlay",p].filter(Boolean).join(" "),b.addEventListener("click",E=>{E.target===b&&typeof f=="function"&&f(E)}),t.appendChild(b),s(),requestAnimationFrame(()=>{b.classList.add("open")}),{overlay:b,dispose:()=>{b.classList.remove("open"),setTimeout(()=>{b.remove()},200),l()}}}function c(){r>0?document.documentElement.classList.add(Qa):document.documentElement.classList.remove(Qa)}function d({title:f,size:p="medium",build:b,onClose:y,id:E}){var te;if(E&&a.has(E)){const V=a.get(E);return o(V.overlay),(te=V.focus)==null||te.call(V),V.instance}const{overlay:_,dispose:v}=u();r+=1,c();const w=document.createElement("div");w.className=`modal-dialog${p?" "+p:""}`;const N=document.createElement("div");N.className="modal-header";const k=document.createElement("h2");k.textContent=f;const x=document.createElement("button");x.type="button",x.className="btn btn-icon modal-close-button";const T=F("aria.closeDialog");x.setAttribute("aria-label",T),x.setAttribute("title",T),x.textContent="",N.append(k,x);const M=document.createElement("div");M.className="modal-body";const L=document.createElement("div");L.className="modal-actions",w.append(N,M,L),_.appendChild(w);const O=V=>{V.key==="Escape"&&(V.preventDefault(),H())},H=()=>{if(document.removeEventListener("keydown",O),v(),r=Math.max(r-1,0),c(),E){const V=a.get(E);(V==null?void 0:V.instance.close)===H&&a.delete(E)}y==null||y()};x.addEventListener("click",H),document.addEventListener("keydown",O);let R=null;const z=(b==null?void 0:b({body:M,actions:L,close:H}))??{};R=(z==null?void 0:z.focusTarget)??null;const j=()=>{const V=R??x;typeof(V==null?void 0:V.focus)=="function"&&requestAnimationFrame(()=>{V.focus()})};j();const Y={close:H,overlay:_,dialog:w};return E&&a.set(E,{overlay:_,instance:Y,focus:j}),Y}function h(f){var b;if(!f)return!1;const p=a.get(f);return p?(o(p.overlay),(b=p.focus)==null||b.call(p),!0):!1}return{open:d,createOverlay:u,focusDialog:h}}function ys({form:n,entries:t,getDefaults:e,onRestore:i}){return hs({getDefaults:e,applyDefaults:r=>{t.forEach(([a])=>{const o=n.elements[a];if(!o)return;const s=Number.isFinite(r[a])?r[a]:1;o.value=s}),i==null||i()}})}function ws(n,t){var e;try{(e=window.localStorage)==null||e.setItem(n,JSON.stringify(t))}catch{}}function _s({id:n,name:t,value:e,labelKey:i="label.weight",isExpertMode:r=!1}){const a=document.createElement("div");a.className="preference-input-row";const o=document.createElement("label");o.htmlFor=n,o.textContent=F(i);const s=Number.isFinite(e)?e:1,l=document.createElement("input");if(l.name=t,l.id=n,l.step="0.1",r)l.type="number",l.min="0",l.value=s;else{const d=Math.min(Math.max(s,0),2);l.type="range",l.min=String(0),l.max=String(2),l.step="0.1",l.value=d.toFixed(1)}return a.append(o,l),{wrapper:a,input:l}}function ii({topicId:n,openHelpTopic:t}){const e=document.createElement("button");return e.type="button",e.className="btn btn-text btn-muted",e.textContent=F("button.help"),e.addEventListener("click",()=>{typeof t=="function"&&n&&t(n)}),e}const yc=["item-disabled","item-downgraded","item-default","item-upgraded"];function wc(n){return Number.isFinite(n)?n<=0?"item-disabled":n<1?"item-downgraded":n===1?"item-default":"item-upgraded":"item-default"}function ks(n,t){if(!n||!t)return;const e=()=>{const i=Number(t.value),r=wc(i);n.classList.remove(...yc),n.classList.add(r)};return t.addEventListener("input",e),t.addEventListener("change",e),t.addEventListener("blur",e),e(),{applyState:e}}const _c="city-preferences-dialog";function kc({dialogKit:n,stadiumLookup:t,teamLookup:e,openHelpTopic:i}){function r(){const a=Object.entries(Hi()).sort(([o],[s])=>o.localeCompare(s,"en-US"));n.open({title:F("dialog.cityPreferences.title"),size:"large",id:_c,build({body:o,actions:s,close:l}){const u=document.createElement("form");u.className="preference-form";const c=document.createElement("div");c.className="preference-grid city-grid",a.forEach(([y,E])=>{const _=document.createElement("div");_.className="preference-item city-item";const v=t.get(y),w=document.createElement("div");w.className="item-text";const N=document.createElement("strong");N.textContent=(v==null?void 0:v.location_name)??F("label.unknownLocation");const k=document.createElement("span");k.textContent=(v==null?void 0:v.stadium)??y;const x=document.createElement("span"),M=(Array.isArray(v==null?void 0:v.home_team)?v.home_team:[]).map(R=>{const z=e.get(String(R).toUpperCase());return(z==null?void 0:z.team_name)??String(R)}).filter(Boolean);x.textContent=M.length>0?M.join(", "):F("label.homeTeamUnknown"),w.append(N,k,x);const{wrapper:L,input:O}=_s({id:`stadium-weight-${y}`,name:y,value:E,isExpertMode:Qn()}),H=ks(_,O);_.append(w,L),c.appendChild(_),H!=null&&H.applyState&&(O._applyPreferenceState=H.applyState)}),u.appendChild(c),o.appendChild(u);const d=document.createElement("button");d.type="button",d.textContent=F("button.cancel"),d.classList.add("btn","btn-text","btn-muted"),d.addEventListener("click",l);const h=ys({form:u,entries:a,getDefaults:()=>zt(ls),onRestore:()=>{u.querySelectorAll("input").forEach(y=>{typeof y._applyPreferenceState=="function"&&y._applyPreferenceState()})}}),f=ii({topicId:"help-dialog-city-preferences",openHelpTopic:i}),p=document.createElement("button");return p.type="button",p.textContent=F("button.save"),p.classList.add("btn","btn-text","btn-primary"),s.append(h,f,d,p),p.addEventListener("click",()=>{u.requestSubmit()}),u.addEventListener("submit",y=>{y.preventDefault();const E=new FormData(u),_=zt(Hi());a.forEach(([w])=>{const N=E.get(w),k=Number(N);_[w]=Number.isFinite(k)&&k>=0?k:0});const v=Xu(_);ws(Mt.stadiumWeights,v),l()}),{focusTarget:u.querySelector("input")??p}}})}return{openCityPreferences:r}}const Sc="routing-parameters-dialog";function xc({dialogKit:n,scheduleRange:t,controls:e,onExpertModeChange:i,openHelpTopic:r}){function a(){let o=()=>{};n.open({title:F("dialog.routingParameters.title"),size:"large",id:Sc,onClose:()=>{o(),o=()=>{}},build({body:s,actions:l,close:u}){var M;const c=document.createElement("form");c.className="preference-form";const d=document.createElement("div");d.className="routing-parameters-list";const h=[],f=Ge(),p=Qn(),b=[],y=[];zr.forEach(L=>{if(!(L.key in f))return;const O=document.createElement("label");O.className="routing-parameter",L.expert&&(O.dataset.expertField="true",eo(O,p),h.push(O));const H=document.createElement("span");H.textContent=F(L.labelKey);const R=Ec(L,f[L.key],t);L.type==="date"&&y.push(R),O.append(H,R),d.appendChild(O)}),y.forEach(L=>{const O=Gr(L);b.push(O)}),o=()=>{b.forEach(L=>{var O;return(O=L==null?void 0:L.destroy)==null?void 0:O.call(L)})},c.appendChild(d),s.appendChild(c);const E=bs(c.elements.dateStart,c.elements.dateEnd,t),_=(M=c.elements)==null?void 0:M.expertMode,v=()=>{const L=(_==null?void 0:_.value)==="true";h.forEach(O=>{eo(O,L)})};_==null||_.addEventListener("change",v),v();const w=document.createElement("button");w.type="button",w.textContent=F("button.cancel"),w.classList.add("btn","btn-text","btn-muted"),w.addEventListener("click",u);const N=hs({getDefaults:()=>la(Me,t),applyDefaults:L=>{Tc(c,L),E.refresh(),v()}}),k=ii({topicId:"help-dialog-routing-parameters",openHelpTopic:r}),x=document.createElement("button");return x.type="button",x.textContent=F("button.save"),x.classList.add("btn","btn-text","btn-primary"),l.append(N,k,w,x),x.addEventListener("click",()=>{c.requestSubmit()}),c.addEventListener("submit",L=>{L.preventDefault();const O=new FormData(c),H=Ge(),R=JSON.parse(JSON.stringify(H)),z=O.get("expertMode")==="true";R.expertMode=z,zr.forEach(Y=>{if(Y.key in R&&!(Y.key!=="expertMode"&&Y.expert&&!z))if(Y.type==="checkbox")R[Y.key]=O.get(Y.key)==="on";else if(Y.type==="date")R[Y.key]=O.get(Y.key)||R[Y.key];else if(Y.type==="select"){const te=O.get(Y.key),V=ca(Y,R[Y.key]),X=typeof te=="string"&&te.length>0?te:V;R[Y.key]=Cc(Y,X)}else{const te=O.get(Y.key),V=Number(te);Number.isFinite(V)&&(R[Y.key]=V)}});let j=Ir("dateStart",R.dateStart,H.dateStart,H.dateEnd,t);j=Ir("dateEnd",R.dateEnd,j.dateStart,j.dateEnd,t),R.dateStart=j.dateStart,R.dateEnd=j.dateEnd,Qu(R),tc(z),e.syncDateInputs(),fn(Ge()),i==null||i(Qn()),u()}),{focusTarget:c.querySelector("input")??x}}})}return{openRoutingParameters:a}}function Ec(n,t,e){if(n.type==="checkbox"){const r=document.createElement("input");return r.type="checkbox",r.name=n.key,r.id=n.key,r.checked=!!t,r}if(n.type==="select"){const r=document.createElement("select");r.name=n.key,r.id=n.key;const a=ca(n,t);return(n.options??[]).forEach(o=>{const s=document.createElement("option"),l=Ss(o.value);s.value=l,s.textContent=o.labelKey?F(o.labelKey):o.label??o.value,l===a&&(s.selected=!0),r.appendChild(s)}),r.value=a,r}const i=document.createElement("input");return i.type=n.type==="date"?"text":n.type??"number",i.name=n.key,i.id=n.key,n.min!=null&&(i.min=String(n.min)),n.step!=null&&(i.step=String(n.step)),i.value=t??"",n.type==="date"&&(i.dataset.datePicker="true",gc(i,e)),i}function Tc(n,t){zr.forEach(e=>{if(!(e.key in t))return;const i=n.elements[e.key];i&&(e.type==="checkbox"?i.checked=!!t[e.key]:e.type==="select"?i.value=ca(e,t[e.key]):e.type==="date"?ti(i,t[e.key]??""):i.value=t[e.key]??"")})}function eo(n,t){n&&(n.hidden=!t,n.style.display=t?"":"none")}function ca(n,t){var i,r;if((n==null?void 0:n.valueType)==="boolean")return t?"true":"false";if(typeof t=="number")return String(t);if(typeof t=="string"&&t.length>0)return t;const e=(r=(i=n==null?void 0:n.options)==null?void 0:i[0])==null?void 0:r.value;return Ss(e)}function Cc(n,t){return(n==null?void 0:n.valueType)==="boolean"?t==="true":t}function Ss(n){return typeof n=="boolean"?n?"true":"false":typeof n=="number"?String(n):typeof n=="string"?n:""}const jn="team-logo";let ln;function Br({team:n,variant:t="default",altText:e="",loading:i="lazy"}={}){var c;if(!n)return"";const r=Ur(e||n.team_name||""),a=Nc(),o=(c=a==null?void 0:a.content)==null?void 0:c.firstElementChild;if(!o)return Dc({team:n,variant:t,altText:r,loading:i});const s=o.cloneNode(!0);s.classList.add("helmet",`helmet-${t}`),s.setAttribute("role","img"),s.setAttribute("focusable","false"),s.setAttribute("aria-label",r);const l=Lc(n),u=Ac(l);return`<span class="${jn} ${jn}-${t}"${u}>${s.outerHTML}</span>`}function Dc({team:n,variant:t,altText:e,loading:i}){if(!(n!=null&&n.team_logo_squared))return"";const r=[`src="${Ur(n.team_logo_squared)}"`,`alt="${e}"`];return i&&r.push(`loading="${Ur(i)}"`),`<span class="${jn} ${jn}-${t} ${jn}-image"><img ${r.join(" ")} /></span>`}function Ac(n){const t=[];return n.shell&&t.push(`--helmet-shell:${n.shell}`),n.mask&&t.push(`--helmet-mask:${n.mask}`),n.logo&&t.push(`--helmet-logo:${n.logo}`),t.length?` style="${t.join("; ")}"`:""}function Nc(){return ln!==void 0?ln:typeof document>"u"?(ln=null,ln):(ln=document.getElementById("helmet-template"),ln)}function Lc(n){return{shell:pr((n==null?void 0:n.color_helmet_shell)??(n==null?void 0:n.color_helmet_logo)??(n==null?void 0:n.color_helmet_mask)),logo:pr((n==null?void 0:n.color_helmet_logo)??(n==null?void 0:n.color_helmet_shell)??(n==null?void 0:n.color_helmet_mask)),mask:pr((n==null?void 0:n.color_helmet_mask)??(n==null?void 0:n.color_helmet_shell))}}function pr(n){if(!n)return"";const t=String(n).trim();return t&&/^#?[0-9a-fA-F]{3,8}$/.test(t)?t.startsWith("#")?t:`#${t}`:""}function Ur(n){return n==null?"":String(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}const Fc="team-preferences-dialog";function Mc({dialogKit:n,teamLookup:t,stadiumLookup:e,openHelpTopic:i}){function r(){const a=Object.entries(Ui()).sort(([o],[s])=>o.localeCompare(s,"en-US"));n.open({title:F("dialog.teamPreferences.title"),size:"large",id:Fc,build({body:o,actions:s,close:l}){const u=document.createElement("form");u.className="preference-form";const c=document.createElement("div");c.className="preference-grid team-grid",a.forEach(([y,E])=>{const _=document.createElement("div");_.className="preference-item team-item";const v=String(y).toUpperCase(),w=t.get(v),N=Yu(y,t),k=w!=null&&w.stadium_id&&e.has(w.stadium_id)?e.get(w.stadium_id):Ku(v),x=document.createElement("div");x.className="item-header";const T=Br({team:w,variant:"default",altText:F("aria.teamLogo",{team:N})});T&&x.insertAdjacentHTML("beforeend",T);const M=document.createElement("div");M.className="item-text";const L=document.createElement("strong");L.textContent=N;const O=document.createElement("span");O.textContent=(k==null?void 0:k.stadium)??F("label.unknownStadium");const H=document.createElement("span");H.className="item-city",H.textContent=(k==null?void 0:k.location_name)??F("label.unknownCity"),M.append(L,O,H),x.appendChild(M);const{wrapper:R,input:z}=_s({id:`team-weight-${y}`,name:y,value:E,isExpertMode:Qn()}),j=ks(_,z);_.append(x,R),c.appendChild(_),j!=null&&j.applyState&&(z._applyPreferenceState=j.applyState)}),u.appendChild(c),o.appendChild(u);const d=document.createElement("button");d.type="button",d.textContent=F("button.cancel"),d.classList.add("btn","btn-text","btn-muted"),d.addEventListener("click",l);const h=ys({form:u,entries:a,getDefaults:()=>zt(us),onRestore:()=>{u.querySelectorAll("input").forEach(y=>{typeof y._applyPreferenceState=="function"&&y._applyPreferenceState()})}}),f=ii({topicId:"help-dialog-team-preferences",openHelpTopic:i}),p=document.createElement("button");return p.type="button",p.textContent=F("button.save"),p.classList.add("btn","btn-text","btn-primary"),s.append(h,f,d,p),p.addEventListener("click",()=>{u.requestSubmit()}),u.addEventListener("submit",y=>{y.preventDefault();const E=new FormData(u),_=zt(Ui());a.forEach(([w])=>{const N=E.get(w),k=Number(N);_[w]=Number.isFinite(k)&&k>=0?k:0});const v=Ju(_);ws(Mt.teamWeights,v),l()}),{focusTarget:u.querySelector("input")??p}}})}return{openTeamPreferences:r}}function to(n){if(!Number.isFinite(n)||n<0)return null;const t=Math.floor(n/1e3),e=t%60,i=Math.floor(t/60)%60,r=Math.floor(t/3600)%24,a=Math.floor(t/86400);return a>0?`${a}d ${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`:r>0?`${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`:i>0||e>0?`${String(i).padStart(2,"0")}:${String(e).padStart(2,"0")}`:`${n.toFixed(0)} ms`}function Rc(n){if(!Number.isFinite(n)||n<=0)return null;const t=n/1e3;if(t<60)return`${Math.round(t)}s`;if(t<3600){const r=Math.floor(t/60),a=Math.round(t%60);return a>0?`${r}m ${a}s`:`${r}m`}if(t<86400){const r=Math.floor(t/3600),a=Math.round(t%3600/60);return a>0?`${r}h ${a}m`:`${r}h`}const e=Math.floor(t/86400),i=Math.round(t%86400/3600);return i>0?`${e}d ${i}h`:`${e}d`}function Pc(n){return!Number.isFinite(n)||n<=0?null:`${Math.round(n).toLocaleString()} km`}function Ic(n){return!Number.isFinite(n)||n<=0?null:Math.max(Math.round(n*100).toFixed(0),1)}function Oc(n){return!Number.isFinite(n)||n<0?null:n>=1e9?`${(n/1e9).toFixed(1)}B`:n>=1e6?`${(n/1e6).toFixed(1)}M`:n>=1e3?`${(n/1e3).toFixed(1)}K`:n.toLocaleString()}function xs(n){return!Number.isFinite(n)||n<=0?"0":String(Math.floor(n*100))}function Es(n){if(!Number.isFinite(n)||n<=0)return F("label.durationZeroHours");const t=Math.ceil(n/(60*60*1e3)/24),e=Math.max(Math.round(t),1);return F("label.durationDays",{count:e})}function Ts(n,t){return n===t?F("label.routeWeekSingle",{week:n}):F("label.routeWeeksRange",{start:n,end:t})}function $c(n){const t=(n==null?void 0:n.attributes)??{},e=t.game_id??(n==null?void 0:n.id)??`${t.away_team??"?"}-${t.home_team??"?"}`,i=t.gamedateTimestamp??t.gamedate??"";return`${e}::${i}`}function Cs(n){const t=Array.isArray(n==null?void 0:n.nodes)?n.nodes:[];return t.length===0?"":t.map(e=>$c(e)).join(">")}function Hr(n){return(Array.isArray(n==null?void 0:n.nodes)?n.nodes:Array.isArray(n)?n:[]).map(e=>({id:(e==null?void 0:e.id)??null,attributes:{...(e==null?void 0:e.attributes)??{}}}))}function Gc(n){return Array.isArray(n)?n.map(t=>({gameId:typeof(t==null?void 0:t.nodeKey)=="string"?t.nodeKey:null,score:Number.isFinite(t==null?void 0:t.score)?t.score:null,travelDurationMs:Number.isFinite(t==null?void 0:t.travelDurationMs)?t.travelDurationMs:null,travelDistanceKm:Number.isFinite(t==null?void 0:t.travelDistanceKm)?t.travelDistanceKm:null,isFlight:(t==null?void 0:t.isFlight)===!0})):[]}function zc(n){return{nodes:Hr(n),score:Number.isFinite(n==null?void 0:n.score)?n.score:null,totalDurationMs:Number.isFinite(n==null?void 0:n.totalDurationMs)?n.totalDurationMs:null,totalDurationDays:Number.isFinite(n==null?void 0:n.totalDurationDays)?n.totalDurationDays:null,routeTitle:typeof(n==null?void 0:n.routeTitle)=="string"?n.routeTitle:null,nodeMetrics:Gc(n==null?void 0:n.nodeMetrics)}}const Bc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Uc={amp:"&",lt:"<",gt:">",quot:'"',"#39":"'"},Hc=/[&<>"']/g,Wc=/&(amp|lt|gt|quot|#39);/g;function Vn(n){return n==null?"":String(n).replace(Hc,t=>Bc[t]??t)}function da(n){return n==null?"":String(n).replace(Wc,(t,e)=>Uc[e]??t)}function $t(n){return typeof n!="string"?"":Vn(da(n))}function jc(){let n=Vc();const t=new Set;function e(){const f=i();t.forEach(p=>p(f))}function i(){return n.map(f=>{var y,E;const p=typeof((y=f.route)==null?void 0:y.routeTitle)=="string"&&f.route.routeTitle.trim().length>0?$t(f.route.routeTitle.trim()):null,b={...f.route??{},nodes:Hr(((E=f.route)==null?void 0:E.nodes)??f.route)};return p?b.routeTitle=p:delete b.routeTitle,{routeId:f.routeId,addedAt:f.addedAt,route:b}})}function r(f){return n.some(p=>p.routeId===f)}function a(f){const p=Cs(f);if(!p||r(p))return{added:!1,routeId:p};const b={routeId:p,addedAt:Date.now(),route:zc(f)};return n=[...n,b],un(n),e(),{added:!0,entry:b}}function o(f){const p=n.filter(y=>y.routeId!==f),b=p.length!==n.length;return b&&(n=p,un(n),e()),b}function s(f,p){const b=n.findIndex(v=>v.routeId===f);if(b===-1)return!1;const y=p==="up"?b-1:b+1;if(y<0||y>=n.length)return!1;const E=[...n],[_]=E.splice(b,1);return E.splice(y,0,_),n=E,un(n),e(),!0}function l(){n=[],un(n),e()}function u(f,p){var x;if(!f)return!1;const b=n.findIndex(T=>T.routeId===f);if(b===-1)return!1;const y=typeof p=="string"?p.trim():"",E=y.length>0?$t(y):null,_=n[b],v=typeof((x=_==null?void 0:_.route)==null?void 0:x.routeTitle)=="string"?_.route.routeTitle:null;if((v&&v.trim().length>0?$t(v):null)===E)return!1;const N={..._.route??{}};E?N.routeTitle=E:delete N.routeTitle;const k=[...n];return k[b]={..._,route:N},n=k,un(n),e(),!0}function c(){const f={version:1,generatedAt:new Date().toISOString(),favorites:n};return JSON.stringify(f,null,2)}function d(f){if(!f||typeof f!="object")throw new Error("invalidPayload");const p=Array.isArray(f.favorites)?f.favorites:[];let b=0,y=0;const E=[...n];return p.forEach(_=>{var T,M,L;const v=typeof(_==null?void 0:_.routeId)=="string"?_.routeId:null,w=Array.isArray((T=_==null?void 0:_.route)==null?void 0:T.nodes)?_.route.nodes:[];if(!v||w.length===0||E.some(O=>O.routeId===v)){y+=1;return}const N=typeof((M=_==null?void 0:_.route)==null?void 0:M.routeTitle)=="string"&&_.route.routeTitle.trim().length>0?$t(_.route.routeTitle.trim()):null,k=Hr(((L=_.route)==null?void 0:L.nodes)??_.route).map(O=>{const H={...(O==null?void 0:O.attributes)??{}};return typeof H.stadium=="string"&&H.stadium.trim().length>0&&(H.stadium=$t(H.stadium.trim())),{...O,attributes:H}}),x={..._.route??{},nodes:k};N?x.routeTitle=N:delete x.routeTitle,E.push({routeId:v,addedAt:Number.isFinite(_==null?void 0:_.addedAt)?_.addedAt:Date.now(),route:x}),b+=1}),n=E,un(n),e(),{added:b,skipped:y}}function h(f){return t.add(f),()=>{t.delete(f)}}return{addFavorite:a,removeFavorite:o,moveFavoriteUp:f=>s(f,"up"),moveFavoriteDown:f=>s(f,"down"),clearFavorites:l,updateFavoriteTitle:u,getFavorites:i,isFavorite:r,exportFavorites:c,importFavorites:d,subscribe:h}}function Vc(){if(typeof window>"u"||!window.localStorage)return[];try{const n=window.localStorage.getItem(Mt.favorites);if(!n)return[];const t=JSON.parse(n);return Array.isArray(t)?t:[]}catch{return[]}}function un(n){if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(Mt.favorites,JSON.stringify(n))}catch{}}function Kc(n,t,e="text/plain"){const i=new Blob([t],{type:e}),r=URL.createObjectURL(i),a=document.createElement("a");a.href=r,a.download=n,a.style.display="none",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(r)}function Ds({node:n,index:t,stadiumLookup:e,teamLookup:i,metric:r}={}){const a=(n==null?void 0:n.attributes)??{},o=a.stadium_id?e.get(a.stadium_id):null,s=a.stadium??(o==null?void 0:o.stadium)??a.stadium_id??F("label.stadiumTbd"),l=o!=null&&o.location_name?`  ${o.location_name}`:"",u=os(a,e),c=Number.isFinite(a.week)?F("label.weekNumber",{week:a.week}):F("label.weekUnknown"),d=a.game_label&&String(a.game_label).trim().length>0?a.game_label:"",h=a.home_team?i.get(String(a.home_team).toUpperCase()):null,f=a.away_team?i.get(String(a.away_team).toUpperCase()):null,p=(h==null?void 0:h.team_name)??a.home_team??F("label.homeTeamFallback"),b=(f==null?void 0:f.team_name)??a.away_team??F("label.awayTeamFallback"),y=Br({team:h,variant:"home",altText:F("aria.teamLogo",{team:p})}),E=Br({team:f,variant:"away",altText:F("aria.teamLogo",{team:b})}),_=Ic(r==null?void 0:r.score),v=Number.isFinite(r==null?void 0:r.travelDurationMs)&&!(r!=null&&r.isFlight)&&r.travelDurationMs>0?Rc(r.travelDurationMs):null,w=Number.isFinite(r==null?void 0:r.travelDistanceKm)&&r.travelDistanceKm>0?Pc(r.travelDistanceKm):null,N=r!=null&&r.isFlight?"":"",k=[];_&&k.push(`<span class="game-card-score">${F("label.routeScore")}: ${_}</span>`);const x=[];if(v&&x.push(`<span class="game-card-travel-time">${F("label.travelTime")}: ${v}</span>`),w){const M=`${w} ${N}`;x.push(`<span class="game-card-travel-distance">${F("label.travelDistance")}: ${M}</span>`)}x.length>0&&k.push(`<span class="game-card-travel">${x.join("  ")}</span>`);const T=k.length>0?`<div class="game-card-meta">${k.join("")}</div>`:"";return`
    <li class="game-card">
      <div class="game-card-header">
        <span class="game-card-order">${t+1}</span>
        <span class="game-card-week">${c}</span>
        ${d?`<span class="game-card-tag">${d}</span>`:""}
        <span class="game-card-kickoff">${u}</span>
      </div>
      <div class="game-card-matchup">
        <div class="route-team route-team-away">
          ${E}
          <span class="route-team-name">${b}</span>
        </div>
        <span class="game-card-at">@</span>
        <div class="route-team route-team-home">
          ${y}
          <span class="route-team-name">${p}</span>
        </div>
      </div>
      <div class="game-card-location">${s}${l}</div>
      ${T}
    </li>
  `}const br=new Map,Wr=4;function Yc({ui:n,stadiumLookup:t,teamLookup:e,favoritesManager:i}){let r=[],a={elapsedMs:0},o=null,s=null,l=F("message.routesAwaitingSearch"),u=new Set,c=new Map,d=new Map,h=!1,f=null;const p=n.routesPanel??null;i&&(L(i.getFavorites()??[]),i.subscribe(R=>{L(R),x(r,{emptyMessage:l,force:!0})})),n.routesElement&&n.routesElement.addEventListener("click",R=>{const z=R.target.closest('button[data-action="favorite-toggle"]');if(!z||!i)return;const j=z.dataset.routeId;if(j){if(R.preventDefault(),u.has(j)){f?f(j):i.removeFavorite(j);return}d.has(j)&&i.addFavorite(d.get(j))}}),Wt(()=>{s?k({...s}):x(r,{emptyMessage:F("message.routesAwaitingSearch"),force:!0})});function b(){p&&p.classList.add("routes-panel-inactive")}function y(){p&&p.classList.remove("routes-panel-inactive")}function E(){if(h){y();return}h=!0,y()}function _(){h=!1,b(),x([],{emptyMessage:F("message.routesAwaitingSearch")}),k({evaluatedRoutes:0,bestRoutes:[],elapsedMs:0,totalStartNodes:0,startNodesProcessed:0,remainingStartNodes:0,estimatedRemainingMs:null,isComplete:!1})}function v(){E(),r=[],a={elapsedMs:0},o=null,k({evaluatedRoutes:0,bestRoutes:[],elapsedMs:0,totalStartNodes:0,startNodesProcessed:0,remainingStartNodes:0,estimatedRemainingMs:null,isComplete:!1})}function w(R,z){r=Array.isArray(R)?R:[],a={elapsedMs:(z==null?void 0:z.elapsedMs)??0}}function N(){x(r,{emptyMessage:l,force:!0})}function k({evaluatedRoutes:R,bestRoutes:z=[],elapsedMs:j=0,totalStartNodes:Y,startNodesProcessed:te=0,remainingStartNodes:V,estimatedRemainingMs:X,isComplete:ne=!1,aborted:re=!1}){if(w(z,{elapsedMs:j}),s={evaluatedRoutes:R,bestRoutes:z,elapsedMs:j,totalStartNodes:Y,startNodesProcessed:te,remainingStartNodes:V,estimatedRemainingMs:X,isComplete:ne,aborted:re},n.routesProgressElement){const de=to(j)??"00:00",_e=Oc(R)??"0",me=Number.isFinite(Y)&&Y>0?Y:null,Te=Number.isFinite(te)?te+(ne?0:1):0,Se=me!=null?Math.min(Te,me):Te,Ce=ne?null:to(X);let ke=`
          <div class="log-item log-elapsed">
            <span class="log-label">${F("log.elapsed")}</span>
            <span class="log-data">${de}</span>
          </div>
          <div class="log-item log-progress">
            <span class="log-label">${F("log.progress")}</span>
            <span class="log-data">${Se} / ${me}</span>
          </div>
          <div class="log-item log-evaluated">
            <span class="log-label">${F("log.evaluated")}</span>
            <span class="log-data">${_e!="0"?_e:"..."}</span>
          </div>
      `;ne||(ke=`
            ${ke}
            <div class="log-item log-remaining">
              <span class="log-label">${F("log.remaining")}</span>
              <span class="log-data">${Ce||"..."}</span>
            </div>
        `),ke=`
        <div class="log-display log-${ne?"finished":"running"}">${ke}</div>
      `,n.routesProgressElement.innerHTML=ke}const Le=F(ne?"message.routesEmpty":"message.calculatingRoutes");x(r,{emptyMessage:Le,force:ne})}function x(R,{emptyMessage:z,force:j=!1}={}){if(!n.routesElement)return;if(!R||R.length===0){const X=z??F("message.routesEmpty");l=X,d=new Map,n.routesElement.innerHTML=`<p class="empty-state">${X}</p>`;return}z&&(l=z);const Y=qc(R);if(!j&&Y===o)return;o=Y;const te=new Map,V=R.map((X,ne)=>{const re=X&&typeof X=="object"?X:{},Le=(re==null?void 0:re.nodes)??[],de=Cs(re),_e=H({routeData:re,games:Le,routeId:de}),me={...re,routeTitle:_e};return de&&te.set(de,me),T(me,ne,de)}).join("");d=te,n.routesElement.innerHTML=V}function T(R,z,j){var Ce,ke;const Y=(R==null?void 0:R.nodes)??[],te=Array.isArray(R==null?void 0:R.nodeMetrics)?R.nodeMetrics:[],V=((Ce=Y[0])==null?void 0:Ce.attributes)??{},X=((ke=Y[Y.length-1])==null?void 0:ke.attributes)??V,ne=Es((R==null?void 0:R.totalDurationMs)??0),re=Number.isFinite(V==null?void 0:V.week)?V.week:"?",Le=Number.isFinite(X==null?void 0:X.week)?X.week:re,de=Ts(re,Le),_e=F("label.routeLength",{count:Y.length}),me=H({routeData:R,games:Y,routeId:j}),Te=Y.map((tt,nt)=>Ds({node:tt,index:nt,stadiumLookup:t,teamLookup:e,metric:te[nt]})).join(""),Se=M(j);return`
      <article class="route-card">
        <header class="route-card-header">
          <h3 class="route-title">${me}</h3>
          <div class="route-card-items">
            <span class="route-rank">#${z+1}</span>
            <span class="route-length">${_e}</span>
            <div class="route-score">
              <span class="route-score-label">${F("label.routeScore")}</span>
              <span class="route-score-value">${xs((R==null?void 0:R.score)??0)}</span>
            </div>
            ${Se}
          </div>
        </header>
        <div class="route-meta">${ne}  ${de}</div>
        <ol class="game-card-list">${Te}</ol>
      </article>
    `}function M(R){if(!i||!R)return"";const z=u.has(R),j=F(z?"button.removeFavorite":"button.addFavorite");return`
      <div class="route-favorite">
        <button
          type="button"
          class="btn btn-icon favorite-toggle ${z?"is-favorite":""}"
          data-action="favorite-toggle"
          data-route-id="${R}"
          aria-label="${j}"
          title="${j}"
        >${z?"":""}</button>
      </div>
    `}function L(R=[]){u=new Set(R.map(z=>z.routeId).filter(Boolean)),c=new Map(R.filter(z=>z==null?void 0:z.routeId).map(z=>[z.routeId,z.route??{}]))}function O(R){var j;if(!R||!c.has(R))return null;const z=(j=c.get(R))==null?void 0:j.routeTitle;return typeof z=="string"&&z.trim().length>0?z:null}function H({routeData:R,games:z,routeId:j}){const Y=j?O(j):null;if(Y&&Y.trim().length>0)return $t(Y);const te=typeof(R==null?void 0:R.routeTitle)=="string"?R.routeTitle.trim():"";return te.length>0?$t(te):Vn(As({games:z,stadiumLookup:t,routeId:j}))}return{initialize:_,reset:v,setRoutes:w,showProgress:k,refresh:N,getRoutes:()=>r,getMetadata:()=>a,setFavoriteRemovalHandler:R=>{f=typeof R=="function"?R:null}}}function qc(n){return!Array.isArray(n)||n.length===0?"__EMPTY__":n.map(t=>{var o,s,l,u,c;const e=((s=(o=t==null?void 0:t.nodes)==null?void 0:o[0])==null?void 0:s.id)??"",i=((u=(l=t==null?void 0:t.nodes)==null?void 0:l[t.nodes.length-1])==null?void 0:u.id)??"",r=Number.isFinite(t==null?void 0:t.score)?t.score:0,a=Number.isFinite(t==null?void 0:t.totalDurationMs)?t.totalDurationMs:0;return`${e}-${i}-${((c=t==null?void 0:t.nodes)==null?void 0:c.length)??0}-${r.toFixed(4)}-${a}`}).join("|")}function As({games:n=[],stadiumLookup:t,routeId:e}){const i=Zc(n,t);if(i.length===0)return F("label.unknownCity");const r=i[0];if(i.length===1)return F("label.routeTitle.single",{firstCity:r});const a=i[i.length-1]??r;if(i.length===2)return F("label.routeTitle.range",{firstCity:r,lastCity:a});const o=i.slice(1,-1);if(o.length<=Wr){const h=no(o);return F("label.routeTitle.via",{firstCity:r,lastCity:a,viaList:h})}const s=Math.max(Wr-1,1),l=Xc(o,e??`${r}-${a}-${i.length}`,s),u=no(l,{includeConjunction:!1}),c=Math.max(o.length-l.length,0),d=F("label.routeTitle.remaining",{count:c});return F("label.routeTitle.viaOverflow",{firstCity:r,lastCity:a,viaList:u,remainingLabel:d})}function Zc(n=[],t){return n.map(e=>{const i=(e==null?void 0:e.attributes)??{},r=i.stadium_id&&(t!=null&&t.get)?t.get(i.stadium_id):null,a=(r==null?void 0:r.city_name)??i.city_name??i.location_city??i.city??null,o=typeof a=="string"?a.trim():"";return o.length>0?o:F("label.unknownCity")})}function no(n,{includeConjunction:t=!0}={}){if(!Array.isArray(n)||n.length===0)return"";const e=ct();if(t){const i=Jc(e);if(i)return i.format(n)}return n.join(", ")}function Jc(n){if(!n)return null;if(br.has(n))return br.get(n);if(typeof Intl>"u"||typeof Intl.ListFormat>"u")return null;const t=new Intl.ListFormat(n,{style:"long",type:"conjunction"});return br.set(n,t),t}function Xc(n,t="",e=Wr){if(!Array.isArray(n)||n.length===0)return[];const i=Math.min(Math.max(e,1),n.length);if(n.length<=i)return[...n];const r=Qc(t),a=new Set;for(;a.size<i;){const o=Math.floor(r()*n.length);a.add(Math.min(Math.max(o,0),n.length-1))}return Array.from(a).sort((o,s)=>o-s).map(o=>n[o])}function Qc(n=""){let t=0;const e=typeof n=="string"&&n.length>0?n:"route-title";for(let i=0;i<e.length;i+=1)t=t*31+e.charCodeAt(i)>>>0;return t===0&&(t=439041101),function(){t+=1831565813;let r=t;return r=Math.imul(r^r>>>15,r|1),r^=r+Math.imul(r^r>>>7,r|61),((r^r>>>14)>>>0)/4294967296}}const ed="favorites-dialog";function td({dialogKit:n,favoritesManager:t,stadiumLookup:e,teamLookup:i,openHelpTopic:r,onDialogClose:a}){const o=c=>{c&&n.open({title:F("dialog.favorites.removeConfirmTitle"),size:"small",build({body:d,actions:h,close:f}){const p=document.createElement("p");p.textContent=F("message.favoritesRemoveConfirm"),d.appendChild(p);const b=document.createElement("button");b.type="button",b.textContent=F("button.cancel"),b.classList.add("btn","btn-text","btn-muted"),b.addEventListener("click",f);const y=document.createElement("button");return y.type="button",y.textContent=F("button.remove"),y.classList.add("btn","btn-text","btn-muted"),y.addEventListener("click",()=>{t.removeFavorite(c),f()}),h.append(b,y),{focusTarget:y}}})};function s(){let c=null;return n.open({title:F("dialog.favorites.title"),size:"large",id:ed,onClose:()=>{c==null||c(),a==null||a()},build({body:h,actions:f,close:p}){const b=document.createElement("div");b.className="favorites-list";const y=document.createElement("div");y.className="favorites-control-bar";const E=document.createElement("button");E.type="button",E.textContent=F("button.importFavorites"),E.classList.add("btn","btn-text","btn-muted");const _=document.createElement("button");_.type="button",_.textContent=F("button.exportFavorites"),_.classList.add("btn","btn-text","btn-muted"),y.append(E,_);const v=document.createElement("input");v.type="file",v.accept="application/json",v.hidden=!0,h.append(b,v);const w=document.createElement("button");w.type="button",w.textContent=F("button.close"),w.classList.add("btn","btn-text","btn-primary"),w.addEventListener("click",p);const N=ii({topicId:"help-dialog-favorites",openHelpTopic:r});f.append(y,N,w);const k=()=>{const x=t.getFavorites();if(b.innerHTML="",!x.length){const T=document.createElement("p");T.className="empty-state",T.textContent=F("message.favoritesEmpty"),b.appendChild(T);return}x.forEach((T,M)=>{var me,Te,Se,Ce,ke,tt;const L=document.createElement("article");L.className="route-card favorite-card",L.dataset.routeId=T.routeId;const O=((me=T.route)==null?void 0:me.nodes)??[],H=Array.isArray((Te=T.route)==null?void 0:Te.nodeMetrics)?T.route.nodeMetrics:[],R=((Se=O[0])==null?void 0:Se.attributes)??{},z=((Ce=O[O.length-1])==null?void 0:Ce.attributes)??R,j=Es(((ke=T.route)==null?void 0:ke.totalDurationMs)??0),Y=Number.isFinite(R==null?void 0:R.week)?R.week:"?",te=Number.isFinite(z==null?void 0:z.week)?z.week:Y,V=Ts(Y,te),X=F("label.routeLength",{count:O.length}),ne=Vn(vr(T,e)),re=O.map((nt,ht)=>Ds({node:nt,index:ht,stadiumLookup:e,teamLookup:i,metric:H[ht]})).join(""),Le=M>0?`<button type="button" class="btn btn-icon favorite-move" data-action="favorite-move-up" data-route-id="${T.routeId}" aria-label="${F("button.moveUp")}" title="${F("button.moveUp")}"></button>`:"",de=M<x.length-1?`<button type="button" class="btn btn-icon favorite-move" data-action="favorite-move-down" data-route-id="${T.routeId}" aria-label="${F("button.moveDown")}" title="${F("button.moveDown")}"></button>`:"";L.innerHTML=`
              <header class="route-card-header">
                <h3 class="route-title">${ne}</h3>
                <div class="route-card-items">
                  <span class="route-length">${X}</span>
                  <div class="route-score">
                    <span class="route-score-label">${F("label.routeScore")}</span>
                    <span class="route-score-value">${xs(((tt=T.route)==null?void 0:tt.score)??0)}</span>
                  </div>
                  <div class="favorite-card-actions">
                    ${Le}
                    ${de}
                    <button type="button" class="btn btn-icon favorite-remove" data-action="favorite-remove" data-route-id="${T.routeId}" aria-label="${F("button.removeFavorite")}" title="${F("button.removeFavorite")}"></button>
                  </div>                  
                </div>
              </header>
              <div class="route-meta">${j}  ${V}</div>
              <ol class="game-card-list">${re}</ol>
            `,b.appendChild(L);const _e=L.querySelector(".route-title");u({titleElement:_e,entry:T})})};return b.addEventListener("click",x=>{const T=x.target.closest("button[data-action]");if(!T)return;const M=T.dataset.routeId,L=T.dataset.action;M&&(L==="favorite-remove"?o(M):L==="favorite-move-up"?t.moveFavoriteUp(M):L==="favorite-move-down"&&t.moveFavoriteDown(M))}),_.addEventListener("click",()=>{const x=t.exportFavorites(),T=`pro-football-tours-${new Date().toISOString().replace(/[:.]/g,"-")}.json`;Kc(T,x,"application/json")}),E.addEventListener("click",()=>{v.value="",v.click()}),v.addEventListener("change",async x=>{var M;const T=(M=x.target.files)==null?void 0:M[0];if(T)try{const L=await T.text(),O=JSON.parse(L),H=t.importFavorites(O);l("message.favoritesImportSummary",{added:H.added,skipped:H.skipped})}catch{l("error.favoritesImportInvalid")}}),k(),c=t.subscribe(k),{focusTarget:b}}})}function l(c,d){n.open({title:F("dialog.favorites.importStatusTitle"),size:"small",build({body:h,actions:f,close:p}){const b=document.createElement("p");b.textContent=F(c,d??{}),h.appendChild(b);const y=document.createElement("button");return y.type="button",y.textContent=F("button.close"),y.classList.add("btn","btn-text","btn-primary"),y.addEventListener("click",p),f.append(y),{focusTarget:y}}})}return{openFavorites:s,confirmFavoriteRemoval:o};function u({titleElement:c,entry:d}){if(!c||!(d!=null&&d.routeId))return;c.classList.add("route-title-editable"),c.setAttribute("tabindex","0");const h=p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),f())},f=()=>{var N;const b=(typeof((N=d==null?void 0:d.route)==null?void 0:N.routeTitle)=="string"&&d.route.routeTitle.trim().length>0?da(d.route.routeTitle):null)??c.textContent??"",{height:y}=c.getBoundingClientRect(),E=document.createElement("textarea");E.value=b,E.className="route-title route-title-input",Number.isFinite(y)&&y>0&&E.style.setProperty("--route-title-input-height",`${y}px`),E.setAttribute("aria-label",F("label.editRouteTitle")),c.replaceWith(E),E.focus(),E.select();const _=(k,{restoreFocus:x=!0}={})=>{E.removeEventListener("blur",v),E.removeEventListener("keydown",w);const T=E.value.trim(),M=T.length>0?T:null,L=M?Vn(M):null;k&&(d.route||(d.route={}),L?d.route.routeTitle=L:delete d.route.routeTitle);const O=k?M??vr(d,e):vr(d,e),H=document.createElement("h3");H.className="route-title",H.innerHTML=Vn(O),E.replaceWith(H),u({titleElement:H,entry:d}),x&&H.focus(),k&&t.updateFavoriteTitle(d.routeId,L)},v=()=>_(!0,{restoreFocus:!1}),w=k=>{k.key==="Enter"?(k.preventDefault(),_(!0,{restoreFocus:!0})):k.key==="Escape"&&(k.preventDefault(),_(!1,{restoreFocus:!0}))};E.addEventListener("blur",v),E.addEventListener("keydown",w)};c.addEventListener("click",f),c.addEventListener("keydown",h)}}function vr(n,t){var r,a;const e=(r=n==null?void 0:n.route)==null?void 0:r.routeTitle;if(typeof e=="string"&&e.trim().length>0)return da(e);const i=((a=n==null?void 0:n.route)==null?void 0:a.nodes)??[];return As({games:i,stadiumLookup:t,routeId:n==null?void 0:n.routeId})}function ha(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let jt=ha();function Ns(n){jt=n}const Ls=/[&<>"']/,nd=new RegExp(Ls.source,"g"),Fs=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,id=new RegExp(Fs.source,"g"),rd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},io=n=>rd[n];function We(n,t){if(t){if(Ls.test(n))return n.replace(nd,io)}else if(Fs.test(n))return n.replace(id,io);return n}const ad=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function od(n){return n.replace(ad,(t,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const sd=/(^|[^\[])\^/g;function le(n,t){let e=typeof n=="string"?n:n.source;t=t||"";const i={replace:(r,a)=>{let o=typeof a=="string"?a:a.source;return o=o.replace(sd,"$1"),e=e.replace(r,o),i},getRegex:()=>new RegExp(e,t)};return i}function ro(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const Kn={exec:()=>null};function ao(n,t){const e=n.replace(/\|/g,(a,o,s)=>{let l=!1,u=o;for(;--u>=0&&s[u]==="\\";)l=!l;return l?"|":" |"}),i=e.split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function _i(n,t,e){const i=n.length;if(i===0)return"";let r=0;for(;r<i&&n.charAt(i-r-1)===t;)r++;return n.slice(0,i-r)}function ld(n,t){if(n.indexOf(t[1])===-1)return-1;let e=0;for(let i=0;i<n.length;i++)if(n[i]==="\\")i++;else if(n[i]===t[0])e++;else if(n[i]===t[1]&&(e--,e<0))return i;return-1}function oo(n,t,e,i){const r=t.href,a=t.title?We(t.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){i.state.inLink=!0;const s={type:"link",raw:e,href:r,title:a,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,s}return{type:"image",raw:e,href:r,title:a,text:We(o)}}function ud(n,t){const e=n.match(/^(\s+)(?:```)/);if(e===null)return t;const i=e[1];return t.split(`
`).map(r=>{const a=r.match(/^\s+/);if(a===null)return r;const[o]=a;return o.length>=i.length?r.slice(i.length):r}).join(`
`)}class ji{constructor(t){ge(this,"options");ge(this,"rules");ge(this,"lexer");this.options=t||jt}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const i=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?i:_i(i,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const i=e[0],r=ud(i,e[3]||"");return{type:"code",raw:i,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let i=e[2].trim();if(/#$/.test(i)){const r=_i(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let i=e[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);i=_i(i.replace(/^ *>[ \t]?/gm,""),`
`);const r=this.lexer.state.top;this.lexer.state.top=!0;const a=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:e[0],tokens:a,text:i}}}list(t){let e=this.rules.block.list.exec(t);if(e){let i=e[1].trim();const r=i.length>1,a={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const o=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let s="",l="",u=!1;for(;t;){let c=!1;if(!(e=o.exec(t))||this.rules.block.hr.test(t))break;s=e[0],t=t.substring(s.length);let d=e[2].split(`
`,1)[0].replace(/^\t+/,E=>" ".repeat(3*E.length)),h=t.split(`
`,1)[0],f=0;this.options.pedantic?(f=2,l=d.trimStart()):(f=e[2].search(/[^ ]/),f=f>4?1:f,l=d.slice(f),f+=e[1].length);let p=!1;if(!d&&/^ *$/.test(h)&&(s+=h+`
`,t=t.substring(h.length+1),c=!0),!c){const E=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),_=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),v=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),w=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;t;){const N=t.split(`
`,1)[0];if(h=N,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),v.test(h)||w.test(h)||E.test(h)||_.test(t))break;if(h.search(/[^ ]/)>=f||!h.trim())l+=`
`+h.slice(f);else{if(p||d.search(/[^ ]/)>=4||v.test(d)||w.test(d)||_.test(d))break;l+=`
`+h}!p&&!h.trim()&&(p=!0),s+=N+`
`,t=t.substring(N.length+1),d=h.slice(f)}}a.loose||(u?a.loose=!0:/\n *\n *$/.test(s)&&(u=!0));let b=null,y;this.options.gfm&&(b=/^\[[ xX]\] /.exec(l),b&&(y=b[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),a.items.push({type:"list_item",raw:s,task:!!b,checked:y,loose:!1,text:l,tokens:[]}),a.raw+=s}a.items[a.items.length-1].raw=s.trimEnd(),a.items[a.items.length-1].text=l.trimEnd(),a.raw=a.raw.trimEnd();for(let c=0;c<a.items.length;c++)if(this.lexer.state.top=!1,a.items[c].tokens=this.lexer.blockTokens(a.items[c].text,[]),!a.loose){const d=a.items[c].tokens.filter(f=>f.type==="space"),h=d.length>0&&d.some(f=>/\n.*\n/.test(f.raw));a.loose=h}if(a.loose)for(let c=0;c<a.items.length;c++)a.items[c].loose=!0;return a}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const i=e[1].toLowerCase().replace(/\s+/g," "),r=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:i,raw:e[0],href:r,title:a}}}table(t){const e=this.rules.block.table.exec(t);if(!e||!/[:|]/.test(e[2]))return;const i=ao(e[1]),r=e[2].replace(/^\||\| *$/g,"").split("|"),a=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(i.length===r.length){for(const s of r)/^ *-+: *$/.test(s)?o.align.push("right"):/^ *:-+: *$/.test(s)?o.align.push("center"):/^ *:-+ *$/.test(s)?o.align.push("left"):o.align.push(null);for(const s of i)o.header.push({text:s,tokens:this.lexer.inline(s)});for(const s of a)o.rows.push(ao(s,o.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return o}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const i=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:i,tokens:this.lexer.inline(i)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:We(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const i=e[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=_i(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{const o=ld(e[2],"()");if(o>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let r=e[2],a="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],a=o[3])}else a=e[3]?e[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),oo(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(t,e){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){const r=(i[2]||i[1]).replace(/\s+/g," "),a=e[r.toLowerCase()];if(!a){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return oo(i,a,i[0],this.lexer)}}emStrong(t,e,i=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const o=[...r[0]].length-1;let s,l,u=o,c=0;const d=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,e=e.slice(-1*t.length+o);(r=d.exec(e))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(l=[...s].length,r[3]||r[4]){u+=l;continue}else if((r[5]||r[6])&&o%3&&!((o+l)%3)){c+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+c);const h=[...r[0]][0].length,f=t.slice(0,o+r.index+h+l);if(Math.min(o,l)%2){const b=f.slice(1,-1);return{type:"em",raw:f,text:b,tokens:this.lexer.inlineTokens(b)}}const p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let i=e[2].replace(/\n/g," ");const r=/[^ ]/.test(i),a=/^ /.test(i)&&/ $/.test(i);return r&&a&&(i=i.substring(1,i.length-1)),i=We(i,!0),{type:"codespan",raw:e[0],text:i}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let i,r;return e[2]==="@"?(i=We(e[1]),r="mailto:"+i):(i=We(e[1]),r=i),{type:"link",raw:e[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(t){var i;let e;if(e=this.rules.inline.url.exec(t)){let r,a;if(e[2]==="@")r=We(e[0]),a="mailto:"+r;else{let o;do o=e[0],e[0]=((i=this.rules.inline._backpedal.exec(e[0]))==null?void 0:i[0])??"";while(o!==e[0]);r=We(e[0]),e[1]==="www."?a="http://"+e[0]:a=e[0]}return{type:"link",raw:e[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){let i;return this.lexer.state.inRawBlock?i=e[0]:i=We(e[0]),{type:"text",raw:e[0],text:i}}}}const cd=/^(?: *(?:\n|$))+/,dd=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,hd=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ri=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,fd=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ms=/(?:[*+-]|\d{1,9}[.)])/,Rs=le(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ms).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),fa=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,gd=/^[^\n]+/,ga=/(?!\s*\])(?:\\.|[^\[\]\\])+/,md=le(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ga).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),pd=le(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ms).getRegex(),Zi="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ma=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,bd=le("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",ma).replace("tag",Zi).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ps=le(fa).replace("hr",ri).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zi).getRegex(),vd=le(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ps).getRegex(),pa={blockquote:vd,code:dd,def:md,fences:hd,heading:fd,hr:ri,html:bd,lheading:Rs,list:pd,newline:cd,paragraph:Ps,table:Kn,text:gd},so=le("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ri).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zi).getRegex(),yd={...pa,table:so,paragraph:le(fa).replace("hr",ri).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",so).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Zi).getRegex()},wd={...pa,html:le(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ma).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Kn,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:le(fa).replace("hr",ri).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Rs).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Is=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,_d=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Os=/^( {2,}|\\)\n(?!\s*$)/,kd=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ai="\\p{P}\\p{S}",Sd=le(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,ai).getRegex(),xd=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Ed=le(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,ai).getRegex(),Td=le("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,ai).getRegex(),Cd=le("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,ai).getRegex(),Dd=le(/\\([punct])/,"gu").replace(/punct/g,ai).getRegex(),Ad=le(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Nd=le(ma).replace("(?:-->|$)","-->").getRegex(),Ld=le("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Nd).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Vi=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Fd=le(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Vi).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),$s=le(/^!?\[(label)\]\[(ref)\]/).replace("label",Vi).replace("ref",ga).getRegex(),Gs=le(/^!?\[(ref)\](?:\[\])?/).replace("ref",ga).getRegex(),Md=le("reflink|nolink(?!\\()","g").replace("reflink",$s).replace("nolink",Gs).getRegex(),ba={_backpedal:Kn,anyPunctuation:Dd,autolink:Ad,blockSkip:xd,br:Os,code:_d,del:Kn,emStrongLDelim:Ed,emStrongRDelimAst:Td,emStrongRDelimUnd:Cd,escape:Is,link:Fd,nolink:Gs,punctuation:Sd,reflink:$s,reflinkSearch:Md,tag:Ld,text:kd,url:Kn},Rd={...ba,link:le(/^!?\[(label)\]\((.*?)\)/).replace("label",Vi).getRegex(),reflink:le(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Vi).getRegex()},jr={...ba,escape:le(Is).replace("])","~|])").getRegex(),url:le(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Pd={...jr,br:le(Os).replace("{2,}","*").getRegex(),text:le(jr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ki={normal:pa,gfm:yd,pedantic:wd},Fn={normal:ba,gfm:jr,breaks:Pd,pedantic:Rd};class mt{constructor(t){ge(this,"tokens");ge(this,"options");ge(this,"state");ge(this,"tokenizer");ge(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||jt,this.options.tokenizer=this.options.tokenizer||new ji,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:ki.normal,inline:Fn.normal};this.options.pedantic?(e.block=ki.pedantic,e.inline=Fn.pedantic):this.options.gfm&&(e.block=ki.gfm,this.options.breaks?e.inline=Fn.breaks:e.inline=Fn.gfm),this.tokenizer.rules=e}static get rules(){return{block:ki,inline:Fn}}static lex(t,e){return new mt(e).lex(t)}static lexInline(t,e){return new mt(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const i=this.inlineQueue[e];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(s,l,u)=>l+"    ".repeat(u.length));let i,r,a,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(s=>(i=s.call({lexer:this},t,e))?(t=t.substring(i.raw.length),e.push(i),!0):!1))){if(i=this.tokenizer.space(t)){t=t.substring(i.raw.length),i.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(i);continue}if(i=this.tokenizer.code(t)){t=t.substring(i.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(i);continue}if(i=this.tokenizer.fences(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.heading(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.hr(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.blockquote(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.list(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.html(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.def(t)){t=t.substring(i.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.lheading(t)){t=t.substring(i.raw.length),e.push(i);continue}if(a=t,this.options.extensions&&this.options.extensions.startBlock){let s=1/0;const l=t.slice(1);let u;this.options.extensions.startBlock.forEach(c=>{u=c.call({lexer:this},l),typeof u=="number"&&u>=0&&(s=Math.min(s,u))}),s<1/0&&s>=0&&(a=t.substring(0,s+1))}if(this.state.top&&(i=this.tokenizer.paragraph(a))){r=e[e.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(i),o=a.length!==t.length,t=t.substring(i.raw.length);continue}if(i=this.tokenizer.text(t)){t=t.substring(i.raw.length),r=e[e.length-1],r&&r.type==="text"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(i);continue}if(t){const s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let i,r,a,o=t,s,l,u;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)c.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,s.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(i=c.call({lexer:this},t,e))?(t=t.substring(i.raw.length),e.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),r=e[e.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):e.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),r=e[e.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):e.push(i);continue}if(i=this.tokenizer.emStrong(t,o,u)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),e.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),e.push(i);continue}if(a=t,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=t.slice(1);let h;this.options.extensions.startInline.forEach(f=>{h=f.call({lexer:this},d),typeof h=="number"&&h>=0&&(c=Math.min(c,h))}),c<1/0&&c>=0&&(a=t.substring(0,c+1))}if(i=this.tokenizer.inlineText(a)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(u=i.raw.slice(-1)),l=!0,r=e[e.length-1],r&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):e.push(i);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return e}}class Ki{constructor(t){ge(this,"options");this.options=t||jt}code(t,e,i){var a;const r=(a=(e||"").match(/^\S*/))==null?void 0:a[0];return t=t.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+We(r)+'">'+(i?t:We(t,!0))+`</code></pre>
`:"<pre><code>"+(i?t:We(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,e){return t}heading(t,e,i){return`<h${e}>${t}</h${e}>
`}hr(){return`<hr>
`}list(t,e,i){const r=e?"ol":"ul",a=e&&i!==1?' start="'+i+'"':"";return"<"+r+a+`>
`+t+"</"+r+`>
`}listitem(t,e,i){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+e+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,e){const i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,e,i){const r=ro(t);if(r===null)return i;t=r;let a='<a href="'+t+'"';return e&&(a+=' title="'+e+'"'),a+=">"+i+"</a>",a}image(t,e,i){const r=ro(t);if(r===null)return i;t=r;let a=`<img src="${t}" alt="${i}"`;return e&&(a+=` title="${e}"`),a+=">",a}text(t){return t}}class va{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,i){return""+i}image(t,e,i){return""+i}br(){return""}}class pt{constructor(t){ge(this,"options");ge(this,"renderer");ge(this,"textRenderer");this.options=t||jt,this.options.renderer=this.options.renderer||new Ki,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new va}static parse(t,e){return new pt(e).parse(t)}static parseInline(t,e){return new pt(e).parseInline(t)}parse(t,e=!0){let i="";for(let r=0;r<t.length;r++){const a=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const o=a,s=this.options.extensions.renderers[o.type].call({parser:this},o);if(s!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){i+=s||"";continue}}switch(a.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{const o=a;i+=this.renderer.heading(this.parseInline(o.tokens),o.depth,od(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=a;i+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=a;let s="",l="";for(let c=0;c<o.header.length;c++)l+=this.renderer.tablecell(this.parseInline(o.header[c].tokens),{header:!0,align:o.align[c]});s+=this.renderer.tablerow(l);let u="";for(let c=0;c<o.rows.length;c++){const d=o.rows[c];l="";for(let h=0;h<d.length;h++)l+=this.renderer.tablecell(this.parseInline(d[h].tokens),{header:!1,align:o.align[h]});u+=this.renderer.tablerow(l)}i+=this.renderer.table(s,u);continue}case"blockquote":{const o=a,s=this.parse(o.tokens);i+=this.renderer.blockquote(s);continue}case"list":{const o=a,s=o.ordered,l=o.start,u=o.loose;let c="";for(let d=0;d<o.items.length;d++){const h=o.items[d],f=h.checked,p=h.task;let b="";if(h.task){const y=this.renderer.checkbox(!!f);u?h.tokens.length>0&&h.tokens[0].type==="paragraph"?(h.tokens[0].text=y+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&h.tokens[0].tokens[0].type==="text"&&(h.tokens[0].tokens[0].text=y+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:y+" "}):b+=y+" "}b+=this.parse(h.tokens,u),c+=this.renderer.listitem(b,p,!!f)}i+=this.renderer.list(c,s,l);continue}case"html":{const o=a;i+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=a;i+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=a,s=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<t.length&&t[r+1].type==="text";)o=t[++r],s+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);i+=e?this.renderer.paragraph(s):s;continue}default:{const o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}parseInline(t,e){e=e||this.renderer;let i="";for(let r=0;r<t.length;r++){const a=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){i+=o||"";continue}}switch(a.type){case"escape":{const o=a;i+=e.text(o.text);break}case"html":{const o=a;i+=e.html(o.text);break}case"link":{const o=a;i+=e.link(o.href,o.title,this.parseInline(o.tokens,e));break}case"image":{const o=a;i+=e.image(o.href,o.title,o.text);break}case"strong":{const o=a;i+=e.strong(this.parseInline(o.tokens,e));break}case"em":{const o=a;i+=e.em(this.parseInline(o.tokens,e));break}case"codespan":{const o=a;i+=e.codespan(o.text);break}case"br":{i+=e.br();break}case"del":{const o=a;i+=e.del(this.parseInline(o.tokens,e));break}case"text":{const o=a;i+=e.text(o.text);break}default:{const o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}}class Yn{constructor(t){ge(this,"options");this.options=t||jt}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}ge(Yn,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Ht,Vr,zs;class Id{constructor(...t){Ma(this,Ht);ge(this,"defaults",ha());ge(this,"options",this.setOptions);ge(this,"parse",gi(this,Ht,Vr).call(this,mt.lex,pt.parse));ge(this,"parseInline",gi(this,Ht,Vr).call(this,mt.lexInline,pt.parseInline));ge(this,"Parser",pt);ge(this,"Renderer",Ki);ge(this,"TextRenderer",va);ge(this,"Lexer",mt);ge(this,"Tokenizer",ji);ge(this,"Hooks",Yn);this.use(...t)}walkTokens(t,e){var r,a;let i=[];for(const o of t)switch(i=i.concat(e.call(this,o)),o.type){case"table":{const s=o;for(const l of s.header)i=i.concat(this.walkTokens(l.tokens,e));for(const l of s.rows)for(const u of l)i=i.concat(this.walkTokens(u.tokens,e));break}case"list":{const s=o;i=i.concat(this.walkTokens(s.items,e));break}default:{const s=o;(a=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&a[s.type]?this.defaults.extensions.childTokens[s.type].forEach(l=>{const u=s[l].flat(1/0);i=i.concat(this.walkTokens(u,e))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,e)))}}return i}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const o=e.renderers[a.name];o?e.renderers[a.name]=function(...s){let l=a.renderer.apply(this,s);return l===!1&&(l=o.apply(this,s)),l}:e.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=e[a.level];o?o.unshift(a.tokenizer):e[a.level]=[a.tokenizer],a.start&&(a.level==="block"?e.startBlock?e.startBlock.push(a.start):e.startBlock=[a.start]:a.level==="inline"&&(e.startInline?e.startInline.push(a.start):e.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(e.childTokens[a.name]=a.childTokens)}),r.extensions=e),i.renderer){const a=this.defaults.renderer||new Ki(this.defaults);for(const o in i.renderer){if(!(o in a))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const s=o,l=i.renderer[s],u=a[s];a[s]=(...c)=>{let d=l.apply(a,c);return d===!1&&(d=u.apply(a,c)),d||""}}r.renderer=a}if(i.tokenizer){const a=this.defaults.tokenizer||new ji(this.defaults);for(const o in i.tokenizer){if(!(o in a))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const s=o,l=i.tokenizer[s],u=a[s];a[s]=(...c)=>{let d=l.apply(a,c);return d===!1&&(d=u.apply(a,c)),d}}r.tokenizer=a}if(i.hooks){const a=this.defaults.hooks||new Yn;for(const o in i.hooks){if(!(o in a))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const s=o,l=i.hooks[s],u=a[s];Yn.passThroughHooks.has(o)?a[s]=c=>{if(this.defaults.async)return Promise.resolve(l.call(a,c)).then(h=>u.call(a,h));const d=l.call(a,c);return u.call(a,d)}:a[s]=(...c)=>{let d=l.apply(a,c);return d===!1&&(d=u.apply(a,c)),d}}r.hooks=a}if(i.walkTokens){const a=this.defaults.walkTokens,o=i.walkTokens;r.walkTokens=function(s){let l=[];return l.push(o.call(this,s)),a&&(l=l.concat(a.call(this,s))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return mt.lex(t,e??this.defaults)}parser(t,e){return pt.parse(t,e??this.defaults)}}Ht=new WeakSet,Vr=function(t,e){return(i,r)=>{const a={...r},o={...this.defaults,...a};this.defaults.async===!0&&a.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const s=gi(this,Ht,zs).call(this,!!o.silent,!!o.async);if(typeof i>"u"||i===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(l=>t(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>e(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(s);try{o.hooks&&(i=o.hooks.preprocess(i));let l=t(i,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let u=e(l,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(l){return s(l)}}},zs=function(t,e){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+We(i.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(i);throw i}};const Bt=new Id;function ae(n,t){return Bt.parse(n,t)}ae.options=ae.setOptions=function(n){return Bt.setOptions(n),ae.defaults=Bt.defaults,Ns(ae.defaults),ae};ae.getDefaults=ha;ae.defaults=jt;ae.use=function(...n){return Bt.use(...n),ae.defaults=Bt.defaults,Ns(ae.defaults),ae};ae.walkTokens=function(n,t){return Bt.walkTokens(n,t)};ae.parseInline=Bt.parseInline;ae.Parser=pt;ae.parser=pt.parse;ae.Renderer=Ki;ae.TextRenderer=va;ae.Lexer=mt;ae.lexer=mt.lex;ae.Tokenizer=ji;ae.Hooks=Yn;ae.parse=ae;ae.options;ae.setOptions;ae.use;ae.walkTokens;ae.parseInline;pt.parse;mt.lex;const ya="1.0",Kr=`pro-tour-shell-${ya}`,Bs=`pro-tour-data-${ya}`,Us=jd(self.__PRO_TOUR_BASE_PATH__??"/"),Od=Wd(Us),Hs=self.__PRO_TOUR_APP_SHELL__??Od,$d=new Set(Hs),Gd=Ft(Us,"data/pro-tour-schedule.js"),zd=typeof self<"u"&&typeof self.skipWaiting=="function";zd&&(self.addEventListener("install",n=>{n.waitUntil((async()=>{await(await caches.open(Kr)).addAll(Hs),self.skipWaiting()})())}),self.addEventListener("activate",n=>{n.waitUntil((async()=>{const t=await caches.keys();await Promise.all(t.map(e=>e===Kr||e===Bs||!e.startsWith("pro-tour-shell-")&&!e.startsWith("pro-tour-data-")?Promise.resolve():caches.delete(e))),await self.clients.claim()})())}),self.addEventListener("fetch",n=>{const{request:t}=n;if(t.method!=="GET")return;const e=new URL(t.url);if(e.origin===self.location.origin){if(Bd(e)){n.respondWith(Hd(t));return}(t.mode==="navigate"||$d.has(e.pathname))&&n.respondWith(Ud(t))}}));function Bd(n){return n.pathname===Gd}async function Ud(n){const t=await caches.open(Kr),e=await t.match(n);if(e)return e;const i=await fetch(n);return i&&i.ok&&t.put(n,i.clone()),i}async function Hd(n){const t=await caches.open(Bs);try{const e=await fetch(n);return e&&e.ok&&await t.put(n,e.clone()),e}catch(e){const i=await t.match(n);if(i)return i;throw e}}function Wd(n){return[Ft(n,""),Ft(n,"index.html"),Ft(n,"style.css"),Ft(n,"main.js"),Ft(n,"manifest.webmanifest"),Ft(n,"icons/icon-192.svg"),Ft(n,"icons/icon-512.svg")]}function Ft(n,t){const e=typeof t=="string"?t:"",i=e.startsWith("/")?e.slice(1):e;return new URL(i,new URL(n,self.location.origin)).pathname}function jd(n){if(!n)return"/";const t=n.startsWith("/")?n:`/${n}`;return t.endsWith("/")?t:`${t}/`}const Vd=`# DE

## Wie verwendet man diese App? {#help-app-purpose}

### Mit dieser App kannst du eine Football-Reise in den USA planen

Die App ermittelt Touren, mit denen du mit dem Auto mglichst viele Spiele mit mglichst wenig Reisezeit besuchen kannst.
Du kannst aber auch **Flge erlauben**, um grere Entfernungen schneller zu berbrcken.

Die Grundidee ist folgende: Du gibst ein **Zeitfenster** an, in dem du dich in den USA aufhalten kannst.
Beispielsweise Ich knnte den ganzen Oktober.
Anschlieend whlst du deine gewnschte **Reisedauer** aus, beispielsweise 14 Tage.
Optional kannst du auch noch [{$dialog.cityPreferences.title}](dialog:open-city-preferences) und [{$dialog.teamPreferences.title}](dialog:open-team-preferences) angeben.

Wenn du mchtest, kannst du weitere [{$dialog.routingParameters.title}](dialog:open-routing-parameters) anpassen, z.B. ob der **Starttag** ein Sonntag sein soll, um stressfrei am Freitag oder Samstag anzureisen.

Die App analysiert alle Spiele innerhalb deines Zeitfensters.
Sie berechnet die besten Touren mit der von dir angegebenen Reisedauer und bercksichtigt dabei die Reisezeiten zwischen den Stadien. 
Die bercksichtigten Strecken und Reisezeiten kannst du im [{$dialog.routingGraph.title}](dialog:open-graph) einsehen.

Als Ergebnis erhltst du eine Liste mglicher Touren, die genau zu deinen Vorlieben passen.

Die gefundenen Touren knnen in einer Merkliste gespeichert und auch exportiert werden.

## Woher kommen die Daten? {#help-data-sources}

Diese App verwendet ffentlich verfgbare Daten fr den Spielplan, die Teams und die Stadien.

Spielplan und Teamdaten: [nflverse](https://github.com/nflverse/).
Zustzliche Stadiondaten: [The Sports DB](https://www.thesportsdb.com/).
Routing-Daten: [openrouteservice](https://openrouteservice.org/).

Der Spielplan wird whrend der laufenden Saison regelmig aktualisiert. Die letzte Aktualisierung erfolgte am {!SCHEDULE_DATE_DE}.

## Wie funktioniert die Bewertung eines Spiels? {#help-topic-game-rating}

Ein Spiel auf der Tour wird wie folgt bewertet:

**[Bewertung Reisezeit vom vorherigen Ort]  [Bewertung Stadion]  [Gewichtung Heimteam]  [Gewichtung Auswrtsteam]  100**

Wurden keine speziellen Einstellungen vorgenommen, ergibt sich dadurch ein Wert zwischen 1 und 100 fr ein Spiel.

- Per Vorgabe sind **[Gewichtung Heimteam]** und **[Gewichtung Auswrtsteam]** jeweils **1**.
  - Werden die *[{$dialog.teamPreferences.title}](dialog:open-team-preferences)* nicht verndert, wirken sich die Teams also nicht auf die Bewertung des Spiels aus.
- Die **[Bewertung Stadion]** setzt sich zusammen aus der *[Gewichtung des Stadions](dialog:open-city-preferences)* (per Vorgabe **1**), eventuell multipliziert mit dem Parameter *{$label.routing.revisitMultiplierFloor}* (per Vorgabe **0,1**).
  - Dadurch wird erreicht, dass bereits besuchte Stadien auf derselben Tour sehr schlecht bewertet werden. In der Regel tauchen Stadien daher nicht mehrfach in einer Tour auf.
- Die **[Bewertung der Reisezeit vom vorherigen Ort]** wird abhngig von echten Reisezeiten zwischen den einzelnen Stadien vorgenommen.
  - Dabei erhlt die krzeste mgliche Reisezeit den Wert **1** und die lngste mgliche Reisezeit den Wert **0,1**. Alle anderen Reisezeiten werden in dieser Spanne proportional eingeordnet.
  - Sind **Flge** zugelassen, wird die Bewertung zustzlich mit dem *{$label.routing.travelMultiplierCeilingFlight}* multipliziert, was zu einer Abwertung von Flgen fhrt.
  - Fun Fact: Die krzeste Reisezeit zwischen zwei Stadien ist Baltimore nach Washington (ca. 1 Stunde), die lngste ist Miami nach Seattle (ca. 53 Stunden).

Wurden die Gewichtungen der *[{$dialog.teamPreferences.title}](dialog:open-team-preferences)*, der *[{$dialog.cityPreferences.title}](dialog:open-city-preferences)* oder der *[{$dialog.routingParameters.title}](dialog:open-routing-parameters)* verndert, knnen auch Werte ber 100 pro Spiel auftreten.

## Der Dialog ***{$dialog.favorites.title}*** {#help-dialog-favorites}

Hier werden die von dir gemerkten Touren angezeigt.

Beachte, dass die Touren immer auf deinem lokalen Gert gespeichert werden.
Durch **Exportieren** und **Importieren** kannst du deine gemerkten Touren jedoch auf andere Gerte bertragen.

Die berschrift Von ... bis ... kannst du auerdem anklicken und bearbeiten.

Mit den Buttons oben rechts kannst du die Touren sortieren oder auch wieder von der Merkliste entfernen.

## Der Dialog ***{$dialog.teamPreferences.title}*** {#help-dialog-team-preferences}

Mithilfe dieses Dialogs kannst du festlegen, wie wichtig dir die einzelnen Football-Teams bei der Routenplanung sind.

Du siehst alle Teams mit Logo, Namen, Stadion und Ort in einer bersichtlichen Liste.

Fr jedes Team kannst du eine Gewichtung einstellen.
Wenn du den Regler nach links stellst, wertest du das Team ab. 
Es wird dann rot hinterlegt angezeigt.
Stellst du den Regler hingegen nach rechts, wird das Team aufgewertet und grn hinterlegt.
*Aufgewertet* bedeutet, dass dieses Team bei der Planung strker bevorzugt wird, *abgewertet* bedeutet das Gegenteil.

Beachte, dass bei der [Bewertung eines Spiels](help:help-topic-game-rating) beide Teams, also Heim- und Auswrtsteam, bercksichtigt werden.

**Achtung:** Wird der Regler ganz nach links eingestellt, wird das Team bei der Planung komplett ignoriert.

## Der Dialog ***{$dialog.cityPreferences.title}*** {#help-dialog-city-preferences}

Mithilfe dieses Dialogs kannst du festlegen, wie wichtig dir der Besuch einer bestimmten Stadt bei der Routenplanung ist.

Du siehst fr alle Stdte den Namen des Stadions und die dort spielenden Teams in einer bersichtlichen Liste.

Fr jedes Stadion kannst du eine Gewichtung einstellen.
Wenn du den Regler nach links stellst, wertest du das Stadion ab. 
Es wird dann rot hinterlegt angezeigt.
Stellst du den Regler hingegen nach rechts, wird das Stadion aufgewertet und grn hinterlegt.
*Aufgewertet* bedeutet, dass dieses Stadion bei der Planung strker bevorzugt wird, *abgewertet* bedeutet das Gegenteil.

Diese Einstellung wirkt sich auf die [Bewertung eines Spiels](help:help-topic-game-rating) aus.

**Achtung:** Wenn du den Regler ganz nach links stellst, wird die Stadt bzw. das Stadion bei der Planung komplett ignoriert.

## Der Dialog ***{$dialog.routingGraph.title}*** {#help-dialog-routing-graph}

Der Routing-Graph stellt alle bei der Tourenplanung zu bercksichtigenden Verbindungen dar.

Diese werden direkt durch die Einstellungen der [{$dialog.routingParameters.title}](dialog:open-routing-parameters) beeinflusst.
Die [Bewertung eines Spiels](help:help-topic-game-rating) sucht die optimale Route auf diesem Graphen.

Die Punkte stellen alle bercksichtigten Spiele dar und sind von links (Woche 1) nach rechts (Woche 18) sortiert.
Sie sind in den Farben des Heimteams eingefrbt.
Ihre Anordnung pro Woche entspricht grob der Lage der Stdte auf der USA-Karte.
Die Pfeile stellen mgliche Verbindungen von einem Spiel zum nchsten dar.

Durch **Anklicken** eines einzelnen Spiels (Punkt) werden die Verbindungen von und zu diesem Spiel hervorgehoben.
Grne Linien markieren Verbindungen, die mit dem Auto gefahren werden knnen.
Rote Linien kennzeichnen Flge, sofern sie zugelassen wurden.
Blasse Linien zeigen eingehende, strkere Linien ausgehende Verbindungen.
Zustzlich stehen an den Linien die Reisezeiten (mit dem Auto) zwischen den Stdten.

## Der Dialog ***{$dialog.routingParameters.title}*** {#help-dialog-routing-parameters}

Mit diesen Einstellungen wird festgelegt, wie Spiele im Spielplan [bewertet](help:help-topic-game-rating) und bei der Erstellung des [Routing-Graphen](help:help-dialog-routing-graph) bercksichtigt werden.

- **{$label.tourStartDate}:** Frhester mglicher Start fr deine Tour.
- **{$label.tourEndDate}:** Sptestes mgliches Ende fr deine Tour.
- **{$label.routing.requiredStartDay}:** Erster Wochentag fr deine Tour. Stelle z. B. *Sonntag* ein, um stressfrei am Freitag oder Samstag anzureisen.
- **{$label.routing.maxTourLength}:** Gewnschte maximale Lnge deiner Tour innerhalb des eingestellten Zeitfensters.

Beachte, dass das Zeitfenster **nicht** den genauen Zeitraum deiner Reise festlegt, sondern nur, wann du grundstzlich reisen kannst.
Je grer das Zeitfenster eingestellt wird, desto mehr Touren werden gefunden.

- **{$label.routing.allowFlights}:** Legt fest, ob Flge grundstzlich erlaubt sind oder ob nur mit dem Auto gefahren werden soll.
- **{$label.routing.maxDriveOneDayGap}:** Maximal gewnschte Fahrtzeit an einem Tag.
- **{$label.routing.maxDriveTwoDayGap}:** Maximal gewnschte Fahrtzeit an zwei Tagen.
- **{$label.routing.maxDriveThreeDayGap}:** Maximal gewnschte Fahrtzeit an drei Tagen.
- **{$label.routing.maxDriveFourDayGap}:** Maximal gewnschte Fahrtzeit an vier Tagen bzw. berhaupt.

Die Logik hier ist folgende:
Um zu entscheiden, welche Spiele als Nchstes in Frage kommen, wird anhand des Spielplans berprft, wie viele Tage ein Spiel in der Zukunft liegt.
Mit den Einstellungen **Max. Fahrtzeit...** entscheidest du, wie viele Stunden Reisezeit zwischen diesen Spielen liegen drfen.
Ist die Reisezeit grer, so ist das Spiel nicht mit dem Auto erreichbar, eventuell jedoch mit einem Flug, falls dieser erlaubt wurde.

- [{$label.routing.expertMode}](help:help-expert-mode): Bietet noch weitergehende Einstellungen fr die Parameter der Routenplanung.
Unter anderem knnen hier weitere Details zu Flgen eingestellt werden.

## Der {$label.routing.expertMode} {#help-expert-mode}

Dieser Modus kann ber den Dialog [{$dialog.routingParameters.title}](dialog:open-routing-parameters) aktiviert werden.

Im Experten-Modus knnen die Gewichtungen in den Dialogen *[{$dialog.teamPreferences.title}](dialog:open-team-preferences)* und *[{$dialog.cityPreferences.title}](dialog:open-city-preferences)* direkt als Zahl eingegeben werden.

Darber hinaus stehen im Experten-Modus zustzliche [{$dialog.routingParameters.title}](dialog:open-routing-parameters) zur Verfgung, mit denen Spiele im Spielplan [bewertet](help:help-topic-game-rating) und bei der Erstellung des [Routing-Graphen](help:help-dialog-routing-graph) bercksichtigt werden knnen.

*Es wird empfohlen, die Voreinstellungen nicht zu verndern.*

- **{$label.routing.oneDayGap}, {$label.routing.twoDayGap}, {$label.routing.threeDayGap}, {$label.routing.fourDayGap}:**
Hiermit wird kontrolliert, wie gro die Abstnde zwischen den Spielen sein mssen, damit die Regeln *{$label.routing.maxDriveOneDayGap}* usw. greifen.

- **{$label.routing.minTimeToNextGameHoursFlight}:**
Dieser Wert legt fest, wie viel Zeit zwischen zwei Spielen mindestens vorhanden sein muss, damit ein Flug berhaupt mglich ist.

- **{$label.routing.maxTimeToNextGameHours}:**
Dies ist die Obergrenze, bis zu der nach dem nchsten Spiel gesucht wird.
Spiele, die weiter in der Zukunft liegen, werden nicht mehr bercksichtigt.

- **{$label.routing.travelMultiplierCeilingFlight}:**
Um Flge gegenber Autofahrten abzuwerten, wird dieser Multiplikator auf die [Bewertung der Reisezeit](help:help-topic-game-rating) von Flgen angewendet.

- **{$label.routing.specialGameDayPenalty}:**
Besondere Spieltage in diesem Sinne sind *Thanksgiving*, *Black Friday* und *Christmas*.
Durch diese Tage kann es zu einer Hufung von Spielen in einer Woche kommen.
Das knnte dazu fhren, dass die besten Touren bei der Bewertung immer diese besonderen Spieltage beinhalten.
Durch eine leichte Abwertung dieser Spiele wird dieser Effekt reduziert.

- **{$label.routing.revisitMultiplierFloor}:**
Eine Tour sollte jede Stadt mglichst nur einmal besuchen.
Um dies zu erreichen, werden in einer Tour bereits besuchte Stdte durch diesen Multiplikator abgewertet.

- **{$label.routing.travelMultiplierFloor}:**
Untergrenze des Multiplikators fr die [Bewertung der Reisezeit](help:help-topic-game-rating).

- **{$label.routing.maxSearchMinutesPerStartGame}:**
Maximale Zeit, die verwendet wird, um Touren von einem Startspiel aus zu finden.
Dieser Wert ist erst relevant, wenn sehr lange Touren geplant werden, etwa mit einer Reisedauer von ber 30 Tagen.

- **{$label.routing.estimatedGamesPerWeek}:**
ber diesen Wert werden Spiele, die nahe am Ende des Zeitfensters liegen, als mgliche Startspiele ausgeschlossen.

- **{$label.routing.beamWidthPerStartGame}:**
Wenn *{$label.routing.maxSearchMinutesPerStartGame}* fr ein Startspiel berschritten wird, greift eine Heuristik, um offensichtlich gute Touren nicht direkt zu verwerfen.
Diese Heuristik wird ber diesen Parameter gesteuert.
Dieser Wert ist erst relevant, wenn sehr lange Touren geplant werden, etwa mit einer Reisedauer von ber 30 Tagen.

- **{$label.routing.cacheBucketHours}:**
Dieser Wert steuert, wie dicht bereits berechnete Teil-Touren in den Cache geschrieben werden.

- **{$label.routing.enableRouteCache}:**
Aktiviert einen Cache, der bereits berechnete Teil-Touren speichert, um die Laufzeit der Suche zu beschleunigen.

## Installation {#help-install}

So kannst du die App wie eine echte App nutzen:

- iOS (Safari): App-Webseite ffnen  Teilen-Symbol  Zum Home-Bildschirm whlen  hinzufgen.
- Android (Chrome): App-Webseite ffnen  Drei-Punkte-Men  Zum Startbildschirm hinzufgen oder App installieren whlen  besttigen.

## Feedback {#help-feedback}

Ich freue mich ber Feedback zu meiner Pro-Football Tour Planer App.
Ob Verbesserungsvorschlge, Fehlerberichte oder eure Erfahrungen beim Einsatz der App, ich nehme alles dankbar an.
Wenn etwas hakt, flackert oder einfach nicht nach eurem Geschmack luft, sagt Bescheid.
Ideen fr neue Features oder sind immer willkommen.
Auch Feedback zur Usability, zur Performance auf mobilen Gerten oder zum Offline-Einsatz hilft enorm.

Schreibt, was funktioniert, was nervt und was euch fehlt.

<div class="help-legal">
<div class="hl hl5"><strong>- Alexander</strong>  <span></span><span></span><span></span></div>
</div>

## Impressum und Datenschutz {#help-legal}

### Impressum

**Angaben gem  5 TMG /  18 MStV**

<div class="help-legal">
<div class="hl hl1"><span>Lorem</span><span>ipsum</span><span>dolor</span></div>
<div class="hl hl2"><span>sit</span><span>amet</span><span>ligula.</span></div>
<div class="hl hl3"><span>Aenean</span><span>commodo</span><span>eget</span></div>
<div class="hl hl4"><span>sociis</span><span>natoque</span><span>penatibus.</span></div>
<div class="hl hl5"><span></span><span></span><span></span></div>
</div>

### Datenschutzerklrung

Diese Anwendung verarbeitet personenbezogene Daten nur im technisch notwendigen Umfang.
Beim Aufruf der Anwendung werden serverseitig automatisch Daten wie die IP-Adresse sowie Datum und Uhrzeit des Zugriffs erfasst. Diese Daten dienen ausschlielich der Bereitstellung und Sicherheit des Dienstes und werden nicht zu Analyse- oder Marketingzwecken genutzt.
Die Anwendung speichert lokal Daten auf Ihrem Gert (z. B. Einstellungen). Diese lokal gespeicherten Daten werden nicht an den Betreiber bermittelt.

Es werden keine Cookies, Tracking-Tools oder externen Dienste eingesetzt.

**Bei Fragen zum Datenschutz:**

<div class="help-legal">
<div class="hl hl5"><span></span><span></span><span></span></div>
</div>

## {#footer-marker}

<div class="footer-text-details">
<div>Pro Football Tour Planner Version {!APP_VERSION}</div>
<div>Spielplan aktualisiert am {!SCHEDULE_DATE_DE}</div>
</div>

[Impressum](help:help-legal)

# EN

## How to use this app? {#help-app-purpose}

### With this app you can plan a football trip in the USA

The app determines tours that let you attend as many games as possible by car with as little travel time as possible.
However, you can also **allow flights** to bridge longer distances faster.

The basic idea is this: You specify a **time window** in which you can stay in the USA.
For example, "I could do the whole of October."
Then you select your desired **travel duration**, for example, "14 days."
Optionally, you can also specify [{$dialog.cityPreferences.title}](dialog:open-city-preferences) and [{$dialog.teamPreferences.title}](dialog:open-team-preferences).

If you want, you can adjust additional [{$dialog.routingParameters.title}](dialog:open-routing-parameters), such as whether the **start day** should be a Sunday in order to travel in on Friday or Saturday without stress.

The app analyzes all games within your time window.
It calculates the best tours based on the travel duration you provided and takes into account the travel times between the stadiums.
You can view the included routes and travel times in the [{$dialog.routingGraph.title}](dialog:open-graph).

As a result, you get a list of possible tours that match your preferences.

The found tours can be saved to a watchlist and also exported.

## Where does the data come from? {#help-data-sources}

This app uses publicly available data for schedules, teams, and stadiums.

Schedule and team data: [nflverse](https://github.com/nflverse/).
Additional stadium data: [The Sports DB](https://www.thesportsdb.com/).
Routing data: [openrouteservice](https://openrouteservice.org/).

The schedule is regularly updated during the current season. The last update was on {!SCHEDULE_DATE_DE}.

## How does game scoring work? {#help-topic-game-rating}

A game on the tour is scored as follows:

**[Rating travel time from previous location]  [Rating stadium]  [Weight home team]  [Weight away team]  100**

If no special settings were changed, this results in a score between 1 and 100 for a game.

- By default, **[Weight home team]** and **[Weight away team]** are both **1**.
  - If *[{$dialog.teamPreferences.title}](dialog:open-team-preferences)* are not changed, the teams do not affect the game rating.
- **[Rating stadium]** is composed of the *[stadium weight](dialog:open-city-preferences)* (default **1**), optionally multiplied by the parameter *{$label.routing.revisitMultiplierFloor}* (default **0.1**).
  - This ensures that stadiums already visited on the same tour receive a very low rating. Therefore, stadiums usually do not appear more than once in a tour.
- **[Rating travel time from previous location]** is based on real travel times between stadiums.
  - The shortest possible travel time gets a score of **1**, the longest gets **0.1**. All other travel times are placed proportionally within this range.
  - If **flights** are allowed, the rating is additionally multiplied by *{$label.routing.travelMultiplierCeilingFlight}*, which reduces the score for flights.
  - Fun fact: The shortest travel time between two stadiums is Baltimore to Washington (approx. 1 hour). The longest is Miami to Seattle (approx. 53 hours).

If weights in *[{$dialog.teamPreferences.title}](dialog:open-team-preferences)*, *[{$dialog.cityPreferences.title}](dialog:open-city-preferences)*, or *[{$dialog.routingParameters.title}](dialog:open-routing-parameters)* were changed, scores above 100 per game can occur.

## The Dialog ***{$dialog.favorites.title}*** {#help-dialog-favorites}

Here the tours you bookmarked / saved are displayed.

Note that tours are always stored on your local device.
With **export** and **import**, you can transfer your saved tours to other devices.

You can also click and edit the headline "From ... to ...".

The buttons in the upper right let you sort the tours, or remove them from the list.

## The Dialog ***{$dialog.teamPreferences.title}*** {#help-dialog-team-preferences}

With this dialog, you can set how important each football team is for tour planning.

You see all teams with logo, name, stadium, and city in a list.

You can assign a weight for each team.
If you move the slider to the left, the team is downrated and highlighted in red.
If you move the slider to the right, the team is uprated and highlighted in green.
*Uprated* means the team is preferred more during planning. *Downrated* means the opposite.

Note that in the [Scoring of a Game](help:help-topic-game-rating), both teams, home and away, are included.

**Caution:** If a slider is moved all the way left, this team is ignored completely.

## The Dialog ***{$dialog.routingGraph.title}*** {#help-dialog-routing-graph}

The Routing Graph shows all connections considered for tour planning.

These are directly influenced by settings in [{$dialog.routingParameters.title}](dialog:open-routing-parameters).
The [Scoring of a Game](help:help-topic-game-rating) finds the optimal path on this graph.

Points represent all included games, sorted left (Week 1) to right (Week 18).
Points are colored using the home team color.
The layout per week roughly reflects the city locations on the USA map.
Lines represent possible connections from one game to the next.

Clicking a game (point) highlights incoming and outgoing connections for that game.
Green lines mark connections that can be driven by car.
Red lines mark flights, if flights are allowed.
Faded lines are incoming, bold lines are outgoing connections.
Lines also show travel times (by car) between cities.

## The Dialog ***{$dialog.cityPreferences.title}*** {#help-dialog-city-preferences}

With this dialog, you can set how important visiting a specific city is for tour planning.

For all cities, you see the stadium name and the teams playing there in a list.

You can assign a weight for each stadium.
If you move the slider to the left, the stadium is downrated and highlighted in red.
If you move the slider to the right, the stadium is uprated and highlighted in green.
*Uprated* means the stadium is preferred more during planning. *Downrated* means the opposite.

This setting affects the [Scoring of a Game](help:help-topic-game-rating).

**Caution:** If the slider is moved all the way left, the city / stadium is ignored completely during planning.

## The Dialog ***{$dialog.routingParameters.title}*** {#help-dialog-routing-parameters}

These settings define how games in the schedule are [scored](help:help-topic-game-rating) and how they are included in the [Routing Graph](help:help-dialog-routing-graph).

- **{$label.tourStartDate}:** Earliest possible start for your tour.
- **{$label.tourEndDate}:** Latest possible end for your tour.
- **{$label.routing.requiredStartDay}:** First weekday of your tour. For example, set *Sunday* to travel in on Friday or Saturday without stress.
- **{$label.routing.maxTourLength}:** Maximum desired length of your tour within the configured time window.

Note that the time window does **not** define the exact period of your trip. 
It only defines when you can travel in principle.
The larger the time window, the more tours are found.

- **{$label.routing.allowFlights}:** Defines whether flights are allowed, or if only car travel should be used.
- **{$label.routing.maxDriveOneDayGap}:** Maximum desired driving time in one day.
- **{$label.routing.maxDriveTwoDayGap}:** Maximum desired driving time across two days.
- **{$label.routing.maxDriveThreeDayGap}:** Maximum desired driving time across three days.
- **{$label.routing.maxDriveFourDayGap}:** Maximum desired driving time across four days, or at all.

The logic works like this:
To decide which games are eligible next, the schedule is checked to see how many days a game lies in the future.
With the **Max. driving time...** settings, you define how many hours of travel time are allowed between those games.
If the travel time is longer, the game cannot be reached by car, but might be reachable via flight, if allowed.

- [{$label.routing.expertMode}](help:help-expert-mode): Provides more advanced settings for route planning parameters.
This includes additional configuration for flights.

## The {$label.routing.expertMode} {#help-expert-mode}

This mode can be enabled in the dialog [{$dialog.routingParameters.title}](dialog:open-routing-parameters).

In Expert Mode, weights in the dialogs *[{$dialog.teamPreferences.title}](dialog:open-team-preferences)* and *[{$dialog.cityPreferences.title}](dialog:open-city-preferences)* can be entered directly as numbers.

Expert Mode also provides additional [{$dialog.routingParameters.title}](dialog:open-routing-parameters) that can be used to [score](help:help-topic-game-rating) games in the schedule and include them when building the [Routing Graph](help:help-dialog-routing-graph).

*It is recommended not to change the default settings.*

- **{$label.routing.oneDayGap}, {$label.routing.twoDayGap}, {$label.routing.threeDayGap}, {$label.routing.fourDayGap}:**
Used to control how large the gaps between games must be for the rules *{$label.routing.maxDriveOneDayGap}* etc. to apply.

- **{$label.routing.minTimeToNextGameHoursFlight}:**
Defines the minimum time that must exist between two games to allow a flight at all.

- **{$label.routing.maxTimeToNextGameHours}:**
Upper limit up to which the next game is searched.
Games further in the future are not considered.

- **{$label.routing.travelMultiplierCeilingFlight}:**
A multiplier applied to flight [travel time ratings](help:help-topic-game-rating) to downrate flights versus car travel.

- **{$label.routing.specialGameDayPenalty}:**
"Special game days" are *Thanksgiving*, *Black Friday*, and *Christmas*.
These days can cause clusters of games within a week.
This could result in top-scoring tours always containing those special game days.
A small penalty reduces this effect by downrating those games slightly.

- **{$label.routing.revisitMultiplierFloor}:**
A tour should ideally visit each city only once.
Already-visited cities in the same tour are downrated using this multiplier.

- **{$label.routing.travelMultiplierFloor}:**
Lower bound multiplier for the [travel time rating](help:help-topic-game-rating).

- **{$label.routing.maxSearchMinutesPerStartGame}:**
Maximum time spent searching tours from a start game.
This only applies when planning very long tours, for example, with a travel durations over 30 days.

- **{$label.routing.estimatedGamesPerWeek}:**
Used to exclude games near the end of the time window as possible start games.

- **{$label.routing.beamWidthPerStartGame}:**
If the search exceeds *{$label.routing.maxSearchMinutesPerStartGame}* for a start game, a heuristic prevents discarding obviously good tours.
This parameter controls that heuristic.
This only applies when planning very long tours, for example, with a travel durations over 30 days.

- **{$label.routing.cacheBucketHours}:**
Controls how frequently partial tours are written into the cache.

- **{$label.routing.enableRouteCache}:**
Enables caching of partial tours to speed up route searches.

## Installation {#help-install}

Heres how to use the app like a "real" app:

- iOS (Safari): Open app website  Share icon  Choose "Add to Home Screen"  Add.
- Android (Chrome): Open app website  Three-dot menu  Choose "Add to Home Screen" or "Install app"  Confirm.

## Feedback {#help-feedback}

Feedback on the Pro-Football Tour Planner app is welcome.
Whether improvement ideas, bug reports, or your experiences using the app, everything is appreciated.
If something breaks, flickers, or just isnt your taste, let me know.
Ideas for new features are always welcome.
Feedback on usability, performance on mobile devices, or offline usage helps a lot.

Tell me what works, what annoys you, and what youre missing.

<div class="help-legal">
<div class="hl hl5"><strong>- Alexander</strong>  <span></span><span></span><span></span></div>
</div>

## Imprint and Privacy Policy {#help-legal}

### Imprint

**Information pursuant to  5 TMG /  18 MStV**

<div class="help-legal">
<div class="hl hl1"><span>Lorem</span><span>ipsum</span><span>dolor</span></div>
<div class="hl hl2"><span>sit</span><span>amet</span><span>ligula.</span></div>
<div class="hl hl3"><span>Aenean</span><span>commodo</span><span>eget</span></div>
<div class="hl hl4"><span>sociis</span><span>natoque</span><span>penatibus.</span></div>
<div class="hl hl5"><span></span><span></span><span></span></div>
</div>

### Privacy Policy

This application processes personal data only to the extent that is technically necessary.
When the application is accessed, server-side data such as the IP address and the date and time of access is automatically collected. This data is used solely for the provision and security of the service and is not used for analysis or marketing purposes.
The application stores data locally on your device (e.g., settings). This locally stored data is not transmitted to the operator.

No cookies, tracking tools, or external services are used.

**If you have any questions regarding data protection:**

<div class="help-legal">
<div class="hl hl5"><span></span><span></span><span></span></div>
</div>

## {#footer-marker}

<div class="footer-text-details">
<div>Pro Football Tour Planner Version {!APP_VERSION}</div>
<div>Schedule updated at {!SCHEDULE_DATE_DE}</div>
</div>

[Impressum](help:help-legal)`,Li=new Map,Yr=new Map;let lo=!1,Je=null,Fi=null,qn=null,Mi=null;const uo="help-dialog";qr("APP_VERSION",ya);function Kd({dialogKit:n,onDialogClose:t}){qn=()=>{var r;return((r=n.focusDialog)==null?void 0:r.call(n,uo))??!1};function e({topicId:r}={}){if(Je){if(!r){qn();return}if(_r(r))return;const s=Je.close;Je=null,s==null||s()}const a=js(ct());let o=null;n.open({title:F("dialog.help.title"),size:"large",id:uo,build({body:s,actions:l,close:u}){o=u;const c=ih(a,{initiallyOpenId:r});s.appendChild(c),Je={content:c,close:u},Ji();const d=document.createElement("button");d.type="button",d.classList.add("btn","btn-text","btn-primary"),d.textContent=F("button.close"),d.addEventListener("click",u),l.appendChild(d);const h=c.querySelector("summary")??d;return r&&requestAnimationFrame(()=>{_r(r)}),{focusTarget:h}},onClose(){(Je==null?void 0:Je.close)===o&&(Je=null),t==null||t()}})}function i(r){if(!r){e();return}_r(r)||e({topicId:r})}return Fi=i,{openHelp:e,openHelpTopic:i}}function Yd(n,{language:t}={}){if(!n)return null;const e=th(n,t??ct());if(!e)return null;const i=Vs(e);return Ji(),i}function qd(n,{language:t}={}){if(!n)return null;const e=nh(n,t??ct());if(!e)return null;const i=document.createElement("div");return i.className="help-content-block",i.dataset.helpContentBlockId=e.id,i.innerHTML=e.html??"",Ji(),i}function cn(n,t){n&&(typeof t=="function"?(Yr.set(n,t),Ji()):Yr.delete(n))}function qr(n,t){if(n){if(typeof t=="function"){Li.set(n,t),yr();return}if(typeof t=="string"){Li.set(n,()=>t),yr();return}Li.delete(n),yr()}}function Zd(n){if(!Number.isFinite(n))return;const t=new Date(n),e=co(t,"de-DE"),i=co(t,"en-US");e&&qr("SCHEDULE_DATE_DE",e),i&&qr("SCHEDULE_DATE_EN",i)}function Ws(){return Mi||(Mi=Jd(Vd)),Mi}function yr(){Mi=null}function Jd(n=""){const t={},e=/^#\s+(?!#)(.+)$/gm;let i,r=null,a=0;const o=s=>{if(!r)return;const l=n.slice(a,s).trim(),u=Ut(r);t[u]=Xd(l,u)};for(;(i=e.exec(n))!==null;)r&&o(i.index),r=Ut(i[1]),a=e.lastIndex;return o(n.length),t}function Xd(n="",t){const e=/^##\s+(?!#)(.*)$/gm;let i,r=null,a=0;const o=[],s={},l=u=>{if(!r)return;const c=n.slice(a,u).trim(),d=c.length>0?ah(c,t):"";if(r.type==="content-block"){r.id&&(s[r.id]={id:r.id,html:d});return}o.push({title:r.title,titleHtml:r.titleHtml??r.title,id:r.id??null,html:d})};for(;(i=e.exec(n))!==null;)l(i.index),r=Qd(i[1]??"",t),a=e.lastIndex;return l(n.length),{sections:o,blocks:s}}function Qd(n,t){const e=(n??"").trim(),i=e.match(/\{#([A-Za-z0-9_-]+)\}\s*$/);let r=null,a=e;if(i&&(r=i[1],a=e.slice(0,e.length-i[0].length).trim()),!a&&r)return{type:"content-block",id:r};const o=rh(a,t);return{type:"section",id:r,title:o.text,titleHtml:o.html}}function Ut(n=""){const t=n.trim().toLowerCase();return t.startsWith("de")?"de":t.startsWith("en")?"en":t.length>=2?t.slice(0,2):"en"}function js(n){return eh(n).sections}function eh(n){const t=Ws(),e=Ut(n??"en"),i=t[e];return i||(t.en??{sections:[],blocks:{}})}function th(n,t){return js(t).find(i=>i.id===n)??null}function nh(n,t){var a,o;if(!n)return null;const e=Ws(),i=Ut(t??"en"),r=(a=e[i])==null?void 0:a.blocks;if(r!=null&&r[n])return r[n];if(i!=="en"){const s=(o=e.en)==null?void 0:o.blocks;if(s!=null&&s[n])return s[n]}return null}function Vs(n,{open:t=!1}={}){const e=document.createElement("details");e.className="help-entry",n.id&&(e.id=n.id,e.dataset.helpTopicId=n.id),e.open=t;const i=document.createElement("summary");n.titleHtml?i.innerHTML=n.titleHtml:i.textContent=n.title??"";const r=document.createElement("div");return r.className="help-entry-body",r.innerHTML=n.html,e.append(i,r),e}function ih(n=[],{initiallyOpenId:t}={}){const e=document.createElement("div");if(e.className="help-dialog-content",n.length===0){const r=document.createElement("p");return r.textContent=F("message.help.empty"),e.appendChild(r),e}const i=t?n.some(r=>r.id===t):!1;return n.forEach((r,a)=>{const o=i?r.id===t:a===0;e.appendChild(Vs(r,{open:o}))}),e}function rh(n,t){if(!n)return{text:"",html:""};const e=Ut(t),i=Ks(n,e);if(!i)return{text:"",html:""};const r=Ys(),o=(ae.parseInline(i,{renderer:r})??"")||zn(i);return{text:hh(o),html:o}}function ah(n,t){const e=Ut(t),i=Ks(n,e),r=Ys();return ae.parse(i,{renderer:r})}function oh(n,t){if(!n)return n;const e=/\{\$([a-zA-Z0-9_.-]+)\}/g;return n.replace(e,(i,r)=>{const a=dh(t,r);return typeof a=="string"?a:i})}function Ks(n,t){if(!n)return n;const e=oh(n,t);return sh(e)}function sh(n){if(!n)return n;const t=/\{\!([^}]+)\}/g;return n.replace(t,(e,i)=>{const r=lh(i==null?void 0:i.trim());return typeof r=="string"?r:e})}function lh(n){if(!n)return null;const t=Li.get(n);if(typeof t=="function"){const e=t();return typeof e=="string"?e:null}return typeof t=="string"?t:null}const uh={year:"numeric",month:"2-digit",day:"2-digit"};function co(n,t){if(!(n instanceof Date)||Number.isNaN(n.getTime()))return"";try{return new Intl.DateTimeFormat(t,uh).format(n)}catch{return ch(n,t)}}function ch(n,t){const e=String(n.getUTCFullYear()).padStart(4,"0"),i=String(n.getUTCMonth()+1).padStart(2,"0"),r=String(n.getUTCDate()).padStart(2,"0");return typeof t=="string"&&t.toLowerCase().startsWith("de")?`${r}.${i}.${e}`:`${i}/${r}/${e}`}function dh(n,t){var r;if(!t)return null;const i=[Ut(n??"en"),"en"];for(const a of i){const o=(r=aa[a])==null?void 0:r.translation;if(!o)continue;const s=o[t];if(typeof s=="string")return s;const l=t.split(".").reduce((u,c)=>u?u[c]:void 0,o);if(typeof l=="string")return l}return null}function Ys(){const n=new ae.Renderer,t=n.link?n.link.bind(n):null;return n.link=function(i,r,a){if(typeof i=="string"&&i.startsWith("dialog:")){const o=i.slice(7).trim();if(o.length>0){const s=r?` title="${zn(r)}"`:"";return`<a href="#" data-help-dialog-action="${zn(o)}"${s}>${a}</a>`}}if(typeof i=="string"&&i.startsWith("help:")){const o=i.slice(5).trim();if(o.length>0){const s=r?` title="${zn(r)}"`:"";return`<a href="#" data-help-topic-link="${zn(o)}"${s}>${a}</a>`}}return t?t(i,r,a):ae.Renderer.prototype.link.call(this,i,r,a)},n}function zn(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function hh(n){if(typeof n!="string"||n.length===0)return"";if(typeof document<"u"){const t=document.createElement("div");return t.innerHTML=n,t.textContent??""}return n.replace(/<[^>]*>/g,"")}function wr(n){if(!n||!(Je!=null&&Je.content))return!1;const t=`[data-help-topic-id="${fh(n)}"]`,e=Je.content.querySelector(t);return e?(e.open=!0,gh(e),!0):!1}function _r(n){return wr(n)?(qn==null||qn(),typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>{wr(n)}):wr(n),!0):!1}function fh(n){return typeof CSS<"u"&&typeof CSS.escape=="function"?CSS.escape(n):String(n).replace(/["\\]/g,"\\$&")}function gh(n){if(!n)return;const t=n.closest(".modal-body");if(t){const e=t.getBoundingClientRect(),a=n.getBoundingClientRect().top-e.top+t.scrollTop-8,o=Math.max(0,Math.min(a,t.scrollHeight));if(typeof t.scrollTo=="function")try{t.scrollTo({top:o,behavior:"smooth"});return}catch{t.scrollTop=o;return}t.scrollTop=o;return}if(typeof n.scrollIntoView=="function")try{n.scrollIntoView({block:"start",behavior:"smooth"})}catch{try{n.scrollIntoView(!0)}catch{}}}function Ji(){lo||typeof document>"u"||(document.addEventListener("click",n=>{const t=n.target instanceof Element?n.target.closest("[data-help-dialog-action], [data-help-topic-link]"):null;if(!t)return;const e=t.getAttribute("data-help-dialog-action"),i=t.getAttribute("data-help-topic-link");if(!(!e&&!i)){if(n.preventDefault(),e){const r=Yr.get(e);r==null||r()}i&&(Fi==null||Fi(i))}},!0),lo=!0)}function mh(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function Zn(n){var t=mh(n,"string");return typeof t=="symbol"?t:t+""}function Ie(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function ho(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Zn(i.key),i)}}function Oe(n,t,e){return t&&ho(n.prototype,t),e&&ho(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function yn(n){return yn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yn(n)}function qs(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qs=function(){return!!n})()}function ph(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function bh(n,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ph(n)}function Qe(n,t,e){return t=yn(t),bh(n,qs()?Reflect.construct(t,e||[],yn(n).constructor):t.apply(n,e))}function Zr(n,t){return Zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},Zr(n,t)}function et(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Zr(n,t)}function vh(n){if(Array.isArray(n))return n}function yh(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,r,a,o,s=[],l=!0,u=!1;try{if(a=(e=e.call(n)).next,t===0){if(Object(e)!==e)return;l=!1}else for(;!(l=(i=a.call(e)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}function Jr(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function Zs(n,t){if(n){if(typeof n=="string")return Jr(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Jr(n,t):void 0}}function wh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wn(n,t){return vh(n)||yh(n,t)||Zs(n,t)||wh()}var kr={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},Js=new Int8Array(4),Ri=new Int32Array(Js.buffer,0,1),Xs=new Float32Array(Js.buffer,0,1),_h=/^\s*rgba?\s*\(/,kh=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function Sh(n){var t=0,e=0,i=0,r=1;if(n[0]==="#")n.length===4?(t=parseInt(n.charAt(1)+n.charAt(1),16),e=parseInt(n.charAt(2)+n.charAt(2),16),i=parseInt(n.charAt(3)+n.charAt(3),16)):(t=parseInt(n.charAt(1)+n.charAt(2),16),e=parseInt(n.charAt(3)+n.charAt(4),16),i=parseInt(n.charAt(5)+n.charAt(6),16)),n.length===9&&(r=parseInt(n.charAt(7)+n.charAt(8),16)/255);else if(_h.test(n)){var a=n.match(kh);a&&(t=+a[1],e=+a[2],i=+a[3],a[4]&&(r=+a[4]))}return{r:t,g:e,b:i,a:r}}var bn={};for(var Si in kr)bn[Si]=Vt(kr[Si]),bn[kr[Si]]=bn[Si];function Qs(n,t,e,i,r){return Ri[0]=i<<24|e<<16|t<<8|n,Ri[0]=Ri[0]&4278190079,Xs[0]}function Vt(n){if(n=n.toLowerCase(),typeof bn[n]<"u")return bn[n];var t=Sh(n),e=t.r,i=t.g,r=t.b,a=t.a;a=a*255|0;var o=Qs(e,i,r,a);return bn[n]=o,o}function xh(n,t){Xs[0]=Vt(n);var e=Ri[0],i=e&255,r=e>>8&255,a=e>>16&255,o=e>>24&255;return[i,r,a,o]}var Sr={};function el(n){if(typeof Sr[n]<"u")return Sr[n];var t=(n&16711680)>>>16,e=(n&65280)>>>8,i=n&255,r=255,a=Qs(t,e,i,r);return Sr[n]=a,a}function fo(n,t,e,i){return e+(t<<8)+(n<<16)}function go(n,t,e,i,r,a){var o=Math.floor(e/a*r),s=Math.floor(n.drawingBufferHeight/a-i/a*r),l=new Uint8Array(4);n.bindFramebuffer(n.FRAMEBUFFER,t),n.readPixels(o,s,1,1,n.RGBA,n.UNSIGNED_BYTE,l);var u=wn(l,4),c=u[0],d=u[1],h=u[2],f=u[3];return[c,d,h,f]}function P(n,t,e){return(t=Zn(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function mo(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function q(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?mo(Object(e),!0).forEach(function(i){P(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):mo(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Eh(n,t){for(;!{}.hasOwnProperty.call(n,t)&&(n=yn(n))!==null;);return n}function Xr(){return Xr=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,t,e){var i=Eh(n,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?n:e):r.value}},Xr.apply(null,arguments)}function tl(n,t,e,i){var r=Xr(yn(n.prototype),t,e);return typeof r=="function"?function(a){return r.apply(e,a)}:r}function Th(n){return n.normalized?1:n.size}function xr(n){var t=0;return n.forEach(function(e){return t+=Th(e)}),t}function nl(n,t,e){var i=n==="VERTEX"?t.VERTEX_SHADER:t.FRAGMENT_SHADER,r=t.createShader(i);if(r===null)throw new Error("loadShader: error while creating the shader");t.shaderSource(r,e),t.compileShader(r);var a=t.getShaderParameter(r,t.COMPILE_STATUS);if(!a){var o=t.getShaderInfoLog(r);throw t.deleteShader(r),new Error(`loadShader: error while compiling the shader:
`.concat(o,`
`).concat(e))}return r}function Ch(n,t){return nl("VERTEX",n,t)}function Dh(n,t){return nl("FRAGMENT",n,t)}function Ah(n,t){var e=n.createProgram();if(e===null)throw new Error("loadProgram: error while creating the program.");var i,r;for(i=0,r=t.length;i<r;i++)n.attachShader(e,t[i]);n.linkProgram(e);var a=n.getProgramParameter(e,n.LINK_STATUS);if(!a)throw n.deleteProgram(e),new Error("loadProgram: error while linking the program.");return e}function po(n){var t=n.gl,e=n.buffer,i=n.program,r=n.vertexShader,a=n.fragmentShader;t.deleteShader(r),t.deleteShader(a),t.deleteProgram(i),t.deleteBuffer(e)}function bo(n){return n%1===0?n.toFixed(1):n.toString()}var vo=`#define PICKING_MODE
`,Nh=P(P(P(P(P(P(P(P({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),il=function(){function n(t,e,i){Ie(this,n),P(this,"array",new Float32Array),P(this,"constantArray",new Float32Array),P(this,"capacity",0),P(this,"verticesCount",0);var r=this.getDefinition();if(this.VERTICES=r.VERTICES,this.VERTEX_SHADER_SOURCE=r.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=r.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=r.UNIFORMS,this.ATTRIBUTES=r.ATTRIBUTES,this.METHOD=r.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in r?r.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in r?r.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in r,this.ATTRIBUTES_ITEMS_COUNT=xr(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=i,this.normalProgram=this.getProgramInfo("normal",t,r.VERTEX_SHADER_SOURCE,r.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=e?this.getProgramInfo("pick",t,vo+r.VERTEX_SHADER_SOURCE,vo+r.FRAGMENT_SHADER_SOURCE,e):null,this.isInstanced){var a=xr(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*a);for(var o=0;o<this.CONSTANT_DATA.length;o++){var s=this.CONSTANT_DATA[o];if(s.length!==a)throw new Error("Program: error while getting constant data (one vector has ".concat(s.length," items instead of ").concat(a,")"));for(var l=0;l<s.length;l++)this.constantArray[o*a+l]=s[l]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return Oe(n,[{key:"kill",value:function(){po(this.normalProgram),this.pickProgram&&(po(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(e,i,r,a,o){var s=this.getDefinition(),l=i.createBuffer();if(l===null)throw new Error("Program: error while creating the WebGL buffer.");var u=Ch(i,r),c=Dh(i,a),d=Ah(i,[u,c]),h={};s.UNIFORMS.forEach(function(b){var y=i.getUniformLocation(d,b);y&&(h[b]=y)});var f={};s.ATTRIBUTES.forEach(function(b){f[b.name]=i.getAttribLocation(d,b.name)});var p;if("CONSTANT_ATTRIBUTES"in s&&(s.CONSTANT_ATTRIBUTES.forEach(function(b){f[b.name]=i.getAttribLocation(d,b.name)}),p=i.createBuffer(),p===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:e,program:d,gl:i,frameBuffer:o,buffer:l,constantBuffer:p||{},uniformLocations:h,attributeLocations:f,isPicking:e==="pick",vertexShader:u,fragmentShader:c}}},{key:"bindProgram",value:function(e){var i=this,r=0,a=e.gl,o=e.buffer;this.isInstanced?(a.bindBuffer(a.ARRAY_BUFFER,e.constantBuffer),r=0,this.CONSTANT_ATTRIBUTES.forEach(function(s){return r+=i.bindAttribute(s,e,r,!1)}),a.bufferData(a.ARRAY_BUFFER,this.constantArray,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,e.buffer),r=0,this.ATTRIBUTES.forEach(function(s){return r+=i.bindAttribute(s,e,r,!0)}),a.bufferData(a.ARRAY_BUFFER,this.array,a.DYNAMIC_DRAW)):(a.bindBuffer(a.ARRAY_BUFFER,o),r=0,this.ATTRIBUTES.forEach(function(s){return r+=i.bindAttribute(s,e,r)}),a.bufferData(a.ARRAY_BUFFER,this.array,a.DYNAMIC_DRAW)),a.bindBuffer(a.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(e){var i=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,e,!1)}),this.ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,e,!0)})):this.ATTRIBUTES.forEach(function(r){return i.unbindAttribute(r,e)})}},{key:"bindAttribute",value:function(e,i,r,a){var o=Nh[e.type];if(typeof o!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(e.type,'"'));var s=i.attributeLocations[e.name],l=i.gl;if(s!==-1){l.enableVertexAttribArray(s);var u=this.isInstanced?(a?this.ATTRIBUTES_ITEMS_COUNT:xr(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(l.vertexAttribPointer(s,e.size,e.type,e.normalized||!1,u,r),this.isInstanced&&a)if(l instanceof WebGL2RenderingContext)l.vertexAttribDivisor(s,1);else{var c=l.getExtension("ANGLE_instanced_arrays");c&&c.vertexAttribDivisorANGLE(s,1)}}return e.size*o}},{key:"unbindAttribute",value:function(e,i,r){var a=i.attributeLocations[e.name],o=i.gl;if(a!==-1&&(o.disableVertexAttribArray(a),this.isInstanced&&r))if(o instanceof WebGL2RenderingContext)o.vertexAttribDivisor(a,0);else{var s=o.getExtension("ANGLE_instanced_arrays");s&&s.vertexAttribDivisorANGLE(a,0)}}},{key:"reallocate",value:function(e){e!==this.capacity&&(this.capacity=e,this.verticesCount=this.VERTICES*e,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(e,i){var r=i.gl,a=i.program;r.enable(r.BLEND),r.useProgram(a),this.setUniforms(e,i),this.drawWebGL(this.METHOD,i)}},{key:"render",value:function(e){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,e.width*e.pixelRatio/e.downSizingRatio,e.height*e.pixelRatio/e.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(q(q({},e),{},{pixelRatio:e.pixelRatio/e.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,e.width*e.pixelRatio,e.height*e.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(e,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(e,i){var r=i.gl,a=i.frameBuffer;if(r.bindFramebuffer(r.FRAMEBUFFER,a),!this.isInstanced)r.drawArrays(e,0,this.verticesCount);else if(r instanceof WebGL2RenderingContext)r.drawArraysInstanced(e,0,this.VERTICES,this.capacity);else{var o=r.getExtension("ANGLE_instanced_arrays");o&&o.drawArraysInstancedANGLE(e,0,this.VERTICES,this.capacity)}}}])}(),rl=function(n){function t(){return Ie(this,t),Qe(this,t,arguments)}return et(t,n),Oe(t,[{key:"kill",value:function(){tl(t,"kill",this)([])}},{key:"process",value:function(i,r,a){var o=r*this.STRIDE;if(a.hidden){for(var s=o+this.STRIDE;o<s;o++)this.array[o]=0;return}return this.processVisibleItem(el(i),o,a)}}])}(il),wa=function(n){function t(){var e;Ie(this,t);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=Qe(this,t,[].concat(r)),P(e,"drawLabel",void 0),e}return et(t,n),Oe(t,[{key:"kill",value:function(){tl(t,"kill",this)([])}},{key:"process",value:function(i,r,a,o,s){var l=r*this.STRIDE;if(s.hidden||a.hidden||o.hidden){for(var u=l+this.STRIDE;l<u;l++)this.array[l]=0;return}return this.processVisibleItem(el(i),l,a,o,s)}}])}(il);function Lh(n,t){return function(){function e(i,r,a){Ie(this,e),P(this,"drawLabel",t),this.programs=n.map(function(o){return new o(i,r,a)})}return Oe(e,[{key:"reallocate",value:function(r){this.programs.forEach(function(a){return a.reallocate(r)})}},{key:"process",value:function(r,a,o,s,l){this.programs.forEach(function(u){return u.process(r,a,o,s,l)})}},{key:"render",value:function(r){this.programs.forEach(function(a){return a.render(r)})}},{key:"kill",value:function(){this.programs.forEach(function(r){return r.kill()})}}])}()}function Fh(n,t,e,i,r){var a=r.edgeLabelSize,o=r.edgeLabelFont,s=r.edgeLabelWeight,l=r.edgeLabelColor.attribute?t[r.edgeLabelColor.attribute]||r.edgeLabelColor.color||"#000":r.edgeLabelColor.color,u=t.label;if(u){n.fillStyle=l,n.font="".concat(s," ").concat(a,"px ").concat(o);var c=e.size,d=i.size,h=e.x,f=e.y,p=i.x,b=i.y,y=(h+p)/2,E=(f+b)/2,_=p-h,v=b-f,w=Math.sqrt(_*_+v*v);if(!(w<c+d)){h+=_*c/w,f+=v*c/w,p-=_*d/w,b-=v*d/w,y=(h+p)/2,E=(f+b)/2,_=p-h,v=b-f,w=Math.sqrt(_*_+v*v);var N=n.measureText(u).width;if(N>w){var k="";for(u=u+k,N=n.measureText(u).width;N>w&&u.length>1;)u=u.slice(0,-2)+k,N=n.measureText(u).width;if(u.length<4)return}var x;_>0?v>0?x=Math.acos(_/w):x=Math.asin(v/w):v>0?x=Math.acos(_/w)+Math.PI:x=Math.asin(_/w)+Math.PI/2,n.save(),n.translate(y,E),n.rotate(x),n.fillText(u,-N/2,t.size/2+a),n.restore()}}}function al(n,t,e){if(t.label){var i=e.labelSize,r=e.labelFont,a=e.labelWeight,o=e.labelColor.attribute?t[e.labelColor.attribute]||e.labelColor.color||"#000":e.labelColor.color;n.fillStyle=o,n.font="".concat(a," ").concat(i,"px ").concat(r),n.fillText(t.label,t.x+t.size+3,t.y+i/3)}}function Mh(n,t,e){var i=e.labelSize,r=e.labelFont,a=e.labelWeight;n.font="".concat(a," ").concat(i,"px ").concat(r),n.fillStyle="#FFF",n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=8,n.shadowColor="#000";var o=2;if(typeof t.label=="string"){var s=n.measureText(t.label).width,l=Math.round(s+5),u=Math.round(i+2*o),c=Math.max(t.size,i/2)+o,d=Math.asin(u/2/c),h=Math.sqrt(Math.abs(Math.pow(c,2)-Math.pow(u/2,2)));n.beginPath(),n.moveTo(t.x+h,t.y+u/2),n.lineTo(t.x+c+l,t.y+u/2),n.lineTo(t.x+c+l,t.y-u/2),n.lineTo(t.x+h,t.y-u/2),n.arc(t.x,t.y,c,d,-d),n.closePath(),n.fill()}else n.beginPath(),n.arc(t.x,t.y,t.size+o,0,Math.PI*2),n.closePath(),n.fill();n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,al(n,t,e)}var Rh=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,Ph=Rh,Ih=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Oh=Ih,ol=WebGLRenderingContext,yo=ol.UNSIGNED_BYTE,Er=ol.FLOAT,$h=["u_sizeRatio","u_correctionRatio","u_matrix"],Xi=function(n){function t(){return Ie(this,t),Qe(this,t,arguments)}return et(t,n),Oe(t,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:Oh,FRAGMENT_SHADER_SOURCE:Ph,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:$h,ATTRIBUTES:[{name:"a_position",size:2,type:Er},{name:"a_size",size:1,type:Er},{name:"a_color",size:4,type:yo,normalized:!0},{name:"a_id",size:4,type:yo,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Er}],CONSTANT_DATA:[[t.ANGLE_1],[t.ANGLE_2],[t.ANGLE_3]]}}},{key:"processVisibleItem",value:function(i,r,a){var o=this.array,s=Vt(a.color);o[r++]=a.x,o[r++]=a.y,o[r++]=a.size,o[r++]=s,o[r++]=i}},{key:"setUniforms",value:function(i,r){var a=r.gl,o=r.uniformLocations,s=o.u_sizeRatio,l=o.u_correctionRatio,u=o.u_matrix;a.uniform1f(l,i.correctionRatio),a.uniform1f(s,i.sizeRatio),a.uniformMatrix3fv(u,!1,i.matrix)}}])}(rl);P(Xi,"ANGLE_1",0);P(Xi,"ANGLE_2",2*Math.PI/3);P(Xi,"ANGLE_3",4*Math.PI/3);var Gh=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,zh=Gh,Bh=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Uh=Bh,sl=WebGLRenderingContext,wo=sl.UNSIGNED_BYTE,xi=sl.FLOAT,Hh=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],ll={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function ul(n){var t=q(q({},ll),{});return function(e){function i(){return Ie(this,i),Qe(this,i,arguments)}return et(i,e),Oe(i,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:Uh,FRAGMENT_SHADER_SOURCE:zh,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Hh,ATTRIBUTES:[{name:"a_position",size:2,type:xi},{name:"a_normal",size:2,type:xi},{name:"a_radius",size:1,type:xi},{name:"a_color",size:4,type:wo,normalized:!0},{name:"a_id",size:4,type:wo,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:xi}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(a,o,s,l,u){if(t.extremity==="source"){var c=[l,s];s=c[0],l=c[1]}var d=u.size||1,h=l.size||1,f=s.x,p=s.y,b=l.x,y=l.y,E=Vt(u.color),_=b-f,v=y-p,w=_*_+v*v,N=0,k=0;w&&(w=1/Math.sqrt(w),N=-v*w*d,k=_*w*d);var x=this.array;x[o++]=b,x[o++]=y,x[o++]=-N,x[o++]=-k,x[o++]=h,x[o++]=E,x[o++]=a}},{key:"setUniforms",value:function(a,o){var s=o.gl,l=o.uniformLocations,u=l.u_matrix,c=l.u_sizeRatio,d=l.u_correctionRatio,h=l.u_minEdgeThickness,f=l.u_lengthToThicknessRatio,p=l.u_widenessToThicknessRatio;s.uniformMatrix3fv(u,!1,a.matrix),s.uniform1f(c,a.sizeRatio),s.uniform1f(d,a.correctionRatio),s.uniform1f(h,a.minEdgeThickness),s.uniform1f(f,t.lengthToThicknessRatio),s.uniform1f(p,t.widenessToThicknessRatio)}}])}(wa)}ul();var Wh=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,cl=Wh,jh=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Vh=jh,dl=WebGLRenderingContext,_o=dl.UNSIGNED_BYTE,It=dl.FLOAT,Kh=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],Yh={lengthToThicknessRatio:ll.lengthToThicknessRatio};function hl(n){var t=q(q({},Yh),{});return function(e){function i(){return Ie(this,i),Qe(this,i,arguments)}return et(i,e),Oe(i,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:Vh,FRAGMENT_SHADER_SOURCE:cl,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Kh,ATTRIBUTES:[{name:"a_positionStart",size:2,type:It},{name:"a_positionEnd",size:2,type:It},{name:"a_normal",size:2,type:It},{name:"a_color",size:4,type:_o,normalized:!0},{name:"a_id",size:4,type:_o,normalized:!0},{name:"a_radius",size:1,type:It}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:It},{name:"a_normalCoef",size:1,type:It},{name:"a_radiusCoef",size:1,type:It}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(a,o,s,l,u){var c=u.size||1,d=s.x,h=s.y,f=l.x,p=l.y,b=Vt(u.color),y=f-d,E=p-h,_=l.size||1,v=y*y+E*E,w=0,N=0;v&&(v=1/Math.sqrt(v),w=-E*v*c,N=y*v*c);var k=this.array;k[o++]=d,k[o++]=h,k[o++]=f,k[o++]=p,k[o++]=w,k[o++]=N,k[o++]=b,k[o++]=a,k[o++]=_}},{key:"setUniforms",value:function(a,o){var s=o.gl,l=o.uniformLocations,u=l.u_matrix,c=l.u_zoomRatio,d=l.u_feather,h=l.u_pixelRatio,f=l.u_correctionRatio,p=l.u_sizeRatio,b=l.u_minEdgeThickness,y=l.u_lengthToThicknessRatio;s.uniformMatrix3fv(u,!1,a.matrix),s.uniform1f(c,a.zoomRatio),s.uniform1f(p,a.sizeRatio),s.uniform1f(f,a.correctionRatio),s.uniform1f(h,a.pixelRatio),s.uniform1f(d,a.antiAliasingFeather),s.uniform1f(b,a.minEdgeThickness),s.uniform1f(y,t.lengthToThicknessRatio)}}])}(wa)}hl();function qh(n){return Lh([hl(),ul()])}var Zh=qh(),Jh=Zh,Xh=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Qh=Xh,fl=WebGLRenderingContext,ko=fl.UNSIGNED_BYTE,Mn=fl.FLOAT,ef=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],tf=function(n){function t(){return Ie(this,t),Qe(this,t,arguments)}return et(t,n),Oe(t,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:Qh,FRAGMENT_SHADER_SOURCE:cl,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:ef,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Mn},{name:"a_positionEnd",size:2,type:Mn},{name:"a_normal",size:2,type:Mn},{name:"a_color",size:4,type:ko,normalized:!0},{name:"a_id",size:4,type:ko,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Mn},{name:"a_normalCoef",size:1,type:Mn}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(i,r,a,o,s){var l=s.size||1,u=a.x,c=a.y,d=o.x,h=o.y,f=Vt(s.color),p=d-u,b=h-c,y=p*p+b*b,E=0,_=0;y&&(y=1/Math.sqrt(y),E=-b*y*l,_=p*y*l);var v=this.array;v[r++]=u,v[r++]=c,v[r++]=d,v[r++]=h,v[r++]=E,v[r++]=_,v[r++]=f,v[r++]=i}},{key:"setUniforms",value:function(i,r){var a=r.gl,o=r.uniformLocations,s=o.u_matrix,l=o.u_zoomRatio,u=o.u_feather,c=o.u_pixelRatio,d=o.u_correctionRatio,h=o.u_sizeRatio,f=o.u_minEdgeThickness;a.uniformMatrix3fv(s,!1,i.matrix),a.uniform1f(l,i.zoomRatio),a.uniform1f(h,i.sizeRatio),a.uniform1f(d,i.correctionRatio),a.uniform1f(c,i.pixelRatio),a.uniform1f(u,i.antiAliasingFeather),a.uniform1f(f,i.minEdgeThickness)}}])}(wa),_a={exports:{}},vn=typeof Reflect=="object"?Reflect:null,So=vn&&typeof vn.apply=="function"?vn.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)},Pi;vn&&typeof vn.ownKeys=="function"?Pi=vn.ownKeys:Object.getOwnPropertySymbols?Pi=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Pi=function(t){return Object.getOwnPropertyNames(t)};function nf(n){console&&console.warn&&console.warn(n)}var gl=Number.isNaN||function(t){return t!==t};function ue(){ue.init.call(this)}_a.exports=ue;_a.exports.once=sf;ue.EventEmitter=ue;ue.prototype._events=void 0;ue.prototype._eventsCount=0;ue.prototype._maxListeners=void 0;var xo=10;function Qi(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(ue,"defaultMaxListeners",{enumerable:!0,get:function(){return xo},set:function(n){if(typeof n!="number"||n<0||gl(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");xo=n}});ue.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ue.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||gl(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function ml(n){return n._maxListeners===void 0?ue.defaultMaxListeners:n._maxListeners}ue.prototype.getMaxListeners=function(){return ml(this)};ue.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r=t==="error",a=this._events;if(a!==void 0)r=r&&a.error===void 0;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[t];if(l===void 0)return!1;if(typeof l=="function")So(l,this,e);else for(var u=l.length,c=wl(l,u),i=0;i<u;++i)So(c[i],this,e);return!0};function pl(n,t,e,i){var r,a,o;if(Qi(e),a=n._events,a===void 0?(a=n._events=Object.create(null),n._eventsCount=0):(a.newListener!==void 0&&(n.emit("newListener",t,e.listener?e.listener:e),a=n._events),o=a[t]),o===void 0)o=a[t]=e,++n._eventsCount;else if(typeof o=="function"?o=a[t]=i?[e,o]:[o,e]:i?o.unshift(e):o.push(e),r=ml(n),r>0&&o.length>r&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=n,s.type=t,s.count=o.length,nf(s)}return n}ue.prototype.addListener=function(t,e){return pl(this,t,e,!1)};ue.prototype.on=ue.prototype.addListener;ue.prototype.prependListener=function(t,e){return pl(this,t,e,!0)};function rf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function bl(n,t,e){var i={fired:!1,wrapFn:void 0,target:n,type:t,listener:e},r=rf.bind(i);return r.listener=e,i.wrapFn=r,r}ue.prototype.once=function(t,e){return Qi(e),this.on(t,bl(this,t,e)),this};ue.prototype.prependOnceListener=function(t,e){return Qi(e),this.prependListener(t,bl(this,t,e)),this};ue.prototype.removeListener=function(t,e){var i,r,a,o,s;if(Qi(e),r=this._events,r===void 0)return this;if(i=r[t],i===void 0)return this;if(i===e||i.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if(typeof i!="function"){for(a=-1,o=i.length-1;o>=0;o--)if(i[o]===e||i[o].listener===e){s=i[o].listener,a=o;break}if(a<0)return this;a===0?i.shift():af(i,a),i.length===1&&(r[t]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",t,s||e)}return this};ue.prototype.off=ue.prototype.removeListener;ue.prototype.removeAllListeners=function(t){var e,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var a=Object.keys(i),o;for(r=0;r<a.length;++r)o=a[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=i[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this};function vl(n,t,e){var i=n._events;if(i===void 0)return[];var r=i[t];return r===void 0?[]:typeof r=="function"?e?[r.listener||r]:[r]:e?of(r):wl(r,r.length)}ue.prototype.listeners=function(t){return vl(this,t,!0)};ue.prototype.rawListeners=function(t){return vl(this,t,!1)};ue.listenerCount=function(n,t){return typeof n.listenerCount=="function"?n.listenerCount(t):yl.call(n,t)};ue.prototype.listenerCount=yl;function yl(n){var t=this._events;if(t!==void 0){var e=t[n];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}ue.prototype.eventNames=function(){return this._eventsCount>0?Pi(this._events):[]};function wl(n,t){for(var e=new Array(t),i=0;i<t;++i)e[i]=n[i];return e}function af(n,t){for(;t+1<n.length;t++)n[t]=n[t+1];n.pop()}function of(n){for(var t=new Array(n.length),e=0;e<t.length;++e)t[e]=n[e].listener||n[e];return t}function sf(n,t){return new Promise(function(e,i){function r(o){n.removeListener(t,a),i(o)}function a(){typeof n.removeListener=="function"&&n.removeListener("error",r),e([].slice.call(arguments))}_l(n,t,a,{once:!0}),t!=="error"&&lf(n,r,{once:!0})})}function lf(n,t,e){typeof n.on=="function"&&_l(n,"error",t,e)}function _l(n,t,e,i){if(typeof n.on=="function")i.once?n.once(t,e):n.on(t,e);else if(typeof n.addEventListener=="function")n.addEventListener(t,function r(a){i.once&&n.removeEventListener(t,r),e(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var kl=_a.exports,ka=function(n){function t(){var e;return Ie(this,t),e=Qe(this,t),e.rawEmitter=e,e}return et(t,n),Oe(t)}(kl.EventEmitter),uf=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"};const cf=dc(uf);var df=function(t){return t},hf=function(t){return t*t},ff=function(t){return t*(2-t)},gf=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},mf=function(t){return t*t*t},pf=function(t){return--t*t*t+1},bf=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},vf={linear:df,quadraticIn:hf,quadraticOut:ff,quadraticInOut:gf,cubicIn:mf,cubicOut:pf,cubicInOut:bf},yf={easing:"quadraticInOut",duration:150};function lt(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function Ei(n,t,e){return n[0]=t,n[4]=typeof e=="number"?e:t,n}function Eo(n,t){var e=Math.sin(t),i=Math.cos(t);return n[0]=i,n[1]=e,n[3]=-e,n[4]=i,n}function To(n,t,e){return n[6]=t,n[7]=e,n}function Nt(n,t){var e=n[0],i=n[1],r=n[2],a=n[3],o=n[4],s=n[5],l=n[6],u=n[7],c=n[8],d=t[0],h=t[1],f=t[2],p=t[3],b=t[4],y=t[5],E=t[6],_=t[7],v=t[8];return n[0]=d*e+h*a+f*l,n[1]=d*i+h*o+f*u,n[2]=d*r+h*s+f*c,n[3]=p*e+b*a+y*l,n[4]=p*i+b*o+y*u,n[5]=p*r+b*s+y*c,n[6]=E*e+_*a+v*l,n[7]=E*i+_*o+v*u,n[8]=E*r+_*s+v*c,n}function Qr(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=n[0],r=n[1],a=n[3],o=n[4],s=n[6],l=n[7],u=t.x,c=t.y;return{x:u*i+c*a+s*e,y:u*r+c*o+l*e}}function wf(n,t){var e=n.height/n.width,i=t.height/t.width;return e<1&&i>1||e>1&&i<1?1:Math.min(Math.max(i,1/i),Math.max(1/e,e))}function Rn(n,t,e,i,r){var a=n.angle,o=n.ratio,s=n.x,l=n.y,u=t.width,c=t.height,d=lt(),h=Math.min(u,c)-2*i,f=wf(t,e);return r?(Nt(d,To(lt(),s,l)),Nt(d,Ei(lt(),o)),Nt(d,Eo(lt(),a)),Nt(d,Ei(lt(),u/h/2/f,c/h/2/f))):(Nt(d,Ei(lt(),2*(h/u)*f,2*(h/c)*f)),Nt(d,Eo(lt(),-a)),Nt(d,Ei(lt(),1/o)),Nt(d,To(lt(),-s,-l))),d}function _f(n,t,e){var i=Qr(n,{x:Math.cos(t.angle),y:Math.sin(t.angle)},0),r=i.x,a=i.y;return 1/Math.sqrt(Math.pow(r,2)+Math.pow(a,2))/e.width}function kf(n){if(!n.order)return{x:[0,1],y:[0,1]};var t=1/0,e=-1/0,i=1/0,r=-1/0;return n.forEachNode(function(a,o){var s=o.x,l=o.y;s<t&&(t=s),s>e&&(e=s),l<i&&(i=l),l>r&&(r=l)}),{x:[t,e],y:[i,r]}}function Sf(n){if(!cf(n))throw new Error("Sigma: invalid graph instance.");n.forEachNode(function(t,e){if(!Number.isFinite(e.x)||!Number.isFinite(e.y))throw new Error("Sigma: Coordinates of node ".concat(t," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function xf(n,t,e){var i=document.createElement(n);if(t)for(var r in t)i.style[r]=t[r];if(e)for(var a in e)i.setAttribute(a,e[a]);return i}function Co(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function Do(n,t,e){return e.sort(function(i,r){var a=t(i)||0,o=t(r)||0;return a<o?-1:a>o?1:0})}function Ao(n){var t=wn(n.x,2),e=t[0],i=t[1],r=wn(n.y,2),a=r[0],o=r[1],s=Math.max(i-e,o-a),l=(i+e)/2,u=(o+a)/2;(s===0||Math.abs(s)===1/0||isNaN(s))&&(s=1),isNaN(l)&&(l=0),isNaN(u)&&(u=0);var c=function(h){return{x:.5+(h.x-l)/s,y:.5+(h.y-u)/s}};return c.applyTo=function(d){d.x=.5+(d.x-l)/s,d.y=.5+(d.y-u)/s},c.inverse=function(d){return{x:l+s*(d.x-.5),y:u+s*(d.y-.5)}},c.ratio=s,c}function ea(n){"@babel/helpers - typeof";return ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ea(n)}function No(n,t){var e=t.size;if(e!==0){var i=n.length;n.length+=e;var r=0;t.forEach(function(a){n[i+r]=a,r++})}}function Tr(n){n=n||{};for(var t=0,e=arguments.length<=1?0:arguments.length-1;t<e;t++){var i=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];i&&Object.assign(n,i)}return n}var Sa={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:Fh,defaultDrawNodeLabel:al,defaultDrawNodeHover:Mh,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraZooming:!0,enableCameraPanning:!0,enableCameraRotation:!0,cameraPanBoundaries:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},Ef={circle:Xi},Tf={arrow:Jh,line:tf};function Cr(n){if(typeof n.labelDensity!="number"||n.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var t=n.minCameraRatio,e=n.maxCameraRatio;if(typeof t=="number"&&typeof e=="number"&&e<t)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function Cf(n){var t=Tr({},Sa,n);return t.nodeProgramClasses=Tr({},Ef,t.nodeProgramClasses),t.edgeProgramClasses=Tr({},Tf,t.edgeProgramClasses),t}var Ti=1.5,Lo=function(n){function t(){var e;return Ie(this,t),e=Qe(this,t),P(e,"x",.5),P(e,"y",.5),P(e,"angle",0),P(e,"ratio",1),P(e,"minRatio",null),P(e,"maxRatio",null),P(e,"enabledZooming",!0),P(e,"enabledPanning",!0),P(e,"enabledRotation",!0),P(e,"clean",null),P(e,"nextFrame",null),P(e,"previousState",null),P(e,"enabled",!0),e.previousState=e.getState(),e}return et(t,n),Oe(t,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(i){return this.x===i.x&&this.y===i.y&&this.ratio===i.ratio&&this.angle===i.angle}},{key:"getPreviousState",value:function(){var i=this.previousState;return i?{x:i.x,y:i.y,angle:i.angle,ratio:i.ratio}:null}},{key:"getBoundedRatio",value:function(i){var r=i;return typeof this.minRatio=="number"&&(r=Math.max(r,this.minRatio)),typeof this.maxRatio=="number"&&(r=Math.min(r,this.maxRatio)),r}},{key:"validateState",value:function(i){var r={};return this.enabledPanning&&typeof i.x=="number"&&(r.x=i.x),this.enabledPanning&&typeof i.y=="number"&&(r.y=i.y),this.enabledZooming&&typeof i.ratio=="number"&&(r.ratio=this.getBoundedRatio(i.ratio)),this.enabledRotation&&typeof i.angle=="number"&&(r.angle=i.angle),this.clean?this.clean(q(q({},this.getState()),r)):r}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(i){if(!this.enabled)return this;this.previousState=this.getState();var r=this.validateState(i);return typeof r.x=="number"&&(this.x=r.x),typeof r.y=="number"&&(this.y=r.y),typeof r.ratio=="number"&&(this.ratio=r.ratio),typeof r.angle=="number"&&(this.angle=r.angle),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(i){return this.setState(i(this.getState())),this}},{key:"animate",value:function(i){var r=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(!o)return new Promise(function(f){return r.animate(i,a,f)});if(this.enabled){var s=q(q({},yf),a),l=this.validateState(i),u=typeof s.easing=="function"?s.easing:vf[s.easing],c=Date.now(),d=this.getState(),h=function(){var p=(Date.now()-c)/s.duration;if(p>=1){r.nextFrame=null,r.setState(l),r.animationCallback&&(r.animationCallback.call(null),r.animationCallback=void 0);return}var b=u(p),y={};typeof l.x=="number"&&(y.x=d.x+(l.x-d.x)*b),typeof l.y=="number"&&(y.y=d.y+(l.y-d.y)*b),r.enabledRotation&&typeof l.angle=="number"&&(y.angle=d.angle+(l.angle-d.angle)*b),typeof l.ratio=="number"&&(y.ratio=d.ratio+(l.ratio-d.ratio)*b),r.setState(y),r.nextFrame=requestAnimationFrame(h)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(h)):h(),this.animationCallback=o}}},{key:"animatedZoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio/i}):this.animate({ratio:this.ratio/(i.factor||Ti)},i):this.animate({ratio:this.ratio/Ti})}},{key:"animatedUnzoom",value:function(i){return i?typeof i=="number"?this.animate({ratio:this.ratio*i}):this.animate({ratio:this.ratio*(i.factor||Ti)},i):this.animate({ratio:this.ratio*Ti})}},{key:"animatedReset",value:function(i){return this.animate({x:.5,y:.5,ratio:1,angle:0},i)}},{key:"copy",value:function(){return t.from(this.getState())}}],[{key:"from",value:function(i){var r=new t;return r.setState(i)}}])}(ka);function ut(n,t){var e=t.getBoundingClientRect();return{x:n.clientX-e.left,y:n.clientY-e.top}}function _t(n,t){var e=q(q({},ut(n,t)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){e.sigmaDefaultPrevented=!0},original:n});return e}function Pn(n){var t="x"in n?n:q(q({},n.touches[0]||n.previousTouches[0]),{},{original:n.original,sigmaDefaultPrevented:n.sigmaDefaultPrevented,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0,t.sigmaDefaultPrevented=!0}});return t}function Df(n,t){return q(q({},_t(n,t)),{},{delta:Sl(n)})}var Af=2;function Ii(n){for(var t=[],e=0,i=Math.min(n.length,Af);e<i;e++)t.push(n[e]);return t}function In(n,t,e){var i={touches:Ii(n.touches).map(function(r){return ut(r,e)}),previousTouches:t.map(function(r){return ut(r,e)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){i.sigmaDefaultPrevented=!0},original:n};return i}function Sl(n){if(typeof n.deltaY<"u")return n.deltaY*-3/360;if(typeof n.detail<"u")return n.detail/-9;throw new Error("Captor: could not extract delta from event.")}var xl=function(n){function t(e,i){var r;return Ie(this,t),r=Qe(this,t),r.container=e,r.renderer=i,r}return et(t,n),Oe(t)}(ka),Nf=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],Lf=Nf.reduce(function(n,t){return q(q({},n),{},P({},t,Sa[t]))},{}),Ff=function(n){function t(e,i){var r;return Ie(this,t),r=Qe(this,t,[e,i]),P(r,"enabled",!0),P(r,"draggedEvents",0),P(r,"downStartTime",null),P(r,"lastMouseX",null),P(r,"lastMouseY",null),P(r,"isMouseDown",!1),P(r,"isMoving",!1),P(r,"movingTimeout",null),P(r,"startCameraState",null),P(r,"clicks",0),P(r,"doubleClickTimeout",null),P(r,"currentWheelDirection",0),P(r,"settings",Lf),r.handleClick=r.handleClick.bind(r),r.handleRightClick=r.handleRightClick.bind(r),r.handleDown=r.handleDown.bind(r),r.handleUp=r.handleUp.bind(r),r.handleMove=r.handleMove.bind(r),r.handleWheel=r.handleWheel.bind(r),r.handleLeave=r.handleLeave.bind(r),r.handleEnter=r.handleEnter.bind(r),e.addEventListener("click",r.handleClick,{capture:!1}),e.addEventListener("contextmenu",r.handleRightClick,{capture:!1}),e.addEventListener("mousedown",r.handleDown,{capture:!1}),e.addEventListener("wheel",r.handleWheel,{capture:!1}),e.addEventListener("mouseleave",r.handleLeave,{capture:!1}),e.addEventListener("mouseenter",r.handleEnter,{capture:!1}),document.addEventListener("mousemove",r.handleMove,{capture:!1}),document.addEventListener("mouseup",r.handleUp,{capture:!1}),r}return et(t,n),Oe(t,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("click",this.handleClick),i.removeEventListener("contextmenu",this.handleRightClick),i.removeEventListener("mousedown",this.handleDown),i.removeEventListener("wheel",this.handleWheel),i.removeEventListener("mouseleave",this.handleLeave),i.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(i){var r=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(i);setTimeout(function(){r.clicks=0,r.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",_t(i,this.container))}}},{key:"handleRightClick",value:function(i){this.enabled&&this.emit("rightClick",_t(i,this.container))}},{key:"handleDoubleClick",value:function(i){if(this.enabled){i.preventDefault(),i.stopPropagation();var r=_t(i,this.container);if(this.emit("doubleClick",r),!r.sigmaDefaultPrevented){var a=this.renderer.getCamera(),o=a.getBoundedRatio(a.getState().ratio/this.settings.doubleClickZoomingRatio);a.animate(this.renderer.getViewportZoomedState(ut(i,this.container),o),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(i){if(this.enabled){if(i.button===0){this.startCameraState=this.renderer.getCamera().getState();var r=ut(i,this.container),a=r.x,o=r.y;this.lastMouseX=a,this.lastMouseY=o,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",_t(i,this.container))}}},{key:"handleUp",value:function(i){var r=this;if(!(!this.enabled||!this.isMouseDown)){var a=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var o=ut(i,this.container),s=o.x,l=o.y,u=a.getState(),c=a.getPreviousState()||{x:0,y:0};this.isMoving?a.animate({x:u.x+this.settings.inertiaRatio*(u.x-c.x),y:u.y+this.settings.inertiaRatio*(u.y-c.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==s||this.lastMouseY!==l)&&a.setState({x:u.x,y:u.y}),this.isMoving=!1,setTimeout(function(){var d=r.draggedEvents>0;r.draggedEvents=0,d&&r.renderer.getSetting("hideEdgesOnMove")&&r.renderer.refresh()},0),this.emit("mouseup",_t(i,this.container))}}},{key:"handleMove",value:function(i){var r=this;if(this.enabled){var a=_t(i,this.container);if(this.emit("mousemovebody",a),(i.target===this.container||i.composedPath()[0]===this.container)&&this.emit("mousemove",a),!a.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.movingTimeout=null,r.isMoving=!1},this.settings.dragTimeout);var o=this.renderer.getCamera(),s=ut(i,this.container),l=s.x,u=s.y,c=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),d=this.renderer.viewportToFramedGraph({x:l,y:u}),h=c.x-d.x,f=c.y-d.y,p=o.getState(),b=p.x+h,y=p.y+f;o.setState({x:b,y}),this.lastMouseX=l,this.lastMouseY=u,i.preventDefault(),i.stopPropagation()}}}},{key:"handleLeave",value:function(i){this.emit("mouseleave",_t(i,this.container))}},{key:"handleEnter",value:function(i){this.emit("mouseenter",_t(i,this.container))}},{key:"handleWheel",value:function(i){var r=this,a=this.renderer.getCamera();if(!(!this.enabled||!a.enabledZooming)){var o=Sl(i);if(o){var s=Df(i,this.container);if(this.emit("wheel",s),s.sigmaDefaultPrevented){i.preventDefault(),i.stopPropagation();return}var l=a.getState().ratio,u=o>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,c=a.getBoundedRatio(l*u),d=o>0?1:-1,h=Date.now();l!==c&&(i.preventDefault(),i.stopPropagation(),!(this.currentWheelDirection===d&&this.lastWheelTriggerTime&&h-this.lastWheelTriggerTime<this.settings.zoomDuration/5)&&(a.animate(this.renderer.getViewportZoomedState(ut(i,this.container),c),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){r.currentWheelDirection=0}),this.currentWheelDirection=d,this.lastWheelTriggerTime=h))}}}},{key:"setSettings",value:function(i){this.settings=i}}])}(xl),Mf=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],Rf=Mf.reduce(function(n,t){return q(q({},n),{},P({},t,Sa[t]))},{}),Pf=function(n){function t(e,i){var r;return Ie(this,t),r=Qe(this,t,[e,i]),P(r,"enabled",!0),P(r,"isMoving",!1),P(r,"hasMoved",!1),P(r,"touchMode",0),P(r,"startTouchesPositions",[]),P(r,"lastTouches",[]),P(r,"lastTap",null),P(r,"settings",Rf),r.handleStart=r.handleStart.bind(r),r.handleLeave=r.handleLeave.bind(r),r.handleMove=r.handleMove.bind(r),e.addEventListener("touchstart",r.handleStart,{capture:!1}),e.addEventListener("touchcancel",r.handleLeave,{capture:!1}),document.addEventListener("touchend",r.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",r.handleMove,{capture:!1,passive:!1}),r}return et(t,n),Oe(t,[{key:"kill",value:function(){var i=this.container;i.removeEventListener("touchstart",this.handleStart),i.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(i){var r=this;if(this.enabled){i.preventDefault();var a=Ii(i.touches);if(this.touchMode=a.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=a.map(function(f){return ut(f,r.container)}),this.touchMode===2){var o=wn(this.startTouchesPositions,2),s=o[0],l=s.x,u=s.y,c=o[1],d=c.x,h=c.y;this.startTouchesAngle=Math.atan2(h-u,d-l),this.startTouchesDistance=Math.sqrt(Math.pow(d-l,2)+Math.pow(h-u,2))}this.emit("touchdown",In(i,this.lastTouches,this.container)),this.lastTouches=a,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(i){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(i.cancelable&&i.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(i.touches.length===1){this.handleStart(i),i.preventDefault();break}case 1:if(this.isMoving){var r=this.renderer.getCamera(),a=r.getState(),o=r.getPreviousState()||{x:0,y:0};r.animate({x:a.x+this.settings.inertiaRatio*(a.x-o.x),y:a.y+this.settings.inertiaRatio*(a.y-o.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",In(i,this.lastTouches,this.container)),!i.touches.length){var s=ut(this.lastTouches[0],this.container),l=this.startTouchesPositions[0],u=Math.pow(s.x-l.x,2)+Math.pow(s.y-l.y,2);if(!i.touches.length&&u<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var c=In(i,this.lastTouches,this.container);if(this.emit("doubletap",c),this.lastTap=null,!c.sigmaDefaultPrevented){var d=this.renderer.getCamera(),h=d.getBoundedRatio(d.getState().ratio/this.settings.doubleClickZoomingRatio);d.animate(this.renderer.getViewportZoomedState(s,h),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var f=In(i,this.lastTouches,this.container);this.emit("tap",f),this.lastTap={time:Date.now(),position:f.touches[0]||f.previousTouches[0]}}}this.lastTouches=Ii(i.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(i){var r=this;if(!(!this.enabled||!this.startTouchesPositions.length)){i.preventDefault();var a=Ii(i.touches),o=a.map(function(re){return ut(re,r.container)}),s=this.lastTouches;this.lastTouches=a,this.lastTouchesPositions=o;var l=In(i,s,this.container);if(this.emit("touchmove",l),!l.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=o.some(function(re,Le){var de=r.startTouchesPositions[Le];return de&&(re.x!==de.x||re.y!==de.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.isMoving=!1},this.settings.dragTimeout);var u=this.renderer.getCamera(),c=this.startCameraState,d=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var h=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),f=h.x,p=h.y,b=this.renderer.viewportToFramedGraph(o[0]),y=b.x,E=b.y;u.setState({x:c.x+f-y,y:c.y+p-E});break}case 2:{var _={x:.5,y:.5,angle:0,ratio:1},v=o[0],w=v.x,N=v.y,k=o[1],x=k.x,T=k.y,M=Math.atan2(T-N,x-w)-this.startTouchesAngle,L=Math.hypot(T-N,x-w)/this.startTouchesDistance,O=u.getBoundedRatio(c.ratio/L);_.ratio=O,_.angle=c.angle+M;var H=this.getDimensions(),R=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:c}),z=Math.min(H.width,H.height)-2*d,j=z/H.width,Y=z/H.height,te=O/z,V=w-z/2/j,X=N-z/2/Y,ne=[V*Math.cos(-_.angle)-X*Math.sin(-_.angle),X*Math.cos(-_.angle)+V*Math.sin(-_.angle)];V=ne[0],X=ne[1],_.x=R.x-V*te,_.y=R.y+X*te,u.setState(_);break}}}}}},{key:"setSettings",value:function(i){this.settings=i}}])}(xl);function If(n){if(Array.isArray(n))return Jr(n)}function Of(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $f(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fo(n){return If(n)||Of(n)||Zs(n)||$f()}function Gf(n,t){if(n==null)return{};var e={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(t.indexOf(i)!==-1)continue;e[i]=n[i]}return e}function Dr(n,t){if(n==null)return{};var e,i,r=Gf(n,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)e=a[i],t.indexOf(e)===-1&&{}.propertyIsEnumerable.call(n,e)&&(r[e]=n[e])}return r}var Mo=function(){function n(t,e){Ie(this,n),this.key=t,this.size=e}return Oe(n,null,[{key:"compare",value:function(e,i){return e.size>i.size?-1:e.size<i.size||e.key>i.key?1:-1}}])}(),Ro=function(){function n(){Ie(this,n),P(this,"width",0),P(this,"height",0),P(this,"cellSize",0),P(this,"columns",0),P(this,"rows",0),P(this,"cells",{})}return Oe(n,[{key:"resizeAndClear",value:function(e,i){this.width=e.width,this.height=e.height,this.cellSize=i,this.columns=Math.ceil(e.width/i),this.rows=Math.ceil(e.height/i),this.cells={}}},{key:"getIndex",value:function(e){var i=Math.floor(e.x/this.cellSize),r=Math.floor(e.y/this.cellSize);return r*this.columns+i}},{key:"add",value:function(e,i,r){var a=new Mo(e,i),o=this.getIndex(r),s=this.cells[o];s||(s=[],this.cells[o]=s),s.push(a)}},{key:"organize",value:function(){for(var e in this.cells){var i=this.cells[e];i.sort(Mo.compare)}}},{key:"getLabelsToDisplay",value:function(e,i){var r=this.cellSize*this.cellSize,a=r/e/e,o=a*i/r,s=Math.ceil(o),l=[];for(var u in this.cells)for(var c=this.cells[u],d=0;d<Math.min(s,c.length);d++)l.push(c[d].key);return l}}])}();function zf(n){var t=n.graph,e=n.hoveredNode,i=n.highlightedNodes,r=n.displayedNodeLabels,a=[];return t.forEachEdge(function(o,s,l,u){(l===e||u===e||i.has(l)||i.has(u)||r.has(l)&&r.has(u))&&a.push(o)}),a}var Po=150,Io=50,kt=Object.prototype.hasOwnProperty;function Bf(n,t,e){if(!kt.call(e,"x")||!kt.call(e,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return e.color||(e.color=n.defaultNodeColor),!e.label&&e.label!==""&&(e.label=null),e.label!==void 0&&e.label!==null?e.label=""+e.label:e.label=null,e.size||(e.size=2),kt.call(e,"hidden")||(e.hidden=!1),kt.call(e,"highlighted")||(e.highlighted=!1),kt.call(e,"forceLabel")||(e.forceLabel=!1),(!e.type||e.type==="")&&(e.type=n.defaultNodeType),e.zIndex||(e.zIndex=0),e}function Uf(n,t,e){return e.color||(e.color=n.defaultEdgeColor),e.label||(e.label=""),e.size||(e.size=.5),kt.call(e,"hidden")||(e.hidden=!1),kt.call(e,"forceLabel")||(e.forceLabel=!1),(!e.type||e.type==="")&&(e.type=n.defaultEdgeType),e.zIndex||(e.zIndex=0),e}var Hf=function(n){function t(e,i){var r,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ie(this,t),r=Qe(this,t),P(r,"elements",{}),P(r,"canvasContexts",{}),P(r,"webGLContexts",{}),P(r,"pickingLayers",new Set),P(r,"textures",{}),P(r,"frameBuffers",{}),P(r,"activeListeners",{}),P(r,"labelGrid",new Ro),P(r,"nodeDataCache",{}),P(r,"edgeDataCache",{}),P(r,"nodeProgramIndex",{}),P(r,"edgeProgramIndex",{}),P(r,"nodesWithForcedLabels",new Set),P(r,"edgesWithForcedLabels",new Set),P(r,"nodeExtent",{x:[0,1],y:[0,1]}),P(r,"nodeZExtent",[1/0,-1/0]),P(r,"edgeZExtent",[1/0,-1/0]),P(r,"matrix",lt()),P(r,"invMatrix",lt()),P(r,"correctionRatio",1),P(r,"customBBox",null),P(r,"normalizationFunction",Ao({x:[0,1],y:[0,1]})),P(r,"graphToViewportRatio",1),P(r,"itemIDsIndex",{}),P(r,"nodeIndices",{}),P(r,"edgeIndices",{}),P(r,"width",0),P(r,"height",0),P(r,"pixelRatio",Co()),P(r,"pickingDownSizingRatio",2*r.pixelRatio),P(r,"displayedNodeLabels",new Set),P(r,"displayedEdgeLabels",new Set),P(r,"highlightedNodes",new Set),P(r,"hoveredNode",null),P(r,"hoveredEdge",null),P(r,"renderFrame",null),P(r,"renderHighlightedNodesFrame",null),P(r,"needToProcess",!1),P(r,"checkEdgesEventsFrame",null),P(r,"nodePrograms",{}),P(r,"nodeHoverPrograms",{}),P(r,"edgePrograms",{}),r.settings=Cf(a),Cr(r.settings),Sf(e),!(i instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");r.graph=e,r.container=i,r.createWebGLContext("edges",{picking:a.enableEdgeEvents}),r.createCanvasContext("edgeLabels"),r.createWebGLContext("nodes",{picking:!0}),r.createCanvasContext("labels"),r.createCanvasContext("hovers"),r.createWebGLContext("hoverNodes"),r.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),r.resize();for(var o in r.settings.nodeProgramClasses)r.registerNodeProgram(o,r.settings.nodeProgramClasses[o],r.settings.nodeHoverProgramClasses[o]);for(var s in r.settings.edgeProgramClasses)r.registerEdgeProgram(s,r.settings.edgeProgramClasses[s]);return r.camera=new Lo,r.bindCameraHandlers(),r.mouseCaptor=new Ff(r.elements.mouse,r),r.mouseCaptor.setSettings(r.settings),r.touchCaptor=new Pf(r.elements.mouse,r),r.touchCaptor.setSettings(r.settings),r.bindEventHandlers(),r.bindGraphHandlers(),r.handleSettingsUpdate(),r.refresh(),r}return et(t,n),Oe(t,[{key:"registerNodeProgram",value:function(i,r,a){return this.nodePrograms[i]&&this.nodePrograms[i].kill(),this.nodeHoverPrograms[i]&&this.nodeHoverPrograms[i].kill(),this.nodePrograms[i]=new r(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[i]=new(a||r)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(i,r){return this.edgePrograms[i]&&this.edgePrograms[i].kill(),this.edgePrograms[i]=new r(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(i){if(this.nodePrograms[i]){var r=this.nodePrograms,a=r[i],o=Dr(r,[i].map(Zn));a.kill(),this.nodePrograms=o}if(this.nodeHoverPrograms[i]){var s=this.nodeHoverPrograms,l=s[i],u=Dr(s,[i].map(Zn));l.kill(),this.nodePrograms=u}return this}},{key:"unregisterEdgeProgram",value:function(i){if(this.edgePrograms[i]){var r=this.edgePrograms,a=r[i],o=Dr(r,[i].map(Zn));a.kill(),this.edgePrograms=o}return this}},{key:"resetWebGLTexture",value:function(i){var r=this.webGLContexts[i],a=this.frameBuffers[i],o=this.textures[i];o&&r.deleteTexture(o);var s=r.createTexture();return r.bindFramebuffer(r.FRAMEBUFFER,a),r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s,0),this.textures[i]=s,this}},{key:"bindCameraHandlers",value:function(){var i=this;return this.activeListeners.camera=function(){i.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(i){var r=i.x,a=i.y,o=go(this.webGLContexts.nodes,this.frameBuffers.nodes,r,a,this.pixelRatio,this.pickingDownSizingRatio),s=fo.apply(void 0,Fo(o)),l=this.itemIDsIndex[s];return l&&l.type==="node"?l.id:null}},{key:"bindEventHandlers",value:function(){var i=this;this.activeListeners.handleResize=function(){i.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(a){var o=Pn(a),s={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}},l=i.getNodeAtPosition(o);if(l&&i.hoveredNode!==l&&!i.nodeDataCache[l].hidden){i.hoveredNode&&i.emit("leaveNode",q(q({},s),{},{node:i.hoveredNode})),i.hoveredNode=l,i.emit("enterNode",q(q({},s),{},{node:l})),i.scheduleHighlightedNodesRender();return}if(i.hoveredNode&&i.getNodeAtPosition(o)!==i.hoveredNode){var u=i.hoveredNode;i.hoveredNode=null,i.emit("leaveNode",q(q({},s),{},{node:u})),i.scheduleHighlightedNodesRender();return}if(i.settings.enableEdgeEvents){var c=i.hoveredNode?null:i.getEdgeAtPoint(s.event.x,s.event.y);c!==i.hoveredEdge&&(i.hoveredEdge&&i.emit("leaveEdge",q(q({},s),{},{edge:i.hoveredEdge})),c&&i.emit("enterEdge",q(q({},s),{},{edge:c})),i.hoveredEdge=c)}},this.activeListeners.handleMoveBody=function(a){var o=Pn(a);i.emit("moveBody",{event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(a){var o=Pn(a),s={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};i.hoveredNode&&(i.emit("leaveNode",q(q({},s),{},{node:i.hoveredNode})),i.scheduleHighlightedNodesRender()),i.settings.enableEdgeEvents&&i.hoveredEdge&&(i.emit("leaveEdge",q(q({},s),{},{edge:i.hoveredEdge})),i.scheduleHighlightedNodesRender()),i.emit("leaveStage",q({},s))},this.activeListeners.handleEnter=function(a){var o=Pn(a),s={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};i.emit("enterStage",q({},s))};var r=function(o){return function(s){var l=Pn(s),u={event:l,preventSigmaDefault:function(){l.preventSigmaDefault()}},c=i.getNodeAtPosition(l);if(c)return i.emit("".concat(o,"Node"),q(q({},u),{},{node:c}));if(i.settings.enableEdgeEvents){var d=i.getEdgeAtPoint(l.x,l.y);if(d)return i.emit("".concat(o,"Edge"),q(q({},u),{},{edge:d}))}return i.emit("".concat(o,"Stage"),u)}};return this.activeListeners.handleClick=r("click"),this.activeListeners.handleRightClick=r("rightClick"),this.activeListeners.handleDoubleClick=r("doubleClick"),this.activeListeners.handleWheel=r("wheel"),this.activeListeners.handleDown=r("down"),this.activeListeners.handleUp=r("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var i=this,r=this.graph,a=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(o){var s,l=(s=o.hints)===null||s===void 0?void 0:s.attributes;i.graph.forEachNode(function(c){return i.updateNode(c)});var u=!l||l.some(function(c){return a.has(c)});i.refresh({partialGraph:{nodes:r.nodes()},skipIndexation:!u,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(o){var s,l=(s=o.hints)===null||s===void 0?void 0:s.attributes;i.graph.forEachEdge(function(c){return i.updateEdge(c)});var u=l&&["zIndex","type"].some(function(c){return l==null?void 0:l.includes(c)});i.refresh({partialGraph:{edges:r.edges()},skipIndexation:!u,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(o){var s=o.key;i.addNode(s),i.refresh({partialGraph:{nodes:[s]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(o){var s=o.key;i.refresh({partialGraph:{nodes:[s]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(o){var s=o.key;i.removeNode(s),i.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(o){var s=o.key;i.addEdge(s),i.refresh({partialGraph:{edges:[s]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(o){var s=o.key;i.refresh({partialGraph:{edges:[s]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(o){var s=o.key;i.removeEdge(s),i.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){i.clearEdgeState(),i.clearEdgeIndices(),i.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){i.clearEdgeState(),i.clearNodeState(),i.clearEdgeIndices(),i.clearNodeIndices(),i.refresh({schedule:!0})},r.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var i=this.graph;i.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(i,r){var a=go(this.webGLContexts.edges,this.frameBuffers.edges,i,r,this.pixelRatio,this.pickingDownSizingRatio),o=fo.apply(void 0,Fo(a)),s=this.itemIDsIndex[o];return s&&s.type==="edge"?s.id:null}},{key:"process",value:function(){var i=this;this.emit("beforeProcess");var r=this.graph,a=this.settings,o=this.getDimensions();if(this.nodeExtent=kf(this.graph),!this.settings.autoRescale){var s=o.width,l=o.height,u=this.nodeExtent,c=u.x,d=u.y;this.nodeExtent={x:[(c[0]+c[1])/2-s/2,(c[0]+c[1])/2+s/2],y:[(d[0]+d[1])/2-l/2,(d[0]+d[1])/2+l/2]}}this.normalizationFunction=Ao(this.customBBox||this.nodeExtent);var h=new Lo,f=Rn(h.getState(),o,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(o,a.labelGridCellSize);for(var p={},b={},y={},E={},_=1,v=r.nodes(),w=0,N=v.length;w<N;w++){var k=v[w],x=this.nodeDataCache[k],T=r.getNodeAttributes(k);x.x=T.x,x.y=T.y,this.normalizationFunction.applyTo(x),typeof x.label=="string"&&!x.hidden&&this.labelGrid.add(k,x.size,this.framedGraphToViewport(x,{matrix:f})),p[x.type]=(p[x.type]||0)+1}this.labelGrid.organize();for(var M in this.nodePrograms){if(!kt.call(this.nodePrograms,M))throw new Error('Sigma: could not find a suitable program for node type "'.concat(M,'"!'));this.nodePrograms[M].reallocate(p[M]||0),p[M]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(v=Do(this.nodeZExtent,function(me){return i.nodeDataCache[me].zIndex},v));for(var L=0,O=v.length;L<O;L++){var H=v[L];b[H]=_,E[b[H]]={type:"node",id:H},_++;var R=this.nodeDataCache[H];this.addNodeToProgram(H,b[H],p[R.type]++)}for(var z={},j=r.edges(),Y=0,te=j.length;Y<te;Y++){var V=j[Y],X=this.edgeDataCache[V];z[X.type]=(z[X.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(j=Do(this.edgeZExtent,function(me){return i.edgeDataCache[me].zIndex},j));for(var ne in this.edgePrograms){if(!kt.call(this.edgePrograms,ne))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(ne,'"!'));this.edgePrograms[ne].reallocate(z[ne]||0),z[ne]=0}for(var re=0,Le=j.length;re<Le;re++){var de=j[re];y[de]=_,E[y[de]]={type:"edge",id:de},_++;var _e=this.edgeDataCache[de];this.addEdgeToProgram(de,y[de],z[_e.type]++)}return this.itemIDsIndex=E,this.nodeIndices=b,this.edgeIndices=y,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(i){var r=this,a=this.settings;if(this.camera.minRatio=a.minCameraRatio,this.camera.maxRatio=a.maxCameraRatio,this.camera.enabledZooming=a.enableCameraZooming,this.camera.enabledPanning=a.enableCameraPanning,this.camera.enabledRotation=a.enableCameraRotation,a.cameraPanBoundaries?this.camera.clean=function(c){return r.cleanCameraState(c,a.cameraPanBoundaries&&ea(a.cameraPanBoundaries)==="object"?a.cameraPanBoundaries:{})}:this.camera.clean=null,this.camera.setState(this.camera.validateState(this.camera.getState())),i){if(i.edgeProgramClasses!==a.edgeProgramClasses){for(var o in a.edgeProgramClasses)a.edgeProgramClasses[o]!==i.edgeProgramClasses[o]&&this.registerEdgeProgram(o,a.edgeProgramClasses[o]);for(var s in i.edgeProgramClasses)a.edgeProgramClasses[s]||this.unregisterEdgeProgram(s)}if(i.nodeProgramClasses!==a.nodeProgramClasses||i.nodeHoverProgramClasses!==a.nodeHoverProgramClasses){for(var l in a.nodeProgramClasses)(a.nodeProgramClasses[l]!==i.nodeProgramClasses[l]||a.nodeHoverProgramClasses[l]!==i.nodeHoverProgramClasses[l])&&this.registerNodeProgram(l,a.nodeProgramClasses[l],a.nodeHoverProgramClasses[l]);for(var u in i.nodeProgramClasses)a.nodeProgramClasses[u]||this.unregisterNodeProgram(u)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"cleanCameraState",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.tolerance,o=a===void 0?0:a,s=r.boundaries,l=q({},i),u=s||this.nodeExtent,c=wn(u.x,2),d=c[0],h=c[1],f=wn(u.y,2),p=f[0],b=f[1],y=[this.graphToViewport({x:d,y:p},{cameraState:i}),this.graphToViewport({x:h,y:p},{cameraState:i}),this.graphToViewport({x:d,y:b},{cameraState:i}),this.graphToViewport({x:h,y:b},{cameraState:i})],E=1/0,_=-1/0,v=1/0,w=-1/0;y.forEach(function(z){var j=z.x,Y=z.y;E=Math.min(E,j),_=Math.max(_,j),v=Math.min(v,Y),w=Math.max(w,Y)});var N=_-E,k=w-v,x=this.getDimensions(),T=x.width,M=x.height,L=0,O=0;if(N>=T?_<T-o?L=_-(T-o):E>o&&(L=E-o):_>T+o?L=_-(T+o):E<-o&&(L=E+o),k>=M?w<M-o?O=w-(M-o):v>o&&(O=v-o):w>M+o?O=w-(M+o):v<-o&&(O=v+o),L||O){var H=this.viewportToFramedGraph({x:0,y:0},{cameraState:i}),R=this.viewportToFramedGraph({x:L,y:O},{cameraState:i});L=R.x-H.x,O=R.y-H.y,l.x+=L,l.y+=O}return l}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var i=this.camera.getState(),r=this.labelGrid.getLabelsToDisplay(i.ratio,this.settings.labelDensity);No(r,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var a=this.canvasContexts.labels,o=0,s=r.length;o<s;o++){var l=r[o],u=this.nodeDataCache[l];if(!this.displayedNodeLabels.has(l)&&!u.hidden){var c=this.framedGraphToViewport(u),d=c.x,h=c.y,f=this.scaleSize(u.size);if(!(!u.forceLabel&&f<this.settings.labelRenderedSizeThreshold)&&!(d<-Po||d>this.width+Po||h<-Io||h>this.height+Io)){this.displayedNodeLabels.add(l);var p=this.settings.defaultDrawNodeLabel,b=this.nodePrograms[u.type],y=(b==null?void 0:b.drawLabel)||p;y(a,q(q({key:l},u),{},{size:f,x:d,y:h}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var i=this.canvasContexts.edgeLabels;i.clearRect(0,0,this.width,this.height);var r=zf({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});No(r,this.edgesWithForcedLabels);for(var a=new Set,o=0,s=r.length;o<s;o++){var l=r[o],u=this.graph.extremities(l),c=this.nodeDataCache[u[0]],d=this.nodeDataCache[u[1]],h=this.edgeDataCache[l];if(!a.has(l)&&!(h.hidden||c.hidden||d.hidden)){var f=this.settings.defaultDrawEdgeLabel,p=this.edgePrograms[h.type],b=(p==null?void 0:p.drawLabel)||f;b(i,q(q({key:l},h),{},{size:this.scaleSize(h.size)}),q(q(q({key:u[0]},c),this.framedGraphToViewport(c)),{},{size:this.scaleSize(c.size)}),q(q(q({key:u[1]},d),this.framedGraphToViewport(d)),{},{size:this.scaleSize(d.size)}),this.settings),a.add(l)}}return this.displayedEdgeLabels=a,this}},{key:"renderHighlightedNodes",value:function(){var i=this,r=this.canvasContexts.hovers;r.clearRect(0,0,this.width,this.height);var a=function(f){var p=i.nodeDataCache[f],b=i.framedGraphToViewport(p),y=b.x,E=b.y,_=i.scaleSize(p.size),v=i.settings.defaultDrawNodeHover,w=i.nodePrograms[p.type],N=(w==null?void 0:w.drawHover)||v;N(r,q(q({key:f},p),{},{size:_,x:y,y:E}),i.settings)},o=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&o.push(this.hoveredNode),this.highlightedNodes.forEach(function(h){h!==i.hoveredNode&&o.push(h)}),o.forEach(function(h){return a(h)});var s={};o.forEach(function(h){var f=i.nodeDataCache[h].type;s[f]=(s[f]||0)+1});for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].reallocate(s[l]||0),s[l]=0;o.forEach(function(h){var f=i.nodeDataCache[h];i.nodeHoverPrograms[f.type].process(0,s[f.type]++,f)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var u=this.getRenderParams();for(var c in this.nodeHoverPrograms){var d=this.nodeHoverPrograms[c];d.render(u)}}},{key:"scheduleHighlightedNodesRender",value:function(){var i=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){i.renderHighlightedNodesFrame=null,i.renderHighlightedNodes(),i.renderEdgeLabels()}))}},{key:"render",value:function(){var i=this;this.emit("beforeRender");var r=function(){return i.emit("afterRender"),i};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(y){return i.resetWebGLTexture(y)}),!this.graph.order)return r();var a=this.mouseCaptor,o=this.camera.isAnimated()||a.isMoving||a.draggedEvents||a.currentWheelDirection,s=this.camera.getState(),l=this.getDimensions(),u=this.getGraphDimensions(),c=this.getStagePadding();this.matrix=Rn(s,l,u,c),this.invMatrix=Rn(s,l,u,c,!0),this.correctionRatio=_f(this.matrix,s,l),this.graphToViewportRatio=this.getGraphToViewportRatio();var d=this.getRenderParams();for(var h in this.nodePrograms){var f=this.nodePrograms[h];f.render(d)}if(!this.settings.hideEdgesOnMove||!o)for(var p in this.edgePrograms){var b=this.edgePrograms[p];b.render(d)}return this.settings.hideLabelsOnMove&&o||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),r()}},{key:"addNode",value:function(i){var r=Object.assign({},this.graph.getNodeAttributes(i));this.settings.nodeReducer&&(r=this.settings.nodeReducer(i,r));var a=Bf(this.settings,i,r);this.nodeDataCache[i]=a,this.nodesWithForcedLabels.delete(i),a.forceLabel&&!a.hidden&&this.nodesWithForcedLabels.add(i),this.highlightedNodes.delete(i),a.highlighted&&!a.hidden&&this.highlightedNodes.add(i),this.settings.zIndex&&(a.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=a.zIndex),a.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=a.zIndex))}},{key:"updateNode",value:function(i){this.addNode(i);var r=this.nodeDataCache[i];this.normalizationFunction.applyTo(r)}},{key:"removeNode",value:function(i){delete this.nodeDataCache[i],delete this.nodeProgramIndex[i],this.highlightedNodes.delete(i),this.hoveredNode===i&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(i)}},{key:"addEdge",value:function(i){var r=Object.assign({},this.graph.getEdgeAttributes(i));this.settings.edgeReducer&&(r=this.settings.edgeReducer(i,r));var a=Uf(this.settings,i,r);this.edgeDataCache[i]=a,this.edgesWithForcedLabels.delete(i),a.forceLabel&&!a.hidden&&this.edgesWithForcedLabels.add(i),this.settings.zIndex&&(a.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=a.zIndex),a.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=a.zIndex))}},{key:"updateEdge",value:function(i){this.addEdge(i)}},{key:"removeEdge",value:function(i){delete this.edgeDataCache[i],delete this.edgeProgramIndex[i],this.hoveredEdge===i&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(i)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new Ro,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0],this.highlightedNodes=new Set}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(i,r,a){var o=this.nodeDataCache[i],s=this.nodePrograms[o.type];if(!s)throw new Error('Sigma: could not find a suitable program for node type "'.concat(o.type,'"!'));s.process(r,a,o),this.nodeProgramIndex[i]=a}},{key:"addEdgeToProgram",value:function(i,r,a){var o=this.edgeDataCache[i],s=this.edgePrograms[o.type];if(!s)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(o.type,'"!'));var l=this.graph.extremities(i),u=this.nodeDataCache[l[0]],c=this.nodeDataCache[l[1]];s.process(r,a,u,c,o),this.edgeProgramIndex[i]=a}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var i=this.settings,r=i.stagePadding,a=i.autoRescale;return a&&r||0}},{key:"createLayer",value:function(i,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[i])throw new Error('Sigma: a layer named "'.concat(i,'" already exists'));var o=xf(r,{position:"absolute"},{class:"sigma-".concat(i)});return a.style&&Object.assign(o.style,a.style),this.elements[i]=o,"beforeLayer"in a&&a.beforeLayer?this.elements[a.beforeLayer].before(o):"afterLayer"in a&&a.afterLayer?this.elements[a.afterLayer].after(o):this.container.appendChild(o),o}},{key:"createCanvas",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(i,"canvas",r)}},{key:"createCanvasContext",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.createCanvas(i,r),o={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[i]=a.getContext("2d",o),this}},{key:"createWebGLContext",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(r==null?void 0:r.canvas)||this.createCanvas(i,r);r.hidden&&a.remove();var o=q({preserveDrawingBuffer:!1,antialias:!1},r),s;s=a.getContext("webgl2",o),s||(s=a.getContext("webgl",o)),s||(s=a.getContext("experimental-webgl",o));var l=s;if(this.webGLContexts[i]=l,l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),r.picking){this.pickingLayers.add(i);var u=l.createFramebuffer();if(!u)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(i));this.frameBuffers[i]=u}return l}},{key:"killLayer",value:function(i){var r=this.elements[i];if(!r)throw new Error("Sigma: cannot kill layer ".concat(i,", which does not exist"));if(this.webGLContexts[i]){var a,o=this.webGLContexts[i];(a=o.getExtension("WEBGL_lose_context"))===null||a===void 0||a.loseContext(),delete this.webGLContexts[i]}else this.canvasContexts[i]&&delete this.canvasContexts[i];return r.remove(),delete this.elements[i],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(i){this.unbindCameraHandlers(),this.camera=i,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(i){i!==this.graph&&(this.hoveredNode&&!i.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!i.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=i,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var i=this.customBBox||this.nodeExtent;return{width:i.x[1]-i.x[0]||1,height:i.y[1]-i.y[0]||1}}},{key:"getNodeDisplayData",value:function(i){var r=this.nodeDataCache[i];return r?Object.assign({},r):void 0}},{key:"getEdgeDisplayData",value:function(i){var r=this.edgeDataCache[i];return r?Object.assign({},r):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return q({},this.settings)}},{key:"getSetting",value:function(i){return this.settings[i]}},{key:"setSetting",value:function(i,r){var a=q({},this.settings);return this.settings[i]=r,Cr(this.settings),this.handleSettingsUpdate(a),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(i,r){return this.setSetting(i,r(this.settings[i])),this}},{key:"setSettings",value:function(i){var r=q({},this.settings);return this.settings=q(q({},this.settings),i),Cr(this.settings),this.handleSettingsUpdate(r),this.scheduleRefresh(),this}},{key:"resize",value:function(i){var r=this.width,a=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=Co(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!i&&r===this.width&&a===this.height)return this;for(var o in this.elements){var s=this.elements[o];s.style.width=this.width+"px",s.style.height=this.height+"px"}for(var l in this.canvasContexts)this.elements[l].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[l].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[l].scale(this.pixelRatio,this.pixelRatio);for(var u in this.webGLContexts){this.elements[u].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[u].setAttribute("height",this.height*this.pixelRatio+"px");var c=this.webGLContexts[u];if(c.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(u)){var d=this.textures[u];d&&c.deleteTexture(d)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(i){var r=this,a=(i==null?void 0:i.skipIndexation)!==void 0?i==null?void 0:i.skipIndexation:!1,o=(i==null?void 0:i.schedule)!==void 0?i.schedule:!1,s=!i||!i.partialGraph;if(s)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(w){return r.addNode(w)}),this.graph.forEachEdge(function(w){return r.addEdge(w)});else{for(var l,u,c=((l=i.partialGraph)===null||l===void 0?void 0:l.nodes)||[],d=0,h=(c==null?void 0:c.length)||0;d<h;d++){var f=c[d];if(this.updateNode(f),a){var p=this.nodeProgramIndex[f];if(p===void 0)throw new Error('Sigma: node "'.concat(f,`" can't be repaint`));this.addNodeToProgram(f,this.nodeIndices[f],p)}}for(var b=(i==null||(u=i.partialGraph)===null||u===void 0?void 0:u.edges)||[],y=0,E=b.length;y<E;y++){var _=b[y];if(this.updateEdge(_),a){var v=this.edgeProgramIndex[_];if(v===void 0)throw new Error('Sigma: edge "'.concat(_,`" can't be repaint`));this.addEdgeToProgram(_,this.edgeIndices[_],v)}}}return(s||!a)&&(this.needToProcess=!0),o?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var i=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){i.render()})),this}},{key:"scheduleRefresh",value:function(i){return this.refresh(q(q({},i),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(i,r){var a=this.camera.getState(),o=a.ratio,s=a.angle,l=a.x,u=a.y,c=this.settings,d=c.minCameraRatio,h=c.maxCameraRatio;typeof h=="number"&&(r=Math.min(r,h)),typeof d=="number"&&(r=Math.max(r,d));var f=r/o,p={x:this.width/2,y:this.height/2},b=this.viewportToFramedGraph(i),y=this.viewportToFramedGraph(p);return{angle:s,x:(b.x-y.x)*(1-f)+l,y:(b.y-y.y)*(1-f)+u,ratio:r}}},{key:"viewRectangle",value:function(){var i=this.viewportToFramedGraph({x:0,y:0}),r=this.viewportToFramedGraph({x:this.width,y:0}),a=this.viewportToFramedGraph({x:0,y:this.height});return{x1:i.x,y1:i.y,x2:r.x,y2:r.y,height:r.y-a.y}}},{key:"framedGraphToViewport",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=!!r.cameraState||!!r.viewportDimensions||!!r.graphDimensions,o=r.matrix?r.matrix:a?Rn(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding()):this.matrix,s=Qr(o,i);return{x:(1+s.x)*this.width/2,y:(1-s.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=!!r.cameraState||!!r.viewportDimensions||!r.graphDimensions,o=r.matrix?r.matrix:a?Rn(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding(),!0):this.invMatrix,s=Qr(o,{x:i.x/this.width*2-1,y:1-i.y/this.height*2});return isNaN(s.x)&&(s.x=0),isNaN(s.y)&&(s.y=0),s}},{key:"viewportToGraph",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(i,r))}},{key:"graphToViewport",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(i),r)}},{key:"getGraphToViewportRatio",value:function(){var i={x:0,y:0},r={x:1,y:1},a=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)),o=this.graphToViewport(i),s=this.graphToViewport(r),l=Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2));return l/a}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(i){return this.customBBox=i,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var i=this.container;i.firstChild;)i.removeChild(i.firstChild);for(var r in this.nodePrograms)this.nodePrograms[r].kill();for(var a in this.nodeHoverPrograms)this.nodeHoverPrograms[a].kill();for(var o in this.edgePrograms)this.edgePrograms[o].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var s in this.elements)this.killLayer(s);this.canvasContexts={},this.webGLContexts={},this.elements={}}},{key:"scaleSize",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return i/this.settings.zoomToSizeRatioFunction(r)*(this.getSetting("itemSizesReference")==="positions"?r*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var i={};for(var r in this.elements)this.elements[r]instanceof HTMLCanvasElement&&(i[r]=this.elements[r]);return i}}])}(ka),Wf=Hf;function jf(n){if(Array.isArray(n))return n}function Vf(n,t){var e=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e!=null){var i,r,a,o,s=[],l=!0,u=!1;try{if(a=(e=e.call(n)).next,t!==0)for(;!(l=(i=a.call(e)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}function ta(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,i=Array(t);e<t;e++)i[e]=n[e];return i}function El(n,t){if(n){if(typeof n=="string")return ta(n,t);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ta(n,t):void 0}}function Kf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yf(n,t){return jf(n)||Vf(n,t)||El(n,t)||Kf()}function qf(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Zf(n,t){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var i=e.call(n,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function Tl(n){var t=Zf(n,"string");return typeof t=="symbol"?t:t+""}function Jf(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Tl(i.key),i)}}function Xf(n,t,e){return t&&Jf(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Yi(n){return Yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yi(n)}function Cl(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cl=function(){return!!n})()}function na(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Qf(n,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return na(n)}function eg(n,t,e){return t=Yi(t),Qf(n,Cl()?Reflect.construct(t,e||[],Yi(n).constructor):t.apply(n,e))}function ia(n,t){return ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},ia(n,t)}function tg(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&ia(n,t)}function hn(n,t,e){return(t=Tl(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function ng(n){if(Array.isArray(n))return ta(n)}function ig(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function rg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ar(n){return ng(n)||ig(n)||El(n)||rg()}function Oo(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function $o(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Oo(Object(e),!0).forEach(function(i){hn(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Oo(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}var ag="relative",og={drawLabel:void 0,drawHover:void 0,borders:[{size:{value:.1},color:{attribute:"borderColor"}},{size:{fill:!0},color:{attribute:"color"}}]},sg="#000000";function lg(n){var t=n.borders,e=bo(t.filter(function(r){var a=r.size;return"fill"in a}).length),i=`
precision highp float;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
varying vec4 v_color;
#else
// For normal mode, we use the border colors defined in the program:
`.concat(t.flatMap(function(r,a){var o=r.size;return"attribute"in o?["varying float v_borderSize_".concat(a+1,";")]:[]}).join(`
`),`
`).concat(t.flatMap(function(r,a){var o=r.color;return"attribute"in o?["varying vec4 v_borderColor_".concat(a+1,";")]:"value"in o?["uniform vec4 u_borderColor_".concat(a+1,";")]:[]}).join(`
`),`
#endif

uniform float u_correctionRatio;

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = length(v_diffVector);
  float aaBorder = 2.0 * u_correctionRatio;
  float v_borderSize_0 = v_radius;
  vec4 v_borderColor_0 = transparent;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > v_radius)
    gl_FragColor = transparent;
  else {
    gl_FragColor = v_color;
    gl_FragColor.a *= bias;
  }
  #else
  // Sizes:
`).concat(t.flatMap(function(r,a){var o=r.size;if("fill"in o)return[];o=o;var s="attribute"in o?"v_borderSize_".concat(a+1):bo(o.value),l=(o.mode||ag)==="pixels"?"u_correctionRatio":"v_radius";return["  float borderSize_".concat(a+1," = ").concat(l," * ").concat(s,";")]}).join(`
`),`
  // Now, let's split the remaining space between "fill" borders:
  float fillBorderSize = (v_radius - (`).concat(t.flatMap(function(r,a){var o=r.size;return"fill"in o?[]:["borderSize_".concat(a+1)]}).join(" + "),") ) / ").concat(e,`;
`).concat(t.flatMap(function(r,a){var o=r.size;return"fill"in o?["  float borderSize_".concat(a+1," = fillBorderSize;")]:[]}).join(`
`),`

  // Finally, normalize all border sizes, to start from the full size and to end with the smallest:
  float adjustedBorderSize_0 = v_radius;
`).concat(t.map(function(r,a){return"  float adjustedBorderSize_".concat(a+1," = adjustedBorderSize_").concat(a," - borderSize_").concat(a+1,";")}).join(`
`),`

  // Colors:
  vec4 borderColor_0 = transparent;
`).concat(t.map(function(r,a){var o=r.color,s=[];return"attribute"in o?s.push("  vec4 borderColor_".concat(a+1," = v_borderColor_").concat(a+1,";")):"transparent"in o?s.push("  vec4 borderColor_".concat(a+1," = vec4(0.0, 0.0, 0.0, 0.0);")):s.push("  vec4 borderColor_".concat(a+1," = u_borderColor_").concat(a+1,";")),s.push("  borderColor_".concat(a+1,".a *= bias;")),s.push("  if (borderSize_".concat(a+1," <= 1.0 * u_correctionRatio) { borderColor_").concat(a+1," = borderColor_").concat(a,"; }")),s.join(`
`)}).join(`
`),`
  if (dist > adjustedBorderSize_0) {
    gl_FragColor = borderColor_0;
  } else `).concat(t.map(function(r,a){return"if (dist > adjustedBorderSize_".concat(a,` - aaBorder) {
    gl_FragColor = mix(borderColor_`).concat(a+1,", borderColor_").concat(a,", (dist - adjustedBorderSize_").concat(a,` + aaBorder) / aaBorder);
  } else if (dist > adjustedBorderSize_`).concat(a+1,`) {
    gl_FragColor = borderColor_`).concat(a+1,`;
  } else `)}).join(""),` { /* Nothing to add here */ }
  #endif
}
`);return i}function ug(n){var t=n.borders,e=`
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
attribute vec4 a_id;
varying vec4 v_color;
#else
`.concat(t.flatMap(function(i,r){var a=i.size;return"attribute"in a?["attribute float a_borderSize_".concat(r+1,";"),"varying float v_borderSize_".concat(r+1,";")]:[]}).join(`
`),`
`).concat(t.flatMap(function(i,r){var a=i.color;return"attribute"in a?["attribute vec4 a_borderColor_".concat(r+1,";"),"varying vec4 v_borderColor_".concat(r+1,";")]:[]}).join(`
`),`
#endif

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_radius = size / 2.0;
  v_diffVector = diffVector;

  #ifdef PICKING_MODE
  v_color = a_id;
  #else
`).concat(t.flatMap(function(i,r){var a=i.size;return"attribute"in a?["  v_borderSize_".concat(r+1," = a_borderSize_").concat(r+1,";")]:[]}).join(`
`),`
`).concat(t.flatMap(function(i,r){var a=i.color;return"attribute"in a?["  v_borderColor_".concat(r+1," = a_borderColor_").concat(r+1,";")]:[]}).join(`
`),`
  #endif
}
`);return e}var Dl=WebGLRenderingContext,Go=Dl.UNSIGNED_BYTE,Ci=Dl.FLOAT;function Al(n){var t,e=$o($o({},og),n||{}),i=e.borders,r=e.drawLabel,a=e.drawHover,o=["u_sizeRatio","u_correctionRatio","u_matrix"].concat(Ar(i.flatMap(function(s,l){var u=s.color;return"value"in u?["u_borderColor_".concat(l+1)]:[]})));return t=function(s){tg(l,s);function l(){var u;qf(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=eg(this,l,[].concat(d)),hn(na(u),"drawLabel",r),hn(na(u),"drawHover",a),u}return Xf(l,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:ug(e),FRAGMENT_SHADER_SOURCE:lg(e),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:o,ATTRIBUTES:[{name:"a_position",size:2,type:Ci},{name:"a_id",size:4,type:Go,normalized:!0},{name:"a_size",size:1,type:Ci}].concat(Ar(i.flatMap(function(c,d){var h=c.color;return"attribute"in h?[{name:"a_borderColor_".concat(d+1),size:4,type:Go,normalized:!0}]:[]})),Ar(i.flatMap(function(c,d){var h=c.size;return"attribute"in h?[{name:"a_borderSize_".concat(d+1),size:1,type:Ci}]:[]}))),CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Ci}],CONSTANT_DATA:[[l.ANGLE_1],[l.ANGLE_2],[l.ANGLE_3]]}}},{key:"processVisibleItem",value:function(c,d,h){var f=this.array;f[d++]=h.x,f[d++]=h.y,f[d++]=c,f[d++]=h.size,i.forEach(function(p){var b=p.color;"attribute"in b&&(f[d++]=Vt(h[b.attribute]||b.defaultValue||sg))}),i.forEach(function(p){var b=p.size;"attribute"in b&&(f[d++]=h[b.attribute]||b.defaultValue)})}},{key:"setUniforms",value:function(c,d){var h=d.gl,f=d.uniformLocations,p=f.u_sizeRatio,b=f.u_correctionRatio,y=f.u_matrix;h.uniform1f(b,c.correctionRatio),h.uniform1f(p,c.sizeRatio),h.uniformMatrix3fv(y,!1,c.matrix),i.forEach(function(E,_){var v=E.color;if("value"in v){var w=f["u_borderColor_".concat(_+1)],N=xh(v.value),k=Yf(N,4),x=k[0],T=k[1],M=k[2],L=k[3];h.uniform4f(w,x/255,T/255,M/255,L/255)}})}}]),l}(rl),hn(t,"ANGLE_1",0),hn(t,"ANGLE_2",2*Math.PI/3),hn(t,"ANGLE_3",4*Math.PI/3),t}Al();function cg(){const n=arguments[0];for(let t=1,e=arguments.length;t<e;t++)if(arguments[t])for(const i in arguments[t])n[i]=arguments[t][i];return n}let Ee=cg;typeof Object.assign=="function"&&(Ee=Object.assign);function Xe(n,t,e,i){const r=n._nodes.get(t);let a=null;return r&&(i==="mixed"?a=r.out&&r.out[e]||r.undirected&&r.undirected[e]:i==="directed"?a=r.out&&r.out[e]:a=r.undirected&&r.undirected[e]),a}function Re(n){return typeof n=="object"&&n!==null}function Nl(n){let t;for(t in n)return!1;return!0}function qe(n,t,e){Object.defineProperty(n,t,{enumerable:!1,configurable:!1,writable:!0,value:e})}function st(n,t,e){const i={enumerable:!0,configurable:!0};typeof e=="function"?i.get=e:(i.value=e,i.writable=!1),Object.defineProperty(n,t,i)}function zo(n){return!(!Re(n)||n.attributes&&!Array.isArray(n.attributes))}function dg(){let n=Math.floor(Math.random()*256)&255;return()=>n++}function xt(){const n=arguments;let t=null,e=-1;return{[Symbol.iterator](){return this},next(){let i=null;do{if(t===null){if(e++,e>=n.length)return{done:!0};t=n[e][Symbol.iterator]()}if(i=t.next(),i.done){t=null;continue}break}while(!0);return i}}}function _n(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class xa extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class W extends xa{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,W.prototype.constructor)}}class B extends xa{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,B.prototype.constructor)}}class Z extends xa{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Z.prototype.constructor)}}function Ll(n,t){this.key=n,this.attributes=t,this.clear()}Ll.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Fl(n,t){this.key=n,this.attributes=t,this.clear()}Fl.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Ml(n,t){this.key=n,this.attributes=t,this.clear()}Ml.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function kn(n,t,e,i,r){this.key=t,this.attributes=r,this.undirected=n,this.source=e,this.target=i}kn.prototype.attach=function(){let n="out",t="in";this.undirected&&(n=t="undirected");const e=this.source.key,i=this.target.key;this.source[n][i]=this,!(this.undirected&&e===i)&&(this.target[t][e]=this)};kn.prototype.attachMulti=function(){let n="out",t="in";const e=this.source.key,i=this.target.key;this.undirected&&(n=t="undirected");const r=this.source[n],a=r[i];if(typeof a>"u"){r[i]=this,this.undirected&&e===i||(this.target[t][e]=this);return}a.previous=this,this.next=a,r[i]=this,this.target[t][e]=this};kn.prototype.detach=function(){const n=this.source.key,t=this.target.key;let e="out",i="in";this.undirected&&(e=i="undirected"),delete this.source[e][t],delete this.target[i][n]};kn.prototype.detachMulti=function(){const n=this.source.key,t=this.target.key;let e="out",i="in";this.undirected&&(e=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[e][t],delete this.target[i][n]):(this.next.previous=void 0,this.source[e][t]=this.next,this.target[i][n]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Rl=0,Pl=1,hg=2,Il=3;function Et(n,t,e,i,r,a,o){let s,l,u,c;if(i=""+i,e===Rl){if(s=n._nodes.get(i),!s)throw new B(`Graph.${t}: could not find the "${i}" node in the graph.`);u=r,c=a}else if(e===Il){if(r=""+r,l=n._edges.get(r),!l)throw new B(`Graph.${t}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(i===d)s=l.target;else if(i===h)s=l.source;else throw new B(`Graph.${t}: the "${i}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=a,c=o}else{if(l=n._edges.get(i),!l)throw new B(`Graph.${t}: could not find the "${i}" edge in the graph.`);e===Pl?s=l.source:s=l.target,u=r,c=a}return[s,u,c]}function fg(n,t,e){n.prototype[t]=function(i,r,a){const[o,s]=Et(this,t,e,i,r,a);return o.attributes[s]}}function gg(n,t,e){n.prototype[t]=function(i,r){const[a]=Et(this,t,e,i,r);return a.attributes}}function mg(n,t,e){n.prototype[t]=function(i,r,a){const[o,s]=Et(this,t,e,i,r,a);return o.attributes.hasOwnProperty(s)}}function pg(n,t,e){n.prototype[t]=function(i,r,a,o){const[s,l,u]=Et(this,t,e,i,r,a,o);return s.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:l}),this}}function bg(n,t,e){n.prototype[t]=function(i,r,a,o){const[s,l,u]=Et(this,t,e,i,r,a,o);if(typeof u!="function")throw new W(`Graph.${t}: updater should be a function.`);const c=s.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:l}),this}}function vg(n,t,e){n.prototype[t]=function(i,r,a){const[o,s]=Et(this,t,e,i,r,a);return delete o.attributes[s],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:s}),this}}function yg(n,t,e){n.prototype[t]=function(i,r,a){const[o,s]=Et(this,t,e,i,r,a);if(!Re(s))throw new W(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=s,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function wg(n,t,e){n.prototype[t]=function(i,r,a){const[o,s]=Et(this,t,e,i,r,a);if(!Re(s))throw new W(`Graph.${t}: provided attributes are not a plain object.`);return Ee(o.attributes,s),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:s}),this}}function _g(n,t,e){n.prototype[t]=function(i,r,a){const[o,s]=Et(this,t,e,i,r,a);if(typeof s!="function")throw new W(`Graph.${t}: provided updater is not a function.`);return o.attributes=s(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const kg=[{name:n=>`get${n}Attribute`,attacher:fg},{name:n=>`get${n}Attributes`,attacher:gg},{name:n=>`has${n}Attribute`,attacher:mg},{name:n=>`set${n}Attribute`,attacher:pg},{name:n=>`update${n}Attribute`,attacher:bg},{name:n=>`remove${n}Attribute`,attacher:vg},{name:n=>`replace${n}Attributes`,attacher:yg},{name:n=>`merge${n}Attributes`,attacher:wg},{name:n=>`update${n}Attributes`,attacher:_g}];function Sg(n){kg.forEach(function({name:t,attacher:e}){e(n,t("Node"),Rl),e(n,t("Source"),Pl),e(n,t("Target"),hg),e(n,t("Opposite"),Il)})}function xg(n,t,e){n.prototype[t]=function(i,r){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,s=""+r;if(r=arguments[2],a=Xe(this,o,s,e),!a)throw new B(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(e!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,a=this._edges.get(i),!a)throw new B(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return a.attributes[r]}}function Eg(n,t,e){n.prototype[t]=function(i){let r;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,o=""+arguments[1];if(r=Xe(this,a,o,e),!r)throw new B(`Graph.${t}: could not find an edge for the given path ("${a}" - "${o}").`)}else{if(e!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new B(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function Tg(n,t,e){n.prototype[t]=function(i,r){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,s=""+r;if(r=arguments[2],a=Xe(this,o,s,e),!a)throw new B(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(e!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,a=this._edges.get(i),!a)throw new B(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return a.attributes.hasOwnProperty(r)}}function Cg(n,t,e){n.prototype[t]=function(i,r,a){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,l=""+r;if(r=arguments[2],a=arguments[3],o=Xe(this,s,l,e),!o)throw new B(`Graph.${t}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(e!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new B(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=a,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Dg(n,t,e){n.prototype[t]=function(i,r,a){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,l=""+r;if(r=arguments[2],a=arguments[3],o=Xe(this,s,l,e),!o)throw new B(`Graph.${t}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(e!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new B(`Graph.${t}: could not find the "${i}" edge in the graph.`)}if(typeof a!="function")throw new W(`Graph.${t}: updater should be a function.`);return o.attributes[r]=a(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Ag(n,t,e){n.prototype[t]=function(i,r){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,s=""+r;if(r=arguments[2],a=Xe(this,o,s,e),!a)throw new B(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(e!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,a=this._edges.get(i),!a)throw new B(`Graph.${t}: could not find the "${i}" edge in the graph.`)}return delete a.attributes[r],this.emit("edgeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:r}),this}}function Ng(n,t,e){n.prototype[t]=function(i,r){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,s=""+r;if(r=arguments[2],a=Xe(this,o,s,e),!a)throw new B(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(e!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,a=this._edges.get(i),!a)throw new B(`Graph.${t}: could not find the "${i}" edge in the graph.`)}if(!Re(r))throw new W(`Graph.${t}: provided attributes are not a plain object.`);return a.attributes=r,this.emit("edgeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function Lg(n,t,e){n.prototype[t]=function(i,r){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,s=""+r;if(r=arguments[2],a=Xe(this,o,s,e),!a)throw new B(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(e!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,a=this._edges.get(i),!a)throw new B(`Graph.${t}: could not find the "${i}" edge in the graph.`)}if(!Re(r))throw new W(`Graph.${t}: provided attributes are not a plain object.`);return Ee(a.attributes,r),this.emit("edgeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:r}),this}}function Fg(n,t,e){n.prototype[t]=function(i,r){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new Z(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Z(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,s=""+r;if(r=arguments[2],a=Xe(this,o,s,e),!a)throw new B(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(e!=="mixed")throw new Z(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,a=this._edges.get(i),!a)throw new B(`Graph.${t}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new W(`Graph.${t}: provided updater is not a function.`);return a.attributes=r(a.attributes),this.emit("edgeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const Mg=[{name:n=>`get${n}Attribute`,attacher:xg},{name:n=>`get${n}Attributes`,attacher:Eg},{name:n=>`has${n}Attribute`,attacher:Tg},{name:n=>`set${n}Attribute`,attacher:Cg},{name:n=>`update${n}Attribute`,attacher:Dg},{name:n=>`remove${n}Attribute`,attacher:Ag},{name:n=>`replace${n}Attributes`,attacher:Ng},{name:n=>`merge${n}Attributes`,attacher:Lg},{name:n=>`update${n}Attributes`,attacher:Fg}];function Rg(n){Mg.forEach(function({name:t,attacher:e}){e(n,t("Edge"),"mixed"),e(n,t("DirectedEdge"),"directed"),e(n,t("UndirectedEdge"),"undirected")})}const Pg=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Ig(n,t,e,i){let r=!1;for(const a in t){if(a===i)continue;const o=t[a];if(r=e(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),n&&r)return o.key}}function Og(n,t,e,i){let r,a,o,s=!1;for(const l in t)if(l!==i){r=t[l];do{if(a=r.source,o=r.target,s=e(r.key,r.attributes,a.key,o.key,a.attributes,o.attributes,r.undirected),n&&s)return r.key;r=r.next}while(r!==void 0)}}function Nr(n,t){const e=Object.keys(n),i=e.length;let r,a=0;return{[Symbol.iterator](){return this},next(){do if(r)r=r.next;else{if(a>=i)return{done:!0};const o=e[a++];if(o===t){r=void 0;continue}r=n[o]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}}}}function $g(n,t,e,i){const r=t[e];if(!r)return;const a=r.source,o=r.target;if(i(r.key,r.attributes,a.key,o.key,a.attributes,o.attributes,r.undirected)&&n)return r.key}function Gg(n,t,e,i){let r=t[e];if(!r)return;let a=!1;do{if(a=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),n&&a)return r.key;r=r.next}while(r!==void 0)}function Lr(n,t){let e=n[t];if(e.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!e)return{done:!0};const r={edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected};return e=e.next,{done:!1,value:r}}};let i=!1;return{[Symbol.iterator](){return this},next(){return i===!0?{done:!0}:(i=!0,{done:!1,value:{edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected}})}}}function zg(n,t){if(n.size===0)return[];if(t==="mixed"||t===n.type)return Array.from(n._edges.keys());const e=t==="undirected"?n.undirectedSize:n.directedSize,i=new Array(e),r=t==="undirected",a=n._edges.values();let o=0,s,l;for(;s=a.next(),s.done!==!0;)l=s.value,l.undirected===r&&(i[o++]=l.key);return i}function Ol(n,t,e,i){if(t.size===0)return;const r=e!=="mixed"&&e!==t.type,a=e==="undirected";let o,s,l=!1;const u=t._edges.values();for(;o=u.next(),o.done!==!0;){if(s=o.value,r&&s.undirected!==a)continue;const{key:c,attributes:d,source:h,target:f}=s;if(l=i(c,d,h.key,f.key,h.attributes,f.attributes,s.undirected),n&&l)return c}}function Bg(n,t){if(n.size===0)return _n();const e=t!=="mixed"&&t!==n.type,i=t==="undirected",r=n._edges.values();return{[Symbol.iterator](){return this},next(){let a,o;for(;;){if(a=r.next(),a.done)return a;if(o=a.value,!(e&&o.undirected!==i))break}return{value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected},done:!1}}}}function Ea(n,t,e,i,r,a){const o=t?Og:Ig;let s;if(e!=="undirected"&&(i!=="out"&&(s=o(n,r.in,a),n&&s)||i!=="in"&&(s=o(n,r.out,a,i?void 0:r.key),n&&s))||e!=="directed"&&(s=o(n,r.undirected,a),n&&s))return s}function Ug(n,t,e,i){const r=[];return Ea(!1,n,t,e,i,function(a){r.push(a)}),r}function Hg(n,t,e){let i=_n();return n!=="undirected"&&(t!=="out"&&typeof e.in<"u"&&(i=xt(i,Nr(e.in))),t!=="in"&&typeof e.out<"u"&&(i=xt(i,Nr(e.out,t?void 0:e.key)))),n!=="directed"&&typeof e.undirected<"u"&&(i=xt(i,Nr(e.undirected))),i}function Ta(n,t,e,i,r,a,o){const s=e?Gg:$g;let l;if(t!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=s(n,r.in,a,o),n&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==a)&&(l=s(n,r.out,a,o),n&&l))||t!=="directed"&&typeof r.undirected<"u"&&(l=s(n,r.undirected,a,o),n&&l))return l}function Wg(n,t,e,i,r){const a=[];return Ta(!1,n,t,e,i,r,function(o){a.push(o)}),a}function jg(n,t,e,i){let r=_n();return n!=="undirected"&&(typeof e.in<"u"&&t!=="out"&&i in e.in&&(r=xt(r,Lr(e.in,i))),typeof e.out<"u"&&t!=="in"&&i in e.out&&(t||e.key!==i)&&(r=xt(r,Lr(e.out,i)))),n!=="directed"&&typeof e.undirected<"u"&&i in e.undirected&&(r=xt(r,Lr(e.undirected,i))),r}function Vg(n,t){const{name:e,type:i,direction:r}=t;n.prototype[e]=function(a,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return zg(this,i);if(arguments.length===1){a=""+a;const s=this._nodes.get(a);if(typeof s>"u")throw new B(`Graph.${e}: could not find the "${a}" node in the graph.`);return Ug(this.multi,i==="mixed"?this.type:i,r,s)}if(arguments.length===2){a=""+a,o=""+o;const s=this._nodes.get(a);if(!s)throw new B(`Graph.${e}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(o))throw new B(`Graph.${e}:  could not find the "${o}" target node in the graph.`);return Wg(i,this.multi,r,s,o)}throw new W(`Graph.${e}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Kg(n,t){const{name:e,type:i,direction:r}=t,a="forEach"+e[0].toUpperCase()+e.slice(1,-1);n.prototype[a]=function(u,c,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=u,Ol(!1,this,i,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new B(`Graph.${a}: could not find the "${u}" node in the graph.`);return Ea(!1,this.multi,i==="mixed"?this.type:i,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new B(`Graph.${a}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new B(`Graph.${a}:  could not find the "${c}" target node in the graph.`);return Ta(!1,i,this.multi,r,h,c,d)}throw new W(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+e[0].toUpperCase()+e.slice(1);n.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;i!=="directed"&&(h+=this.undirectedSize),i!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((p,b,y,E,_,v,w)=>{d[f++]=c(p,b,y,E,_,v,w)})}else d=[],u.push((h,f,p,b,y,E,_)=>{d.push(c(h,f,p,b,y,E,_))});return this[a].apply(this,u),d};const s="filter"+e[0].toUpperCase()+e.slice(1);n.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,p,b,y,E,_)=>{c(h,f,p,b,y,E,_)&&d.push(h)}),this[a].apply(this,u),d};const l="reduce"+e[0].toUpperCase()+e.slice(1);n.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new W(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new W(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,p,b,y,E,_,v)=>{h=c(h,f,p,b,y,E,_,v)}),this[a].apply(this,u),h}}function Yg(n,t){const{name:e,type:i,direction:r}=t,a="find"+e[0].toUpperCase()+e.slice(1,-1);n.prototype[a]=function(l,u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return c=l,Ol(!0,this,i,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new B(`Graph.${a}: could not find the "${l}" node in the graph.`);return Ea(!0,this.multi,i==="mixed"?this.type:i,r,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new B(`Graph.${a}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new B(`Graph.${a}:  could not find the "${u}" target node in the graph.`);return Ta(!0,i,this.multi,r,d,u,c)}throw new W(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+e[0].toUpperCase()+e.slice(1,-1);n.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,b,y,E)=>u(d,h,f,p,b,y,E)),!!this[a].apply(this,l)};const s="every"+e[0].toUpperCase()+e.slice(1,-1);n.prototype[s]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,p,b,y,E)=>!u(d,h,f,p,b,y,E)),!this[a].apply(this,l)}}function qg(n,t){const{name:e,type:i,direction:r}=t,a=e.slice(0,-1)+"Entries";n.prototype[a]=function(o,s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return _n();if(!arguments.length)return Bg(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new B(`Graph.${a}: could not find the "${o}" node in the graph.`);return Hg(i,r,l)}if(arguments.length===2){o=""+o,s=""+s;const l=this._nodes.get(o);if(!l)throw new B(`Graph.${a}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new B(`Graph.${a}:  could not find the "${s}" target node in the graph.`);return jg(i,r,l,s)}throw new W(`Graph.${a}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Zg(n){Pg.forEach(t=>{Vg(n,t),Kg(n,t),Yg(n,t),qg(n,t)})}const Jg=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function er(){this.A=null,this.B=null}er.prototype.wrap=function(n){this.A===null?this.A=n:this.B===null&&(this.B=n)};er.prototype.has=function(n){return this.A!==null&&n in this.A||this.B!==null&&n in this.B};function On(n,t,e,i,r){for(const a in i){const o=i[a],s=o.source,l=o.target,u=s===e?l:s;if(t&&t.has(u.key))continue;const c=r(u.key,u.attributes);if(n&&c)return u.key}}function Ca(n,t,e,i,r){if(t!=="mixed"){if(t==="undirected")return On(n,null,i,i.undirected,r);if(typeof e=="string")return On(n,null,i,i[e],r)}const a=new er;let o;if(t!=="undirected"){if(e!=="out"){if(o=On(n,null,i,i.in,r),n&&o)return o;a.wrap(i.in)}if(e!=="in"){if(o=On(n,a,i,i.out,r),n&&o)return o;a.wrap(i.out)}}if(t!=="directed"&&(o=On(n,a,i,i.undirected,r),n&&o))return o}function Xg(n,t,e){if(n!=="mixed"){if(n==="undirected")return Object.keys(e.undirected);if(typeof t=="string")return Object.keys(e[t])}const i=[];return Ca(!1,n,t,e,function(r){i.push(r)}),i}function $n(n,t,e){const i=Object.keys(e),r=i.length;let a=0;return{[Symbol.iterator](){return this},next(){let o=null;do{if(a>=r)return n&&n.wrap(e),{done:!0};const s=e[i[a++]],l=s.source,u=s.target;if(o=l===t?u:l,n&&n.has(o.key)){o=null;continue}}while(o===null);return{done:!1,value:{neighbor:o.key,attributes:o.attributes}}}}}function Qg(n,t,e){if(n!=="mixed"){if(n==="undirected")return $n(null,e,e.undirected);if(typeof t=="string")return $n(null,e,e[t])}let i=_n();const r=new er;return n!=="undirected"&&(t!=="out"&&(i=xt(i,$n(r,e,e.in))),t!=="in"&&(i=xt(i,$n(r,e,e.out)))),n!=="directed"&&(i=xt(i,$n(r,e,e.undirected))),i}function em(n,t){const{name:e,type:i,direction:r}=t;n.prototype[e]=function(a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];a=""+a;const o=this._nodes.get(a);if(typeof o>"u")throw new B(`Graph.${e}: could not find the "${a}" node in the graph.`);return Xg(i==="mixed"?this.type:i,r,o)}}function tm(n,t){const{name:e,type:i,direction:r}=t,a="forEach"+e[0].toUpperCase()+e.slice(1,-1);n.prototype[a]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new B(`Graph.${a}: could not find the "${u}" node in the graph.`);Ca(!1,i==="mixed"?this.type:i,r,d,c)};const o="map"+e[0].toUpperCase()+e.slice(1);n.prototype[o]=function(u,c){const d=[];return this[a](u,(h,f)=>{d.push(c(h,f))}),d};const s="filter"+e[0].toUpperCase()+e.slice(1);n.prototype[s]=function(u,c){const d=[];return this[a](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+e[0].toUpperCase()+e.slice(1);n.prototype[l]=function(u,c,d){if(arguments.length<3)throw new W(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[a](u,(f,p)=>{h=c(h,f,p)}),h}}function nm(n,t){const{name:e,type:i,direction:r}=t,a=e[0].toUpperCase()+e.slice(1,-1),o="find"+a;n.prototype[o]=function(u,c){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new B(`Graph.${o}: could not find the "${u}" node in the graph.`);return Ca(!0,i==="mixed"?this.type:i,r,d,c)};const s="some"+a;n.prototype[s]=function(u,c){return!!this[o](u,c)};const l="every"+a;n.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function im(n,t){const{name:e,type:i,direction:r}=t,a=e.slice(0,-1)+"Entries";n.prototype[a]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return _n();o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new B(`Graph.${a}: could not find the "${o}" node in the graph.`);return Qg(i==="mixed"?this.type:i,r,s)}}function rm(n){Jg.forEach(t=>{em(n,t),tm(n,t),nm(n,t),im(n,t)})}function Di(n,t,e,i,r){const a=i._nodes.values(),o=i.type;let s,l,u,c,d,h;for(;s=a.next(),s.done!==!0;){let f=!1;if(l=s.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do h=d.target,f=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(t&&l.key>u)){d=c[u];do h=d.target,h.key!==u&&(h=d.source),f=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}e&&!f&&r(l.key,null,l.attributes,null,null,null,null)}}function am(n,t){const e={key:n};return Nl(t.attributes)||(e.attributes=Ee({},t.attributes)),e}function om(n,t,e){const i={key:t,source:e.source.key,target:e.target.key};return Nl(e.attributes)||(i.attributes=Ee({},e.attributes)),n==="mixed"&&e.undirected&&(i.undirected=!0),i}function sm(n){if(!Re(n))throw new W('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in n))throw new W("Graph.import: serialized node is missing its key.");if("attributes"in n&&(!Re(n.attributes)||n.attributes===null))throw new W("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function lm(n){if(!Re(n))throw new W('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in n))throw new W("Graph.import: serialized edge is missing its source.");if(!("target"in n))throw new W("Graph.import: serialized edge is missing its target.");if("attributes"in n&&(!Re(n.attributes)||n.attributes===null))throw new W("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in n&&typeof n.undirected!="boolean")throw new W("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const um=dg(),cm=new Set(["directed","undirected","mixed"]),Bo=new Set(["domain","_events","_eventsCount","_maxListeners"]),dm=[{name:n=>`${n}Edge`,generateKey:!0},{name:n=>`${n}DirectedEdge`,generateKey:!0,type:"directed"},{name:n=>`${n}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:n=>`${n}EdgeWithKey`},{name:n=>`${n}DirectedEdgeWithKey`,type:"directed"},{name:n=>`${n}UndirectedEdgeWithKey`,type:"undirected"}],hm={allowSelfLoops:!0,multi:!1,type:"mixed"};function fm(n,t,e){if(e&&!Re(e))throw new W(`Graph.addNode: invalid attributes. Expecting an object but got "${e}"`);if(t=""+t,e=e||{},n._nodes.has(t))throw new Z(`Graph.addNode: the "${t}" node already exist in the graph.`);const i=new n.NodeDataClass(t,e);return n._nodes.set(t,i),n.emit("nodeAdded",{key:t,attributes:e}),i}function Uo(n,t,e){const i=new n.NodeDataClass(t,e);return n._nodes.set(t,i),n.emit("nodeAdded",{key:t,attributes:e}),i}function $l(n,t,e,i,r,a,o,s){if(!i&&n.type==="undirected")throw new Z(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new Z(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(s&&!Re(s))throw new W(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`);if(a=""+a,o=""+o,s=s||{},!n.allowSelfLoops&&a===o)throw new Z(`Graph.${t}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=n._nodes.get(a),u=n._nodes.get(o);if(!l)throw new B(`Graph.${t}: source node "${a}" not found.`);if(!u)throw new B(`Graph.${t}: target node "${o}" not found.`);const c={key:null,undirected:i,source:a,target:o,attributes:s};if(e)r=n._edgeKeyGenerator();else if(r=""+r,n._edges.has(r))throw new Z(`Graph.${t}: the "${r}" edge already exists in the graph.`);if(!n.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Z(`Graph.${t}: an edge linking "${a}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new kn(i,r,l,u,s);n._edges.set(r,d);const h=a===o;return i?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,n._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,n._directedSelfLoopCount++)),n.multi?d.attachMulti():d.attach(),i?n._undirectedSize++:n._directedSize++,c.key=r,n.emit("edgeAdded",c),r}function gm(n,t,e,i,r,a,o,s,l){if(!i&&n.type==="undirected")throw new Z(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&n.type==="directed")throw new Z(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(s){if(l){if(typeof s!="function")throw new W(`Graph.${t}: invalid updater function. Expecting a function but got "${s}"`)}else if(!Re(s))throw new W(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`)}a=""+a,o=""+o;let u;if(l&&(u=s,s=void 0),!n.allowSelfLoops&&a===o)throw new Z(`Graph.${t}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=n._nodes.get(a),d=n._nodes.get(o),h,f;if(!e&&(h=n._edges.get(r),h)){if((h.source.key!==a||h.target.key!==o)&&(!i||h.source.key!==o||h.target.key!==a))throw new Z(`Graph.${t}: inconsistency detected when attempting to merge the "${r}" edge with "${a}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!n.multi&&c&&(f=i?c.undirected[o]:c.out[o]),f){const _=[f.key,!1,!1,!1];if(l?!u:!s)return _;if(l){const v=f.attributes;f.attributes=u(v),n.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else Ee(f.attributes,s),n.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:s});return _}s=s||{},l&&u&&(s=u(s));const p={key:null,undirected:i,source:a,target:o,attributes:s};if(e)r=n._edgeKeyGenerator();else if(r=""+r,n._edges.has(r))throw new Z(`Graph.${t}: the "${r}" edge already exists in the graph.`);let b=!1,y=!1;c||(c=Uo(n,a,{}),b=!0,a===o&&(d=c,y=!0)),d||(d=Uo(n,o,{}),y=!0),h=new kn(i,r,c,d,s),n._edges.set(r,h);const E=a===o;return i?(c.undirectedDegree++,d.undirectedDegree++,E&&(c.undirectedLoops++,n._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,E&&(c.directedLoops++,n._directedSelfLoopCount++)),n.multi?h.attachMulti():h.attach(),i?n._undirectedSize++:n._directedSize++,p.key=r,n.emit("edgeAdded",p),[r,!0,b,y]}function dn(n,t){n._edges.delete(t.key);const{source:e,target:i,attributes:r}=t,a=t.undirected,o=e===i;a?(e.undirectedDegree--,i.undirectedDegree--,o&&(e.undirectedLoops--,n._undirectedSelfLoopCount--)):(e.outDegree--,i.inDegree--,o&&(e.directedLoops--,n._directedSelfLoopCount--)),n.multi?t.detachMulti():t.detach(),a?n._undirectedSize--:n._directedSize--,n.emit("edgeDropped",{key:t.key,attributes:r,source:e.key,target:i.key,undirected:a})}class ce extends kl.EventEmitter{constructor(t){if(super(),t=Ee({},hm,t),typeof t.multi!="boolean")throw new W(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!cm.has(t.type))throw new W(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new W(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const e=t.type==="mixed"?Ll:t.type==="directed"?Fl:Ml;qe(this,"NodeDataClass",e);const i="geid_"+um()+"_";let r=0;const a=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};qe(this,"_attributes",{}),qe(this,"_nodes",new Map),qe(this,"_edges",new Map),qe(this,"_directedSize",0),qe(this,"_undirectedSize",0),qe(this,"_directedSelfLoopCount",0),qe(this,"_undirectedSelfLoopCount",0),qe(this,"_edgeKeyGenerator",a),qe(this,"_options",t),Bo.forEach(o=>qe(this,o,this[o])),st(this,"order",()=>this._nodes.size),st(this,"size",()=>this._edges.size),st(this,"directedSize",()=>this._directedSize),st(this,"undirectedSize",()=>this._undirectedSize),st(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),st(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),st(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),st(this,"multi",this._options.multi),st(this,"type",this._options.type),st(this,"allowSelfLoops",this._options.allowSelfLoops),st(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,e){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+t,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){t=""+t,e=""+e;const i=this._nodes.get(t);return i?i.out.hasOwnProperty(e):!1}throw new W(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,e){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+t,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){t=""+t,e=""+e;const i=this._nodes.get(t);return i?i.undirected.hasOwnProperty(e):!1}throw new W(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,e){if(arguments.length===1){const i=""+t;return this._edges.has(i)}else if(arguments.length===2){t=""+t,e=""+e;const i=this._nodes.get(t);return i?typeof i.out<"u"&&i.out.hasOwnProperty(e)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(e):!1}throw new W(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,e){if(this.type==="undirected")return;if(t=""+t,e=""+e,this.multi)throw new Z("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(t);if(!i)throw new B(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new B(`Graph.directedEdge: could not find the "${e}" target node in the graph.`);const r=i.out&&i.out[e]||void 0;if(r)return r.key}undirectedEdge(t,e){if(this.type==="directed")return;if(t=""+t,e=""+e,this.multi)throw new Z("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(t);if(!i)throw new B(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new B(`Graph.undirectedEdge: could not find the "${e}" target node in the graph.`);const r=i.undirected&&i.undirected[e]||void 0;if(r)return r.key}edge(t,e){if(this.multi)throw new Z("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,e=""+e;const i=this._nodes.get(t);if(!i)throw new B(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new B(`Graph.edge: could not find the "${e}" target node in the graph.`);const r=i.out&&i.out[e]||i.undirected&&i.undirected[e]||void 0;if(r)return r.key}areDirectedNeighbors(t,e){t=""+t,e=""+e;const i=this._nodes.get(t);if(!i)throw new B(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in i.in||e in i.out}areOutNeighbors(t,e){t=""+t,e=""+e;const i=this._nodes.get(t);if(!i)throw new B(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in i.out}areInNeighbors(t,e){t=""+t,e=""+e;const i=this._nodes.get(t);if(!i)throw new B(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in i.in}areUndirectedNeighbors(t,e){t=""+t,e=""+e;const i=this._nodes.get(t);if(!i)throw new B(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:e in i.undirected}areNeighbors(t,e){t=""+t,e=""+e;const i=this._nodes.get(t);if(!i)throw new B(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(e in i.in||e in i.out)||this.type!=="directed"&&e in i.undirected}areInboundNeighbors(t,e){t=""+t,e=""+e;const i=this._nodes.get(t);if(!i)throw new B(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&e in i.in||this.type!=="directed"&&e in i.undirected}areOutboundNeighbors(t,e){t=""+t,e=""+e;const i=this._nodes.get(t);if(!i)throw new B(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&e in i.out||this.type!=="directed"&&e in i.undirected}inDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree}outDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.outDegree}directedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree+e.outDegree}undirectedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:e.undirectedDegree}inboundDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=e.undirectedDegree),this.type!=="undirected"&&(i+=e.inDegree),i}outboundDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=e.undirectedDegree),this.type!=="undirected"&&(i+=e.outDegree),i}degree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.degree: could not find the "${t}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=e.undirectedDegree),this.type!=="undirected"&&(i+=e.inDegree+e.outDegree),i}inDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree-e.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.outDegree-e.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree+e.outDegree-e.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:e.undirectedDegree-e.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=e.undirectedDegree,r+=e.undirectedLoops*2),this.type!=="undirected"&&(i+=e.inDegree,r+=e.directedLoops),i-r}outboundDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=e.undirectedDegree,r+=e.undirectedLoops*2),this.type!=="undirected"&&(i+=e.outDegree,r+=e.directedLoops),i-r}degreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=e.undirectedDegree,r+=e.undirectedLoops*2),this.type!=="undirected"&&(i+=e.inDegree+e.outDegree,r+=e.directedLoops*2),i-r}source(t){t=""+t;const e=this._edges.get(t);if(!e)throw new B(`Graph.source: could not find the "${t}" edge in the graph.`);return e.source.key}target(t){t=""+t;const e=this._edges.get(t);if(!e)throw new B(`Graph.target: could not find the "${t}" edge in the graph.`);return e.target.key}extremities(t){t=""+t;const e=this._edges.get(t);if(!e)throw new B(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[e.source.key,e.target.key]}opposite(t,e){t=""+t,e=""+e;const i=this._edges.get(e);if(!i)throw new B(`Graph.opposite: could not find the "${e}" edge in the graph.`);const r=i.source.key,a=i.target.key;if(t===r)return a;if(t===a)return r;throw new B(`Graph.opposite: the "${t}" node is not attached to the "${e}" edge (${r}, ${a}).`)}hasExtremity(t,e){t=""+t,e=""+e;const i=this._edges.get(t);if(!i)throw new B(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return i.source.key===e||i.target.key===e}isUndirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new B(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return e.undirected}isDirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new B(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!e.undirected}isSelfLoop(t){t=""+t;const e=this._edges.get(t);if(!e)throw new B(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return e.source===e.target}addNode(t,e){return fm(this,t,e).key}mergeNode(t,e){if(e&&!Re(e))throw new W(`Graph.mergeNode: invalid attributes. Expecting an object but got "${e}"`);t=""+t,e=e||{};let i=this._nodes.get(t);return i?(e&&(Ee(i.attributes,e),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:i.attributes,data:e})),[t,!1]):(i=new this.NodeDataClass(t,e),this._nodes.set(t,i),this.emit("nodeAdded",{key:t,attributes:e}),[t,!0])}updateNode(t,e){if(e&&typeof e!="function")throw new W(`Graph.updateNode: invalid updater function. Expecting a function but got "${e}"`);t=""+t;let i=this._nodes.get(t);if(i){if(e){const a=i.attributes;i.attributes=e(a),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:i.attributes})}return[t,!1]}const r=e?e({}):{};return i=new this.NodeDataClass(t,r),this._nodes.set(t,i),this.emit("nodeAdded",{key:t,attributes:r}),[t,!0]}dropNode(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.dropNode: could not find the "${t}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in e.out){i=e.out[r];do dn(this,i),i=i.next;while(i)}for(const r in e.in){i=e.in[r];do dn(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in e.undirected){i=e.undirected[r];do dn(this,i),i=i.next;while(i)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:e.attributes})}dropEdge(t){let e;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(e=Xe(this,i,r,this.type),!e)throw new B(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(t=""+t,e=this._edges.get(t),!e)throw new B(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return dn(this,e),this}dropDirectedEdge(t,e){if(arguments.length<2)throw new Z("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Z("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,e=""+e;const i=Xe(this,t,e,"directed");if(!i)throw new B(`Graph.dropDirectedEdge: could not find a "${t}" -> "${e}" edge in the graph.`);return dn(this,i),this}dropUndirectedEdge(t,e){if(arguments.length<2)throw new Z("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Z("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=Xe(this,t,e,"undirected");if(!i)throw new B(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${e}" edge in the graph.`);return dn(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let e;for(;e=t.next(),e.done!==!0;)e.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,e){return this._attributes[t]=e,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,e){if(typeof e!="function")throw new W("Graph.updateAttribute: updater should be a function.");const i=this._attributes[t];return this._attributes[t]=e(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!Re(t))throw new W("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!Re(t))throw new W("Graph.mergeAttributes: provided attributes are not a plain object.");return Ee(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new W("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,e){if(typeof t!="function")throw new W("Graph.updateEachNodeAttributes: expecting an updater function.");if(e&&!zo(e))throw new W("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,a;for(;r=i.next(),r.done!==!0;)a=r.value,a.attributes=t(a.key,a.attributes);this.emit("eachNodeAttributesUpdated",{hints:e||null})}updateEachEdgeAttributes(t,e){if(typeof t!="function")throw new W("Graph.updateEachEdgeAttributes: expecting an updater function.");if(e&&!zo(e))throw new W("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,a,o,s;for(;r=i.next(),r.done!==!0;)a=r.value,o=a.source,s=a.target,a.attributes=t(a.key,a.attributes,o.key,s.key,o.attributes,s.attributes,a.undirected);this.emit("eachEdgeAttributesUpdated",{hints:e||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new W("Graph.forEachAdjacencyEntry: expecting a callback.");Di(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new W("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Di(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new W("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Di(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new W("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Di(!1,!0,!0,this,t)}nodes(){return Array.from(this._nodes.keys())}forEachNode(t){if(typeof t!="function")throw new W("Graph.forEachNode: expecting a callback.");const e=this._nodes.values();let i,r;for(;i=e.next(),i.done!==!0;)r=i.value,t(r.key,r.attributes)}findNode(t){if(typeof t!="function")throw new W("Graph.findNode: expecting a callback.");const e=this._nodes.values();let i,r;for(;i=e.next(),i.done!==!0;)if(r=i.value,t(r.key,r.attributes))return r.key}mapNodes(t){if(typeof t!="function")throw new W("Graph.mapNode: expecting a callback.");const e=this._nodes.values();let i,r;const a=new Array(this.order);let o=0;for(;i=e.next(),i.done!==!0;)r=i.value,a[o++]=t(r.key,r.attributes);return a}someNode(t){if(typeof t!="function")throw new W("Graph.someNode: expecting a callback.");const e=this._nodes.values();let i,r;for(;i=e.next(),i.done!==!0;)if(r=i.value,t(r.key,r.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new W("Graph.everyNode: expecting a callback.");const e=this._nodes.values();let i,r;for(;i=e.next(),i.done!==!0;)if(r=i.value,!t(r.key,r.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new W("Graph.filterNodes: expecting a callback.");const e=this._nodes.values();let i,r;const a=[];for(;i=e.next(),i.done!==!0;)r=i.value,t(r.key,r.attributes)&&a.push(r.key);return a}reduceNodes(t,e){if(typeof t!="function")throw new W("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new W("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=e;const r=this._nodes.values();let a,o;for(;a=r.next(),a.done!==!0;)o=a.value,i=t(i,o.key,o.attributes);return i}nodeEntries(){const t=this._nodes.values();return{[Symbol.iterator](){return this},next(){const e=t.next();if(e.done)return e;const i=e.value;return{value:{node:i.key,attributes:i.attributes},done:!1}}}}export(){const t=new Array(this._nodes.size);let e=0;this._nodes.forEach((r,a)=>{t[e++]=am(a,r)});const i=new Array(this._edges.size);return e=0,this._edges.forEach((r,a)=>{i[e++]=om(this.type,a,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:i}}import(t,e=!1){if(t instanceof ce)return t.forEachNode((l,u)=>{e?this.mergeNode(l,u):this.addNode(l,u)}),t.forEachEdge((l,u,c,d,h,f,p)=>{e?p?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):p?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!Re(t))throw new W("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!Re(t.attributes))throw new W("Graph.import: invalid attributes. Expecting a plain object.");e?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let i,r,a,o,s;if(t.nodes){if(a=t.nodes,!Array.isArray(a))throw new W("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=a.length;i<r;i++){o=a[i],sm(o);const{key:l,attributes:u}=o;e?this.mergeNode(l,u):this.addNode(l,u)}}if(t.edges){let l=!1;if(this.type==="undirected"&&(l=!0),a=t.edges,!Array.isArray(a))throw new W("Graph.import: invalid edges. Expecting an array.");for(i=0,r=a.length;i<r;i++){s=a[i],lm(s);const{source:u,target:c,attributes:d,undirected:h=l}=s;let f;"key"in s?(f=e?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,s.key,u,c,d)):(f=e?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(t){const e=new ce(Ee({},this._options,t));return e.replaceAttributes(Ee({},this.getAttributes())),e}emptyCopy(t){const e=this.nullCopy(t);return this._nodes.forEach((i,r)=>{const a=Ee({},i.attributes);i=new e.NodeDataClass(r,a),e._nodes.set(r,i)}),e}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new Z(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new Z("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new Z("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const e=this.emptyCopy(t),i=this._edges.values();let r,a;for(;r=i.next(),r.done!==!0;)a=r.value,$l(e,"copy",!1,a.undirected,a.key,a.source.key,a.target.key,Ee({},a.attributes));return e}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((a,o)=>{t[o]=a.attributes});const e={},i={};this._edges.forEach((a,o)=>{const s=a.undirected?"--":"->";let l="",u=a.source.key,c=a.target.key,d;a.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${s}(${c})`;o.startsWith("geid_")?this.multi&&(typeof i[h]>"u"?i[h]=0:i[h]++,l+=`${i[h]}. `):l+=`[${o}]: `,l+=h,e[l]=a.attributes});const r={};for(const a in this)this.hasOwnProperty(a)&&!Bo.has(a)&&typeof this[a]!="function"&&typeof a!="symbol"&&(r[a]=this[a]);return r.attributes=this._attributes,r.nodes=t,r.edges=e,qe(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(ce.prototype[Symbol.for("nodejs.util.inspect.custom")]=ce.prototype.inspect);dm.forEach(n=>{["add","merge","update"].forEach(t=>{const e=n.name(t),i=t==="add"?$l:gm;n.generateKey?ce.prototype[e]=function(r,a,o){return i(this,e,!0,(n.type||this.type)==="undirected",null,r,a,o,t==="update")}:ce.prototype[e]=function(r,a,o,s){return i(this,e,!1,(n.type||this.type)==="undirected",r,a,o,s,t==="update")}})});Sg(ce);Rg(ce);Zg(ce);rm(ce);class Gl extends ce{constructor(t){const e=Ee({type:"directed"},t);if("multi"in e&&e.multi!==!1)throw new W("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(e.type!=="directed")throw new W('DirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class zl extends ce{constructor(t){const e=Ee({type:"undirected"},t);if("multi"in e&&e.multi!==!1)throw new W("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(e.type!=="undirected")throw new W('UndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class Bl extends ce{constructor(t){const e=Ee({multi:!0},t);if("multi"in e&&e.multi!==!0)throw new W("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(e)}}class Ul extends ce{constructor(t){const e=Ee({type:"directed",multi:!0},t);if("multi"in e&&e.multi!==!0)throw new W("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(e.type!=="directed")throw new W('MultiDirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class Hl extends ce{constructor(t){const e=Ee({type:"undirected",multi:!0},t);if("multi"in e&&e.multi!==!0)throw new W("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(e.type!=="undirected")throw new W('MultiUndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}function Sn(n){n.from=function(t,e){const i=Ee({},t.options,e),r=new n(i);return r.import(t),r}}Sn(ce);Sn(Gl);Sn(zl);Sn(Bl);Sn(Ul);Sn(Hl);ce.Graph=ce;ce.DirectedGraph=Gl;ce.UndirectedGraph=zl;ce.MultiGraph=Bl;ce.MultiDirectedGraph=Ul;ce.MultiUndirectedGraph=Hl;ce.InvalidArgumentsGraphError=W;ce.NotFoundGraphError=B;ce.UsageGraphError=Z;const Bn={stadiums:[{location:[-112.264582,33.527812],snapped_distance:148.12,stadium:"State Farm Stadium",location_name:"Glendale, Arizona",stadium_id:"PHO00"},{location:[-84.399046,33.755357],snapped_distance:90.88,stadium:"Mercedes-Benz Stadium",location_name:"Atlanta, Georgia",stadium_id:"ATL97"},{location:[-76.62411,39.278456],snapped_distance:123,stadium:"M&T Bank Stadium",location_name:"Baltimore, Maryland",stadium_id:"BAL00"},{location:[-78.785693,42.774789],snapped_distance:138.08,stadium:"Highmark Stadium",location_name:"Orchard Park, New York",stadium_id:"BUF00"},{location:[-80.851204,35.226491],snapped_distance:160.58,stadium:"Bank of America Stadium",location_name:"Charlotte, NC",stadium_id:"CAR00"},{location:[-87.61828,41.861992],snapped_distance:135.28,stadium:"Soldier Field",location_name:"Chicago, Illinois",stadium_id:"CHI98"},{location:[-84.51597,39.093953],snapped_distance:116.45,stadium:"Paycor Stadium",location_name:"Cincinnati, Ohio",stadium_id:"CIN00"},{location:[-81.698462,41.50526],snapped_distance:125.03,stadium:"Huntington Bank Field",location_name:"Cleveland, Ohio",stadium_id:"CLE00"},{location:[-97.092141,32.746628],snapped_distance:141.09,stadium:"AT&T Stadium",location_name:"Arlington, Texas",stadium_id:"DAL00"},{location:[-104.985474,39.739146],snapped_distance:49.42,stadium:"Empower Field at Mile High",location_name:"Denver, Colorado",stadium_id:"DEN00"},{location:[-83.04419,42.340475],snapped_distance:124.06,stadium:"Ford Field",location_name:"Detroit, Michigan",stadium_id:"DET00"},{location:[-88.064076,44.501549],snapped_distance:148.06,stadium:"Lambeau Field",location_name:"Green Bay, Wisconsin",stadium_id:"GNB00"},{location:[-95.412328,29.684709],snapped_distance:144.44,stadium:"NRG Stadium",location_name:"Houston, Texas",stadium_id:"HOU00"},{location:[-86.164751,39.761029],snapped_distance:135.07,stadium:"Lucas Oil Stadium",location_name:"Indianapolis, Indiana",stadium_id:"IND00"},{location:[-81.638737,30.324787],snapped_distance:155.09,stadium:"EverBank Stadium",location_name:"Jacksonville, Florida",stadium_id:"JAX00"},{location:[-94.482762,39.047949],snapped_distance:142.79,stadium:"GEHA Field at Arrowhead Stadium",location_name:"Kansas City, Missouri",stadium_id:"KAN00"},{location:[-118.337024,33.953639],snapped_distance:195.64,stadium:"SoFi Stadium",location_name:"Inglewood, CA",stadium_id:"LAX01"},{location:[-115.18531,36.09044],snapped_distance:128.36,stadium:"Allegiant Stadium",location_name:"Paradise, Nevada",stadium_id:"VEG00"},{location:[-80.240122,25.958487],snapped_distance:132.29,stadium:"Hard Rock Stadium",location_name:"Coral Gables, Florida",stadium_id:"MIA00"},{location:[-93.257268,44.974936],snapped_distance:118.94,stadium:"U.S. Bank Stadium",location_name:"Minneapolis, Minnesota",stadium_id:"MIN01"},{location:[-71.262575,42.091505],snapped_distance:130.34,stadium:"Gillette Stadium",location_name:"Foxborough, Massachusetts",stadium_id:"BOS00"},{location:[-90.081659,29.949726],snapped_distance:133.94,stadium:"Caesars Superdome",location_name:"New Orleans, Louisiana",stadium_id:"NOR00"},{location:[-74.072549,40.814068],snapped_distance:167.4,stadium:"MetLife Stadium",location_name:"East Rutherford, New Jersey",stadium_id:"NYC01"},{location:[-75.166302,39.901614],snapped_distance:134.09,stadium:"Lincoln Financial Field",location_name:"Philadelphia, Pennsylvania",stadium_id:"PHI00"},{location:[-80.016791,40.445865],snapped_distance:120.54,stadium:"Acrisure Stadium",location_name:"Pittsburgh, Pennsylvania",stadium_id:"PIT00"},{location:[-122.333253,47.595189],snapped_distance:123.99,stadium:"Lumen Field",location_name:"Seattle, WA",stadium_id:"SEA00"},{location:[-121.970788,37.404153],snapped_distance:145.87,stadium:"Levi's Stadium",location_name:"Santa Clara, California",stadium_id:"SFO01"},{location:[-82.501915,27.975695],snapped_distance:140.13,stadium:"Raymond James Stadium",location_name:"Tampa Bay, Florida",stadium_id:"TAM00"},{location:[-86.772878,36.166285],snapped_distance:134.22,stadium:"Nissan Stadium",location_name:"Nashville, Tennessee",stadium_id:"NAS00"},{location:[-76.863612,38.909135],snapped_distance:167.18,stadium:"Northwest Stadium",location_name:"Landover, Maryland",stadium_id:"WAS00"}],durations:[[0,103558.92,134950.08,128994.7,119000.03,101657.23,104691.93,117693.7,57861.56,49976.29,116052.92,112069.27,64484.86,97905.3,115969.02,73761.73,22334.26,19151.34,133314.23,99485.99,157014.36,84938.25,143348.63,140078.95,121485.96,86732.64,42106.26,122281.73,93326.84,133937.44],[103428.09,0,43066.57,55349.44,15755.03,45611.99,28192.16,44048.44,47169.05,82993.63,45067.61,59679.79,48006.11,33286.41,21223.49,49544.05,122771.12,110148.12,38565.23,68218.75,71210.59,28281.22,55647.55,50087.2,43457.14,152442.34,137948.36,27532.73,15919.31,40760.72],[135048.2,42952.52,0,26720.95,28086.55,42964.21,32822.48,23616.62,81474.23,99090.43,32446.18,57372.52,87227.55,37406.94,45764.11,66638.52,154391.23,139925,65301.62,68187.8,29689.71,67496.01,13199.04,7390.6,16729.06,158659.17,161338.03,58825.78,42323.3,3125.09],[128897.31,55164.24,27060.56,0,41617.82,33318.23,27350.02,12123.3,82985.63,89444.45,18786.29,47726.54,91186.09,31102.51,64851.48,60334.09,146925.27,130279.01,84388.98,58541.81,29394.99,75402.63,25800.86,26656.19,13955.68,149013.19,151692.05,77913.14,43808.25,28143.18],[118834.69,15819.36,28185.83,41602.77,0,48025.19,30218.46,32028.97,62575.66,93469.46,40431.62,62092.98,63127.64,36328.21,23724.15,60019.88,138177.72,125554.72,43261.65,72963.54,56320.96,43402.77,40757.93,35206.46,28567.52,162918.19,153354.97,36785.81,26395.15,25879.98],[101890.2,45976.93,43402.08,33600.31,48198.28,0,19897.58,21695.81,57368.9,57527.61,18102.18,14737.29,65569.36,12729.58,66930.34,31956.91,115008.44,98362.18,84272.08,25552.56,61619.97,55619.94,48429.01,47239.45,28667.82,116023.95,119775.22,73239.58,30472.15,44484.7],[104805.27,28136.38,32669.92,27486.93,30139.51,19721.1,0,16185.93,55957.77,69996.16,17143.34,33788.89,64158.23,7447.8,48842.25,36546.59,124148.3,111117.2,66431.53,44659.45,55506.59,48374.77,41840.85,37798.8,19205.8,134306.89,134944.13,55399.04,16780.39,33752.54],[117598.17,43865.09,23908.41,12252.94,32039.44,21432.88,16050.87,0,71686.48,77559.09,10914.84,35841.18,79886.94,19803.36,55273.09,49034.94,135039.91,118393.66,74810.59,46656.46,40272.59,64103.48,28935.34,27745.78,9174.15,137127.84,139806.69,68334.75,32509.1,24991.03],[57956.5,47084.66,81633.12,83124.02,62525.76,57410.96,55966.73,71823.01,0,47231.07,71190.36,69371.2,15384.56,53042.73,61297.04,31063.66,79363.93,68850.05,78642.25,56787.92,109443.48,30849.68,93880.45,88653.74,74842.88,119913.2,96650.29,67609.75,39759.25,80369.86],[49946.51,82572.86,99599.16,89797.4,93062.52,57823.45,69907.25,77892.9,47423.32,0,74027.15,64442.48,62022.04,62840.35,103526.27,33802.51,58636.4,41990.14,120868.01,51859.19,117817.05,77309.3,104626.09,103436.53,84864.91,73181.56,71058.27,109835.51,67015.09,100681.78],[116212,45015.31,32708.19,18828.69,40475.69,17676.85,17220.96,11001.92,71133.91,73593.3,0,32085.16,79334.38,18328.7,63709.34,47244.01,131074.13,114427.86,83246.84,42900.43,45645.06,65253.7,37735.12,36545.55,17973.93,133371.81,135840.89,72277.97,33659.32,33790.81],[111859.55,59362.56,57461.57,47659.8,62090.58,14761.44,33789.88,35755.3,69179.95,64320.25,32161.67,0,77706.76,26621.88,80315.98,38960.36,121801.08,105154.82,97657.72,17652.69,74741.18,68789.82,62488.5,61298.94,42727.31,108124.07,126567.85,86625.21,43804.79,58544.19],[64503.25,48098.6,87178.59,91484.12,63120.75,65771.07,64326.84,80183.12,15466.21,61687.34,79550.47,78062.06,0,61402.84,52639.51,44877.7,85910.69,83001.4,69984.72,70601.96,114988.96,21608.73,99425.93,94199.23,83202.99,133727.23,105682.69,58952.22,48119.36,85915.34],[98012.13,33572.18,37215.24,31259.87,36302.15,12496.13,7485.72,19958.87,52934.03,62898.48,18280.54,26563.93,61134.49,0,54525.59,29448.89,117355.16,104019.52,71867.33,37434.48,59279.53,49661.77,45613.79,42344.13,23751.13,127097.37,127734.6,60834.82,18067.39,38297.86],[115848.48,21180.23,45809.93,64981.68,23744.2,66586.75,48772.18,55407.88,61360.77,103968.38,63810.53,80654.54,52518.18,54261.17,0,70518.8,137255.91,129182.76,20465.09,89193.51,75129.67,32793.3,58639,52830.57,51946.43,173417.11,156983,14368.99,36894.07,43504.08],[73751.91,49116.63,66428.89,60473.52,59606.29,31704.72,36451.02,49172.52,31072.3,33868.46,47371.32,38953.91,45027.64,29384.12,70070.04,0,91635.75,74989.49,87411.78,26370.62,88493.18,51696.18,74827.45,71557.77,52964.78,103328.08,101204.78,76379.27,33558.85,67511.52],[22284.76,122888.23,154279.38,147217.56,138329.33,115243.61,124021.23,135313.05,79213.95,58655.12,131447.3,121862.63,85837.26,117234.59,137321.42,91515.03,0,17033.94,154666.63,109279.34,175237.22,106290.64,162046.25,159408.25,140815.27,70770.14,21810.19,143634.13,112656.14,153266.75],[19347.97,110288.3,140474.69,130672.91,125729.4,98698.97,111075.13,118768.41,68966.49,42110.48,114902.66,105317.99,83051.74,104008.23,129299.83,74970.39,16949.06,0,146645.05,92734.7,158692.58,98852.47,145501.61,144312.05,125740.42,68249.73,32126.3,135612.53,100056.2,140666.81],[133323.78,38643.61,65372.04,84543.78,43306.3,84050.13,66630.3,74969.98,78836.07,121431.76,83372.63,98117.91,69993.48,71724.55,20450.67,87982.18,154731.22,146658.06,0,106656.88,94691.77,50268.6,78201.1,72392.66,71508.52,190880.48,174458.31,16656.12,54357.45,63066.18],[99286.38,67787.49,68405.96,58604.2,72978.45,25705.83,44677.75,46699.69,56606.77,51747.08,43106.06,17753.55,70562.1,37509.74,88740.91,26387.18,109227.91,92581.65,106082.64,0,86623.85,74533.37,73432.89,72243.33,53671.7,91351.73,113799.05,95050.14,52229.72,69488.58],[156976.27,71198.76,29448.94,29550.85,56368.2,61514.46,55428.97,40319.53,109193.15,117640.67,45833.63,74897.47,114946.47,59181.46,74831.68,88413.05,175121.5,158475.23,94369.18,86738.04,0,95214.93,16495.7,23439.65,39584.32,177209.42,179888.27,87893.34,70042.23,32192.65],[84970.39,28382.54,67396.48,75469.97,43404.69,55508.39,48312.69,64168.97,30885.18,77088.19,65188.14,68820.68,21640.08,49643.65,32923.45,51834.39,106377.82,98707.17,50268.66,74476.99,95206.84,0,79643.81,74417.11,66480.96,148732.83,126149.81,39236.16,31860.43,66133.22],[143112.44,55677.16,13388.55,25660.54,40846.6,48020.78,41565.14,28673.18,93671.55,104146.99,37502.75,62429.09,99424.87,45317.63,58771.29,74549.21,161627.81,144981.56,78308.79,73244.36,17003.02,79693.33,0,7379.26,25237.95,163715.75,166394.59,71832.95,54520.63,16132.26],[140288.61,50063.52,7492.37,26572.4,35197.55,47131.02,37909.35,27783.42,88585.22,103257.23,36612.99,61539.33,94338.55,42493.81,52875.11,71725.39,159631.66,144091.8,72412.61,72354.6,23854.22,74607.01,7363.55,0,20895.87,162825.98,165504.83,65936.77,49434.3,10236.08],[121784.71,43479.17,16871.64,13888.02,28648.61,28403.48,19405.44,9055.88,75041.05,84529.69,17885.44,42811.79,83241.52,23989.9,51882.27,53221.48,141127.75,125364.26,71419.77,53627.06,39576.89,66559.59,25248.01,20709.01,0,144098.44,146777.28,64943.93,35863.67,17954.26],[86899.26,152036.13,159044.33,149242.56,162525.8,116344.2,134894.5,137338.06,119780.99,73161.37,133744.44,108391.93,133736.33,127669.13,172989.55,103287.71,70810.92,68150.55,190331.28,91519.5,177262.22,148684.36,164071.27,162881.7,144310.08,0,52931.69,179298.78,136478.36,160126.95],[42113.01,138038.34,161948.59,152146.83,153479.45,120172.88,135064.25,140242.31,96716.55,71158.07,136376.56,126791.9,105665.51,127838.87,157049.88,101284.41,21897.37,32184.06,174395.09,113997.32,180166.48,126118.9,166975.52,165785.95,147214.33,53082.86,0,163362.59,127806.26,163031.2],[122237.25,27557.07,58928.05,78099.8,36862.32,72963.59,55543.75,68526,67749.53,110345.22,72419.2,87031.38,58906.94,60638.01,14305.25,76895.64,143644.67,135571.53,16613.61,95570.34,88247.8,39182.06,71757.13,65948.69,65064.55,179793.94,163371.77,0,43270.91,56622.2],[93311.77,15755.67,42305.33,43911.23,26245.34,30410.49,16753.95,32610.23,39737.8,67404.99,33629.4,44224.73,47938.26,18084.91,36709.09,33955.41,112654.81,100031.8,54050.83,52630.12,70115.7,31829.49,54552.67,49325.96,35630.11,136853.72,127832.05,43018.32,0,41042.07],[133929.95,40843.53,3201.47,27883.08,25977.56,44126.34,33984.61,24778.75,80355.98,100252.55,33608.31,58534.65,86109.3,38569.07,43655.13,67800.66,153272.98,140649.98,63192.63,69349.93,32521.21,66377.77,16030.54,10222.1,17891.19,159821.31,162500.16,56716.79,41205.05,0]],distances:[[0,2979.84,3769.13,3609.68,3374.17,2901.5,2998.3,3324.82,1713.83,1464.07,3263.95,3001.79,1923.44,2813.7,3316.94,2021.19,609.01,449.16,3805.49,2719.54,4340.65,2473.56,3991.48,3864.67,3398.57,2236.4,1144.65,3494.27,2708.59,3795.2],[2982.35,0,1111.09,1443.08,389.91,1104.01,739.97,1158.22,1289.31,2257.67,1161.07,1449.15,1288.72,809.35,559.07,1279.26,3522.04,3159.5,1047.53,1816.8,1805.64,756.3,1414.99,1268.23,1098.81,4284.6,3923.79,736.31,399,1054.79],[3836.16,1109.4,0,600.53,725.81,1122.88,829.38,599.3,2226.22,2714.54,844.36,1457.79,2335.29,951.62,1218.16,1714.86,4375.85,3922.98,1750.94,1781.12,641.83,1803.45,304.67,160.01,397.84,4445.51,4574.68,1532.3,1127.12,60.21],[3599.55,1426.24,599.36,0,1046.97,844.17,687.66,294.96,2228.43,2435.83,431.9,1179.08,2394.77,794.77,1669.42,1558.01,4087.53,3644.27,2202.2,1502.41,741.35,1986.14,582.41,613.19,337.54,4166.8,4295.97,1983.56,1130.18,606.2],[3375.42,390.4,726.6,1045.72,0,1206.09,753.46,818.67,1682.38,2518,1016.82,1551.23,1683.4,938.34,619.29,1539.59,3915.11,3552.56,1152.07,1873.38,1424.73,1150.98,1034.08,883.74,717.89,4544.93,4316.86,933.43,659.33,670.3],[2893.57,1101.45,1124.63,849.91,1202.94,0,462.67,549.33,1570.08,1614.44,450.07,335.55,1736.43,287.8,1667.34,825.01,3266.14,2822.88,2155.8,658.89,1580.88,1488.17,1260.38,1224.66,738.38,3323.28,3474.57,1844.58,753.72,1131.48],[2992.73,740.24,833.73,688.04,751.88,464.31,0,403.18,1542.42,1916.51,422.79,809.45,1708.77,175.9,1283.23,938.09,3532.42,3128.75,1794.58,1131.6,1419.02,1300.13,1069.84,929.26,463.17,3773.19,3883.32,1483.36,444.18,840.58],[3314.36,1141.05,602.09,295.1,818.55,548.59,402.47,0,1943.24,2140.26,270.07,883.5,2109.59,509.58,1441,1272.82,3791.96,3348.7,1973.77,1206.84,1026.08,1700.95,737.84,702.12,215.84,3871.23,4000.4,1755.14,845,608.94],[1713.07,1285.79,2225.75,2242.99,1680.12,1569.72,1539.88,1958.13,0,1259.05,1910.26,1882.32,427.43,1460.01,1625.78,901.72,2306,1944.42,2114.33,1600.07,2910.19,841.3,2519.54,2382.89,2018.12,3525.24,2708.72,1803.11,1097.66,2184.28],[1463.06,2254.92,2717.07,2442.34,2512.39,1616.98,1916.03,2141.77,1260.14,0,2040.53,1752.43,1679.32,1742.39,2820.81,980.32,1657.75,1214.48,3309.27,1470.18,3173.32,2089.56,2852.82,2817.1,2330.82,2119.44,2084.78,2998.05,1859.83,2723.92],[3252.03,1160.54,845.67,430.43,1020.54,449.72,423.17,270.37,1906.68,2039.92,0,784.63,2073.03,446.4,1642.99,1232.71,3691.63,3248.36,2175.77,1107.97,1135.76,1720.44,981.42,945.7,459.42,3772.36,3900.06,1903.67,864.48,852.52],[2998.88,1539.49,1459.74,1185.01,1550.26,337.21,810,884.43,1880.73,1751.02,785.17,0,2044.36,635.12,2105.39,987.87,3402.72,2959.46,2593.84,445.19,1935.27,1818.08,1595.49,1559.76,1073.48,3109.58,3611.16,2282.62,1144.41,1466.58],[1919.49,1288.52,2339.09,2411.09,1682.43,1737.82,1707.98,2126.23,427.38,1678.48,2078.36,2047.77,0,1628.11,1413.35,1293.72,2512.42,2304.34,1901.9,1992.08,3023.52,569.98,2632.87,2496.22,2186.22,3917.25,3048.06,1590.68,1265.76,2297.61],[2805.06,809.38,955.64,796.19,922.19,289.62,176.38,511.33,1459.71,1741.94,449.66,634.76,1626.05,0,1375.27,763.52,3344.75,2954.18,1863.73,956.91,1527.16,1317.61,1177.99,1051.18,585.08,3590.75,3700.88,1552.51,461.65,962.49],[3313.21,559.08,1217.72,1669.38,617.89,1671.25,1282.08,1442.33,1630.47,2824.92,1640.47,2016.4,1413.86,1376.6,0,1846.5,3906.15,3559.89,537.18,2384.05,1856.67,881.43,1519.51,1374.86,1341.55,4851.84,4324.18,323.93,966.25,1161.41],[2020.13,1276.4,1719.3,1559.85,1533.87,822.51,937.51,1274.98,901.98,980.46,1229.76,987.89,1294.09,763.87,1842.29,0,2635.96,2192.7,2330.75,705.64,2290.82,1383.99,1941.65,1814.83,1348.74,3007.91,2973.26,2019.52,881.31,1726.15],[608.89,3518.84,4308.14,4093.71,3913.18,3268.34,3537.3,3793.13,2306.36,1657.16,3691.9,3403.79,2515.97,3352.71,3909.47,2635.01,0,445.18,4398.02,3121.54,4824.68,3066.1,4504.18,4403.67,3937.58,1846.59,568.06,4086.8,3247.6,4334.21],[449.99,3156.77,3924.54,3649.82,3551.11,2824.45,3126.83,3349.24,1944.98,1213.27,3248.01,2959.9,2379.14,2953.19,3558.88,2191.12,444.87,0,4047.43,2677.65,4380.79,2774.4,4060.29,4024.57,3538.29,1796.26,846.62,3736.21,2885.52,3972.14],[3800.84,1046.62,1750.08,2201.74,1150.25,2158.8,1794.76,1974.69,2118.09,3312.46,2172.83,2503.94,1901.48,1864.14,536.43,2334.05,4393.77,4047.51,0,2871.59,2389.03,1369.06,2051.87,1907.22,1873.91,5339.38,4811.81,439.36,1453.79,1693.77],[2717.72,1812.58,1782.59,1507.87,1866.47,660.06,1126.21,1207.29,1599.57,1469.87,1108.03,446.02,1991.69,951.33,2378.47,706.72,3121.57,2678.31,2866.92,0,2238.84,1969.48,1918.34,1882.62,1396.34,2666.07,3210.19,2555.7,1417.49,1789.44],[4310.56,1800.44,644.15,741.57,1421.4,1575.35,1398.67,1026.15,2905.8,3167.02,1135.74,1933.91,3014.87,1505.78,1859.23,2269.02,4818.72,4375.46,2392.01,2233.6,0,2483.03,340.27,494.52,940.65,4897.99,5027.16,2173.38,1806.71,701.28],[2469.49,756.35,1806.74,2000.21,1150.25,1486.58,1297.1,1715.35,843.51,2087.57,1718.2,1817.24,570.14,1316.92,881.18,1398.22,3062.43,2772.94,1369.73,1963.41,2491.17,0,2100.52,1963.88,1756.29,4326.43,3598.06,1058.51,857.69,1765.26],[3979.07,1414.09,305.19,580.94,1035.05,1257.8,1067.18,734.23,2519.45,2849.47,979.28,1592.71,2628.52,1174.29,1520.27,1937.53,4501.17,4057.91,2053.05,1916.05,339.99,2096.68,0,155.55,595.75,4580.44,4709.61,1834.41,1420.35,362.32],[3857.49,1266.42,160.1,612.45,882.83,1225.16,930.48,701.58,2383.25,2816.82,946.64,1560.07,2492.31,1052.71,1375.18,1815.96,4397.18,4025.26,1907.96,1883.4,492.42,1960.47,155.26,0,500.12,4547.79,4676.96,1689.32,1284.15,217.23],[3391.57,1098.2,399.51,336.95,719.16,738.16,464.55,214.59,2005.32,2329.83,459.65,1073.07,2171.67,586.79,1341.61,1350.03,3931.26,3538.27,1874.38,1396.41,945.44,1753.39,625,499.54,0,4060.8,4189.97,1655.75,907.08,406.36],[2237.4,4283.2,4447.31,4172.59,4540.67,3324.78,3773.92,3872.01,3525.25,2119.7,3772.75,3110.74,3917.37,3591.67,4849.09,3009.45,1845.74,1796.64,5337.55,2665.84,4903.56,4327.55,4583.06,4547.34,4061.06,0,1353.43,5026.33,3888.11,4454.16],[1144.21,3920.85,4578.71,4303.98,4315.19,3478.62,3853.49,4003.41,2709.06,2084.91,3902.17,3614.07,3051.29,3671.24,4322.96,2974.66,567.03,847.19,4811.51,3213.48,5034.96,3601.41,4714.46,4678.74,4192.46,1354.8,0,4500.29,3649.6,4585.56],[3490.38,736.17,1532.22,1983.88,932.4,1848.34,1484.3,1756.83,1807.64,3002.01,1905.41,2193.49,1591.03,1553.69,322.3,2023.59,4083.32,3737.06,437.33,2561.14,2171.17,1058.6,1834.02,1689.36,1656.05,5028.93,4501.35,0,1143.34,1475.92],[2708.48,396.29,1127.56,1144.52,653.75,755.89,441.4,859.66,1098.55,1860.66,862.51,1144.92,1264.9,461.23,962.18,882.24,3248.17,2885.63,1450.63,1419.78,1811.99,857.57,1421.34,1284.69,919.65,3887.58,3649.92,1139.41,0,1086.08],[3795.19,1053.75,60.74,608.92,670.16,1131.26,837.77,607.69,2185.26,2722.93,852.75,1466.17,2294.32,960.01,1162.51,1723.25,4334.88,3972.34,1695.28,1789.51,699.69,1762.48,362.53,217.88,406.23,4453.9,4583.07,1476.65,1086.16,0]],metadata:{id:"pro-tour",attribution:"openrouteservice.org | OpenStreetMap contributors",service:"matrix",timestamp:1764076609504,query:{locations:[[-112.263,33.528],[-84.4,33.75555555555555],[-76.62277777777777,39.278055555555554],[-78.787,42.774],[-80.85277777777777,35.225833333333334],[-87.6167,41.8623],[-84.516,39.095],[-81.699444,41.506111],[-97.09277777777777,32.74777777777778],[-104.9849,39.7392],[-83.04555555555555,42.34],[-88.06222222222222,44.50138888888889],[-95.41083333333334,29.684722222222224],[-86.16380555555556,39.76005555555555],[-81.6375,30.323888888888888],[-94.483889,39.048889],[-118.339,33.953],[-115.18388888888889,36.09055555555556],[-80.2388888888889,25.958055555555553],[-93.258,44.974],[-71.264,42.091],[-90.08111111111111,29.950833333333332],[-74.074444,40.813611],[-75.1675,39.90083333333333],[-80.015833,40.446667],[-122.3316,47.5952],[-121.97,37.403],[-82.50333333333333,27.97583333333333],[-86.7713888888889,36.16638888888889],[-76.864444,38.907778]],profile:"driving-car",profileName:"driving-car",responseType:"json",id:"pro-tour",metrics:["distance","duration"],units:"km"},engine:{version:"9.5.0",build_date:"2025-10-31T12:33:09Z",graph_date:"2025-11-23T11:22:24Z",osm_date:"2025-11-17T01:00:01Z"}}},mm=1e3,Gt=60*60*1e3;function Ho(n,{endOfDay:t=!1}={}){return Gu(n,{endOfDay:t})}function pm(n,{dateStart:t,dateEnd:e}={}){if(!Array.isArray(n))throw new TypeError("Schedule must be an array of games.");const i=Ho(t,{endOfDay:!1}),r=Ho(e,{endOfDay:!0});if(i!==null&&r!==null&&r<i)throw new Error("Date end must be greater than or equal to date start.");return n.filter(a=>!!(a!=null&&a.game_id)&&!!(a!=null&&a.gamedate)&&(a==null?void 0:a.game_type)==="REG"&&Number.isFinite(a==null?void 0:a.week)).map(a=>{const o=Date.parse(a.gamedate);return Number.isFinite(o)?{...a,gamedateTimestamp:o}:null}).filter(a=>!(!a||i!==null&&a.gamedateTimestamp<i||r!==null&&a.gamedateTimestamp>r)).sort((a,o)=>a.gamedateTimestamp-o.gamedateTimestamp)}function bm(n){const t=()=>null;if(!n||!Array.isArray(n.stadiums)||!Array.isArray(n.durations))return t;const e=Array.isArray(n.distances)?n.distances:null,i=new Map;return n.stadiums.forEach((r,a)=>{r!=null&&r.stadium_id&&!i.has(r.stadium_id)&&i.set(r.stadium_id,a)}),(r,a)=>{const o=i.get(r),s=i.get(a);if(o===void 0||s===void 0)return null;const l=n.durations[o];if(!Array.isArray(l))return null;const u=l[s];if(!Number.isFinite(u))return null;let c=null;const d=e==null?void 0:e[o],h=Array.isArray(d)?d[s]:null;return Number.isFinite(h)&&(c=h),{travelDurationMs:u*mm,travelDistanceKm:c}}}function vm(n){const t=Number.isFinite(n==null?void 0:n.maxTimeToNextGameMs)?n.maxTimeToNextGameMs:((n==null?void 0:n.maxTimeToNextGameHours)??0)*Gt;if(!Number.isFinite(t)||t<=0)throw new Error("Restrictions must define a positive maximum time.");const e=[["oneDayGap","maxDriveOneDayGap"],["twoDayGap","maxDriveTwoDayGap"],["threeDayGap","maxDriveThreeDayGap"],["fourDayGap","maxDriveFourDayGap"]].map(([u,c])=>{const d=n==null?void 0:n[u],h=n==null?void 0:n[c];return!Number.isFinite(d)||d<=0||!Number.isFinite(h)||h<0?null:{gapMs:d*Gt,maxDriveMs:h*Gt}}).filter(Boolean).sort((u,c)=>u.gapMs-c.gapMs);if(e.length===0)throw new Error("Restrictions must include at least one valid gap rule.");const i=e[0].gapMs;if(t<=i)throw new Error("Maximum time between games must be greater than the minimum time.");const r=Number(Me==null?void 0:Me.minTimeToNextGameHoursFlight),a=Number(n==null?void 0:n.minTimeToNextGameHoursFlight),o=Number.isFinite(a)&&a>=0?a:Number.isFinite(r)&&r>=0?r:36,s=Math.max(0,o*Gt),l=!!((n==null?void 0:n.allowFlights)??(Me==null?void 0:Me.allowFlights)??!1);return{minMs:i,maxMs:t,gapRules:e,allowFlights:l,minFlightMs:s}}function ym(n,t){t.forEach(e=>{n.hasNode(e.game_id)||n.addNode(e.game_id,{...e})})}function wm(n,t,e){if(!Number.isFinite(e)||!Array.isArray(n)||n.length===0)return!0;if(e>=t)return!1;let i=null;for(const r of n)if(t>=r.gapMs)i=r;else break;return i?e<=i.maxDriveMs:!0}function _m(n,t){return!(n!=null&&n.allowFlights)||!Number.isFinite(n.minFlightMs)?!1:t>=n.minFlightMs}function km(n,t,e,i){for(let r=0;r<t.length;r+=1){const a=t[r];for(let o=r+1;o<t.length;o+=1){const s=t[o],l=s.gamedateTimestamp-a.gamedateTimestamp;if(l<e.minMs)continue;if(l>e.maxMs)break;const u=`${a.game_id}->${s.game_id}`;if(n.hasEdge(u))continue;const c=i(a.stadium_id,s.stadium_id),d=c==null?void 0:c.travelDurationMs;if(!Number.isFinite(d))continue;const h=Number.isFinite(c==null?void 0:c.travelDistanceKm)?c.travelDistanceKm:null;let f=!1;if(!wm(e.gapRules,l,d)){if(!_m(e,l))continue;f=!0}const b={timeBetweenGamesMs:l,timeBetweenGamesHours:l/Gt,travelDurationMs:d,travelDurationHours:d/Gt,travelBufferMs:l-d,travelBufferHours:(l-d)/Gt,travelDistanceKm:h,isFlight:f};n.addDirectedEdgeWithKey(u,a.game_id,s.game_id,b)}}}function Wl({schedule:n,routeCosts:t=Bn,restrictions:e=Me,stadiumWeights:i,teamWeights:r}={}){const a=pm(n,{dateStart:e==null?void 0:e.dateStart,dateEnd:e==null?void 0:e.dateEnd}),o=vm(e),s=bm(t),l=new ce({type:"directed",multi:!1,allowSelfLoops:!1}),u=i??Hi(),c=r??Ui(),d=a.filter(h=>Sm(h,u,c));return ym(l,d),km(l,d,o,s),l}function Sm(n,t,e){return!n||xm(n.stadium_id,t)<=0||Wo(n.home_team,e)<=0?!1:Wo(n.away_team,e)>0}function xm(n,t){const e=typeof n=="string"||typeof n=="number"?String(n).trim():"";if(!e)return 1;const i=Number(t==null?void 0:t[e]);return Number.isFinite(i)?i:1}function Wo(n,t){const e=typeof n=="string"||typeof n=="number"?String(n).trim().toUpperCase():"";if(!e)return 1;const i=Number(t==null?void 0:t[e]);return Number.isFinite(i)?i:1}const Em="route-graph-dialog",ni={outerBorder:"#999",borderFallback:"#999",nodeFallback:"#f00",labelEdge:"#999",labelSelected:"#0f172a",labelConnected:"#ccc",edgeDefault:"#aaa",edgeMuted:"#999",edgeReachable:"#7f7",edgeFlightIncoming:"#faa",edgeFlightOutgoing:"#f44"},Tm={outerBorder:"--color-graph-node-outer-border",borderFallback:"--color-graph-node-border-fallback",nodeFallback:"--color-graph-node-fallback",labelEdge:"--color-graph-edge-label",labelSelected:"--color-graph-label-selected",labelConnected:"--color-graph-label-connected",edgeDefault:"--color-graph-edge-default",edgeMuted:"--color-graph-edge-muted",edgeReachable:"--color-graph-edge-reachable",edgeFlightIncoming:"--color-graph-edge-flight-incoming",edgeFlightOutgoing:"--color-graph-edge-flight-outgoing"};let Ne=Vl();const jl=.5,Cm=Al({borders:[{size:{value:.1},color:{attribute:"outerBorderColor"}},{size:{attribute:"borderSize",defaultValue:jl},color:{attribute:"borderColor",defaultValue:Ne.borderFallback}},{size:{fill:!0},color:{attribute:"color",defaultValue:Ne.nodeFallback}}]});function Dm({dialogKit:n,stadiumLookup:t,openHelpTopic:e,onDialogClose:i}){let r=null;function a(){r&&(r.kill(),r=null)}function o(){Ne=Vl(),n.open({title:F("dialog.routingGraph.title"),size:"graph",id:Em,onClose:()=>{a(),i==null||i()},build({body:l,actions:u,close:c}){const d=document.createElement("div");d.className="graph-modal-layout";const h=document.createElement("div");h.className="graph-canvas",h.setAttribute("role","application");const f=document.createElement("aside");f.className="graph-details-panel";const p=document.createElement("div");p.id="game-details",p.className="details-body",Ai(p),f.append(p),d.append(h,f),l.appendChild(d);const b=ii({topicId:"help-dialog-routing-graph",openHelpTopic:e}),y=document.createElement("button");return y.type="button",y.textContent=F("button.close"),y.classList.add("btn","btn-text","btn-primary"),y.addEventListener("click",c),u.append(b,y),s(h,p),{focusTarget:h}}})}async function s(l,u){a();const c=Ge(),{schedule:d}=await sa(),h=Am(c,d);r=new Wf(h,l,{renderLabels:!0,renderEdgeLabels:!0,labelColor:{attribute:"labelColor",color:Ne.labelEdge},edgeLabelColor:{color:Ne.labelEdge},defaultNodeType:"border",nodeProgramClasses:{border:Cm},defaultEdgeType:"arrow",enableEdgeHoverEvents:!0});let f=null,p=null;const b=new Set,y=new Set,E=new Set,_=new Set;function v(w){b.clear(),y.clear(),E.clear(),_.clear(),!(!w||!h.hasNode(w))&&(b.add(w),h.forEachOutNeighbor(w,N=>{b.add(N)}),h.forEachOutEdge(w,N=>{y.add(N)}),h.forEachInNeighbor(w,N=>{b.add(N),E.add(N)}),h.forEachInEdge(w,N=>{y.add(N),_.add(N)}))}r.setSetting("nodeReducer",(w,N)=>{const k=f??p,x=p===w,T=N.label??"",M=x?{...N,label:T,forceLabel:!0,labelColor:Ne.labelSelected,highlighted:!0,class:"selected-node"}:{...N,label:"",forceLabel:!1};if(!k)return M;if(w===k||b.has(w)){const O={...M,label:T,forceLabel:!0,labelColor:w===k||w===p?Ne.labelSelected:Ne.labelConnected};if(E.has(w)&&w!==k){const H=Vo(O,.4);return{...H,size:Math.max((H.size??5.5)*.9,2.5)}}return O}if(x)return M;const L=Vo(M,.25);return{...L,size:Math.max((L.size??5.5)*.75,2.5),label:"",forceLabel:!1}}),r.setSetting("edgeReducer",(w,N)=>{const k=f??p,x=Nm(N.travelDurationHours),T=k?x:"";if(!k)return{...N,color:Ne.edgeDefault,label:T};if(y.has(w)){const M=_.has(w),L=!!N.isFlight,O=M?Ne.edgeMuted:Ne.edgeReachable,H=L?M?Ne.edgeFlightIncoming:Ne.edgeFlightOutgoing:O;return{...N,color:H,label:T}}return{...N,hidden:!0,label:""}}),r.on("enterNode",({node:w})=>{f=w,v(w),r.refresh();const N=h.getNodeAttributes(w);Fr(u,N,t)}),r.on("leaveNode",()=>{if(f=null,v(p),r.refresh(),p!=null){const w=h.getNodeAttributes(p);Fr(u,w,t)}else Ai(u)}),r.on("downNode",({node:w})=>{p=w,f=null,v(w),r.refresh();const N=h.getNodeAttributes(w);Fr(u,N,t)}),r.on("clickStage",()=>{f=null,p=null,v(null),r.refresh(),Ai(u)}),Ai(u)}return{openGraphModal:o,dispose:a}}function Fr(n,t,e){const i=Number.isFinite(t.week)?t.week:F("label.unknown"),r=t.game_label&&String(t.game_label).trim().length>0?`${i} - ${t.game_label}`:`${i}`,a=t.stadium_id?e.get(t.stadium_id):null,o=(a==null?void 0:a.location_name)??F("label.unknown"),s=t.stadium??t.stadium_id??F("label.unknown"),l=t.away_team??F("label.unknown"),u=t.home_team??F("label.unknown");n.innerHTML=`
    <div>${F("label.week")} ${r}</div>  
    <h3>${l} @ ${u}</h3>
    <dl>
      <dt>${F("label.kickoff")}</dt>
      <dd>${os(t,e)}</dd>
      <dt>${F("label.stadium")}</dt>
      <dd>${s}</dd>
      <dt>${F("label.location")}</dt>
      <dd>${o}</dd>
    </dl>
  `}function Ai(n){n.innerHTML=`<h3>${F("label.gameDetailsHeading")}</h3><p>${F("message.graphSelectPrompt")}</p>`}function Am(n,t){const e=Wl({restrictions:n,routeCosts:Bn,schedule:t}),i=new Map;(rs??[]).forEach(v=>{if(v!=null&&v.team){const w=v.color_city_dot||v.color_helmet_shell||v.color_helmet_logo||Ne.borderFallback,N=v.color_city_border||v.color_helmet_logo||w||Ne.borderFallback;i.set(v.team.toUpperCase(),{fill:w,border:N})}});const r=new Map,a=[],o=[];((Bn==null?void 0:Bn.stadiums)??[]).forEach(v=>{const w=Array.isArray(v==null?void 0:v.location)?v.location:null;v!=null&&v.stadium_id&&w&&w.length===2&&Number.isFinite(w[0])&&Number.isFinite(w[1])&&(r.set(v.stadium_id,w),a.push(w[0]),o.push(w[1]))});const s=a.length>0&&o.length>0,l=s?Math.min(...a):-130,u=s?Math.max(...a):-60,c=s?Math.min(...o):24,d=s?Math.max(...o):50,h=Math.max(u-l,1e-6),f=Math.max(d-c,1e-6),p=100/Math.max(h,f),b=h*p,y=f*p,E=b*1.5;function _(v){if(!v)return[0,0];let w=0;for(let T=0;T<v.length;T+=1)w=w*31+v.charCodeAt(T)|0;const N=.6,k=((w&4095)/4095-.5)*N,x=((w>>12&4095)/4095-.5)*N;return[k,x]}return e.forEachNode((v,w,N)=>{const k=r.get(w.stadium_id),x=k?k[0]:l+h/2,T=k?k[1]:c+f/2,M=(x-l)/h,L=(T-c)/f*3,O=Number.isFinite(w.week)?w.week:1,H=w.game_label&&String(w.game_label).trim().length>0?F("label.graphNodeTagSuffix",{tag:w.game_label}):"",R=Number.isFinite(w.week)?w.week:F("label.unknown"),z=w.away_team??F("label.unknown"),j=w.home_team??F("label.unknown"),Y=F("label.graphNode",{week:R,away:z,home:j,tagSuffix:H}),te=typeof w.home_team=="string"?w.home_team.toUpperCase():"",V=te&&i.has(te)?i.get(te):null,X=(V==null?void 0:V.fill)??ni.nodeFallback,ne=(V==null?void 0:V.border)??X??ni.borderFallback,[re,Le]=_(w.game_id??String(N)),de=M*b+(O-1)*E+re,_e=L*y+Le;e.setNodeAttribute(v,"x",de),e.setNodeAttribute(v,"y",_e),e.setNodeAttribute(v,"size",4),e.setNodeAttribute(v,"label",Y),e.setNodeAttribute(v,"color",X),e.setNodeAttribute(v,"borderColor",ne),e.setNodeAttribute(v,"outerBorderColor",Ne.outerBorder),e.setNodeAttribute(v,"borderSize",jl),e.setNodeAttribute(v,"type","border")}),e.forEachEdge(v=>{e.setEdgeAttribute(v,"color",Ne.edgeDefault)}),e}function jo(n,t){return Ko(n,t)??Ko(ni.borderFallback,t)}function Vo(n,t){const e=jo(n.color,t),i=n.borderColor??n.color??Ne.borderFallback,r=jo(i,t);return{...n,color:e,borderColor:r}}function Vl(){if(typeof window>"u"||typeof document>"u")return{...ni};const n=getComputedStyle(document.documentElement);return Object.fromEntries(Object.entries(ni).map(([t,e])=>{var a;const i=Tm[t];if(!i)return[t,e];const r=(a=n.getPropertyValue(i))==null?void 0:a.trim();return[t,r||e]}))}function Ko(n,t){if(!n)return null;const e=n.trim();if(!e)return null;if(e.startsWith("#")){const r=e.slice(1);if(r.length===6){const a=parseInt(r.slice(0,2),16),o=parseInt(r.slice(2,4),16),s=parseInt(r.slice(4,6),16);return`rgba(${a}, ${o}, ${s}, ${t})`}return null}const i=e.match(/\d+(\.\d+)?/g);if(i&&i.length>=3){const[r,a,o]=i.map(Number);return`rgba(${r}, ${a}, ${o}, ${t})`}return null}function Nm(n){return Number.isFinite(n)?(Math.ceil(n*10-1e-9)/10).toFixed(1):""}const Lm=typeof globalThis<"u"&&typeof globalThis.requestAnimationFrame=="function"?()=>new Promise(n=>globalThis.requestAnimationFrame(()=>n())):()=>new Promise(n=>setTimeout(n,0)),Mr=24,Fm=60*1e3,Lt=60*60*1e3,Yo=5e3,qo=2e3,Mm=6,Rm=32,Pm=new Set(["sunday","monday","thursday"]),Im=new Set(["mnf","tnf","snf","friday"]);function Om(n){if(typeof n!="string")return null;const t=n.trim().toLowerCase();return!t||t==="any day"?null:Pm.has(t)?t:null}function $m(n){if(!n)return!1;const t=typeof n.game_label=="string"?n.game_label.trim():"";if(!t)return!1;const e=t.toLowerCase();return!Im.has(e)}function Gm(n,t){return n?t[String(n)]??1:1}function zm(n,t,e){const i=n?e[String(n).toUpperCase()]??1:1,r=t?e[String(t).toUpperCase()]??1:1;return Math.max(i,r)}function Jn(n,t=.1){return Number.isFinite(n)?n<=0?0:n>=1?1:n:t}function Bm(n,t,e,i=!1){if(!Number.isFinite(n)||n<=0)return 1;const r=i?t==null?void 0:t.flight:t==null?void 0:t.drive,a=r==null?void 0:r.min,o=r==null?void 0:r.max;if(!Number.isFinite(a)||!Number.isFinite(o)||o<=a)return 1;const s=Math.min(Math.max(n,a),o),l=(o-s)/(o-a),u=Jn(e);return u+(1-u)*l}function Um(n,t,e){return!n||((t==null?void 0:t.get(n))??0)<=0?1:Jn(e)}function Hm(n,t,e,i){const r=Gm(n.stadium_id,t);if(r<=0)return 0;const a=zm(n.home_team,n.away_team,e);if(a<=0)return 0;const o=$m(n)?i:1;return o<=0?0:r*a*o}function ra({baseScore:n,travelDurationMs:t,travelStats:e,travelMultiplierFloor:i,travelMultiplierCeilingFlight:r,revisitMultiplierFloor:a,visitedStadiumCounts:o,stadiumId:s,isFlight:l=!1}){if(n<=0)return 0;const u=Bm(t,e,i,l);if(u<=0)return 0;const c=l?u*r:u;if(c<=0)return 0;const d=Um(s,o,a);return d<=0?0:n*c*d}function Zo(n){if(!n||n.size===0)return"__none__";const t=[];return n.forEach((e,i)=>{e>0&&t.push(String(i))}),t.length===0?"__none__":(t.sort(),t.join("|"))}function Un(n,t){if(!n||!t)return;const e=(n.get(t)??0)+1;n.set(t,e)}function Gn(n,t){if(!n||!t)return;const e=n.get(t)??0;e<=1?n.delete(t):n.set(t,e-1)}function Wm(n,t,e){n.push(e),n.sort((i,r)=>r.score-i.score),n.length>t&&(n.length=t)}function jm(n,t){return t.map(e=>({id:e,attributes:{...n.getNodeAttributes(e)}}))}function Vm(n,t,e,i,r){if(!Array.isArray(t)||t.length===0)return[];const a=[],o=new Map;let s=null;for(const l of t){const u=n.getNodeAttributes(l),c=s?`${s}->${l}`:null,d=c?n.getEdgeAttributes(c):null,h=Number.isFinite(d==null?void 0:d.travelDurationMs)?d.travelDurationMs:null,f=Number.isFinite(d==null?void 0:d.travelDistanceKm)?d.travelDistanceKm:null,p=i.get(l)??0,b=ra({baseScore:p,travelDurationMs:h??0,travelStats:e,travelMultiplierFloor:r.travel,travelMultiplierCeilingFlight:r.travelFlight,revisitMultiplierFloor:r.revisit,visitedStadiumCounts:o,stadiumId:u.stadium_id,isFlight:!!(d!=null&&d.isFlight)});a.push({nodeKey:l,score:Number.isFinite(b)?b:null,travelDurationMs:s&&Number.isFinite(h)?h:null,travelDistanceKm:s&&Number.isFinite(f)?f:null,isFlight:s?!!(d!=null&&d.isFlight):null}),Un(o,u.stadium_id),s=l}return a}async function Km({progressInterval:n=Yo,yieldInterval:t=qo,onProgress:e,shouldAbort:i,restrictions:r,schedule:a,routeCosts:o,stadiumWeights:s,teamWeights:l}={}){const u=r??Ge(),c=Math.trunc(u.maxRoutesToFind),d=u.maxTourLengthDays,h=s??Hi(),f=l??Ui(),p=Wl({schedule:a,routeCosts:o,restrictions:u,stadiumWeights:h,teamWeights:f}),b=Math.max(1,n??Yo),y=Math.max(1,t??qo),E=d*Mr*Lt,_=[],v=new Set,w=p.nodes();let k=w.length;const x=Number(u==null?void 0:u.estimatedGamesPerWeek),T=Number.isFinite(x)&&x>0?x:0;let M=-1,L=0,O=0,H=0,R=0;const z=Date.now();let j=z;const Y=u==null?void 0:u.enableRouteCache,V=(u==null?void 0:u.cacheBucketHours)*Lt,X=Y&&V>0,ne=new Map,re=9,Le=24,de=64,_e=new Map;let me=!1,Te=1/0,Se=-1/0;p.forEachNode((A,D)=>{const G=Number(D.week);Number.isFinite(G)&&(G<Te&&(Te=G),G>Se&&(Se=G))}),Number.isFinite(Te)||(Te=1),(!Number.isFinite(Se)||Se<Te)&&(Se=Te);const Ce=Math.max((u==null?void 0:u.oneDayGap)*Lt,Lt),ke=Number(u==null?void 0:u.maxSearchMinutesPerStartGame),tt=Number.isFinite(ke)&&ke>0?ke*Fm:null,nt=Number(u==null?void 0:u.beamWidthPerStartGame),ht=Number.isFinite(nt)&&nt>0?Math.min(Math.trunc(nt),Rm):Mm,xn=Number(u==null?void 0:u.maxDriveFourDayGap),oi=Number.isFinite(xn)&&xn>0?xn*Lt:null,Kt=Number(u==null?void 0:u.maxDriveTwoDayGap),si=Number.isFinite(Kt)&&Kt>0?Kt*Lt:null,vt={drive:{min:1/0,max:-1/0},flight:{min:1/0,max:-1/0}},En={drive:{min:1/0,max:-1/0},flight:{min:1/0,max:-1/0}},yt=(A,D)=>{D<A.min&&(A.min=D),D>A.max&&(A.max=D)};p.forEachEdge((A,D)=>{const G=D==null?void 0:D.travelDurationMs;if(!(!Number.isFinite(G)||G<=0)){if(D!=null&&D.isFlight){if(yt(En.flight,G),si!==null&&G<si)return;yt(vt.flight,G);return}yt(En.drive,G),!(oi!==null&&G>oi)&&yt(vt.drive,G)}});const tr=Jn((u==null?void 0:u.revisitMultiplierFloor)??0),nr=Jn((u==null?void 0:u.travelMultiplierFloor)??0),Tn=Jn((u==null?void 0:u.travelMultiplierCeilingFlight)??0,.4),Cn=(u==null?void 0:u.specialGameDayPenalty)??1,je={revisit:tr,travel:nr,travelFlight:Tn>0?Tn:1,specialGameDay:Cn},wt=new Map;let Yt=0;p.forEachNode((A,D)=>{const G=Hm(D,h,f,je.specialGameDay);wt.set(A,G),G>Yt&&(Yt=G)});const li=Yt>0?Yt:1;function ui(A){return!X||!Number.isFinite(A)||A<0?null:Math.floor(A/V)}function ci(A,D,G){if(!X||D===null)return null;const $=ne.get(A);if(!$)return null;const U=$.get(D);return U?U.get(G)??null:null}function ir(A,D,G,$){if(!X||D===null||!$)return;let U=ne.get(A);if(!U)U=new Map,ne.set(A,U);else if(!U.has(D)&&U.size>=Le){const K=U.keys().next().value;K!==void 0&&U.delete(K)}let I=U.get(D);if(!I)I=new Map,U.set(D,I);else if(!I.has(G)&&I.size>=de){const K=I.keys().next().value;K!==void 0&&I.delete(K)}I.set(G,$)}async function Tt(A=!1){if(!e||!A&&O%b!==0)return;const D=_.map(J=>({...J,nodes:J.nodes})),G=Date.now(),$=L+(M>=0?1:0),U=Math.max(k-$,0),I=G-z;let K=null;if(U>0)if(!me&&$<=1)K=I/Math.max($,1)*U;else{const J=(j-z)/Math.max($,1),ie=Math.min(tt,J)*U,ee=G-j;K=Math.max(ie-ee,0)}await e({evaluatedRoutes:O,bestRoutes:D,elapsedMs:I,totalStartNodes:k,startNodesProcessed:L,currentStartIndex:M,remainingStartNodes:U,estimatedRemainingMs:K})}async function Rt(A,D,G,$){if(D<=0)return!1;const U=$-G;A.length;const I=Vm(p,A,vt,wt,je),K={score:D,totalDurationMs:U,totalDurationDays:U/(Mr*Lt),nodes:jm(p,A),nodeMetrics:I};return Wm(_,c,K),R=_.reduce((J,ie)=>{const ee=Array.isArray(ie.nodes)?ie.nodes.length:0;return ee>J?ee:J},0),O+=1,H+=1,e&&await Tt(O===1),H>=y&&(H=0,await Lm()),!!(i!=null&&i())}function Dn(A,D){return A!=null&&Date.now()>=A?(me=!0,{aborted:!1,budgetExceeded:!0,bestSuffixScore:0,bestSuffixNodes:[],bestSuffixEndTimestamp:D,suffixes:[]}):null}function di({nodeKey:A,currentTimestamp:D,startTimestamp:G,visitedNodes:$,visitedStadiumCounts:U,pathLength:I}){const K=p.outEdges(A),J=[];for(const ie of K){const ee=p.target(ie);if($.has(ee))continue;const he=p.getEdgeAttributes(ie),oe=p.getNodeAttributes(ee),pe=Number.isFinite(oe.gamedateTimestamp)?oe.gamedateTimestamp:Date.parse(oe.gamedate);if(!Number.isFinite(pe))continue;const xe=pe-G;if(!Number.isFinite(xe)||xe>E)continue;const Ve=pe-D;if(!Number.isFinite(Ve)||Ve<0)continue;const rt=(he==null?void 0:he.travelDurationMs)??0,Ct=wt.get(ee)??0,Dt=ra({baseScore:Ct,travelDurationMs:rt,travelStats:vt,travelMultiplierFloor:je.travel,travelMultiplierCeilingFlight:je.travelFlight,revisitMultiplierFloor:je.revisit,visitedStadiumCounts:U,stadiumId:oe.stadium_id,isFlight:!!(he!=null&&he.isFlight)});if(Dt<=0)continue;const en=Number.isFinite(he==null?void 0:he.travelBufferMs)?he.travelBufferMs:Ve-rt,Pt=1/(1+(U.get(oe.stadium_id)??0)),tn=Number.isFinite(oe.week)?oe.week/18:.5,fi=1/(I+1),De=Math.random()*.01,ze=Dt*1e3*Pt+en/1e3+tn*10+fi+De;J.push({edgeKey:ie,targetNodeKey:ee,targetAttributes:oe,targetTimestamp:pe,edgeAttributes:he,edgeTravelDurationMs:rt,nodeScore:Dt,priority:ze})}return J.sort((ie,ee)=>ee.priority-ie.priority),J}async function fe({startNodeKey:A,startTimestamp:D,startAttributes:G,initialScore:$,beamWidth:U}){const I=new Map;Un(I,G.stadium_id);let J=[{path:[A],score:$,currentNodeKey:A,currentTimestamp:D,visitedNodes:new Set([A]),visitedStadiumCounts:I}];for(;J.length>0;){if(i!=null&&i())return!0;const ie=[];for(const ee of J){const he=di({nodeKey:ee.currentNodeKey,currentTimestamp:ee.currentTimestamp,startTimestamp:D,visitedNodes:ee.visitedNodes,visitedStadiumCounts:ee.visitedStadiumCounts,pathLength:ee.path.length});if(he.length===0)continue;const oe=he.slice(0,U);for(const pe of oe){const xe=new Set(ee.visitedNodes);xe.add(pe.targetNodeKey);const Ve=new Map(ee.visitedStadiumCounts);Un(Ve,pe.targetAttributes.stadium_id);const rt=ee.score+pe.nodeScore,Ct=[...ee.path,pe.targetNodeKey];if(await Rt(Ct,rt,D,pe.targetTimestamp))return!0;ie.push({path:Ct,score:rt,currentNodeKey:pe.targetNodeKey,currentTimestamp:pe.targetTimestamp,visitedNodes:xe,visitedStadiumCounts:Ve})}}if(ie.length===0)break;ie.sort((ee,he)=>he.score-ee.score),J=ie.slice(0,U)}return!1}async function qt(A,D,G,$,U,I,K,J,ie){var fi;if(i!=null&&i())return{aborted:!0,bestSuffixScore:0,bestSuffixNodes:[],bestSuffixEndTimestamp:U,suffixes:[]};if(await Rt(D,G,$,U))return{aborted:!0,bestSuffixScore:0,bestSuffixNodes:[],bestSuffixEndTimestamp:U,suffixes:[]};const he=Dn(ie,U);if(he)return he;let oe=0,pe=[],xe=U;const Ve=[],rt=Math.max(0,E-(U-$)),Ct=ui(rt);if(_.length>=c){const De=((fi=_[_.length-1])==null?void 0:fi.score)??0;let ze=Math.max(0,Math.floor(rt/Ce));if(R>D.length){const Ke=R-D.length;Ke>=0&&(ze=Math.min(ze,Ke))}if(G+ze*li<=De)return{aborted:!1,bestSuffixScore:0,bestSuffixNodes:[],bestSuffixEndTimestamp:U,suffixes:[]}}const Dt=Zo(I),en=Dn(ie,U);if(en)return en;const hi=di({nodeKey:A,currentTimestamp:U,startTimestamp:$,visitedNodes:v,visitedStadiumCounts:I,pathLength:D.length});for(const De of hi){const ze=Dn(ie,U);if(ze)return ze;if(i!=null&&i())return{aborted:!0,bestSuffixScore:oe,bestSuffixNodes:pe,bestSuffixEndTimestamp:xe,suffixes:[]};const{targetNodeKey:Ae,targetAttributes:Ke,targetTimestamp:at,edgeAttributes:rp,edgeTravelDurationMs:ap,nodeScore:nn}=De,rr=at-U,Xl=at-$,Aa={nodes:[Ae],totalScore:nn,endTimestamp:at,totalDurationMs:rr},Ql=Math.max(0,E-Xl),eu=ui(Ql);Un(I,Ke.stadium_id);const tu=Zo(I),Ye=ci(Ae,eu,tu),ar=G+nn;if(Ye&&Array.isArray(Ye.suffixes)){const ye=[...D,Ae];let At=await Rt(ye,ar,$,at);if(At)return Gn(I,Ke.stadium_id),{aborted:!0,bestSuffixScore:oe,bestSuffixNodes:pe,bestSuffixEndTimestamp:xe,suffixes:[]};const sr=[Aa];for(const Fe of Ye.suffixes){if(!Fe||!Array.isArray(Fe.nodes))continue;const rn=Fe.nodes,Na=Number.isFinite(Fe.totalScore)?Fe.totalScore:0,iu=Number.isFinite(Fe.totalDurationMs)?Fe.totalDurationMs:0,La=Number.isFinite(Fe.endTimestamp)?Fe.endTimestamp:at;if(rn.length>0&&(At=await Rt([...ye,...rn],ar+Na,$,La),At))return Gn(I,Ke.stadium_id),{aborted:!0,bestSuffixScore:oe,bestSuffixNodes:pe,bestSuffixEndTimestamp:xe,suffixes:[]};sr.push({nodes:[Ae,...rn],totalScore:nn+Na,endTimestamp:La,totalDurationMs:rr+iu})}for(const Fe of sr){const rn=Number.isFinite(Fe.totalScore)?Fe.totalScore:0;rn>oe&&(oe=rn,pe=[...Fe.nodes],xe=Fe.endTimestamp??at)}if(Number.isFinite(Ye.bestSuffixScore)&&Ye.bestSuffixScore>0){const Fe=nn+Ye.bestSuffixScore;Fe>oe&&(oe=Fe,pe=Ye.bestSuffixNodes&&Ye.bestSuffixNodes.length>0?[Ae,...Ye.bestSuffixNodes]:[Ae],xe=Ye.bestSuffixNodes&&Ye.bestSuffixNodes.length>0?Ye.bestSuffixEndTimestamp:at)}Ve.push(...sr),Gn(I,Ke.stadium_id);continue}v.add(Ae),D.push(Ae);const ot=await qt(Ae,D,ar,$,at,I,K,J,ie);if(D.pop(),v.delete(Ae),ot.aborted||ot.budgetExceeded)return Gn(I,Ke.stadium_id),ot;const nu=Array.isArray(ot.suffixes)?ot.suffixes:[],or=[Aa];for(const ye of nu){if(!ye||!Array.isArray(ye.nodes))continue;const At=Number.isFinite(ye.totalScore)?ye.totalScore:0;or.push({nodes:[Ae,...ye.nodes],totalScore:nn+At,endTimestamp:ye.nodes.length>0&&Number.isFinite(ye.endTimestamp)?ye.endTimestamp:at,totalDurationMs:rr+(Number.isFinite(ye.totalDurationMs)?ye.totalDurationMs:0)})}for(const ye of or){const At=Number.isFinite(ye.totalScore)?ye.totalScore:0;At>oe&&(oe=At,pe=[...ye.nodes],xe=ye.endTimestamp??at)}if(ot.bestSuffixScore>0){const ye=nn+ot.bestSuffixScore;ye>oe&&(oe=ye,pe=ot.bestSuffixNodes.length>0?[Ae,...ot.bestSuffixNodes]:[Ae],xe=ot.bestSuffixNodes.length>0?ot.bestSuffixEndTimestamp:at)}Ve.push(...or),Gn(I,Ke.stadium_id)}const Pt=new Map;for(const De of Ve){if(!De||!Array.isArray(De.nodes)||De.nodes.length===0)continue;const ze=De.nodes.join("->"),Ae=Pt.get(ze),Ke=Number.isFinite(De.totalScore)?De.totalScore:0;(!Ae||Ke>(Number.isFinite(Ae.totalScore)?Ae.totalScore:0))&&Pt.set(ze,{nodes:[...De.nodes],totalScore:Ke,endTimestamp:De.endTimestamp,totalDurationMs:De.totalDurationMs})}const tn=Array.from(Pt.values()).sort((De,ze)=>(Number.isFinite(ze.totalScore)?ze.totalScore:0)-(Number.isFinite(De.totalScore)?De.totalScore:0)).slice(0,re);return X&&ir(A,Ct,Dt,{suffixes:tn,bestSuffixScore:oe,bestSuffixNodes:pe,bestSuffixEndTimestamp:xe}),{aborted:!1,bestSuffixScore:oe,bestSuffixNodes:pe,bestSuffixEndTimestamp:xe,suffixes:tn}}function Zt(A){return Math.max(1,Math.ceil(A*T))}const Jt=[],Xt=d/7,Qt=Number.isFinite(Se)?Se:null,it=u==null?void 0:u.shortWindowDays,An=Number.isFinite(u==null?void 0:u.dateStart)?u.dateStart:Number(Date.parse(u==null?void 0:u.dateStart)),Nn=Number.isFinite(u==null?void 0:u.dateEnd)?u.dateEnd:Number(Date.parse(u==null?void 0:u.dateEnd)),g=Number.isFinite(An)&&Number.isFinite(Nn)&&Nn>=An?(Nn-An+1)/(Mr*Lt):null,m=Number.isFinite(g)&&g<=it||T<=0,S=Om(u==null?void 0:u.requiredStartDayOfWeek),C=Zt(Xt);for(const A of w){const D=p.getNodeAttributes(A),G=Number.isFinite(D.gamedateTimestamp)?D.gamedateTimestamp:Date.parse(D.gamedate);if(!Number.isFinite(G)||S&&(typeof D.weekday=="string"?D.weekday.trim().toLowerCase():"")!==S)continue;let $=!0;if(!m){const U=Number(D.week),I=Number.isFinite(U)&&Number.isFinite(Qt)?Math.max(Qt-U+1,0):null;I!==null&&(I<=0?$=!1:$=Zt(I)>=C)}$&&Jt.push({nodeKey:A,startTimestamp:G})}k=Jt.length,await Tt(!0);for(let A=0;A<Jt.length;A+=1){const{nodeKey:D,startTimestamp:G}=Jt[A];if(i!=null&&i())break;const $=p.getNodeAttributes(D);M=A,j=Date.now(),await Tt(!0),v.clear(),v.add(D),_e.clear();const U=wt.get(D)??0,I=ra({baseScore:U,travelDurationMs:0,travelStats:vt,travelMultiplierFloor:je.travel,travelMultiplierCeilingFlight:je.travelFlight,revisitMultiplierFloor:je.revisit,visitedStadiumCounts:_e,stadiumId:$.stadium_id,isFlight:!1});if(I<=0){L+=1,M=-1,await Tt(!0);continue}Un(_e,$.stadium_id);const K=[D],J=tt!=null?Date.now()+tt:null,ie=await qt(D,K,I,G,G,_e,vt,je,J);let ee=ie.aborted;if(!ee&&ie.budgetExceeded&&tt!=null&&ht>0&&await fe({startNodeKey:D,startTimestamp:G,startAttributes:$,initialScore:I,beamWidth:ht})&&(ee=!0),L+=1,M=-1,_e.clear(),await Tt(!0),ee)break}return await Tt(!0),{routes:_,evaluatedRoutes:O,elapsedMs:Date.now()-z,totalStartNodes:k,startNodesProcessed:L}}function Ym({routesView:n,controls:t}){let e=null,i=0;function r(){if(ds()){o();return}n.reset(),a()}function a(){t.setSearchState(!0),e={aborted:!1},s(e).catch(l=>{console.error("Unable to compute routes:",l),t.setSearchState(!1),n.showProgress({evaluatedRoutes:0,bestRoutes:[],elapsedMs:0,totalStartNodes:0,startNodesProcessed:0,remainingStartNodes:0,estimatedRemainingMs:null,isComplete:!0,aborted:!0})})}function o(){e&&(e.aborted=!0)}async function s(l){const u=++i;n.showProgress({evaluatedRoutes:0,bestRoutes:[],elapsedMs:0,totalStartNodes:0,startNodesProcessed:0,remainingStartNodes:0,estimatedRemainingMs:null,isComplete:!1});try{const d=()=>typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now();let h=0,f=null,p=null;const b=T=>{l!==e||l!=null&&l.aborted||i!==u||n.showProgress({...T,isComplete:!1})},y=()=>{if(p=null,!f)return;const T=f;f=null,h=d(),b(T)},E=T=>{if(l!==e||l!=null&&l.aborted||i!==u)return;const M=d();if(M-h>=300&&!f){h=M,b(T);return}if(f=T,!p){const L=Math.max(300-(M-h),0);p=setTimeout(y,L)}},{schedule:_}=await sa(),v=await Km({schedule:_,onProgress:E,shouldAbort:()=>(l==null?void 0:l.aborted)||i!==u}),w=(v==null?void 0:v.routes)??[],N={elapsedMs:(v==null?void 0:v.elapsedMs)??0};n.setRoutes(w,N);const k=(v==null?void 0:v.totalStartNodes)??0,x=(v==null?void 0:v.startNodesProcessed)??k;n.showProgress({evaluatedRoutes:(v==null?void 0:v.evaluatedRoutes)??0,bestRoutes:w,elapsedMs:(v==null?void 0:v.elapsedMs)??0,totalStartNodes:k,startNodesProcessed:x,remainingStartNodes:Math.max(k-x,0),estimatedRemainingMs:null,isComplete:!0,aborted:!!(l!=null&&l.aborted)})}catch(c){if(l!=null&&l.aborted)return;console.error("Unable to compute routes:",c),n.showProgress({evaluatedRoutes:0,bestRoutes:[],elapsedMs:0,totalStartNodes:0,startNodesProcessed:0,remainingStartNodes:0,estimatedRemainingMs:null,isComplete:!0,aborted:!0})}finally{l===e&&(e=null,t.setSearchState(!1))}}return{handleSearchButtonClick:r}}function qm({toggleButton:n,panel:t,createOverlay:e}){if(!n||!t)return{close(){},dispose(){}};const i=n.closest("[data-app-menu]"),r=Array.from(t.querySelectorAll("[data-menu-close-on-change]"));let a=!1,o=null,s=null,l=null;const u=()=>{const v=F(a?"aria.appMenuClose":"aria.appMenuOpen");n.setAttribute("aria-label",v),n.setAttribute("title",v)},c=()=>{if(l||typeof window>"u")return;const _=v=>{t.contains(v.target)||n.contains(v.target)||f()};window.addEventListener("pointerdown",_,!0),l=()=>{window.removeEventListener("pointerdown",_,!0),l=null}},d=()=>{l&&l()},h=()=>{a||(a=!0,n.setAttribute("aria-expanded","true"),t.hidden=!1,i==null||i.classList.add("app-menu-open"),typeof e=="function"?s=e({className:"app-menu__overlay",onBackgroundPointerDown:()=>{f()}}):c(),window.addEventListener("keydown",b),u())},f=()=>{a&&(a=!1,n.setAttribute("aria-expanded","false"),t.hidden=!0,i==null||i.classList.remove("app-menu-open"),s==null||s.dispose(),s=null,d(),window.removeEventListener("keydown",b),u())},p=()=>{a?f():h()},b=_=>{_.key==="Escape"&&(f(),n.focus())},y=_=>{_.target.closest("[data-menu-close]")&&f()},E=()=>{f()};return n.addEventListener("click",p),t.addEventListener("click",y),r.forEach(_=>{_.addEventListener("change",E)}),o=Wt(()=>{u()}),u(),t.hidden=!0,{close:f,dispose(){f(),n.removeEventListener("click",p),t.removeEventListener("click",y),r.forEach(_=>{_.removeEventListener("change",E)}),o&&o()}}}const Zm=["help-app-purpose","help-install","help-feedback"],Kl=["system","light","dark"],Yl="pro-tour-planner.theme";Jm().catch(n=>{console.error("Failed to bootstrap tour planner:",n)});async function Jm(){var _;await Nu(),ip();const n=await Hu();Zd(n.scheduleDate),Zu(n.scheduleRange);const t=Xm();ql(Zl());const e=jc();Jo(),Xo(Qn()),Qm(t.languageSelect),ep(t.themeSelect),Wt(()=>{Jo(),b(),y()});const i=bc({ui:t,scheduleRange:n.scheduleRange}),r=vc({root:t.modalRoot});qm({toggleButton:t.menuToggle,panel:t.menuPanel,createOverlay:r.createOverlay});const a=Yc({ui:t,stadiumLookup:n.stadiumLookup,teamLookup:n.teamLookup,favoritesManager:e}),o=()=>{var v;(v=a.refresh)==null||v.call(a)},s=Kd({dialogKit:r,onDialogClose:o}),{openTeamPreferences:l}=Mc({dialogKit:r,teamLookup:n.teamLookup,stadiumLookup:n.stadiumLookup,openHelpTopic:s.openHelpTopic}),{openCityPreferences:u}=kc({dialogKit:r,stadiumLookup:n.stadiumLookup,teamLookup:n.teamLookup,openHelpTopic:s.openHelpTopic}),{openRoutingParameters:c}=xc({dialogKit:r,scheduleRange:n.scheduleRange,controls:i,onExpertModeChange:v=>{Xo(v)},openHelpTopic:s.openHelpTopic}),d=td({dialogKit:r,favoritesManager:e,stadiumLookup:n.stadiumLookup,teamLookup:n.teamLookup,openHelpTopic:s.openHelpTopic,onDialogClose:o});(_=a.setFavoriteRemovalHandler)==null||_.call(a,d.confirmFavoriteRemoval);const h=Dm({dialogKit:r,stadiumLookup:n.stadiumLookup,openHelpTopic:s.openHelpTopic,onDialogClose:o}),f=Ym({routesView:a,controls:i});cn("open-team-preferences",l),cn("open-city-preferences",u),cn("open-routing-parameters",c),cn("open-favorites",d.openFavorites),cn("open-graph",h.openGraphModal),cn("open-help",s.openHelp);function p(){t.teamButton.addEventListener("click",l),t.cityButton.addEventListener("click",u),t.routingButton.addEventListener("click",c),t.favoritesButton.addEventListener("click",d.openFavorites),t.showGraphButton.addEventListener("click",h.openGraphModal),t.helpButton.addEventListener("click",s.openHelp),t.searchButton.addEventListener("click",f.handleSearchButtonClick),t.requiredStartDaySelect.addEventListener("change",()=>i.handleRequiredStartDayChange(t.requiredStartDaySelect.value)),t.maxTourLengthSelect.addEventListener("change",()=>i.handleMaxTourLengthChange(t.maxTourLengthSelect.value)),t.allowFlightsInput.addEventListener("change",()=>i.handleAllowFlightsChange(t.allowFlightsInput.value))}function b(){const v=t.helpTopicsContent,w=t.helpTopicsPanel;if(!v||!w)return;v.innerHTML="";let N=0;Zm.forEach(k=>{const x=Yd(k);x&&(v.appendChild(x),N+=1)}),w.hidden=N===0}function y(){document.querySelectorAll("[data-help-content-block]").forEach(w=>{const N=w.getAttribute("data-help-content-block");if(w.innerHTML="",!N){w.hidden=!0;return}const k=qd(N);if(!k){w.hidden=!0;return}E(k),w.appendChild(k),w.hidden=!1})}function E(v){v.addEventListener("click",w=>{const N=w.target instanceof Element?w.target.closest("[data-help-topic-link]"):null;if(!N)return;const k=N.getAttribute("data-help-topic-link");k&&(w.preventDefault(),w.stopPropagation(),s.openHelpTopic(k))})}i.initializeDateInputs(),a.initialize(),p(),i.syncDateInputs(),i.setSearchState(!1),b(),y(),np()}function Xm(){return{routesPanel:be("routes-panel"),routesElement:be("top-routes"),routesProgressElement:be("routes-progress"),routesHeading:be("routes-heading"),teamButton:be("team-preferences-button"),cityButton:be("city-preferences-button"),routingButton:be("routing-parameters-button"),favoritesButton:be("favorites-button"),showGraphButton:be("show-graph-button"),helpButton:be("help-button"),helpTopicsPanel:be("help-topics-panel"),helpTopicsContent:be("help-topics-content"),searchButton:be("search-button"),tourStartInput:be("tour-start-date"),tourEndInput:be("tour-end-date"),requiredStartDaySelect:be("required-start-day"),maxTourLengthSelect:be("max-tour-length"),allowFlightsInput:be("allow-flights"),languageSelect:be("locale-select"),themeSelect:be("theme-select"),modalRoot:document.getElementById("modal-root"),menuToggle:be("app-menu-toggle"),menuPanel:be("app-menu-panel")}}function be(n){const t=document.getElementById(n);if(!t)throw new Error(`Missing required element: ${n}`);return t}function Jo(){document.documentElement.lang=ct(),document.querySelectorAll("[data-i18n]").forEach(t=>{const e=t.getAttribute("data-i18n");if(!e)return;const i=F(e),r=t.getAttribute("data-i18n-attr");r?t.setAttribute(r,i):t.textContent=i}),document.title=F("label.appTitle")}function Xo(n){const t=document.documentElement;t.classList.toggle("expert-on",!!n),t.classList.toggle("expert-off",!n)}function Qm(n){if(!n)return;const t=()=>{const e=ct();n.innerHTML="",Fu().forEach(i=>{const r=document.createElement("option");r.value=i,r.textContent=F(`option.language.${i}`),n.appendChild(r)}),n.value=e};t(),n.addEventListener("change",e=>{const i=e.target.value;i&&i!==ct()&&Lu(i)}),Wt(()=>{t()})}function ep(n){if(!n)return;const t=()=>{const e=Zl();n.innerHTML="",Kl.forEach(i=>{const r=document.createElement("option");r.value=i,r.textContent=F(`option.theme.${i}`),n.appendChild(r)}),n.value=e};t(),n.addEventListener("change",e=>{const i=tp(e.target.value);ql(i)}),Wt(()=>{t()})}function ql(n){const t=Da(n);document.documentElement.setAttribute("data-theme",t)}function Zl(){if(typeof localStorage>"u")return"system";try{const n=localStorage.getItem(Yl);return Da(n)}catch{return"system"}}function tp(n){const t=Da(n);if(typeof localStorage<"u")try{localStorage.setItem(Yl,t)}catch{}return t}function Da(n){return typeof n=="string"&&Kl.includes(n)?n:"system"}function np(){const n=new URL(Jl(),window.location.origin),t=location.href;history.pushState(null,"",t),history.pushState(null,"",t),window.addEventListener("popstate",()=>{location.replace(n.href)})}function Jl(){const n="/pro-tour/",t=n.startsWith("/")?n:`/${n}`;return t.endsWith("/")?t:`${t}/`}function ip(){const n=navigator.userAgent||"";if(/iPad|iPhone|iPod/.test(n)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1){const e=/AppleWebKit/.test(n)&&!/CriOS|FxiOS|EdgiOS|OPiOS|DuckDuckGo|Brave/i.test(n);document.documentElement.classList.toggle("safari-ios",e)}}"serviceWorker"in navigator&&window.addEventListener("load",()=>{const n=window.location.hostname,t=["localhost","127.0.0.1","[::1]"].includes(n);if(!(window.location.protocol==="https:")&&!t)return;const i=Jl(),r=new URL("../service-worker.js",import.meta.url);navigator.serviceWorker.register(r,{type:"module",scope:i}).catch(a=>console.error("Service worker registration failed:",a))});
