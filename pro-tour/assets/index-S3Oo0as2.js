var nu=Object.defineProperty;var Na=i=>{throw TypeError(i)};var iu=(i,t,e)=>t in i?nu(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var ve=(i,t,e)=>iu(i,typeof t!="symbol"?t+"":t,e),ru=(i,t,e)=>t.has(i)||Na("Cannot "+e);var La=(i,t,e)=>t.has(i)?Na("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e);var pi=(i,t,e)=>(ru(i,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();const X=i=>typeof i=="string",An=()=>{let i,t;const e=new Promise((n,r)=>{i=n,t=r});return e.resolve=i,e.reject=t,e},Fa=i=>i==null?"":""+i,au=(i,t,e)=>{i.forEach(n=>{t[n]&&(e[n]=t[n])})},ou=/###/g,Ma=i=>i&&i.indexOf("###")>-1?i.replace(ou,"."):i,Ra=i=>!i||X(i),Un=(i,t,e)=>{const n=X(t)?t.split("."):t;let r=0;for(;r<n.length-1;){if(Ra(i))return{};const a=Ma(n[r]);!i[a]&&e&&(i[a]=new e),Object.prototype.hasOwnProperty.call(i,a)?i=i[a]:i={},++r}return Ra(i)?{}:{obj:i,k:Ma(n[r])}},Pa=(i,t,e)=>{const{obj:n,k:r}=Un(i,t,Object);if(n!==void 0||t.length===1){n[r]=e;return}let a=t[t.length-1],o=t.slice(0,t.length-1),s=Un(i,o,Object);for(;s.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),s=Un(i,o,Object),s&&s.obj&&typeof s.obj[`${s.k}.${a}`]<"u"&&(s.obj=void 0);s.obj[`${s.k}.${a}`]=e},su=(i,t,e,n)=>{const{obj:r,k:a}=Un(i,t,Object);r[a]=r[a]||[],r[a].push(e)},$i=(i,t)=>{const{obj:e,k:n}=Un(i,t);if(e)return e[n]},lu=(i,t,e)=>{const n=$i(i,e);return n!==void 0?n:$i(t,e)},Xo=(i,t,e)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in i?X(i[n])||i[n]instanceof String||X(t[n])||t[n]instanceof String?e&&(i[n]=t[n]):Xo(i[n],t[n],e):i[n]=t[n]);return i},an=i=>i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var uu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const cu=i=>X(i)?i.replace(/[&<>"'\/]/g,t=>uu[t]):i;class du{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const e=this.regExpMap.get(t);if(e!==void 0)return e;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const hu=[" ",",","?","!",";"],fu=new du(20),gu=(i,t,e)=>{t=t||"",e=e||"";const n=hu.filter(o=>t.indexOf(o)<0&&e.indexOf(o)<0);if(n.length===0)return!0;const r=fu.getRegExp(`(${n.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!r.test(i);if(!a){const o=i.indexOf(e);o>0&&!r.test(i.substring(0,o))&&(a=!0)}return a},Mr=function(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!i)return;if(i[t])return i[t];const n=t.split(e);let r=i;for(let a=0;a<n.length;){if(!r||typeof r!="object")return;let o,s="";for(let l=a;l<n.length;++l)if(l!==a&&(s+=e),s+=n[l],o=r[s],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<n.length-1)continue;a+=l-a+1;break}r=o}return r},zi=i=>i&&i.replace("_","-"),mu={type:"logger",log(i){this.output("log",i)},warn(i){this.output("warn",i)},error(i){this.output("error",i)},output(i,t){console&&console[i]&&console[i].apply(console,t)}};class Bi{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,e)}init(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=e.prefix||"i18next:",this.logger=t||mu,this.options=e,this.debug=e.debug}log(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"log","",!0)}warn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","",!0)}error(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"error","")}deprecate(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,n,r){return r&&!this.debug?null:(X(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new Bi(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Bi(this.logger,t)}}var mt=new Bi;let Ji=class{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const r=this.observers[n].get(e)||0;this.observers[n].set(e,r+1)}),this}off(t,e){if(this.observers[t]){if(!e){delete this.observers[t];return}this.observers[t].delete(e)}}emit(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.observers[t]&&Array.from(this.observers[t].entries()).forEach(o=>{let[s,l]=o;for(let u=0;u<l;u++)s(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[s,l]=o;for(let u=0;u<l;u++)s.apply(s,[t,...n])})}};class Ia extends Ji{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,o=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;t.indexOf(".")>-1?s=t.split("."):(s=[t,e],n&&(Array.isArray(n)?s.push(...n):X(n)&&a?s.push(...n.split(a)):s.push(n)));const l=$i(this.data,s);return!l&&!e&&!n&&t.indexOf(".")>-1&&(t=s[0],e=s[1],n=s.slice(2).join(".")),l||!o||!X(n)?l:Mr(this.data&&this.data[t]&&this.data[t][e],n,a)}addResource(t,e,n,r){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let s=[t,e];n&&(s=s.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(s=t.split("."),r=e,e=s[1]),this.addNamespaces(e),Pa(this.data,s,r),a.silent||this.emit("added",t,e,n,r)}addResources(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const a in n)(X(n[a])||Array.isArray(n[a]))&&this.addResource(t,e,a,n[a],{silent:!0});r.silent||this.emit("added",t,e,n)}addResourceBundle(t,e,n,r,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},s=[t,e];t.indexOf(".")>-1&&(s=t.split("."),r=n,n=e,e=s[1]),this.addNamespaces(e);let l=$i(this.data,s)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?Xo(l,n,a):l={...l,...n},Pa(this.data,s,l),o.silent||this.emit("added",t,e,n)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return this.getResource(t,e)!==void 0}getResourceBundle(t,e){return e||(e=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,e)}:this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find(r=>e[r]&&Object.keys(e[r]).length>0)}toJSON(){return this.data}}var Qo={processors:{},addPostProcessor(i){this.processors[i.name]=i},handle(i,t,e,n,r){return i.forEach(a=>{this.processors[a]&&(t=this.processors[a].process(t,e,n,r))}),t}};const Oa={};class Ui extends Ji{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),au(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=mt.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const n=this.resolve(t,e);return n&&n.res!==void 0}extractFromKey(t,e){let n=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const r=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator;let a=e.ns||this.options.defaultNS||[];const o=n&&t.indexOf(n)>-1,s=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!gu(t,n,r);if(o&&!s){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:X(a)?[a]:a};const u=t.split(n);(n!==r||n===r&&this.options.ns.indexOf(u[0])>-1)&&(a=u.shift()),t=u.join(r)}return{key:t,namespaces:X(a)?[a]:a}}translate(t,e,n){if(typeof e!="object"&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),typeof e=="object"&&(e={...e}),e||(e={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const r=e.returnDetails!==void 0?e.returnDetails:this.options.returnDetails,a=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(t[t.length-1],e),l=s[s.length-1],u=e.lng||this.language,c=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const _=e.nsSeparator||this.options.nsSeparator;return r?{res:`${l}${_}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(e)}:`${l}${_}${o}`}return r?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(e)}:o}const d=this.resolve(t,e);let h=d&&d.res;const f=d&&d.usedKey||o,b=d&&d.exactUsedKey||o,p=Object.prototype.toString.apply(h),w=["[object Number]","[object Function]","[object RegExp]"],E=e.joinArrays!==void 0?e.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,v=!X(h)&&typeof h!="boolean"&&typeof h!="number";if(y&&h&&v&&w.indexOf(p)<0&&!(X(E)&&Array.isArray(h))){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const _=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,h,{...e,ns:s}):`key '${o} (${this.language})' returned an object instead of string.`;return r?(d.res=_,d.usedParams=this.getUsedParamsDetails(e),d):_}if(a){const _=Array.isArray(h),D=_?[]:{},k=_?b:f;for(const S in h)if(Object.prototype.hasOwnProperty.call(h,S)){const C=`${k}${a}${S}`;D[S]=this.translate(C,{...e,joinArrays:!1,ns:s}),D[S]===C&&(D[S]=h[S])}h=D}}else if(y&&X(E)&&Array.isArray(h))h=h.join(E),h&&(h=this.extendTranslation(h,t,e,n));else{let _=!1,D=!1;const k=e.count!==void 0&&!X(e.count),S=Ui.hasDefaultValue(e),C=k?this.pluralResolver.getSuffix(u,e.count,e):"",M=e.ordinal&&k?this.pluralResolver.getSuffix(u,e.count,{ordinal:!1}):"",F=k&&!e.ordinal&&e.count===0&&this.pluralResolver.shouldUseIntlApi(),P=F&&e[`defaultValue${this.options.pluralSeparator}zero`]||e[`defaultValue${C}`]||e[`defaultValue${M}`]||e.defaultValue;!this.isValidLookup(h)&&S&&(_=!0,h=P),this.isValidLookup(h)||(D=!0,h=o);const G=(e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&D?void 0:h,W=S&&P!==h&&this.options.updateMissing;if(D||_||W){if(this.logger.log(W?"updateKey":"missingKey",u,l,o,W?P:h),a){const j=this.resolve(o,{...e,keySeparator:!1});j&&j.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Y=[];const Z=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Z&&Z[0])for(let j=0;j<Z.length;j++)Y.push(Z[j]);else this.options.saveMissingTo==="all"?Y=this.languageUtils.toResolveHierarchy(e.lng||this.language):Y.push(e.lng||this.language);const Q=(j,ee,ne)=>{const ue=S&&ne!==h?ne:G;this.options.missingKeyHandler?this.options.missingKeyHandler(j,l,ee,ue,W,e):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(j,l,ee,ue,W,e),this.emit("missingKey",j,l,ee,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&k?Y.forEach(j=>{const ee=this.pluralResolver.getSuffixes(j,e);F&&e[`defaultValue${this.options.pluralSeparator}zero`]&&ee.indexOf(`${this.options.pluralSeparator}zero`)<0&&ee.push(`${this.options.pluralSeparator}zero`),ee.forEach(ne=>{Q([j],o+ne,e[`defaultValue${ne}`]||P)})}):Q(Y,o,P))}h=this.extendTranslation(h,t,e,d,n),D&&h===o&&this.options.appendNamespaceToMissingKey&&(h=`${l}:${o}`),(D||_)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,_?h:void 0):h=this.options.parseMissingKeyHandler(h))}return r?(d.res=h,d.usedParams=this.getUsedParamsDetails(e),d):h}extendTranslation(t,e,n,r,a){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const u=X(t)&&(n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const h=t.match(this.interpolator.nestingRegexp);c=h&&h.length}let d=n.replace&&!X(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),t=this.interpolator.interpolate(t,d,n.lng||this.language||r.usedLng,n),u){const h=t.match(this.interpolator.nestingRegexp),f=h&&h.length;c<f&&(n.nest=!1)}!n.lng&&this.options.compatibilityAPI!=="v1"&&r&&r.res&&(n.lng=this.language||r.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var h=arguments.length,f=new Array(h),b=0;b<h;b++)f[b]=arguments[b];return a&&a[0]===f[0]&&!n.context?(o.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${e[0]}`),null):o.translate(...f,e)},n)),n.interpolation&&this.interpolator.reset()}const s=n.postProcess||this.options.postProcess,l=X(s)?[s]:s;return t!=null&&l&&l.length&&n.applyPostProcessor!==!1&&(t=Qo.handle(l,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n,r,a,o,s;return X(t)&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(l,e),c=u.key;r=c;let d=u.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const h=e.count!==void 0&&!X(e.count),f=h&&!e.ordinal&&e.count===0&&this.pluralResolver.shouldUseIntlApi(),b=e.context!==void 0&&(X(e.context)||typeof e.context=="number")&&e.context!=="",p=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);d.forEach(w=>{this.isValidLookup(n)||(s=w,!Oa[`${p[0]}-${w}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(Oa[`${p[0]}-${w}`]=!0,this.logger.warn(`key "${r}" for languages "${p.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(E=>{if(this.isValidLookup(n))return;o=E;const y=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,c,E,w,e);else{let _;h&&(_=this.pluralResolver.getSuffix(E,e.count,e));const D=`${this.options.pluralSeparator}zero`,k=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(y.push(c+_),e.ordinal&&_.indexOf(k)===0&&y.push(c+_.replace(k,this.options.pluralSeparator)),f&&y.push(c+D)),b){const S=`${c}${this.options.contextSeparator}${e.context}`;y.push(S),h&&(y.push(S+_),e.ordinal&&_.indexOf(k)===0&&y.push(S+_.replace(k,this.options.pluralSeparator)),f&&y.push(S+D))}}let v;for(;v=y.pop();)this.isValidLookup(n)||(a=v,n=this.getResource(E,w,v,e))}))})}),{res:n,usedKey:r,exactUsedKey:a,usedLng:o,usedNS:s}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,e,n,r):this.resourceStore.getResource(t,e,n,r)}getUsedParamsDetails(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!X(t.replace);let r=n?t.replace:t;if(n&&typeof t.count<"u"&&(r.count=t.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const a of e)delete r[a]}return r}static hasDefaultValue(t){const e="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&t[n]!==void 0)return!0;return!1}}const cr=i=>i.charAt(0).toUpperCase()+i.slice(1);class Ga{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=mt.create("languageUtils")}getScriptPartFromCode(t){if(t=zi(t),!t||t.indexOf("-")<0)return null;const e=t.split("-");return e.length===2||(e.pop(),e[e.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(t){if(t=zi(t),!t||t.indexOf("-")<0)return t;const e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if(X(t)&&t.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let r=Intl.getCanonicalLocales(t)[0];if(r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r)return r}catch{}const e=["hans","hant","latn","cyrl","cans","mong","arab"];let n=t.split("-");return this.options.lowerCaseLng?n=n.map(r=>r.toLowerCase()):n.length===2?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=cr(n[1].toLowerCase()))):n.length===3&&(n[0]=n[0].toLowerCase(),n[1].length===2&&(n[1]=n[1].toUpperCase()),n[0]!=="sgn"&&n[2].length===2&&(n[2]=n[2].toUpperCase()),e.indexOf(n[1].toLowerCase())>-1&&(n[1]=cr(n[1].toLowerCase())),e.indexOf(n[2].toLowerCase())>-1&&(n[2]=cr(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach(n=>{if(e)return;const r=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(r))&&(e=r)}),!e&&this.options.supportedLngs&&t.forEach(n=>{if(e)return;const r=this.getLanguagePartFromCode(n);if(this.isSupportedCode(r))return e=r;e=this.options.supportedLngs.find(a=>{if(a===r)return a;if(!(a.indexOf("-")<0&&r.indexOf("-")<0)&&(a.indexOf("-")>0&&r.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===r||a.indexOf(r)===0&&r.length>1))return a})}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if(typeof t=="function"&&(t=t(e)),X(t)&&(t=[t]),Array.isArray(t))return t;if(!e)return t.default||[];let n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}toResolveHierarchy(t,e){const n=this.getFallbackCodes(e||this.options.fallbackLng||[],t),r=[],a=o=>{o&&(this.isSupportedCode(o)?r.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return X(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(t))):X(t)&&a(this.formatLanguageCode(t)),n.forEach(o=>{r.indexOf(o)<0&&a(this.formatLanguageCode(o))}),r}}let pu=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],bu={1:i=>+(i>1),2:i=>+(i!=1),3:i=>0,4:i=>i%10==1&&i%100!=11?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2,5:i=>i==0?0:i==1?1:i==2?2:i%100>=3&&i%100<=10?3:i%100>=11?4:5,6:i=>i==1?0:i>=2&&i<=4?1:2,7:i=>i==1?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2,8:i=>i==1?0:i==2?1:i!=8&&i!=11?2:3,9:i=>+(i>=2),10:i=>i==1?0:i==2?1:i<7?2:i<11?3:4,11:i=>i==1||i==11?0:i==2||i==12?1:i>2&&i<20?2:3,12:i=>+(i%10!=1||i%100==11),13:i=>+(i!==0),14:i=>i==1?0:i==2?1:i==3?2:3,15:i=>i%10==1&&i%100!=11?0:i%10>=2&&(i%100<10||i%100>=20)?1:2,16:i=>i%10==1&&i%100!=11?0:i!==0?1:2,17:i=>i==1||i%10==1&&i%100!=11?0:1,18:i=>i==0?0:i==1?1:2,19:i=>i==1?0:i==0||i%100>1&&i%100<11?1:i%100>10&&i%100<20?2:3,20:i=>i==1?0:i==0||i%100>0&&i%100<20?1:2,21:i=>i%100==1?1:i%100==2?2:i%100==3||i%100==4?3:0,22:i=>i==1?0:i==2?1:(i<0||i>10)&&i%10==0?2:3};const vu=["v1","v2","v3"],yu=["v4"],$a={zero:0,one:1,two:2,few:3,many:4,other:5},wu=()=>{const i={};return pu.forEach(t=>{t.lngs.forEach(e=>{i[e]={numbers:t.nr,plurals:bu[t.fc]}})}),i};class _u{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=e,this.logger=mt.create("pluralResolver"),(!this.options.compatibilityJSON||yu.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=wu(),this.pluralRulesCache={}}addRule(t,e){this.rules[t]=e}clearCache(){this.pluralRulesCache={}}getRule(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const n=zi(t==="dev"?"en":t),r=e.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:n,type:r});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(n,{type:r})}catch{if(!t.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(l,e)}return this.pluralRulesCache[a]=o,o}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(t,e);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,n).map(r=>`${e}${r}`)}getSuffixes(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getRule(t,e);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((r,a)=>$a[r]-$a[a]).map(r=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${r}`):n.numbers.map(r=>this.getSuffix(t,r,e)):[]}getSuffix(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.getRule(t,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(e)}`:this.getSuffixRetroCompatible(r,e):(this.logger.warn(`no plural rule found for: ${t}`),"")}getSuffixRetroCompatible(t,e){const n=t.noAbs?t.plurals(e):t.plurals(Math.abs(e));let r=t.numbers[n];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(r===2?r="plural":r===1&&(r=""));const a=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return this.options.compatibilityJSON==="v1"?r===1?"":typeof r=="number"?`_plural_${r.toString()}`:a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?a():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!vu.includes(this.options.compatibilityJSON)}}const za=function(i,t,e){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=lu(i,t,e);return!a&&r&&X(e)&&(a=Mr(i,e,n),a===void 0&&(a=Mr(t,e,n))),a},dr=i=>i.replace(/\$/g,"$$$$");class ku{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=mt.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(e=>e),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const{escape:e,escapeValue:n,useRawValueToEscape:r,prefix:a,prefixEscaped:o,suffix:s,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:h,nestingPrefixEscaped:f,nestingSuffix:b,nestingSuffixEscaped:p,nestingOptionsSeparator:w,maxReplaces:E,alwaysFormat:y}=t.interpolation;this.escape=e!==void 0?e:cu,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=a?an(a):o||"{{",this.suffix=s?an(s):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=h?an(h):f||an("$t("),this.nestingSuffix=b?an(b):p||an(")"),this.nestingOptionsSeparator=w||",",this.maxReplaces=E||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(e,n)=>e&&e.source===n?(e.lastIndex=0,e):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(t,e,n,r){let a,o,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=f=>{if(f.indexOf(this.formatSeparator)<0){const E=za(e,l,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,n,{...r,...e,interpolationkey:f}):E}const b=f.split(this.formatSeparator),p=b.shift().trim(),w=b.join(this.formatSeparator).trim();return this.format(za(e,l,p,this.options.keySeparator,this.options.ignoreJSONStructure),w,n,{...r,...e,interpolationkey:p})};this.resetRegExp();const c=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>dr(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?dr(this.escape(f)):dr(f)}].forEach(f=>{for(s=0;a=f.regex.exec(t);){const b=a[1].trim();if(o=u(b),o===void 0)if(typeof c=="function"){const w=c(t,a,r);o=X(w)?w:""}else if(r&&Object.prototype.hasOwnProperty.call(r,b))o="";else if(d){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${b} for interpolating ${t}`),o="";else!X(o)&&!this.useRawValueToEscape&&(o=Fa(o));const p=f.safeValue(o);if(t=t.replace(a[0],p),d?(f.regex.lastIndex+=o.length,f.regex.lastIndex-=a[0].length):f.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),t}nest(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,a,o;const s=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const d=l.split(new RegExp(`${c}[ ]*{`));let h=`{${d[1]}`;l=d[0],h=this.interpolate(h,o);const f=h.match(/'/g),b=h.match(/"/g);(f&&f.length%2===0&&!b||b.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),u&&(o={...u,...o})}catch(p){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,p),`${l}${c}${h}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;r=this.nestingRegexp.exec(t);){let l=[];o={...n},o=o.replace&&!X(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){const c=r[1].split(this.formatSeparator).map(d=>d.trim());r[1]=c.shift(),l=c,u=!0}if(a=e(s.call(this,r[1].trim(),o),o),a&&r[0]===t&&!X(a))return a;X(a)||(a=Fa(a)),a||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${t}`),a=""),u&&(a=l.reduce((c,d)=>this.format(c,d,n.lng,{...n,interpolationkey:r[1].trim()}),a.trim())),t=t.replace(r[0],a),this.regexp.lastIndex=0}return t}}const xu=i=>{let t=i.toLowerCase().trim();const e={};if(i.indexOf("(")>-1){const n=i.split("(");t=n[0].toLowerCase().trim();const r=n[1].substring(0,n[1].length-1);t==="currency"&&r.indexOf(":")<0?e.currency||(e.currency=r.trim()):t==="relativetime"&&r.indexOf(":")<0?e.range||(e.range=r.trim()):r.split(";").forEach(o=>{if(o){const[s,...l]=o.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=s.trim();e[c]||(e[c]=u),u==="false"&&(e[c]=!1),u==="true"&&(e[c]=!0),isNaN(u)||(e[c]=parseInt(u,10))}})}return{formatName:t,formatOptions:e}},on=i=>{const t={};return(e,n,r)=>{let a=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(a={...a,[r.interpolationkey]:void 0});const o=n+JSON.stringify(a);let s=t[o];return s||(s=i(zi(n),r),t[o]=s),s(e)}};class Su{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=mt.create("formatter"),this.options=t,this.formats={number:on((e,n)=>{const r=new Intl.NumberFormat(e,{...n});return a=>r.format(a)}),currency:on((e,n)=>{const r=new Intl.NumberFormat(e,{...n,style:"currency"});return a=>r.format(a)}),datetime:on((e,n)=>{const r=new Intl.DateTimeFormat(e,{...n});return a=>r.format(a)}),relativetime:on((e,n)=>{const r=new Intl.RelativeTimeFormat(e,{...n});return a=>r.format(a,n.range||"day")}),list:on((e,n)=>{const r=new Intl.ListFormat(e,{...n});return a=>r.format(a)})},this.init(t)}init(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=e.interpolation.formatSeparator||","}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=on(e)}format(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=e.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(s=>s.indexOf(")")>-1)){const s=a.findIndex(l=>l.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,s)].join(this.formatSeparator)}return a.reduce((s,l)=>{const{formatName:u,formatOptions:c}=xu(l);if(this.formats[u]){let d=s;try{const h=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},f=h.locale||h.lng||r.locale||r.lng||n;d=this.formats[u](s,f,{...c,...r,...h})}catch(h){this.logger.warn(h)}return d}else this.logger.warn(`there was no format function for ${u}`);return s},t)}}const Eu=(i,t)=>{i.pending[t]!==void 0&&(delete i.pending[t],i.pendingCount--)};class Cu extends Ji{constructor(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=e,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=mt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(t,e,n,r){const a={},o={},s={},l={};return t.forEach(u=>{let c=!0;e.forEach(d=>{const h=`${u}|${d}`;!n.reload&&this.store.hasResourceBundle(u,d)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,c=!1,o[h]===void 0&&(o[h]=!0),a[h]===void 0&&(a[h]=!0),l[d]===void 0&&(l[d]=!0)))}),c||(s[u]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(t,e,n){const r=t.split("|"),a=r[0],o=r[1];e&&this.emit("failedLoading",a,o,e),!e&&n&&this.store.addResourceBundle(a,o,n,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2,e&&n&&(this.state[t]=0);const s={};this.queue.forEach(l=>{su(l.loaded,[a],o),Eu(l,t),e&&l.errors.push(e),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{s[u]||(s[u]={});const c=l.loaded[u];c.length&&c.forEach(d=>{s[u][d]===void 0&&(s[u][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:e,fcName:n,tried:r,wait:a,callback:o});return}this.readingCalls++;const s=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(u&&c&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,t,e,n,r+1,a*2,o)},a);return}o(u,c)},l=this.backend[n].bind(this.backend);if(l.length===2){try{const u=l(t,e);u&&typeof u.then=="function"?u.then(c=>s(null,c)).catch(s):s(null,u)}catch(u){s(u)}return}return l(t,e,s)}prepareLoading(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();X(t)&&(t=this.languageUtils.toResolveHierarchy(t)),X(e)&&(e=[e]);const a=this.queueLoad(t,e,n,r);if(!a.toLoad.length)return a.pending.length||r(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(t,e,n){this.prepareLoading(t,e,{},n)}reload(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}loadOne(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=t.split("|"),r=n[0],a=n[1];this.read(r,a,"read",void 0,void 0,(o,s)=>{o&&this.logger.warn(`${e}loading namespace ${a} for language ${r} failed`,o),!o&&s&&this.logger.log(`${e}loaded namespace ${a} for language ${r}`,s),this.loaded(t,o,s)})}saveMissing(t,e,n,r,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)){this.logger.warn(`did not save key "${n}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:a},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(t,e,n,r,l):c=u(t,e,n,r),c&&typeof c.then=="function"?c.then(d=>s(null,d)).catch(s):s(null,c)}catch(c){s(c)}else u(t,e,n,r,s,l)}!t||!t[0]||this.store.addResource(t[0],e,n,r)}}}const Ba=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:i=>{let t={};if(typeof i[1]=="object"&&(t=i[1]),X(i[1])&&(t.defaultValue=i[1]),X(i[2])&&(t.tDescription=i[2]),typeof i[2]=="object"||typeof i[3]=="object"){const e=i[3]||i[2];Object.keys(e).forEach(n=>{t[n]=e[n]})}return t},interpolation:{escapeValue:!0,format:i=>i,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Ua=i=>(X(i.ns)&&(i.ns=[i.ns]),X(i.fallbackLng)&&(i.fallbackLng=[i.fallbackLng]),X(i.fallbackNS)&&(i.fallbackNS=[i.fallbackNS]),i.supportedLngs&&i.supportedLngs.indexOf("cimode")<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),i),bi=()=>{},Tu=i=>{Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach(e=>{typeof i[e]=="function"&&(i[e]=i[e].bind(i))})};class Jn extends Ji{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Ua(t),this.services={},this.logger=mt,this.modules={external:[]},Tu(this),e&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,e),this;setTimeout(()=>{this.init(t,e)},0)}}init(){var t=this;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),!e.defaultNS&&e.defaultNS!==!1&&e.ns&&(X(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=Ba();this.options={...r,...this.options,...Ua(e)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const a=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?mt.init(a(this.modules.logger),this.options):mt.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=Su);const d=new Ga(this.options);this.store=new Ia(this.options.resources,this.options);const h=this.services;h.logger=mt,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new _u(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(h.formatter=a(c),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new ku(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new Cu(a(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(f){for(var b=arguments.length,p=new Array(b>1?b-1:0),w=1;w<b;w++)p[w-1]=arguments[w];t.emit(f,...p)}),this.modules.languageDetector&&(h.languageDetector=a(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=a(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Ui(this.services,this.options),this.translator.on("*",function(f){for(var b=arguments.length,p=new Array(b>1?b-1:0),w=1;w<b;w++)p[w-1]=arguments[w];t.emit(f,...p)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,n||(n=bi),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return t.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return t.store[c](...arguments),t}});const l=An(),u=()=>{const c=(d,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),n(d,h)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bi;const r=X(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const a=[],o=s=>{if(!s||s==="cimode")return;this.services.languageUtils.toResolveHierarchy(s).forEach(u=>{u!=="cimode"&&a.indexOf(u)<0&&a.push(u)})};r?o(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(s=>o(s)),this.services.backendConnector.load(a,this.options.ns,s=>{!s&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(s)})}else n(null)}reloadResources(t,e,n){const r=An();return typeof t=="function"&&(n=t,t=void 0),typeof e=="function"&&(n=e,e=void 0),t||(t=this.languages),e||(e=this.options.ns),n||(n=bi),this.services.backendConnector.reload(t,e,a=>{r.resolve(),n(a)}),r}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Qo.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let e=0;e<this.languages.length;e++){const n=this.languages[e];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}}changeLanguage(t,e){var n=this;this.isLanguageChangingTo=t;const r=An();this.emit("languageChanging",t);const a=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,u)=>{u?(a(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve(function(){return n.t(...arguments)}),e&&e(l,function(){return n.t(...arguments)})},s=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=X(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||a(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{o(c,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(t),r}getFixedT(t,e,n){var r=this;const a=function(o,s){let l;if(typeof s!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),d=2;d<u;d++)c[d-2]=arguments[d];l=r.options.overloadTranslationOptionHandler([o,s].concat(c))}else l={...s};l.lng=l.lng||a.lng,l.lngs=l.lngs||a.lngs,l.ns=l.ns||a.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||n||a.keyPrefix);const h=r.options.keySeparator||".";let f;return l.keyPrefix&&Array.isArray(o)?f=o.map(b=>`${l.keyPrefix}${h}${b}`):f=l.keyPrefix?`${l.keyPrefix}${h}${o}`:o,r.t(f,l)};return X(t)?a.lng=t:a.lngs=t,a.ns=e,a.keyPrefix=n,a}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=e.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=this.services.backendConnector.state[`${s}|${l}`];return u===-1||u===0||u===2};if(e.precheck){const s=e.precheck(this,o);if(s!==void 0)return s}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(n,t)&&(!r||o(a,t)))}loadNamespaces(t,e){const n=An();return this.options.ns?(X(t)&&(t=[t]),t.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{n.resolve(),e&&e(r)}),n):(e&&e(),Promise.resolve())}loadLanguages(t,e){const n=An();X(t)&&(t=[t]);const r=this.options.preload||[],a=t.filter(o=>r.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=r.concat(a),this.loadResources(o=>{n.resolve(),e&&e(o)}),n):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services&&this.services.languageUtils||new Ga(Ba());return e.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Jn(t,e)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bi;const n=t.forkResourceStore;n&&delete t.forkResourceStore;const r={...this.options,...t,isClone:!0},a=new Jn(r);return(t.debug!==void 0||t.prefix!==void 0)&&(a.logger=a.logger.clone(t)),["store","services","language"].forEach(s=>{a[s]=this[s]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},n&&(a.store=new Ia(this.store.data,r),a.services.resourceStore=a.store),a.translator=new Ui(a.services,r),a.translator.on("*",function(s){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];a.emit(s,...u)}),a.init(r,e),a.translator.options=r,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const xe=Jn.createInstance();xe.createInstance=Jn.createInstance;xe.createInstance;xe.dir;xe.init;xe.loadResources;xe.reloadResources;xe.use;xe.changeLanguage;xe.getFixedT;xe.t;xe.exists;xe.setDefaultNamespace;xe.hasLoadedNamespace;xe.loadNamespaces;xe.loadLanguages;const ia={en:{translation:{"label.appTitle":"Pro Football Tour Planner","label.language":"Language","label.theme":"Theme","label.tourStartDate":"Time window begin","label.tourEndDate":"Time window end","label.routesHeading":"Best scored tours","label.routesHeading.running":"Searching for tours","label.helpTopicsHeading":"How the app works","label.weight":"Weight","label.unknownStadium":"Unknown stadium","label.unknownCity":"Unknown city","label.unknownLocation":"Unknown location","label.homeTeamUnknown":"Home team unknown","label.homeTeamFallback":"Home","label.awayTeamFallback":"Away","label.stadiumTbd":"TBD","label.gameDetailsHeading":"Game Details","label.game":"Game","label.week":"Week","label.kickoff":"Kickoff","label.stadium":"Stadium","label.location":"Location","label.routeScore":"Score","label.travelDistance":"Travel distance","label.travelTime":"Travel time","label.routeLength_one":"{{count}} game","label.routeLength_other":"{{count}} games","label.routeTitle.single":"{{firstCity}}","label.routeTitle.range":"From {{firstCity}} to {{lastCity}}","label.routeTitle.via":"From {{firstCity}} to {{lastCity}} via {{viaList}}","label.routeTitle.viaOverflow":"From {{firstCity}} to {{lastCity}} via {{viaList}} and {{remainingLabel}}","label.routeTitle.remaining_one":"{{count}} more","label.routeTitle.remaining_other":"{{count}} more","label.editRouteTitle":"Edit title","label.routeWeekSingle":"Week {{week}}","label.routeWeeksRange":"Weeks {{start}}  {{end}}","label.weekNumber":"Week {{week}}","label.weekUnknown":"Week ?","label.durationZeroHours":"0.0 hours","label.durationDays_one":"{{count}} day","label.durationDays_other":"{{count}} days","label.graphNode":"Week {{week}}: {{away}} @ {{home}}{{tagSuffix}}","label.graphNodeTagSuffix":" ({{tag}})","label.unknown":"Unknown","message.routesLoading":"Tours are loading","message.routesAwaitingSearch":"Tours will appear here once a search completes.","message.routesEmpty":"No tours found within the configured tour window.","message.calculatingRoutes":"Calculating tours","message.graphSelectPrompt":"Select a game to see the details.","message.favoritesEmpty":"No tours saved yet.","message.favoritesImportSummary":"Imported {{added}} tours  Skipped {{skipped}} duplicates.","error.favoritesImportInvalid":"Could not import tours: invalid file.","message.favoritesRemoveConfirm":"Really remove tour","message.help.empty":"Help content is not available yet.","button.help":"Help","button.searchStart":"Start search","button.searchStop":"End search","button.addFavorite":"Save tour","button.favoriteAdded":"Tour already saved","button.removeFavorite":"Remove tour","button.moveUp":"Move up","button.moveDown":"Move down","button.exportFavorites":"Export tours","button.importFavorites":"Import tours","button.close":"Close","button.cancel":"Cancel","button.remove":"Remove","button.save":"Save","button.restoreDefaults":"Restore defaults","dialog.teamPreferences.title":"Team preferences","dialog.cityPreferences.title":"City preferences","dialog.routingParameters.title":"Routing parameters","dialog.routingGraph.title":"Routing graph","dialog.favorites.title":"Saved tours","dialog.favorites.importStatusTitle":"Tour import status","dialog.favorites.removeConfirmTitle":"Remove saved tour","dialog.help.title":"Help","option.language.en":"English","option.language.de":"German","option.theme.system":"System","option.theme.light":"Light","option.theme.dark":"Dark","option.startDay.any":"Any day","option.startDay.sunday":"Sunday","option.startDay.monday":"Monday","option.startDay.thursday":"Thursday","option.enabled":"Enabled","option.disabled":"Disabled","aria.closeDialog":"Close dialog","aria.teamLogo":"{{team}} logo","aria.languageSelector":"Select interface language","aria.themeSelector":"Select interface theme","aria.appMenuOpen":"Open menu","aria.appMenuClose":"Close menu","status.searchStopped":"Stopped","status.searchFinished":"Finished","status.nodeSummary":"Processed {{processed}} of {{total}} start nodes.","log.elapsed":"Runtime:","log.progress":"Start games checked:","log.evaluated":"Tours evaluated:","log.remaining":"Remaining time:","label.routing.maxRoutes":"Max results","label.routing.maxTourLength":"Tour duration (days)","label.routing.allowFlights":"Allow flights","label.routing.expertMode":"Expert mode","label.routing.requiredStartDay":"Start day","label.routing.estimatedMaxGamesPerWeek":"Max games per week","label.routing.estimatedMinGamesPerWeek":"Min games per week","label.routing.maxSearchMinutesPerStartGame":"Max search minutes per game","label.routing.beamWidthPerStartGame":"Beam width/start game","label.routing.specialGameDayPenalty":"Special game day score multiplier","label.routing.cacheBucketHours":"Cache bucket (hours)","label.routing.minTimeToNextGameHoursFlight":"Min hours to next game (flight)","label.routing.maxTimeToNextGameHours":"Max hours to next game","label.routing.oneDayGap":"One-day gap (hours)","label.routing.maxDriveOneDayGap":"Max drive time on one day","label.routing.twoDayGap":"Two-day gap (hours)","label.routing.maxDriveTwoDayGap":"Max drive time two days","label.routing.threeDayGap":"Three-day gap (hours)","label.routing.maxDriveThreeDayGap":"Max drive time three days","label.routing.fourDayGap":"Four-day gap (hours)","label.routing.maxDriveFourDayGap":"Max drive time four days","label.routing.revisitMultiplierFloor":"City revisit score multiplier","label.routing.travelMultiplierFloor":"Travel multiplier floor","label.routing.travelMultiplierCeilingFlight":"Flight travel score multiplier","label.routing.enableRouteCache":"Enable route cache"}},de:{translation:{"label.appTitle":"Pro-Football Tour Planer ","label.language":"Sprache","label.theme":"Design","label.tourStartDate":"Zeitfenster von","label.tourEndDate":"Zeitfenster bis","label.routesHeading":"Bestbewertete Touren","label.routesHeading.running":"Tourensuche luft","label.helpTopicsHeading":"So funktioniert die App","label.weight":"Gewichtung","label.unknownStadium":"Unbekanntes Stadion","label.unknownCity":"Unbekannte Stadt","label.unknownLocation":"Unbekannter Ort","label.homeTeamUnknown":"Heimmannschaft unbekannt","label.homeTeamFallback":"Heim","label.awayTeamFallback":"Auswrts","label.stadiumTbd":"Noch offen","label.gameDetailsHeading":"Spieldetails","label.game":"Spiel","label.week":"Woche","label.kickoff":"Kickoff","label.stadium":"Stadion","label.location":"Ort","label.routeScore":"Wertung","label.travelDistance":"Reisedistanz","label.travelTime":"Reisezeit","label.routeLength_one":"{{count}} Spiel","label.routeLength_other":"{{count}} Spiele","label.routeTitle.single":"{{firstCity}}","label.routeTitle.range":"Von {{firstCity}} nach {{lastCity}}","label.routeTitle.via":"Von {{firstCity}} nach {{lastCity}} ber {{viaList}}","label.routeTitle.viaOverflow":"Von {{firstCity}} nach {{lastCity}} ber {{viaList}} und {{remainingLabel}}","label.routeTitle.remaining_one":"{{count}} weitere Stadt","label.routeTitle.remaining_other":"{{count}} weitere Stdte","label.editRouteTitle":"Titel bearbeiten","label.routeWeekSingle":"Woche {{week}}","label.routeWeeksRange":"Wochen {{start}}{{end}}","label.weekNumber":"Woche {{week}}","label.weekUnknown":"Woche ?","label.durationZeroHours":"0,0 Stunden","label.durationDays_one":"{{count}} Tag","label.durationDays_other":"{{count}} Tage","label.graphNode":"Woche {{week}}: {{away}} @ {{home}}{{tagSuffix}}","label.graphNodeTagSuffix":" ({{tag}})","label.unknown":"Unbekannt","message.routesLoading":"Touren werden geladen","message.routesAwaitingSearch":"Touren erscheinen hier nach einer abgeschlossenen Suche.","message.routesEmpty":"Keine Touren innerhalb des gewhlten Reisezeitraums gefunden.","message.calculatingRoutes":"Surche Touren","message.graphSelectPrompt":"Spiel auswhlen, um Details anzuzeigen.","message.favoritesEmpty":"Noch keine Touren gespeichert.","message.favoritesImportSummary":"Importiert: {{added}}  bersprungen: {{skipped}}.","error.favoritesImportInvalid":"Touren konnten nicht importiert werden: Datei ungltig.","message.favoritesRemoveConfirm":"Tour wirklich entfernen?","message.help.empty":"Hilfeinhalte sind derzeit nicht verfgbar.","button.help":"Hilfe","button.searchStart":"Suche starten","button.searchStop":"Suche beenden","button.addFavorite":"Tour merken","button.favoriteAdded":"Tour bereits gemerkt","button.removeFavorite":"Tour entfernen","button.moveUp":"Nach oben","button.moveDown":"Nach unten","button.exportFavorites":"Touren exportieren","button.importFavorites":"Touren importieren","button.close":"Schlieen","button.cancel":"Abbrechen","button.remove":"Entfernen","button.save":"Speichern","button.restoreDefaults":"Auf Standardwerte zurcksetzen","dialog.teamPreferences.title":"Teamprferenzen","dialog.cityPreferences.title":"Stadtprferenzen","dialog.routingParameters.title":"Routing-Parameter","dialog.routingGraph.title":"Routing-Graph","dialog.favorites.title":"Gemerkte Touren","dialog.favorites.importStatusTitle":"Tour-Importstatus","dialog.favorites.removeConfirmTitle":"Gemerkte Tour entfernen","dialog.help.title":"Hilfe","option.language.en":"English","option.language.de":"Deutsch","option.theme.system":"System","option.theme.light":"Hell","option.theme.dark":"Dunkel","option.startDay.any":"Beliebiger Tag","option.startDay.sunday":"Sonntag","option.startDay.monday":"Montag","option.startDay.thursday":"Donnerstag","option.enabled":"Aktiviert","option.disabled":"Deaktiviert","aria.closeDialog":"Dialog schlieen","aria.teamLogo":"{{team}} Logo","aria.languageSelector":"Sprache auswhlen","aria.themeSelector":"Design auswhlen","aria.appMenuOpen":"Men ffnen","aria.appMenuClose":"Men schlieen","status.searchStopped":"Angehalten","status.searchFinished":"Abgeschlossen","status.nodeSummary":"{{processed}} von {{total}} Spielen verarbeitet.","log.elapsed":"Laufzeit:","log.progress":"Startspiele geprft:","log.evaluated":"Touren geprft:","log.remaining":"Restzeit:","label.routing.maxRoutes":"Max Anzahl Ergebnisse","label.routing.maxTourLength":"Reisedauer (Tage)","label.routing.allowFlights":"Flge erlauben","label.routing.expertMode":"Experten-Modus","label.routing.requiredStartDay":"Starttag","label.routing.estimatedMaxGamesPerWeek":"Max Spiele pro Woche","label.routing.estimatedMinGamesPerWeek":"Min Spiele pro Woche","label.routing.maxSearchMinutesPerStartGame":"Max Suchminuten pro Spiel","label.routing.beamWidthPerStartGame":"Beam-Width/Startspiel","label.routing.cacheBucketHours":"Cache-Bucket (Stunden)","label.routing.minTimeToNextGameHoursFlight":"Min Stunden bis zum nchsten Spiel (Flug)","label.routing.maxTimeToNextGameHours":"Max Stunden bis zum nchsten Spiel","label.routing.oneDayGap":"Ein-Tages-Abstand (Stunden)","label.routing.maxDriveOneDayGap":"Max Fahrtzeit an einem Tag","label.routing.twoDayGap":"Zwei-Tages-Abstand (Stunden)","label.routing.maxDriveTwoDayGap":"Max Fahrtzeit an zwei Tagen","label.routing.threeDayGap":"Drei-Tages-Abstand (Stunden)","label.routing.maxDriveThreeDayGap":"Max Fahrtzeit an drei Tagen","label.routing.fourDayGap":"Vier-Tages-Abstand (Stunden)","label.routing.maxDriveFourDayGap":"Max Fahrtzeit an vier Tagen","label.routing.specialGameDayPenalty":"Bewertungsmultiplikator fr besondere Spieltage","label.routing.travelMultiplierFloor":"Mindestmultiplikator fr Reisezeit","label.routing.revisitMultiplierFloor":"Bewertungsmultiplikator fr Stadt-Wiederbesuche","label.routing.travelMultiplierCeilingFlight":"Bewertungsmultiplikator fr Flge","label.routing.enableRouteCache":"Route-Cache aktivieren"}}};let Ha=!1;async function Du(){if(Ha)return;const i=es();await xe.init({lng:i,fallbackLng:"en",resources:ia,interpolation:{escapeValue:!1}}),Ha=!0}function L(i,t){return xe.t(i,t)}function Au(i){return xe.changeLanguage(i)}function ht(){return xe.language||es()}function Nu(){return Object.keys(ia)}function jt(i){return xe.on("languageChanged",i),()=>xe.off("languageChanged",i)}function es(){if(typeof navigator>"u")return"en";const i=Array.isArray(navigator.languages)&&navigator.languages.length>0?navigator.languages[0]:navigator.language;return typeof i=="string"&&i.toLowerCase().startsWith("de")?"de":"en"}const ts=[{season:2025,stadium:"State Farm Stadium",home_team:["ARI"],location_name:"Glendale, Arizona",city_name:"Arizona",timezone:"America/Phoenix",timezone_label:"MT",stadium_id:"PHO00",location_geo:[-112.263,33.528],googleMapUrl:"https://www.google.com/maps?q=33.528,-112.263"},{season:2025,stadium:"Mercedes-Benz Stadium",home_team:["ATL"],location_name:"Atlanta, Georgia",city_name:"Atlanta",timezone:"America/New_York",timezone_label:"ET",stadium_id:"ATL97",location_geo:[-84.4,33.75555555555555],googleMapUrl:"https://www.google.com/maps?q=33.75555555555555,-84.4"},{season:2025,stadium:"M&T Bank Stadium",home_team:["BAL"],location_name:"Baltimore, Maryland",city_name:"Baltimore",timezone:"America/New_York",timezone_label:"ET",stadium_id:"BAL00",location_geo:[-76.62277777777777,39.278055555555554],googleMapUrl:"https://www.google.com/maps?q=39.278055555555554,-76.62277777777777"},{season:2025,stadium:"Highmark Stadium",home_team:["BUF"],location_name:"Orchard Park, New York",city_name:"Buffalo",timezone:"America/New_York",timezone_label:"ET",stadium_id:"BUF00",location_geo:[-78.787,42.774],googleMapUrl:"https://www.google.com/maps?q=42.774,-78.787"},{season:2025,stadium:"Bank of America Stadium",home_team:["CAR"],location_name:"Charlotte, NC",city_name:"Carolina",timezone:"America/New_York",timezone_label:"ET",stadium_id:"CAR00",location_geo:[-80.85277777777777,35.225833333333334],googleMapUrl:"https://www.google.com/maps?q=35.225833333333334,-80.85277777777777"},{season:2025,stadium:"Soldier Field",home_team:["CHI"],location_name:"Chicago, Illinois",city_name:"Chicago",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"CHI98",location_geo:[-87.6167,41.8623],googleMapUrl:"https://www.google.com/maps?q=41.8623,-87.6167"},{season:2025,stadium:"Paycor Stadium",home_team:["CIN"],location_name:"Cincinnati, Ohio",city_name:"Cincinnati",timezone:"America/New_York",timezone_label:"ET",stadium_id:"CIN00",location_geo:[-84.516,39.095],googleMapUrl:"https://www.google.com/maps?q=39.095,-84.516"},{season:2025,stadium:"Huntington Bank Field",home_team:["CLE"],location_name:"Cleveland, Ohio",city_name:"Cleveland",timezone:"America/New_York",timezone_label:"ET",stadium_id:"CLE00",location_geo:[-81.699444,41.506111],googleMapUrl:"https://www.google.com/maps?q=41.506111,-81.699444"},{season:2025,stadium:"AT&T Stadium",home_team:["DAL"],location_name:"Arlington, Texas",city_name:"Dallas",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"DAL00",location_geo:[-97.09277777777777,32.74777777777778],googleMapUrl:"https://www.google.com/maps?q=32.74777777777778,-97.09277777777777"},{season:2025,stadium:"Empower Field at Mile High",home_team:["DEN"],location_name:"Denver, Colorado",city_name:"Denver",timezone:"America/Denver",timezone_label:"MT",stadium_id:"DEN00",location_geo:[-104.9849,39.7392],googleMapUrl:"https://www.google.com/maps?q=39.7392,-104.9849"},{season:2025,stadium:"Ford Field",home_team:["DET"],location_name:"Detroit, Michigan",city_name:"Detroit",timezone:"America/Detroit",timezone_label:"ET",stadium_id:"DET00",location_geo:[-83.04555555555555,42.34],googleMapUrl:"https://www.google.com/maps?q=42.34,-83.04555555555555"},{season:2025,stadium:"Lambeau Field",home_team:["GB"],location_name:"Green Bay, Wisconsin",city_name:"Green Bay",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"GNB00",location_geo:[-88.06222222222222,44.50138888888889],googleMapUrl:"https://www.google.com/maps?q=44.50138888888889,-88.06222222222222"},{season:2025,stadium:"NRG Stadium",home_team:["HOU"],location_name:"Houston, Texas",city_name:"Houston",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"HOU00",location_geo:[-95.41083333333334,29.684722222222224],googleMapUrl:"https://www.google.com/maps?q=29.684722222222224,-95.41083333333334"},{season:2025,stadium:"Lucas Oil Stadium",home_team:["IND"],location_name:"Indianapolis, Indiana",city_name:"Indianapolis",timezone:"America/Indiana/Indianapolis",timezone_label:"ET",stadium_id:"IND00",location_geo:[-86.16380555555556,39.76005555555555],googleMapUrl:"https://www.google.com/maps?q=39.76005555555555,-86.16380555555556"},{season:2025,stadium:"EverBank Stadium",home_team:["JAX"],location_name:"Jacksonville, Florida",city_name:"Jacksonville",timezone:"America/New_York",timezone_label:"ET",stadium_id:"JAX00",location_geo:[-81.6375,30.323888888888888],googleMapUrl:"https://www.google.com/maps?q=30.323888888888888,-81.6375"},{season:2025,stadium:"GEHA Field at Arrowhead Stadium",home_team:["KC"],location_name:"Kansas City, Missouri",city_name:"Kansas City",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"KAN00",location_geo:[-94.483889,39.048889],googleMapUrl:"https://www.google.com/maps?q=39.048889,-94.483889"},{season:2025,stadium:"SoFi Stadium",home_team:["LAC","LA"],location_name:"Inglewood, CA",city_name:"Los Angeles",timezone:"America/Los_Angeles",timezone_label:"PT",stadium_id:"LAX01",location_geo:[-118.339,33.953],googleMapUrl:"https://www.google.com/maps?q=33.953,-118.339"},{season:2025,stadium:"Allegiant Stadium",home_team:["LV"],location_name:"Paradise, Nevada",city_name:"Las Vegas",timezone:"America/Los_Angeles",timezone_label:"PT",stadium_id:"VEG00",location_geo:[-115.18388888888889,36.09055555555556],googleMapUrl:"https://www.google.com/maps?q=36.09055555555556,-115.18388888888889"},{season:2025,stadium:"Hard Rock Stadium",home_team:["MIA"],location_name:"Coral Gables, Florida",city_name:"Miami",timezone:"America/New_York",timezone_label:"ET",stadium_id:"MIA00",location_geo:[-80.2388888888889,25.958055555555553],googleMapUrl:"https://www.google.com/maps?q=25.958055555555553,-80.2388888888889"},{season:2025,stadium:"U.S. Bank Stadium",home_team:["MIN"],location_name:"Minneapolis, Minnesota",city_name:"Minnesota",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"MIN01",location_geo:[-93.258,44.974],googleMapUrl:"https://www.google.com/maps?q=44.974,-93.258"},{season:2025,stadium:"Gillette Stadium",home_team:["NE"],location_name:"Foxborough, Massachusetts",city_name:"New England",timezone:"America/New_York",timezone_label:"ET",stadium_id:"BOS00",location_geo:[-71.264,42.091],googleMapUrl:"https://www.google.com/maps?q=42.091,-71.264"},{season:2025,stadium:"Caesars Superdome",home_team:["NO"],location_name:"New Orleans, Louisiana",city_name:"New Orleans",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"NOR00",location_geo:[-90.08111111111111,29.950833333333332],googleMapUrl:"https://www.google.com/maps?q=29.950833333333332,-90.08111111111111"},{season:2025,stadium:"MetLife Stadium",home_team:["NYG","NYJ"],location_name:"East Rutherford, New Jersey",city_name:"New York",timezone:"America/New_York",timezone_label:"ET",stadium_id:"NYC01",location_geo:[-74.074444,40.813611],googleMapUrl:"https://www.google.com/maps?q=40.813611,-74.074444"},{season:2025,stadium:"Lincoln Financial Field",home_team:["PHI"],location_name:"Philadelphia, Pennsylvania",city_name:"Philadelphia",timezone:"America/New_York",timezone_label:"ET",stadium_id:"PHI00",location_geo:[-75.1675,39.90083333333333],googleMapUrl:"https://www.google.com/maps?q=39.90083333333333,-75.1675"},{season:2025,stadium:"Acrisure Stadium",home_team:["PIT"],location_name:"Pittsburgh, Pennsylvania",city_name:"Pittsburgh",timezone:"America/New_York",timezone_label:"ET",stadium_id:"PIT00",location_geo:[-80.015833,40.446667],googleMapUrl:"https://www.google.com/maps?q=40.446667,-80.015833"},{season:2025,stadium:"Lumen Field",home_team:["SEA"],location_name:"Seattle, WA",city_name:"Seattle",timezone:"America/Los_Angeles",timezone_label:"PT",stadium_id:"SEA00",location_geo:[-122.3316,47.5952],googleMapUrl:"https://www.google.com/maps?q=47.5952,-122.3316"},{season:2025,stadium:"Levi's Stadium",home_team:["SF"],location_name:"Santa Clara, California",city_name:"San Francisco",timezone:"America/Los_Angeles",timezone_label:"PT",stadium_id:"SFO01",location_geo:[-121.97,37.403],googleMapUrl:"https://www.google.com/maps?q=37.403,-121.97"},{season:2025,stadium:"Raymond James Stadium",home_team:["TB"],location_name:"Tampa Bay, Florida",city_name:"Tampa Bay",timezone:"America/New_York",timezone_label:"ET",stadium_id:"TAM00",location_geo:[-82.50333333333333,27.97583333333333],googleMapUrl:"https://www.google.com/maps?q=27.97583333333333,-82.50333333333333"},{season:2025,stadium:"Nissan Stadium",home_team:["TEN"],location_name:"Nashville, Tennessee",city_name:"Tennessee",timezone:"America/Chicago",timezone_label:"CT",stadium_id:"NAS00",location_geo:[-86.7713888888889,36.16638888888889],googleMapUrl:"https://www.google.com/maps?q=36.16638888888889,-86.7713888888889"},{season:2025,stadium:"Northwest Stadium",home_team:["WAS"],location_name:"Landover, Maryland",city_name:"Washington",timezone:"America/New_York",timezone_label:"ET",stadium_id:"WAS00",location_geo:[-76.864444,38.907778],googleMapUrl:"https://www.google.com/maps?q=38.907778,-76.864444"}],ns=[{season:2025,team:"ARI",team_name:"Arizona Cardinals",team_id:"3800",team_nick:"Cardinals",team_conf:"NFC",team_division:"NFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/7/72/Arizona_Cardinals_logo.svg/179px-Arizona_Cardinals_logo.svg.png",team_wordmark:"/images/wordmarks/ARI.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/ARI.png",stadium_id:"PHO00",stadium:"State Farm Stadium",color_city_dot:"#fff",color_helmet_shell:"#fff",color_city_border:"#97233F",color_helmet_logo:"#97233F",color_helmet_mask:"#8b999d"},{season:2025,team:"ATL",team_name:"Atlanta Falcons",team_id:"200",team_nick:"Falcons",team_conf:"NFC",team_division:"NFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/c/c5/Atlanta_Falcons_logo.svg/192px-Atlanta_Falcons_logo.svg.png",team_wordmark:"/images/wordmarks/ATL.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/ATL.png",stadium_id:"ATL97",stadium:"Mercedes-Benz Stadium",color_city_dot:"#000",color_helmet_shell:"#000",color_city_border:"#a30d2d",color_helmet_logo:"#a30d2d",color_helmet_mask:"#8b999d"},{season:2025,team:"BAL",team_name:"Baltimore Ravens",team_id:"325",team_nick:"Ravens",team_conf:"AFC",team_division:"AFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/1/16/Baltimore_Ravens_logo.svg/193px-Baltimore_Ravens_logo.svg.png",team_wordmark:"/images/wordmarks/BAL.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/BAL.png",stadium_id:"BAL00",stadium:"M&T Bank Stadium",color_city_dot:"#b79a3e",color_helmet_shell:"#241773",color_city_border:"#513481",color_helmet_logo:"#9E7C0C",color_helmet_mask:"#9E7C0C"},{season:2025,team:"BUF",team_name:"Buffalo Bills",team_id:"610",team_nick:"Bills",team_conf:"AFC",team_division:"AFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/7/77/Buffalo_Bills_logo.svg/189px-Buffalo_Bills_logo.svg.png",team_wordmark:"/images/wordmarks/BUF.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/BUF.png",stadium_id:"BUF00",stadium:"Highmark Stadium",color_city_dot:"#00338D",color_helmet_shell:"#C60C30",color_city_border:"#C60C30",color_helmet_logo:"#00338D",color_helmet_mask:"#eee"},{season:2025,team:"CAR",team_name:"Carolina Panthers",team_id:"750",team_nick:"Panthers",team_conf:"NFC",team_division:"NFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/1/1c/Carolina_Panthers_logo.svg/100px-Carolina_Panthers_logo.svg.png",team_wordmark:"/images/wordmarks/CAR.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/CAR.png",stadium_id:"CAR00",stadium:"Bank of America Stadium",color_city_dot:"#0085CA",color_helmet_shell:"#0085CA",color_city_border:"#000",color_helmet_logo:"#000",color_helmet_mask:"#8b999d"},{season:2025,team:"CHI",team_name:"Chicago Bears",team_id:"810",team_nick:"Bears",team_conf:"NFC",team_division:"NFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Chicago_Bears_logo.svg/100px-Chicago_Bears_logo.svg.png",team_wordmark:"/images/wordmarks/CHI.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/CHI.png",stadium_id:"CHI98",stadium:"Soldier Field",color_city_dot:"#E64100",color_helmet_shell:"#0B162A",color_city_border:"#0B162A",color_helmet_logo:"#E64100",color_helmet_mask:"#0B162A"},{season:2025,team:"CIN",team_name:"Cincinnati Bengals",team_id:"920",team_nick:"Bengals",team_conf:"AFC",team_division:"AFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/81/Cincinnati_Bengals_logo.svg/100px-Cincinnati_Bengals_logo.svg.png",team_wordmark:"/images/wordmarks/CIN.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/CIN.png",stadium_id:"CIN00",stadium:"Paycor Stadium",color_city_dot:"#000",color_helmet_shell:"#FB4F14",color_city_border:"#FB4F14",color_helmet_logo:"#000",color_helmet_mask:"#000"},{season:2025,team:"CLE",team_name:"Cleveland Browns",team_id:"1050",team_nick:"Browns",team_conf:"AFC",team_division:"AFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/d/d9/Cleveland_Browns_logo.svg/100px-Cleveland_Browns_logo.svg.png",team_wordmark:"/images/wordmarks/CLE.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/CLE.png",stadium_id:"CLE00",stadium:"Huntington Bank Field",color_city_dot:"#FF3C00",color_helmet_shell:"#FF3C00",color_city_border:"#FF3C00",color_helmet_logo:"#FF3C00",color_helmet_mask:"#a5acaf"},{season:2025,team:"DAL",team_name:"Dallas Cowboys",team_id:"1200",team_nick:"Cowboys",team_conf:"NFC",team_division:"NFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Dallas_Cowboys.svg/100px-Dallas_Cowboys.svg.png",team_wordmark:"/images/wordmarks/DAL.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/DAL.png",stadium_id:"DAL00",stadium:"AT&T Stadium",color_city_dot:"#002244",color_helmet_shell:"#acc0c6",color_city_border:"#acc0c6",color_helmet_logo:"#002244",color_helmet_mask:"#8b999d"},{season:2025,team:"DEN",team_name:"Denver Broncos",team_id:"1400",team_nick:"Broncos",team_conf:"AFC",team_division:"AFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/4/44/Denver_Broncos_logo.svg/100px-Denver_Broncos_logo.svg.png",team_wordmark:"/images/wordmarks/DEN.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/DEN.png",stadium_id:"DEN00",stadium:"Empower Field at Mile High",color_city_dot:"#f75",color_helmet_shell:"#002244",color_city_border:"#002244",color_helmet_logo:"#FB4F14",color_helmet_mask:"#00234c"},{season:2025,team:"DET",team_name:"Detroit Lions",team_id:"1540",team_nick:"Lions",team_conf:"NFC",team_division:"NFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/7/71/Detroit_Lions_logo.svg/100px-Detroit_Lions_logo.svg.png",team_wordmark:"/images/wordmarks/DET.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/DET.png",stadium_id:"DET00",stadium:"Ford Field",color_city_dot:"#B0B7BC",color_helmet_shell:"#0076B6",color_city_border:"#0076B6",color_helmet_logo:"#B0B7BC",color_helmet_mask:"#B0B7BC"},{season:2025,team:"GB",team_name:"Green Bay Packers",team_id:"1800",team_nick:"Packers",team_conf:"NFC",team_division:"NFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Green_Bay_Packers_logo.svg/100px-Green_Bay_Packers_logo.svg.png",team_wordmark:"/images/wordmarks/GB.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/GB.png",stadium_id:"GNB00",stadium:"Lambeau Field",color_city_dot:"#FFB612",color_helmet_shell:"#FFB612",color_city_border:"#1c2d25",color_helmet_logo:"#1c2d25",color_helmet_mask:"#1c2d25"},{season:2025,team:"HOU",team_name:"Houston Texans",team_id:"2120",team_nick:"Texans",team_conf:"AFC",team_division:"AFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/2/28/Houston_Texans_logo.svg/100px-Houston_Texans_logo.svg.png",team_wordmark:"/images/wordmarks/HOU.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/HOU.png",stadium_id:"HOU00",stadium:"NRG Stadium",color_city_dot:"#A71930",color_helmet_shell:"#03202F",color_city_border:"#03202F",color_helmet_logo:"#A71930",color_helmet_mask:"#00071c"},{season:2025,team:"IND",team_name:"Indianapolis Colts",team_id:"2200",team_nick:"Colts",team_conf:"AFC",team_division:"AFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/00/Indianapolis_Colts_logo.svg/100px-Indianapolis_Colts_logo.svg.png",team_wordmark:"/images/wordmarks/IND.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/IND.png",stadium_id:"IND00",stadium:"Lucas Oil Stadium",color_city_dot:"#fff",color_helmet_shell:"#fff",color_city_border:"#002C5F",color_helmet_logo:"#002C5F",color_helmet_mask:"#8b999d"},{season:2025,team:"JAX",team_name:"Jacksonville Jaguars",team_id:"2250",team_nick:"Jaguars",team_conf:"AFC",team_division:"AFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/7/74/Jacksonville_Jaguars_logo.svg/100px-Jacksonville_Jaguars_logo.svg.png",team_wordmark:"/images/wordmarks/JAX.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/JAX.png",stadium_id:"JAX00",stadium:"EverBank Stadium",color_city_dot:"#000",color_helmet_shell:"#006778",color_city_border:"#006778",color_helmet_logo:"#9f792c",color_helmet_mask:"#9f792c"},{season:2025,team:"KC",team_name:"Kansas City Chiefs",team_id:"2310",team_nick:"Chiefs",team_conf:"AFC",team_division:"AFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/e/e1/Kansas_City_Chiefs_logo.svg/100px-Kansas_City_Chiefs_logo.svg.png",team_wordmark:"/images/wordmarks/KC.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/KC.png",stadium_id:"KAN00",stadium:"GEHA Field at Arrowhead Stadium",color_city_dot:"#fff",color_helmet_shell:"#E31837",color_city_border:"#E31837",color_helmet_logo:"#fff",color_helmet_mask:"#FFB612"},{season:2025,team:"LAC",team_name:"Los Angeles Chargers",team_id:"4400",team_nick:"Chargers",team_conf:"AFC",team_division:"AFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/7/72/NFL_Chargers_logo.svg/100px-NFL_Chargers_logo.svg.png",team_wordmark:"/images/wordmarks/LAC.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/LAC.png",stadium_id:"LAX01",stadium:"SoFi Stadium",color_city_dot:"#fff",color_helmet_shell:"#007BC7",color_city_border:"#007BC7",color_helmet_logo:"#ffc20e",color_helmet_mask:"#ffb612"},{season:2025,team:"LA",team_name:"Los Angeles Rams",team_id:"2510",team_nick:"Rams",team_conf:"NFC",team_division:"NFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/8/8a/Los_Angeles_Rams_logo.svg/100px-Los_Angeles_Rams_logo.svg.png",team_wordmark:"/images/wordmarks/LA.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/LA.png",stadium_id:"LAX01",stadium:"SoFi Stadium",color_city_dot:"#FFD100",color_helmet_shell:"#003594",color_city_border:"#003594",color_helmet_logo:"#FFD100",color_helmet_mask:"#002467"},{season:2025,team:"LV",team_name:"Las Vegas Raiders",team_id:"2520",team_nick:"Raiders",team_conf:"AFC",team_division:"AFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/4/48/Las_Vegas_Raiders_logo.svg/100px-Las_Vegas_Raiders_logo.svg.png",team_wordmark:"/images/wordmarks/LV.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/LV.png",stadium_id:"VEG00",stadium:"Allegiant Stadium",color_city_dot:"#A5ACAF",color_helmet_shell:"#000",color_city_border:"#000",color_helmet_logo:"#A5ACAF",color_helmet_mask:"#a6aeb0"},{season:2025,team:"MIA",team_name:"Miami Dolphins",team_id:"2700",team_nick:"Dolphins",team_conf:"AFC",team_division:"AFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/3/37/Miami_Dolphins_logo.svg/100px-Miami_Dolphins_logo.svg.png",team_wordmark:"/images/wordmarks/MIA.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/MIA.png",stadium_id:"MIA00",stadium:"Hard Rock Stadium",color_city_dot:"#F58220",color_helmet_shell:"#008E97",color_city_border:"#008E97",color_helmet_logo:"#fff",color_helmet_mask:"#F58220"},{season:2025,team:"MIN",team_name:"Minnesota Vikings",team_id:"3000",team_nick:"Vikings",team_conf:"NFC",team_division:"NFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/4/48/Minnesota_Vikings_logo.svg/98px-Minnesota_Vikings_logo.svg.png",team_wordmark:"/images/wordmarks/MIN.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/MIN.png",stadium_id:"MIN01",stadium:"U.S. Bank Stadium",color_city_dot:"#fff",color_helmet_shell:"#4F2683",color_city_border:"#4F2683",color_helmet_logo:"#fff",color_helmet_mask:"#FFC62F"},{season:2025,team:"NE",team_name:"New England Patriots",team_id:"3200",team_nick:"Patriots",team_conf:"AFC",team_division:"AFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/b/b9/New_England_Patriots_logo.svg/100px-New_England_Patriots_logo.svg.png",team_wordmark:"/images/wordmarks/NE.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/NE.png",stadium_id:"BOS00",stadium:"Gillette Stadium",color_city_dot:"#b0b7bc",color_helmet_shell:"#b0b7bc",color_city_border:"#002244",color_helmet_logo:"#002244",color_helmet_mask:"#C60C30"},{season:2025,team:"NO",team_name:"New Orleans Saints",team_id:"3300",team_nick:"Saints",team_conf:"NFC",team_division:"NFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/New_Orleans_Saints_logo.svg/98px-New_Orleans_Saints_logo.svg.png",team_wordmark:"/images/wordmarks/NO.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/NO.png",stadium_id:"NOR00",stadium:"Caesars Superdome",color_city_dot:"#000",color_helmet_shell:"#9f8958",color_city_border:"#D3BC8D",color_helmet_logo:"#000",color_helmet_mask:"#000"},{season:2025,team:"NYG",team_name:"New York Giants",team_id:"3410",team_nick:"Giants",team_conf:"NFC",team_division:"NFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/New_York_Giants_logo.svg/100px-New_York_Giants_logo.svg.png",team_wordmark:"/images/wordmarks/NYG.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/NYG.png",stadium_id:"NYC01",stadium:"MetLife Stadium",color_city_dot:"#A71930",color_helmet_shell:"#0B2265",color_city_border:"#0B2265",color_helmet_logo:"#fff",color_helmet_mask:"#A71930"},{season:2025,team:"NYJ",team_name:"New York Jets",team_id:"3430",team_nick:"Jets",team_conf:"AFC",team_division:"AFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/6/6b/New_York_Jets_logo.svg/100px-New_York_Jets_logo.svg.png",team_wordmark:"/images/wordmarks/NYJ.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/NYJ.png",stadium_id:"NYC01",stadium:"MetLife Stadium",color_city_dot:"#fff",color_helmet_shell:"#003F2D",color_city_border:"#003F2D",color_helmet_logo:"#fff",color_helmet_mask:"#006347"},{season:2025,team:"PHI",team_name:"Philadelphia Eagles",team_id:"3700",team_nick:"Eagles",team_conf:"NFC",team_division:"NFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/8/8e/Philadelphia_Eagles_logo.svg/100px-Philadelphia_Eagles_logo.svg.png",team_wordmark:"/images/wordmarks/PHI.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/PHI.png",stadium_id:"PHI00",stadium:"Lincoln Financial Field",color_city_dot:"#004C54",color_helmet_shell:"#004C54",color_city_border:"#b0b7bc",color_helmet_logo:"#b0b7bc",color_helmet_mask:"#000"},{season:2025,team:"PIT",team_name:"Pittsburgh Steelers",team_id:"3900",team_nick:"Steelers",team_conf:"AFC",team_division:"AFC North",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Pittsburgh_Steelers_logo.svg/100px-Pittsburgh_Steelers_logo.svg.png",team_wordmark:"/images/wordmarks/PIT.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/PIT.png",stadium_id:"PIT00",stadium:"Acrisure Stadium",color_city_dot:"#FFB612",color_helmet_shell:"#000000",color_city_border:"#000000",color_helmet_logo:"#fff",color_helmet_mask:"#FFB612"},{season:2025,team:"SEA",team_name:"Seattle Seahawks",team_id:"4600",team_nick:"Seahawks",team_conf:"NFC",team_division:"NFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/8/8e/Seattle_Seahawks_logo.svg/100px-Seattle_Seahawks_logo.svg.png",team_wordmark:"/images/wordmarks/SEA.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/SEA.png",stadium_id:"SEA00",stadium:"Lumen Field",color_city_dot:"#002244",color_helmet_shell:"#002244",color_city_border:"#69be28",color_helmet_logo:"#69be28",color_helmet_mask:"#a5acaf"},{season:2025,team:"SF",team_name:"San Francisco 49ers",team_id:"4500",team_nick:"49ers",team_conf:"NFC",team_division:"NFC West",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/San_Francisco_49ers_logo.svg/100px-San_Francisco_49ers_logo.svg.png",team_wordmark:"/images/wordmarks/SF.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/SF.png",stadium_id:"SFO01",stadium:"Levi's Stadium",color_city_dot:"#AA0000",color_helmet_shell:"#a18a54",color_city_border:"#a18a54",color_helmet_logo:"#AA0000",color_helmet_mask:"#AA0000"},{season:2025,team:"TB",team_name:"Tampa Bay Buccaneers",team_id:"4900",team_nick:"Buccaneers",team_conf:"NFC",team_division:"NFC South",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/en/thumb/a/a2/Tampa_Bay_Buccaneers_logo.svg/100px-Tampa_Bay_Buccaneers_logo.svg.png",team_wordmark:"/images/wordmarks/TB.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/TB.png",stadium_id:"TAM00",stadium:"Raymond James Stadium",color_city_dot:"#A71930",color_helmet_shell:"#50483d",color_city_border:"#6c5d49",color_helmet_logo:"#A71930",color_helmet_mask:"#000"},{season:2025,team:"TEN",team_name:"Tennessee Titans",team_id:"2100",team_nick:"Titans",team_conf:"AFC",team_division:"AFC South",team_logo_wikipedia:"https://github.com/nflverse/nflverse-pbp/raw/master/titans.png",team_wordmark:"/images/wordmarks/TEN.png",team_conference_logo:"/images/conferences/AFC.png",team_logo_squared:"/images/logos/TEN.png",stadium_id:"NAS00",stadium:"Nissan Stadium",color_city_dot:"#002244",color_helmet_shell:"#4B92DB",color_city_border:"#4B92DB",color_helmet_logo:"#002244",color_helmet_mask:"#c60c30"},{season:2025,team:"WAS",team_name:"Washington Commanders",team_id:"5110",team_nick:"Commanders",team_conf:"NFC",team_division:"NFC East",team_logo_wikipedia:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Washington_commanders.svg/100px-Washington_commanders.svg.png",team_wordmark:"/images/wordmarks/WAS.png",team_conference_logo:"/images/conferences/NFC.png",team_logo_squared:"/images/logos/WAS.png",stadium_id:"WAS00",stadium:"Northwest Stadium",color_city_dot:"#FFB612",color_helmet_shell:"#5A1414",color_city_border:"#6c1010",color_helmet_logo:"#FFB612",color_helmet_mask:"#FFB612"}],Lu="data/pro-tour-schedule.js";async function ra(){var r;if(!((r=globalThis==null?void 0:globalThis.location)!=null&&r.origin))throw new Error("Cannot resolve schedule URL without a browser location.");const i=Fu("/pro-tour/"),e=await import(new URL(Lu,new URL(i,globalThis.location.origin)).href),n=e==null?void 0:e.proTourSchedule;if(!n)throw new Error("Schedule module did not provide proTourSchedule.");return n}function Fu(i){const t=i.startsWith("/")?i:`/${i}`;return t.endsWith("/")?t:`${t}/`}const aa="America/New_York";function Rr(i,t=aa){return new Intl.DateTimeFormat("en-CA",{timeZone:t,year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(i))}function Mu(i,t,e,n=aa){var d;const r=new Date(Date.UTC(i,t-1,e,12,0,0)),s=(((d=new Intl.DateTimeFormat("en-US",{timeZone:n,timeZoneName:"shortOffset",hour:"numeric"}).formatToParts(r).find(h=>h.type==="timeZoneName"))==null?void 0:d.value)??"GMT").match(/GMT([+-])(\d{1,2})(?::?(\d{2}))?/i);if(!s)return 0;const l=s[1]==="-"?-1:1,u=Number(s[2]),c=s[3]?Number(s[3]):0;return l*(u*60+c)}function is(i,t=aa){if(typeof i!="string"||!/^\d{4}-\d{2}-\d{2}$/.test(i))return null;const[e,n,r]=i.split("-"),a=Number(e),o=Number(n),s=Number(r);if(!Number.isFinite(a)||!Number.isFinite(o)||!Number.isFinite(s))return null;const l=Mu(a,o,s,t);return Date.UTC(a,o-1,s,0,0,0)-l*60*1e3}const Ru=/^\d{4}-\d{2}-\d{2}$/,Pu=24*60*60*1e3;function Iu(i,{endOfDay:t=!1}={}){if(i==null)return null;if(typeof i=="number"&&Number.isFinite(i))return i;if(i instanceof Date)return i.getTime();if(typeof i=="string"&&Ru.test(i)){const n=is(i);return Number.isFinite(n)?t?n+Pu-1:n:null}const e=Date.parse(i);return Number.isFinite(e)?e:null}function vi(i){return Number.isFinite(i)?Rr(i):Rr(Date.now())}function Ou(i=[]){let t=1/0,e=-1/0;if((i??[]).forEach(n=>{const r=typeof(n==null?void 0:n.gamedate)=="string"?n.gamedate:n==null?void 0:n.gameday,a=Date.parse(r);Number.isFinite(a)&&(a<t&&(t=a),a>e&&(e=a))}),!Number.isFinite(t)||!Number.isFinite(e)){const n=Date.now();return{startMs:n,endMs:n,startDate:vi(n),endDate:vi(n)}}return{startMs:t,endMs:e,startDate:vi(t),endDate:vi(e)}}async function Gu(i){const t=await ra(),e=$u(),n=zu(),r=Bu(t),a=Ou(t);return{stadiumLookup:e,teamLookup:n,scheduleLookup:r,scheduleRange:a}}function $u(){const i=new Map;return(ts??[]).forEach(t=>{t!=null&&t.stadium_id&&i.set(t.stadium_id,t)}),i}function zu(){const i=new Map;return(ns??[]).forEach(t=>{t!=null&&t.team&&i.set(t.team.toUpperCase(),t)}),i}function Bu(i=[]){const t=new Map;return(i??[]).forEach(e=>{e!=null&&e.game_id&&!t.has(e.game_id)&&t.set(e.game_id,e)}),t}function Uu(i){const t=typeof i=="string"?i.toUpperCase():"";return t?(ts??[]).find(e=>Array.isArray(e==null?void 0:e.home_team)?e.home_team.some(n=>String(n).toUpperCase()===t):!1)??null:null}function Hu(i,t){const e=t.get(String(i).toUpperCase());return(e==null?void 0:e.team_name)??i}const Me={dateStart:null,dateEnd:null,requiredStartDayOfWeek:null,maxTourLengthDays:14,allowFlights:!1,expertMode:!1,maxDriveOneDayGap:5,maxDriveTwoDayGap:10,maxDriveThreeDayGap:15,maxDriveFourDayGap:18,maxRoutesToFind:20,oneDayGap:12,twoDayGap:36,threeDayGap:12+24*2,fourDayGap:12+24*3,minTimeToNextGameHoursFlight:36,maxTimeToNextGameHours:8*24+16,specialGameDayPenalty:.75,revisitMultiplierFloor:.1,travelMultiplierFloor:.1,travelMultiplierCeilingFlight:.2,maxSearchMinutesPerStartGame:1,estimatedMaxGamesPerWeek:2.4,estimatedMinGamesPerWeek:1.4,beamWidthPerStartGame:20,cacheBucketHours:36,enableRouteCache:!0,shortWindowDays:21},rs={ATL97:1,BAL00:1,BOS00:1,BUF00:1,CAR00:1,CHI98:1,CIN00:1,CLE00:1,DAL00:1,DEN00:1,DET00:1,GNB00:1,HOU00:1,IND00:1,JAX00:1,KAN00:1,LAX01:1,MIA00:1,MIN01:1,NAS00:1,NOR00:1,NYC01:1,PHI00:1,PHO00:1,PIT00:1,SEA00:1,SFO01:1,TAM00:1,VEG00:1,WAS00:1},as={ARI:1,ATL:1,BAL:1,BUF:1,CAR:1,CHI:1,CIN:1,CLE:1,DAL:1,DEN:1,DET:1,GB:1,HOU:1,IND:1,JAX:1,KC:1,LA:1,LAC:1,LV:1,MIA:1,MIN:1,NE:1,NO:1,NYG:1,NYJ:1,PHI:1,PIT:1,SEA:1,SF:1,TB:1,TEN:1,WAS:1},Rt={restrictions:"pro-tour-restrictions",teamWeights:"pro-tour-team-weights",stadiumWeights:"pro-tour-stadium-weights",favorites:"pro-tour-favorites"},Wu=/^\d{4}-\d{2}-\d{2}$/,fn=[{value:"Any day",labelKey:"option.startDay.any"},{value:"Sunday",labelKey:"option.startDay.sunday"},{value:"Monday",labelKey:"option.startDay.monday"},{value:"Thursday",labelKey:"option.startDay.thursday"}];function Hi(i){return Number.isFinite(i)?Rr(new Date(i)):""}function Mt(i){if(!i)return null;if(i instanceof Date)return i.getTime();if(typeof i=="string"&&Wu.test(i)){const e=is(i);return Number.isFinite(e)?e:null}const t=Date.parse(i);return Number.isFinite(t)?t:null}function yi(i,t,e){if(!Number.isFinite(i))return i;const n=Number.isFinite(t)?t:i,r=Number.isFinite(e)?e:i;return Math.min(Math.max(i,n),r)}const Wa={en:"en-US",de:"de-DE"},ju={weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"},Vu={weekday:"short",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"};function Ku(i){return typeof i!="string"?"en":i.toLowerCase().startsWith("de")?"de":"en"}function Yu(i,t,e={}){if(!(i instanceof Date)||Number.isNaN(i.getTime()))return"";const n=Ku(t),r=n==="de"?Wa.de:Wa.en,o={...n==="de"?Vu:ju};e.timeZone&&typeof e.timeZone=="string"&&(o.timeZone=e.timeZone);try{return new Intl.DateTimeFormat(r,o).format(i)}catch{return""}}function os(i,t){const e=(i==null?void 0:i.gamedateTimestamp)??(i==null?void 0:i.gamedate);if(!e)return L("label.unknown");const n=new Date(e);if(Number.isNaN(n.getTime()))return String(e);const r=i!=null&&i.stadium_id?t.get(i.stadium_id):null,a=r==null?void 0:r.timezone,o=r==null?void 0:r.timezone_label,s=ht();let l=Yu(n,s,{timeZone:a});return l||(l=n.toISOString()),o?`${l} ${o}`:l}let vt=null,ss=null;function qu(i){ss=i;const t=tc(Me,i);return vt={teamWeights:ja(as,Rt.teamWeights),stadiumWeights:ja(rs,Rt.stadiumWeights),restrictions:t,isSearching:!1,isExpertMode:!!(t!=null&&t.expertMode)},vt}function ft(){if(!vt)throw new Error("Application state is not initialized.");return vt}function Wi(){return ft().teamWeights}function Zu(i){return ft().teamWeights=Bt(i),vt.teamWeights}function ji(){return ft().stadiumWeights}function Ju(i){return ft().stadiumWeights=Bt(i),vt.stadiumWeights}function Be(){return ft().restrictions}function Xu(i){const t=ss;if(!t)return ft().restrictions=i?JSON.parse(JSON.stringify(i)):{},vt.restrictions;const e=i?JSON.parse(JSON.stringify(i)):Me;return ft().restrictions=oa(e,t),vt.restrictions}function ls(){return!!ft().isSearching}function Qu(i){return ft().isSearching=!!i,vt.isSearching}function Xn(){return!!ft().isExpertMode}function ec(i){return ft().isExpertMode=!!i,vt.isExpertMode}function Bt(i={}){return Object.fromEntries(Object.entries(i).map(([t,e])=>[t,Number.isFinite(Number(e))?Number(e):1]))}function tc(i={},t){const e=nc(),n=e&&typeof e=="object"?{...i,...e}:i,r=oa(n,t);return e&&hn(r),r}function oa(i,t){const e=JSON.parse(JSON.stringify(i??{})),n=Mt(e==null?void 0:e.dateStart),r=Mt(e==null?void 0:e.dateEnd);return e.dateStart=Hi(Number.isFinite(n)?n:t.startMs),e.dateEnd=Hi(Number.isFinite(r)?r:t.endMs),(!Number.isFinite(e.shortWindowDays)||e.shortWindowDays<=0)&&(e.shortWindowDays=Me.shortWindowDays),typeof e.expertMode=="string"?e.expertMode=e.expertMode.toLowerCase()==="true":e.expertMode=!!e.expertMode,e}function Pr(i,t,e,n,r){const a=r.startMs,o=r.endMs;let s=Mt(e),l=Mt(n);if(i==="dateStart")s=yi(Mt(t)??s??a,a,o),(!Number.isFinite(l)||s>l)&&(l=s);else{const u=Mt(t);Number.isFinite(u)?l=u+24*60*60*1e3-1:l=yi(l??o,a,o),(!Number.isFinite(s)||l<s)&&(s=l)}return s=yi(Number.isFinite(s)?s:a,a,o),l=yi(Number.isFinite(l)?l:o,a,o),{dateStart:Hi(s),dateEnd:Hi(l)}}function hn(i){ds(Rt.restrictions,i)}function us({label:i=L("button.restoreDefaults"),getDefaults:t,applyDefaults:e}){const n=document.createElement("button");return n.type="button",n.textContent=i,n.classList.add("btn","btn-text","btn-muted","btn-restore"),n.addEventListener("click",()=>{const r=t==null?void 0:t();r!==void 0&&(e==null||e(r))}),n}function ja(i={},t){const e=cs(t),n=e&&typeof e=="object"?{...i,...e}:i,r=Bt(n);return e&&ds(t,r),r}function nc(){const i=cs(Rt.restrictions);return i&&typeof i=="object"?i:null}function cs(i){if(typeof window>"u"||!window.localStorage)return null;try{const t=window.localStorage.getItem(i);return t?JSON.parse(t):null}catch{return null}}function ds(i,t){if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(i,JSON.stringify(t))}catch{}}var hr=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],gn={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(i){return typeof console<"u"&&console.warn(i)},getWeek:function(i){var t=new Date(i.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Qn={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(i){var t=i%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},We=function(i,t){return t===void 0&&(t=2),("000"+i).slice(t*-1)},Qe=function(i){return i===!0?1:0};function Va(i,t){var e;return function(){var n=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return i.apply(n,r)},t)}}var fr=function(i){return i instanceof Array?i:[i]};function ze(i,t,e){if(e===!0)return i.classList.add(t);i.classList.remove(t)}function le(i,t,e){var n=window.document.createElement(i);return t=t||"",e=e||"",n.className=t,e!==void 0&&(n.textContent=e),n}function wi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function hs(i,t){if(t(i))return i;if(i.parentNode)return hs(i.parentNode,t)}function _i(i,t){var e=le("div","numInputWrapper"),n=le("input","numInput "+i),r=le("span","arrowUp"),a=le("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?n.type="number":(n.type="text",n.pattern="\\d*"),t!==void 0)for(var o in t)n.setAttribute(o,t[o]);return e.appendChild(n),e.appendChild(r),e.appendChild(a),e}function je(i){try{if(typeof i.composedPath=="function"){var t=i.composedPath();return t[0]}return i.target}catch{return i.target}}var gr=function(){},Vi=function(i,t,e){return e.months[t?"shorthand":"longhand"][i]},ic={D:gr,F:function(i,t,e){i.setMonth(e.months.longhand.indexOf(t))},G:function(i,t){i.setHours((i.getHours()>=12?12:0)+parseFloat(t))},H:function(i,t){i.setHours(parseFloat(t))},J:function(i,t){i.setDate(parseFloat(t))},K:function(i,t,e){i.setHours(i.getHours()%12+12*Qe(new RegExp(e.amPM[1],"i").test(t)))},M:function(i,t,e){i.setMonth(e.months.shorthand.indexOf(t))},S:function(i,t){i.setSeconds(parseFloat(t))},U:function(i,t){return new Date(parseFloat(t)*1e3)},W:function(i,t,e){var n=parseInt(t),r=new Date(i.getFullYear(),0,2+(n-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(i,t){i.setFullYear(parseFloat(t))},Z:function(i,t){return new Date(t)},d:function(i,t){i.setDate(parseFloat(t))},h:function(i,t){i.setHours((i.getHours()>=12?12:0)+parseFloat(t))},i:function(i,t){i.setMinutes(parseFloat(t))},j:function(i,t){i.setDate(parseFloat(t))},l:gr,m:function(i,t){i.setMonth(parseFloat(t)-1)},n:function(i,t){i.setMonth(parseFloat(t)-1)},s:function(i,t){i.setSeconds(parseFloat(t))},u:function(i,t){return new Date(parseFloat(t))},w:gr,y:function(i,t){i.setFullYear(2e3+parseFloat(t))}},Gt={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Hn={Z:function(i){return i.toISOString()},D:function(i,t,e){return t.weekdays.shorthand[Hn.w(i,t,e)]},F:function(i,t,e){return Vi(Hn.n(i,t,e)-1,!1,t)},G:function(i,t,e){return We(Hn.h(i,t,e))},H:function(i){return We(i.getHours())},J:function(i,t){return t.ordinal!==void 0?i.getDate()+t.ordinal(i.getDate()):i.getDate()},K:function(i,t){return t.amPM[Qe(i.getHours()>11)]},M:function(i,t){return Vi(i.getMonth(),!0,t)},S:function(i){return We(i.getSeconds())},U:function(i){return i.getTime()/1e3},W:function(i,t,e){return e.getWeek(i)},Y:function(i){return We(i.getFullYear(),4)},d:function(i){return We(i.getDate())},h:function(i){return i.getHours()%12?i.getHours()%12:12},i:function(i){return We(i.getMinutes())},j:function(i){return i.getDate()},l:function(i,t){return t.weekdays.longhand[i.getDay()]},m:function(i){return We(i.getMonth()+1)},n:function(i){return i.getMonth()+1},s:function(i){return i.getSeconds()},u:function(i){return i.getTime()},w:function(i){return i.getDay()},y:function(i){return String(i.getFullYear()).substring(2)}},fs=function(i){var t=i.config,e=t===void 0?gn:t,n=i.l10n,r=n===void 0?Qn:n,a=i.isMobile,o=a===void 0?!1:a;return function(s,l,u){var c=u||r;return e.formatDate!==void 0&&!o?e.formatDate(s,l,c):l.split("").map(function(d,h,f){return Hn[d]&&f[h-1]!=="\\"?Hn[d](s,c,e):d!=="\\"?d:""}).join("")}},Ir=function(i){var t=i.config,e=t===void 0?gn:t,n=i.l10n,r=n===void 0?Qn:n;return function(a,o,s,l){if(!(a!==0&&!a)){var u=l||r,c,d=a;if(a instanceof Date)c=new Date(a.getTime());else if(typeof a!="string"&&a.toFixed!==void 0)c=new Date(a);else if(typeof a=="string"){var h=o||(e||gn).dateFormat,f=String(a).trim();if(f==="today")c=new Date,s=!0;else if(e&&e.parseDate)c=e.parseDate(a,h);else if(/Z$/.test(f)||/GMT$/.test(f))c=new Date(a);else{for(var b=void 0,p=[],w=0,E=0,y="";w<h.length;w++){var v=h[w],_=v==="\\",D=h[w-1]==="\\"||_;if(Gt[v]&&!D){y+=Gt[v];var k=new RegExp(y).exec(a);k&&(b=!0)&&p[v!=="Y"?"push":"unshift"]({fn:ic[v],val:k[++E]})}else _||(y+=".")}c=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),p.forEach(function(S){var C=S.fn,M=S.val;return c=C(c,M,u)||c}),c=b?c:void 0}}if(!(c instanceof Date&&!isNaN(c.getTime()))){e.errorHandler(new Error("Invalid date provided: "+d));return}return s===!0&&c.setHours(0,0,0,0),c}}};function Ve(i,t,e){return e===void 0&&(e=!0),e!==!1?new Date(i.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):i.getTime()-t.getTime()}var rc=function(i,t,e){return i>Math.min(t,e)&&i<Math.max(t,e)},mr=function(i,t,e){return i*3600+t*60+e},ac=function(i){var t=Math.floor(i/3600),e=(i-t*3600)/60;return[t,e,i-t*3600-e*60]},oc={DAY:864e5};function pr(i){var t=i.defaultHour,e=i.defaultMinute,n=i.defaultSeconds;if(i.minDate!==void 0){var r=i.minDate.getHours(),a=i.minDate.getMinutes(),o=i.minDate.getSeconds();t<r&&(t=r),t===r&&e<a&&(e=a),t===r&&e===a&&n<o&&(n=i.minDate.getSeconds())}if(i.maxDate!==void 0){var s=i.maxDate.getHours(),l=i.maxDate.getMinutes();t=Math.min(t,s),t===s&&(e=Math.min(l,e)),t===s&&e===l&&(n=i.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:n}}typeof Object.assign!="function"&&(Object.assign=function(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!i)throw TypeError("Cannot convert undefined or null to object");for(var n=function(s){s&&Object.keys(s).forEach(function(l){return i[l]=s[l]})},r=0,a=t;r<a.length;r++){var o=a[r];n(o)}return i});var Oe=function(){return Oe=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},Oe.apply(this,arguments)},Ka=function(){for(var i=0,t=0,e=arguments.length;t<e;t++)i+=arguments[t].length;for(var n=Array(i),r=0,t=0;t<e;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,r++)n[r]=a[o];return n},sc=300;function lc(i,t){var e={config:Oe(Oe({},gn),_e.defaultConfig),l10n:Qn};e.parseDate=Ir({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=p,e._setHoursFromDate=h,e._positionCalendar=rt,e.changeMonth=ue,e.changeYear=Ie,e.clear=ye,e.close=me,e.onMouseOver=Ye,e._createElement=le,e.createDay=k,e.destroy=Ce,e.isEnabled=ge,e.jumpToDate=y,e.updateValue=Ue,e.open=ai,e.redraw=li,e.set=at,e.setDate=Xt,e.toggle=Qt;function n(){e.utils={getDaysInMonth:function(g,m){return g===void 0&&(g=e.currentMonth),m===void 0&&(m=e.currentYear),g===1&&(m%4===0&&m%100!==0||m%400===0)?29:e.l10n.daysInMonth[g]}}}function r(){e.element=e.input=i,e.isOpen=!1,oi(),Sn(),ir(),ci(),n(),e.isMobile||D(),E(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&h(e.config.noCalendar?e.latestSelectedDateObj:void 0),Ue(!1)),s();var g=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&g&&rt(),fe("onReady")}function a(){var g;return((g=e.calendarContainer)===null||g===void 0?void 0:g.getRootNode()).activeElement||document.activeElement}function o(g){return g.bind(e)}function s(){var g=e.config;g.weekNumbers===!1&&g.showMonths===1||g.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var m=(e.days.offsetWidth+1)*g.showMonths;e.daysContainer.style.width=m+"px",e.calendarContainer.style.width=m+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function l(g){if(e.selectedDates.length===0){var m=e.config.minDate===void 0||Ve(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),x=pr(e.config);m.setHours(x.hours,x.minutes,x.seconds,m.getMilliseconds()),e.selectedDates=[m],e.latestSelectedDateObj=m}g!==void 0&&g.type!=="blur"&&ar(g);var T=e._input.value;d(),Ue(),e._input.value!==T&&e._debouncedChange()}function u(g,m){return g%12+12*Qe(m===e.l10n.amPM[1])}function c(g){switch(g%24){case 0:case 12:return 12;default:return g%12}}function d(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var g=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,m=(parseInt(e.minuteElement.value,10)||0)%60,x=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(g=u(g,e.amPM.textContent));var T=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&Ve(e.latestSelectedDateObj,e.config.minDate,!0)===0,$=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&Ve(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var H=mr(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),z=mr(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),N=mr(g,m,x);if(N>z&&N<H){var U=ac(H);g=U[0],m=U[1],x=U[2]}}else{if($){var I=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;g=Math.min(g,I.getHours()),g===I.getHours()&&(m=Math.min(m,I.getMinutes())),m===I.getMinutes()&&(x=Math.min(x,I.getSeconds()))}if(T){var O=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;g=Math.max(g,O.getHours()),g===O.getHours()&&m<O.getMinutes()&&(m=O.getMinutes()),m===O.getMinutes()&&(x=Math.max(x,O.getSeconds()))}}f(g,m,x)}}function h(g){var m=g||e.latestSelectedDateObj;m&&m instanceof Date&&f(m.getHours(),m.getMinutes(),m.getSeconds())}function f(g,m,x){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(g%24,m,x||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=We(e.config.time_24hr?g:(12+g)%12+12*Qe(g%12===0)),e.minuteElement.value=We(m),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[Qe(g>=12)]),e.secondElement!==void 0&&(e.secondElement.value=We(x)))}function b(g){var m=je(g),x=parseInt(m.value)+(g.delta||0);(x/1e3>1||g.key==="Enter"&&!/[^\d]/.test(x.toString()))&&Ie(x)}function p(g,m,x,T){if(m instanceof Array)return m.forEach(function($){return p(g,$,x,T)});if(g instanceof Array)return g.forEach(function($){return p($,m,x,T)});g.addEventListener(m,x,T),e._handlers.push({remove:function(){return g.removeEventListener(m,x,T)}})}function w(){fe("onChange")}function E(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(x){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+x+"]"),function(T){return p(T,"click",e[x])})}),e.isMobile){wt();return}var g=Va(xn,50);if(e._debouncedChange=Va(w,sc),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&p(e.daysContainer,"mouseover",function(x){e.config.mode==="range"&&Ye(je(x))}),p(e._input,"keydown",Ct),e.calendarContainer!==void 0&&p(e.calendarContainer,"keydown",Ct),!e.config.inline&&!e.config.static&&p(window,"resize",g),window.ontouchstart!==void 0?p(window.document,"touchstart",Pe):p(window.document,"mousedown",Pe),p(window.document,"focus",Pe,{capture:!0}),e.config.clickOpens===!0&&(p(e._input,"focus",e.open),p(e._input,"click",e.open)),e.daysContainer!==void 0&&(p(e.monthNav,"click",rr),p(e.monthNav,["keyup","increment"],b),p(e.daysContainer,"click",Cn)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var m=function(x){return je(x).select()};p(e.timeContainer,["increment"],l),p(e.timeContainer,"blur",l,{capture:!0}),p(e.timeContainer,"click",v),p([e.hourElement,e.minuteElement],["focus","click"],m),e.secondElement!==void 0&&p(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&p(e.amPM,"click",function(x){l(x)})}e.config.allowInput&&p(e._input,"blur",yt)}function y(g,m){var x=g!==void 0?e.parseDate(g):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),T=e.currentYear,$=e.currentMonth;try{x!==void 0&&(e.currentYear=x.getFullYear(),e.currentMonth=x.getMonth())}catch(H){H.message="Invalid date supplied: "+x,e.config.errorHandler(H)}m&&e.currentYear!==T&&(fe("onYearChange"),G()),m&&(e.currentYear!==T||e.currentMonth!==$)&&fe("onMonthChange"),e.redraw()}function v(g){var m=je(g);~m.className.indexOf("arrow")&&_(g,m.classList.contains("arrowUp")?1:-1)}function _(g,m,x){var T=g&&je(g),$=x||T&&T.parentNode&&T.parentNode.firstChild,H=en("increment");H.delta=m,$&&$.dispatchEvent(H)}function D(){var g=window.document.createDocumentFragment();if(e.calendarContainer=le("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(g.appendChild(Z()),e.innerContainer=le("div","flatpickr-innerContainer"),e.config.weekNumbers){var m=ne(),x=m.weekWrapper,T=m.weekNumbers;e.innerContainer.appendChild(x),e.weekNumbers=T,e.weekWrapper=x}e.rContainer=le("div","flatpickr-rContainer"),e.rContainer.appendChild(j()),e.daysContainer||(e.daysContainer=le("div","flatpickr-days"),e.daysContainer.tabIndex=-1),A(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),g.appendChild(e.innerContainer)}e.config.enableTime&&g.appendChild(Q()),ze(e.calendarContainer,"rangeMode",e.config.mode==="range"),ze(e.calendarContainer,"animate",e.config.animate===!0),ze(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(g);var $=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!$&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var H=le("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(H,e.element),H.appendChild(e.element),e.altInput&&H.appendChild(e.altInput),H.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function k(g,m,x,T){var $=ge(m,!0),H=le("span",g,m.getDate().toString());return H.dateObj=m,H.$i=T,H.setAttribute("aria-label",e.formatDate(m,e.config.ariaDateFormat)),g.indexOf("hidden")===-1&&Ve(m,e.now)===0&&(e.todayDateElem=H,H.classList.add("today"),H.setAttribute("aria-current","date")),$?(H.tabIndex=-1,Tn(m)&&(H.classList.add("selected"),e.selectedDateElem=H,e.config.mode==="range"&&(ze(H,"startRange",e.selectedDates[0]&&Ve(m,e.selectedDates[0],!0)===0),ze(H,"endRange",e.selectedDates[1]&&Ve(m,e.selectedDates[1],!0)===0),g==="nextMonthDay"&&H.classList.add("inRange")))):H.classList.add("flatpickr-disabled"),e.config.mode==="range"&&hi(m)&&!Tn(m)&&H.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&g!=="prevMonthDay"&&T%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(m)+"</span>"),fe("onDayCreate",H),H}function S(g){g.focus(),e.config.mode==="range"&&Ye(g)}function C(g){for(var m=g>0?0:e.config.showMonths-1,x=g>0?e.config.showMonths:-1,T=m;T!=x;T+=g)for(var $=e.daysContainer.children[T],H=g>0?0:$.children.length-1,z=g>0?$.children.length:-1,N=H;N!=z;N+=g){var U=$.children[N];if(U.className.indexOf("hidden")===-1&&ge(U.dateObj))return U}}function M(g,m){for(var x=g.className.indexOf("Month")===-1?g.dateObj.getMonth():e.currentMonth,T=m>0?e.config.showMonths:-1,$=m>0?1:-1,H=x-e.currentMonth;H!=T;H+=$)for(var z=e.daysContainer.children[H],N=x-e.currentMonth===H?g.$i+m:m<0?z.children.length-1:0,U=z.children.length,I=N;I>=0&&I<U&&I!=(m>0?U:-1);I+=$){var O=z.children[I];if(O.className.indexOf("hidden")===-1&&ge(O.dateObj)&&Math.abs(g.$i-I)>=Math.abs(m))return S(O)}e.changeMonth($),F(C($),0)}function F(g,m){var x=a(),T=Ne(x||document.body),$=g!==void 0?g:T?x:e.selectedDateElem!==void 0&&Ne(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Ne(e.todayDateElem)?e.todayDateElem:C(m>0?1:-1);$===void 0?e._input.focus():T?M($,m):S($)}function P(g,m){for(var x=(new Date(g,m,1).getDay()-e.l10n.firstDayOfWeek+7)%7,T=e.utils.getDaysInMonth((m-1+12)%12,g),$=e.utils.getDaysInMonth(m,g),H=window.document.createDocumentFragment(),z=e.config.showMonths>1,N=z?"prevMonthDay hidden":"prevMonthDay",U=z?"nextMonthDay hidden":"nextMonthDay",I=T+1-x,O=0;I<=T;I++,O++)H.appendChild(k("flatpickr-day "+N,new Date(g,m-1,I),I,O));for(I=1;I<=$;I++,O++)H.appendChild(k("flatpickr-day",new Date(g,m,I),I,O));for(var K=$+1;K<=42-x&&(e.config.showMonths===1||O%7!==0);K++,O++)H.appendChild(k("flatpickr-day "+U,new Date(g,m+1,K%$),K,O));var re=le("div","dayContainer");return re.appendChild(H),re}function A(){if(e.daysContainer!==void 0){wi(e.daysContainer),e.weekNumbers&&wi(e.weekNumbers);for(var g=document.createDocumentFragment(),m=0;m<e.config.showMonths;m++){var x=new Date(e.currentYear,e.currentMonth,1);x.setMonth(e.currentMonth+m),g.appendChild(P(x.getFullYear(),x.getMonth()))}e.daysContainer.appendChild(g),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Ye()}}function G(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var g=function(T){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&T<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&T>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var m=0;m<12;m++)if(g(m)){var x=le("option","flatpickr-monthDropdown-month");x.value=new Date(e.currentYear,m).getMonth().toString(),x.textContent=Vi(m,e.config.shorthandCurrentMonth,e.l10n),x.tabIndex=-1,e.currentMonth===m&&(x.selected=!0),e.monthsDropdownContainer.appendChild(x)}}}function W(){var g=le("div","flatpickr-month"),m=window.document.createDocumentFragment(),x;e.config.showMonths>1||e.config.monthSelectorType==="static"?x=le("span","cur-month"):(e.monthsDropdownContainer=le("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),p(e.monthsDropdownContainer,"change",function(z){var N=je(z),U=parseInt(N.value,10);e.changeMonth(U-e.currentMonth),fe("onMonthChange")}),G(),x=e.monthsDropdownContainer);var T=_i("cur-year",{tabindex:"-1"}),$=T.getElementsByTagName("input")[0];$.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&$.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&($.setAttribute("max",e.config.maxDate.getFullYear().toString()),$.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var H=le("div","flatpickr-current-month");return H.appendChild(x),H.appendChild(T),m.appendChild(H),g.appendChild(m),{container:g,yearElement:$,monthElement:x}}function Y(){wi(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var g=e.config.showMonths;g--;){var m=W();e.yearElements.push(m.yearElement),e.monthElements.push(m.monthElement),e.monthNav.appendChild(m.container)}e.monthNav.appendChild(e.nextMonthNav)}function Z(){return e.monthNav=le("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=le("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=le("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Y(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(g){e.__hidePrevMonthArrow!==g&&(ze(e.prevMonthNav,"flatpickr-disabled",g),e.__hidePrevMonthArrow=g)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(g){e.__hideNextMonthArrow!==g&&(ze(e.nextMonthNav,"flatpickr-disabled",g),e.__hideNextMonthArrow=g)}}),e.currentYearElement=e.yearElements[0],_t(),e.monthNav}function Q(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var g=pr(e.config);e.timeContainer=le("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var m=le("span","flatpickr-time-separator",":"),x=_i("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=x.getElementsByTagName("input")[0];var T=_i("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=T.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=We(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?g.hours:c(g.hours)),e.minuteElement.value=We(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():g.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(x),e.timeContainer.appendChild(m),e.timeContainer.appendChild(T),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var $=_i("flatpickr-second");e.secondElement=$.getElementsByTagName("input")[0],e.secondElement.value=We(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():g.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(le("span","flatpickr-time-separator",":")),e.timeContainer.appendChild($)}return e.config.time_24hr||(e.amPM=le("span","flatpickr-am-pm",e.l10n.amPM[Qe((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function j(){e.weekdayContainer?wi(e.weekdayContainer):e.weekdayContainer=le("div","flatpickr-weekdays");for(var g=e.config.showMonths;g--;){var m=le("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(m)}return ee(),e.weekdayContainer}function ee(){if(e.weekdayContainer){var g=e.l10n.firstDayOfWeek,m=Ka(e.l10n.weekdays.shorthand);g>0&&g<m.length&&(m=Ka(m.splice(g,m.length),m.splice(0,g)));for(var x=e.config.showMonths;x--;)e.weekdayContainer.children[x].innerHTML=`
      <span class='flatpickr-weekday'>
        `+m.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function ne(){e.calendarContainer.classList.add("hasWeeks");var g=le("div","flatpickr-weekwrapper");g.appendChild(le("span","flatpickr-weekday",e.l10n.weekAbbreviation));var m=le("div","flatpickr-weeks");return g.appendChild(m),{weekWrapper:g,weekNumbers:m}}function ue(g,m){m===void 0&&(m=!0);var x=m?g:g-e.currentMonth;x<0&&e._hidePrevMonthArrow===!0||x>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=x,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,fe("onYearChange"),G()),A(),fe("onMonthChange"),_t())}function ye(g,m){if(g===void 0&&(g=!0),m===void 0&&(m=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,m===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var x=pr(e.config),T=x.hours,$=x.minutes,H=x.seconds;f(T,$,H)}e.redraw(),g&&fe("onChange")}function me(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),fe("onClose")}function Ce(){e.config!==void 0&&fe("onDestroy");for(var g=e._handlers.length;g--;)e._handlers[g].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var m=e.calendarContainer.parentNode;if(m.lastChild&&m.removeChild(m.lastChild),m.parentNode){for(;m.firstChild;)m.parentNode.insertBefore(m.firstChild,m);m.parentNode.removeChild(m)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(x){try{delete e[x]}catch{}})}function Se(g){return e.calendarContainer.contains(g)}function Pe(g){if(e.isOpen&&!e.config.inline){var m=je(g),x=Se(m),T=m===e.input||m===e.altInput||e.element.contains(m)||g.path&&g.path.indexOf&&(~g.path.indexOf(e.input)||~g.path.indexOf(e.altInput)),$=!T&&!x&&!Se(g.relatedTarget),H=!e.config.ignoredFocusElements.some(function(z){return z.contains(m)});$&&H&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&l(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function Ie(g){if(!(!g||e.config.minDate&&g<e.config.minDate.getFullYear()||e.config.maxDate&&g>e.config.maxDate.getFullYear())){var m=g,x=e.currentYear!==m;e.currentYear=m||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),x&&(e.redraw(),fe("onYearChange"),G())}}function ge(g,m){var x;m===void 0&&(m=!0);var T=e.parseDate(g,void 0,m);if(e.config.minDate&&T&&Ve(T,e.config.minDate,m!==void 0?m:!e.minDateHasTime)<0||e.config.maxDate&&T&&Ve(T,e.config.maxDate,m!==void 0?m:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(T===void 0)return!1;for(var $=!!e.config.enable,H=(x=e.config.enable)!==null&&x!==void 0?x:e.config.disable,z=0,N=void 0;z<H.length;z++){if(N=H[z],typeof N=="function"&&N(T))return $;if(N instanceof Date&&T!==void 0&&N.getTime()===T.getTime())return $;if(typeof N=="string"){var U=e.parseDate(N,void 0,!0);return U&&U.getTime()===T.getTime()?$:!$}else if(typeof N=="object"&&T!==void 0&&N.from&&N.to&&T.getTime()>=N.from.getTime()&&T.getTime()<=N.to.getTime())return $}return!$}function Ne(g){return e.daysContainer!==void 0?g.className.indexOf("hidden")===-1&&g.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(g):!1}function yt(g){var m=g.target===e._input,x=e._input.value.trimEnd()!==It();m&&x&&!(g.relatedTarget&&Se(g.relatedTarget))&&e.setDate(e._input.value,!0,g.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Ct(g){var m=je(g),x=e.config.wrap?i.contains(m):m===e._input,T=e.config.allowInput,$=e.isOpen&&(!T||!x),H=e.config.inline&&x&&!T;if(g.keyCode===13&&x){if(T)return e.setDate(e._input.value,!0,m===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),m.blur();e.open()}else if(Se(m)||$||H){var z=!!e.timeContainer&&e.timeContainer.contains(m);switch(g.keyCode){case 13:z?(g.preventDefault(),l(),En()):Cn(g);break;case 27:g.preventDefault(),En();break;case 8:case 46:x&&!e.config.allowInput&&(g.preventDefault(),e.clear());break;case 37:case 39:if(!z&&!x){g.preventDefault();var N=a();if(e.daysContainer!==void 0&&(T===!1||N&&Ne(N))){var U=g.keyCode===39?1:-1;g.ctrlKey?(g.stopPropagation(),ue(U),F(C(1),0)):F(void 0,U)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:g.preventDefault();var I=g.keyCode===40?1:-1;e.daysContainer&&m.$i!==void 0||m===e.input||m===e.altInput?g.ctrlKey?(g.stopPropagation(),Ie(e.currentYear-I),F(C(1),0)):z||F(void 0,I*7):m===e.currentYearElement?Ie(e.currentYear-I):e.config.enableTime&&(!z&&e.hourElement&&e.hourElement.focus(),l(g),e._debouncedChange());break;case 9:if(z){var O=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(te){return te}),K=O.indexOf(m);if(K!==-1){var re=O[K+(g.shiftKey?-1:1)];g.preventDefault(),(re||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(m)&&g.shiftKey&&(g.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&m===e.amPM)switch(g.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],d(),Ue();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],d(),Ue();break}(x||Se(m))&&fe("onKeyDown",g)}function Ye(g,m){if(m===void 0&&(m="flatpickr-day"),!(e.selectedDates.length!==1||g&&(!g.classList.contains(m)||g.classList.contains("flatpickr-disabled")))){for(var x=g?g.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),T=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),$=Math.min(x,e.selectedDates[0].getTime()),H=Math.max(x,e.selectedDates[0].getTime()),z=!1,N=0,U=0,I=$;I<H;I+=oc.DAY)ge(new Date(I),!0)||(z=z||I>$&&I<H,I<T&&(!N||I>N)?N=I:I>T&&(!U||I<U)&&(U=I));var O=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+m));O.forEach(function(K){var re=K.dateObj,te=re.getTime(),oe=N>0&&te<N||U>0&&te>U;if(oe){K.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(ie){K.classList.remove(ie)});return}else if(z&&!oe)return;["startRange","inRange","endRange","notAllowed"].forEach(function(ie){K.classList.remove(ie)}),g!==void 0&&(g.classList.add(x<=e.selectedDates[0].getTime()?"startRange":"endRange"),T<x&&te===T?K.classList.add("startRange"):T>x&&te===T&&K.classList.add("endRange"),te>=N&&(U===0||te<=U)&&rc(te,T,x)&&K.classList.add("inRange"))})}}function xn(){e.isOpen&&!e.config.static&&!e.config.inline&&rt()}function ai(g,m){if(m===void 0&&(m=e._positionElement),e.isMobile===!0){if(g){g.preventDefault();var x=je(g);x&&x.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),fe("onOpen");return}else if(e._input.disabled||e.config.inline)return;var T=e.isOpen;e.isOpen=!0,T||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),fe("onOpen"),rt(m)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(g===void 0||!e.timeContainer.contains(g.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function Yt(g){return function(m){var x=e.config["_"+g+"Date"]=e.parseDate(m,e.config.dateFormat),T=e.config["_"+(g==="min"?"max":"min")+"Date"];x!==void 0&&(e[g==="min"?"minDateHasTime":"maxDateHasTime"]=x.getHours()>0||x.getMinutes()>0||x.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function($){return ge($)}),!e.selectedDates.length&&g==="min"&&h(x),Ue()),e.daysContainer&&(li(),x!==void 0?e.currentYearElement[g]=x.getFullYear().toString():e.currentYearElement.removeAttribute(g),e.currentYearElement.disabled=!!T&&x!==void 0&&T.getFullYear()===x.getFullYear())}}function oi(){var g=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],m=Oe(Oe({},JSON.parse(JSON.stringify(i.dataset||{}))),t),x={};e.config.parseDate=m.parseDate,e.config.formatDate=m.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(O){e.config._enable=ui(O)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(O){e.config._disable=ui(O)}});var T=m.mode==="time";if(!m.dateFormat&&(m.enableTime||T)){var $=_e.defaultConfig.dateFormat||gn.dateFormat;x.dateFormat=m.noCalendar||T?"H:i"+(m.enableSeconds?":S":""):$+" H:i"+(m.enableSeconds?":S":"")}if(m.altInput&&(m.enableTime||T)&&!m.altFormat){var H=_e.defaultConfig.altFormat||gn.altFormat;x.altFormat=m.noCalendar||T?"h:i"+(m.enableSeconds?":S K":" K"):H+(" h:i"+(m.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:Yt("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:Yt("max")});var z=function(O){return function(K){e.config[O==="min"?"_minTime":"_maxTime"]=e.parseDate(K,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:z("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:z("max")}),m.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,x,m);for(var N=0;N<g.length;N++)e.config[g[N]]=e.config[g[N]]===!0||e.config[g[N]]==="true";hr.filter(function(O){return e.config[O]!==void 0}).forEach(function(O){e.config[O]=fr(e.config[O]||[]).map(o)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var N=0;N<e.config.plugins.length;N++){var U=e.config.plugins[N](e)||{};for(var I in U)hr.indexOf(I)>-1?e.config[I]=fr(U[I]).map(o).concat(e.config[I]):typeof m[I]>"u"&&(e.config[I]=U[I])}m.altInputClass||(e.config.altInputClass=qt().className+" "+e.config.altInputClass),fe("onParseConfig")}function qt(){return e.config.wrap?i.querySelector("[data-input]"):i}function Sn(){typeof e.config.locale!="object"&&typeof _e.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=Oe(Oe({},_e.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?_e.l10ns[e.config.locale]:void 0),Gt.D="("+e.l10n.weekdays.shorthand.join("|")+")",Gt.l="("+e.l10n.weekdays.longhand.join("|")+")",Gt.M="("+e.l10n.months.shorthand.join("|")+")",Gt.F="("+e.l10n.months.longhand.join("|")+")",Gt.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var g=Oe(Oe({},t),JSON.parse(JSON.stringify(i.dataset||{})));g.time_24hr===void 0&&_e.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=fs(e),e.parseDate=Ir({config:e.config,l10n:e.l10n})}function rt(g){if(typeof e.config.position=="function")return void e.config.position(e,g);if(e.calendarContainer!==void 0){fe("onPreCalendarPosition");var m=g||e._positionElement,x=Array.prototype.reduce.call(e.calendarContainer.children,function(tn,fi){return tn+fi.offsetHeight},0),T=e.calendarContainer.offsetWidth,$=e.config.position.split(" "),H=$[0],z=$.length>1?$[1]:null,N=m.getBoundingClientRect(),U=window.innerHeight-N.bottom,I=H==="above"||H!=="below"&&U<x&&N.top>x,O=window.pageYOffset+N.top+(I?-x-2:m.offsetHeight+2);if(ze(e.calendarContainer,"arrowTop",!I),ze(e.calendarContainer,"arrowBottom",I),!e.config.inline){var K=window.pageXOffset+N.left,re=!1,te=!1;z==="center"?(K-=(T-N.width)/2,re=!0):z==="right"&&(K-=T-N.width,te=!0),ze(e.calendarContainer,"arrowLeft",!re&&!te),ze(e.calendarContainer,"arrowCenter",re),ze(e.calendarContainer,"arrowRight",te);var oe=window.document.body.offsetWidth-(window.pageXOffset+N.right),ie=K+T>window.document.body.offsetWidth,pe=oe+T>window.document.body.offsetWidth;if(ze(e.calendarContainer,"rightMost",ie),!e.config.static)if(e.calendarContainer.style.top=O+"px",!ie)e.calendarContainer.style.left=K+"px",e.calendarContainer.style.right="auto";else if(!pe)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=oe+"px";else{var se=si();if(se===void 0)return;var be=window.document.body.offsetWidth,Le=Math.max(0,be/2-T/2),qe=".flatpickr-calendar.centerMost:before",ot=".flatpickr-calendar.centerMost:after",Tt=se.cssRules.length,Dt="{left:"+N.left+"px;right:auto;}";ze(e.calendarContainer,"rightMost",!1),ze(e.calendarContainer,"centerMost",!0),se.insertRule(qe+","+ot+Dt,Tt),e.calendarContainer.style.left=Le+"px",e.calendarContainer.style.right="auto"}}}}function si(){for(var g=null,m=0;m<document.styleSheets.length;m++){var x=document.styleSheets[m];if(x.cssRules){try{x.cssRules}catch{continue}g=x;break}}return g??Zt()}function Zt(){var g=document.createElement("style");return document.head.appendChild(g),g.sheet}function li(){e.config.noCalendar||e.isMobile||(G(),_t(),A())}function En(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function Cn(g){g.preventDefault(),g.stopPropagation();var m=function(O){return O.classList&&O.classList.contains("flatpickr-day")&&!O.classList.contains("flatpickr-disabled")&&!O.classList.contains("notAllowed")},x=hs(je(g),m);if(x!==void 0){var T=x,$=e.latestSelectedDateObj=new Date(T.dateObj.getTime()),H=($.getMonth()<e.currentMonth||$.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=T,e.config.mode==="single")e.selectedDates=[$];else if(e.config.mode==="multiple"){var z=Tn($);z?e.selectedDates.splice(parseInt(z),1):e.selectedDates.push($)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=$,e.selectedDates.push($),Ve($,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(O,K){return O.getTime()-K.getTime()}));if(d(),H){var N=e.currentYear!==$.getFullYear();e.currentYear=$.getFullYear(),e.currentMonth=$.getMonth(),N&&(fe("onYearChange"),G()),fe("onMonthChange")}if(_t(),A(),Ue(),!H&&e.config.mode!=="range"&&e.config.showMonths===1?S(T):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var U=e.config.mode==="single"&&!e.config.enableTime,I=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(U||I)&&En()}w()}}var Jt={locale:[Sn,ee],showMonths:[Y,s,j],minDate:[y],maxDate:[y],positionElement:[di],clickOpens:[function(){e.config.clickOpens===!0?(p(e._input,"focus",e.open),p(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function at(g,m){if(g!==null&&typeof g=="object"){Object.assign(e.config,g);for(var x in g)Jt[x]!==void 0&&Jt[x].forEach(function(T){return T()})}else e.config[g]=m,Jt[g]!==void 0?Jt[g].forEach(function(T){return T()}):hr.indexOf(g)>-1&&(e.config[g]=fr(m));e.redraw(),Ue(!0)}function Pt(g,m){var x=[];if(g instanceof Array)x=g.map(function(T){return e.parseDate(T,m)});else if(g instanceof Date||typeof g=="number")x=[e.parseDate(g,m)];else if(typeof g=="string")switch(e.config.mode){case"single":case"time":x=[e.parseDate(g,m)];break;case"multiple":x=g.split(e.config.conjunction).map(function(T){return e.parseDate(T,m)});break;case"range":x=g.split(e.l10n.rangeSeparator).map(function(T){return e.parseDate(T,m)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(g)));e.selectedDates=e.config.allowInvalidPreload?x:x.filter(function(T){return T instanceof Date&&ge(T,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(T,$){return T.getTime()-$.getTime()})}function Xt(g,m,x){if(m===void 0&&(m=!1),x===void 0&&(x=e.config.dateFormat),g!==0&&!g||g instanceof Array&&g.length===0)return e.clear(m);Pt(g,x),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),y(void 0,m),h(),e.selectedDates.length===0&&e.clear(!1),Ue(m),m&&fe("onChange")}function ui(g){return g.slice().map(function(m){return typeof m=="string"||typeof m=="number"||m instanceof Date?e.parseDate(m,void 0,!0):m&&typeof m=="object"&&m.from&&m.to?{from:e.parseDate(m.from,void 0),to:e.parseDate(m.to,void 0)}:m}).filter(function(m){return m})}function ci(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var g=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);g&&Pt(g,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function ir(){if(e.input=qt(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=le(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),di()}function di(){e._positionElement=e.config.positionElement||e._input}function wt(){var g=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=le("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=g,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=g==="datetime-local"?"Y-m-d\\TH:i:S":g==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}p(e.mobileInput,"change",function(m){e.setDate(je(m).value,!1,e.mobileFormatStr),fe("onChange"),fe("onClose")})}function Qt(g){if(e.isOpen===!0)return e.close();e.open(g)}function fe(g,m){if(e.config!==void 0){var x=e.config[g];if(x!==void 0&&x.length>0)for(var T=0;x[T]&&T<x.length;T++)x[T](e.selectedDates,e.input.value,e,m);g==="onChange"&&(e.input.dispatchEvent(en("change")),e.input.dispatchEvent(en("input")))}}function en(g){var m=document.createEvent("Event");return m.initEvent(g,!0,!0),m}function Tn(g){for(var m=0;m<e.selectedDates.length;m++){var x=e.selectedDates[m];if(x instanceof Date&&Ve(x,g)===0)return""+m}return!1}function hi(g){return e.config.mode!=="range"||e.selectedDates.length<2?!1:Ve(g,e.selectedDates[0])>=0&&Ve(g,e.selectedDates[1])<=0}function _t(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(g,m){var x=new Date(e.currentYear,e.currentMonth,1);x.setMonth(e.currentMonth+m),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[m].textContent=Vi(x.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=x.getMonth().toString(),g.value=x.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function It(g){var m=g||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(x){return e.formatDate(x,m)}).filter(function(x,T,$){return e.config.mode!=="range"||e.config.enableTime||$.indexOf(x)===T}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function Ue(g){g===void 0&&(g=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=It(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=It(e.config.altFormat)),g!==!1&&fe("onValueUpdate")}function rr(g){var m=je(g),x=e.prevMonthNav.contains(m),T=e.nextMonthNav.contains(m);x||T?ue(x?-1:1):e.yearElements.indexOf(m)>=0?m.select():m.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):m.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function ar(g){g.preventDefault();var m=g.type==="keydown",x=je(g),T=x;e.amPM!==void 0&&x===e.amPM&&(e.amPM.textContent=e.l10n.amPM[Qe(e.amPM.textContent===e.l10n.amPM[0])]);var $=parseFloat(T.getAttribute("min")),H=parseFloat(T.getAttribute("max")),z=parseFloat(T.getAttribute("step")),N=parseInt(T.value,10),U=g.delta||(m?g.which===38?1:-1:0),I=N+z*U;if(typeof T.value<"u"&&T.value.length===2){var O=T===e.hourElement,K=T===e.minuteElement;I<$?(I=H+I+Qe(!O)+(Qe(O)&&Qe(!e.amPM)),K&&_(void 0,-1,e.hourElement)):I>H&&(I=T===e.hourElement?I-H-Qe(!e.amPM):$,K&&_(void 0,1,e.hourElement)),e.amPM&&O&&(z===1?I+N===23:Math.abs(I-N)>z)&&(e.amPM.textContent=e.l10n.amPM[Qe(e.amPM.textContent===e.l10n.amPM[0])]),T.value=We(I)}}return r(),e}function mn(i,t){for(var e=Array.prototype.slice.call(i).filter(function(o){return o instanceof HTMLElement}),n=[],r=0;r<e.length;r++){var a=e[r];try{if(a.getAttribute("data-fp-omit")!==null)continue;a._flatpickr!==void 0&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=lc(a,t||{}),n.push(a._flatpickr)}catch(o){console.error(o)}}return n.length===1?n[0]:n}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(i){return mn(this,i)},HTMLElement.prototype.flatpickr=function(i){return mn([this],i)});var _e=function(i,t){return typeof i=="string"?mn(window.document.querySelectorAll(i),t):i instanceof Node?mn([i],t):mn(i,t)};_e.defaultConfig={};_e.l10ns={en:Oe({},Qn),default:Oe({},Qn)};_e.localize=function(i){_e.l10ns.default=Oe(Oe({},_e.l10ns.default),i)};_e.setDefaults=function(i){_e.defaultConfig=Oe(Oe({},_e.defaultConfig),i)};_e.parseDate=Ir({});_e.formatDate=fs({});_e.compareDates=Ve;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(i){return mn(this,i)});Date.prototype.fp_incr=function(i){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof i=="string"?parseInt(i,10):i))};typeof window<"u"&&(window.flatpickr=_e);var uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cc(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Or={exports:{}};(function(i,t){(function(e,n){n(t)})(uc,function(e){var n=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},r={weekdays:{shorthand:["So","Mo","Di","Mi","Do","Fr","Sa"],longhand:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},months:{shorthand:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],longhand:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},firstDayOfWeek:1,weekAbbreviation:"KW",rangeSeparator:" bis ",scrollTitle:"Zum ndern scrollen",toggleTitle:"Zum Umschalten klicken",time_24hr:!0};n.l10ns.de=r;var a=n.l10ns;e.German=r,e.default=a,Object.defineProperty(e,"__esModule",{value:!0})})})(Or,Or.exports);var dc=Or.exports;const sa="Y-m-d",Ya="__LOCALIZED_FLATPICKR__",hc={en:"en-US",de:"de-DE"};function fc(i,t){!i||!t||(gt(i,"min",t.startDate),gt(i,"max",t.endDate))}function gs(i,t,e){if(!i||!t||!e)return{refresh:()=>{}};const n=e.startDate??"",r=e.endDate??"",a=()=>{const s=i.value??"",l=t.value??"";n?(gt(i,"min",n),gt(t,"min",(s&&s!==n?s:n)||n)):(gt(i,"min",null),gt(t,"min",null)),r?(gt(t,"max",r),gt(i,"max",(l&&l!==r?l:r)||r)):(gt(i,"max",null),gt(t,"max",null))},o=()=>{a()};return i.addEventListener("change",o),t.addEventListener("change",o),a(),{refresh:a}}function Gr(i,{onChange:t}={}){if(!i)return{refresh:()=>{},destroy:()=>{}};i.type="text",i.autocomplete="off",i.inputMode="none",i.dataset.datePicker="true";const e=_e(i,{dateFormat:sa,defaultDate:i.value||null,altInput:!0,altFormat:Ya,allowInput:!1,clickOpens:!0,monthSelectorType:"static",disableMobile:!1,locale:Za(ht()),onChange:(r,a)=>{const o=typeof a=="string"?a:i.value??"";t==null||t(o),i.dispatchEvent(new Event("change",{bubbles:!0}))},formatDate(r,a){return a===Ya?gc(r,ht()):_e.formatDate(r,a)}}),n=jt(()=>{e.set("locale",Za(ht())),ei(i)});return{refresh:()=>ei(i),destroy:()=>{n==null||n(),e.destroy()}}}function ei(i,t){i&&(typeof t=="string"&&(i.value=t),i._flatpickr&&i._flatpickr.setDate(i.value||null,!1,sa))}function qa(i,t){var r;if(!i)return;const e=!!t;i.disabled=e;const n=(r=i._flatpickr)==null?void 0:r.altInput;n&&(n.disabled=e)}function gt(i,t,e){if(!i)return;const n=typeof e=="string"&&e.length>0?e:null;n?i[t]=n:i.removeAttribute(t);const r=i._flatpickr;if(r){const a=t==="min"?"minDate":"maxDate";r.set(a,n||null)}}function Za(i){return ms(i)==="de"?dc.German:void 0}function ms(i){return typeof i!="string"?"en":i.toLowerCase().startsWith("de")?"de":"en"}function gc(i,t){if(!(i instanceof Date)||Number.isNaN(i.getTime()))return"";const e=ms(t),n=hc[e];try{return new Intl.DateTimeFormat(n,{year:"numeric",month:"2-digit",day:"2-digit"}).format(i)}catch{return _e.formatDate(i,sa)}}const Fi=Object.freeze([{value:"true",labelKey:"option.enabled"},{value:"false",labelKey:"option.disabled"}]),$r=[{key:"dateStart",labelKey:"label.tourStartDate",type:"date",expert:!1},{key:"dateEnd",labelKey:"label.tourEndDate",type:"date",expert:!1},{key:"requiredStartDayOfWeek",labelKey:"label.routing.requiredStartDay",type:"select",options:fn,expert:!1},{key:"maxTourLengthDays",labelKey:"label.routing.maxTourLength",type:"number",min:1,step:1,expert:!1},{key:"allowFlights",labelKey:"label.routing.allowFlights",type:"select",options:Fi,valueType:"boolean",expert:!1},{key:"maxDriveOneDayGap",labelKey:"label.routing.maxDriveOneDayGap",type:"number",min:0,step:1,expert:!1},{key:"maxDriveTwoDayGap",labelKey:"label.routing.maxDriveTwoDayGap",type:"number",min:0,step:1,expert:!1},{key:"maxDriveThreeDayGap",labelKey:"label.routing.maxDriveThreeDayGap",type:"number",min:0,step:1,expert:!1},{key:"maxDriveFourDayGap",labelKey:"label.routing.maxDriveFourDayGap",type:"number",min:0,step:1,expert:!1},{key:"maxRoutesToFind",labelKey:"label.routing.maxRoutes",type:"number",min:1,step:1,expert:!0},{key:"oneDayGap",labelKey:"label.routing.oneDayGap",type:"number",min:0,step:1,expert:!0},{key:"twoDayGap",labelKey:"label.routing.twoDayGap",type:"number",min:0,step:1,expert:!0},{key:"threeDayGap",labelKey:"label.routing.threeDayGap",type:"number",min:0,step:1,expert:!0},{key:"fourDayGap",labelKey:"label.routing.fourDayGap",type:"number",min:0,step:1,expert:!0},{key:"minTimeToNextGameHoursFlight",labelKey:"label.routing.minTimeToNextGameHoursFlight",type:"number",min:0,step:.5,expert:!0},{key:"maxTimeToNextGameHours",labelKey:"label.routing.maxTimeToNextGameHours",type:"number",min:1,step:1,expert:!0},{key:"specialGameDayPenalty",labelKey:"label.routing.specialGameDayPenalty",type:"number",min:0,step:.05,expert:!0},{key:"revisitMultiplierFloor",labelKey:"label.routing.revisitMultiplierFloor",type:"number",min:0,step:.05,expert:!0},{key:"travelMultiplierCeilingFlight",labelKey:"label.routing.travelMultiplierCeilingFlight",type:"number",min:0,step:.05,expert:!0},{key:"travelMultiplierFloor",labelKey:"label.routing.travelMultiplierFloor",type:"number",min:0,step:.05,expert:!0},{key:"estimatedMinGamesPerWeek",labelKey:"label.routing.estimatedMinGamesPerWeek",type:"number",min:0,step:.1,expert:!0},{key:"estimatedMaxGamesPerWeek",labelKey:"label.routing.estimatedMaxGamesPerWeek",type:"number",min:0,step:.1,expert:!0},{key:"beamWidthPerStartGame",labelKey:"label.routing.beamWidthPerStartGame",type:"number",min:1,step:1,expert:!0},{key:"cacheBucketHours",labelKey:"label.routing.cacheBucketHours",type:"number",min:1,step:1,expert:!0},{key:"maxSearchMinutesPerStartGame",labelKey:"label.routing.maxSearchMinutesPerStartGame",type:"number",min:0,step:.1,expert:!0},{key:"enableRouteCache",labelKey:"label.routing.enableRouteCache",type:"select",options:Fi,valueType:"boolean",expert:!0},{key:"expertMode",labelKey:"label.routing.expertMode",type:"select",options:Fi,valueType:"boolean",expert:!1}],sn=5,br=35,mc=24*60*60*1e3;var Jo;const ki=((Jo=fn==null?void 0:fn[0])==null?void 0:Jo.value)??"";function pc({ui:i,scheduleRange:t}){const e=Gr(i.tourStartInput,{onChange:k=>s("dateStart",k)}),n=Gr(i.tourEndInput,{onChange:k=>s("dateEnd",k)}),r=gs(i.tourStartInput,i.tourEndInput,t);function a(){D({refreshBounds:!0}),e.refresh(),n.refresh()}function o(){const k=Be();ei(i.tourStartInput,k.dateStart??t.startDate),ei(i.tourEndInput,k.dateEnd??t.endDate),D({refreshBounds:!0})}function s(k,S){const C=Be(),M=Pr(k,S,C.dateStart,C.dateEnd,t);C.dateStart=M.dateStart,C.dateEnd=M.dateEnd,o(),hn(C)}function l(k){const S=typeof k=="string"&&k.length>0?k:ki,C=Be();C.requiredStartDayOfWeek=S,b(),hn(C)}function u(k){const S=Be(),C=y(),M=Number(k),F=E(Number.isFinite(M)?M:S.maxTourLengthDays,C);S.maxTourLengthDays=F,w(),hn(S)}function c(k){const S=Be();S.allowFlights=k==="true",p(),hn(S)}function d(k){Qu(k),i.teamButton.disabled=k,i.cityButton.disabled=k,i.routingButton.disabled=k,qa(i.tourStartInput,k),qa(i.tourEndInput,k),i.requiredStartDaySelect.disabled=k,i.maxTourLengthSelect.disabled=k,i.allowFlightsInput.disabled=k,h(k),k&&i.searchButton.removeAttribute("disabled"),i.searchButton.classList.toggle("btn-primary",!k)}return jt(()=>{d(ls()),D({refreshBounds:!1})}),{initializeDateInputs:a,syncDateInputs:o,handleDateInputChange:s,handleRequiredStartDayChange:l,handleMaxTourLengthChange:u,handleAllowFlightsChange:c,setSearchState:d};function h(k){const S=i.searchButton,C=i.routesHeading,M=i.routesPanel,F=k?"button.searchStop":"button.searchStart",P=k?"label.routesHeading.running":"label.routesHeading",A=L(F);S&&(S.textContent=A,S.setAttribute("data-i18n",F),S.setAttribute("aria-label",A)),C&&(C.textContent=L(P),C.setAttribute("data-i18n",P)),M&&(M.classList.toggle("search-running",!!k),M.classList.toggle("search-finished",!k))}function f(){const k=i.requiredStartDaySelect;if(!k)return;const S=document.createDocumentFragment();(fn??[]).forEach(C=>{const M=document.createElement("option");M.value=C.value,M.textContent=C.labelKey?L(C.labelKey):C.label??C.value,S.appendChild(M)}),k.innerHTML="",k.appendChild(S)}function b(){const k=i.requiredStartDaySelect;if(!k)return;const S=Be(),C=typeof S.requiredStartDayOfWeek=="string"&&S.requiredStartDayOfWeek.length>0?S.requiredStartDayOfWeek:ki,F=new Set((fn??[]).map(P=>P.value)).has(C)?C:ki;k.value=F,S.requiredStartDayOfWeek!==F&&(F!==ki||S.requiredStartDayOfWeek)&&(S.requiredStartDayOfWeek=F)}function p(){const k=i.allowFlightsInput;k&&(k.value=Be().allowFlights?"true":"false")}function w(){const k=i.maxTourLengthSelect;if(!k)return;const S=y(),C=document.createDocumentFragment();for(let P=sn;P<=S;P+=1){const A=document.createElement("option");A.value=String(P),A.textContent=String(P),C.appendChild(A)}k.innerHTML="",k.appendChild(C);const M=Be(),F=E(M.maxTourLengthDays,S);k.value=String(F),M.maxTourLengthDays!==F&&(M.maxTourLengthDays=F)}function E(k,S){const C=Be(),M=Number.isFinite(C==null?void 0:C.maxTourLengthDays)?C.maxTourLengthDays:Number(Me==null?void 0:Me.maxTourLengthDays)||sn,F=Number.isFinite(k)?Math.trunc(k):M,P=Math.max(sn,Number(S)||br);return Math.min(Math.max(F,sn),P)}function y(){const k=Be(),S=Number.isFinite(k==null?void 0:k.maxTourLengthDays)?k.maxTourLengthDays:Number(Me==null?void 0:Me.maxTourLengthDays)||sn,C=v();return Number.isFinite(C)?Math.min(Math.max(Math.floor(C),sn),Math.max(br,S)):br}function v(){const k=Mt(i.tourStartInput.value),S=Mt(i.tourEndInput.value);if(!Number.isFinite(k)||!Number.isFinite(S))return null;const C=Math.floor((S-k)/mc)+1;return C>0?C:null}function _(){const k=i.allowFlightsInput;if(!k)return;const S=document.createDocumentFragment();(Fi??[]).forEach(C=>{const M=document.createElement("option");M.value=C.value,M.textContent=C.labelKey?L(C.labelKey):C.label??C.value,S.appendChild(M)}),k.innerHTML="",k.appendChild(S)}function D({refreshBounds:k=!0}={}){k&&r.refresh(),f(),_(),w(),b(),p()}}const Ja="has-open-modal";function bc({root:i}){const t=i??document.body;let e=0,n=null,r=0;const a=new Map;function o(f){if(!f||!f.isConnected)return;const b=f.parentElement;b&&b.lastElementChild!==f&&b.appendChild(f)}function s(){e+=1,e===1&&(n=document.body.style.overflow,document.body.style.overflow="hidden")}function l(){e=Math.max(e-1,0),e===0&&n!==null&&(document.body.style.overflow=n,n=null)}function u({onBackgroundPointerDown:f,className:b}={}){const p=document.createElement("div");return p.className=["modal-overlay",b].filter(Boolean).join(" "),p.addEventListener("click",E=>{E.target===p&&typeof f=="function"&&f(E)}),t.appendChild(p),s(),requestAnimationFrame(()=>{p.classList.add("open")}),{overlay:p,dispose:()=>{p.classList.remove("open"),setTimeout(()=>{p.remove()},200),l()}}}function c(){r>0?document.documentElement.classList.add(Ja):document.documentElement.classList.remove(Ja)}function d({title:f,size:b="medium",build:p,onClose:w,id:E}){var Q;if(E&&a.has(E)){const j=a.get(E);return o(j.overlay),(Q=j.focus)==null||Q.call(j),j.instance}const{overlay:y,dispose:v}=u();r+=1,c();const _=document.createElement("div");_.className=`modal-dialog${b?" "+b:""}`;const D=document.createElement("div");D.className="modal-header";const k=document.createElement("h2");k.textContent=f;const S=document.createElement("button");S.type="button",S.className="btn btn-icon btn-muted modal-close-button";const C=L("aria.closeDialog");S.setAttribute("aria-label",C),S.setAttribute("title",C),S.textContent="",D.append(k,S);const M=document.createElement("div");M.className="modal-body";const F=document.createElement("div");F.className="modal-actions",_.append(D,M,F),y.appendChild(_);const P=j=>{j.key==="Escape"&&(j.preventDefault(),A())},A=()=>{if(document.removeEventListener("keydown",P),v(),r=Math.max(r-1,0),c(),E){const j=a.get(E);(j==null?void 0:j.instance.close)===A&&a.delete(E)}w==null||w()};S.addEventListener("click",A),document.addEventListener("keydown",P);let G=null;const W=(p==null?void 0:p({body:M,actions:F,close:A}))??{};G=(W==null?void 0:W.focusTarget)??null;const Y=()=>{const j=G??S;typeof(j==null?void 0:j.focus)=="function"&&requestAnimationFrame(()=>{j.focus()})};Y();const Z={close:A,overlay:y,dialog:_};return E&&a.set(E,{overlay:y,instance:Z,focus:Y}),Z}function h(f){var p;if(!f)return!1;const b=a.get(f);return b?(o(b.overlay),(p=b.focus)==null||p.call(b),!0):!1}return{open:d,createOverlay:u,focusDialog:h}}function ps({form:i,entries:t,getDefaults:e,onRestore:n}){return us({getDefaults:e,applyDefaults:r=>{t.forEach(([a])=>{const o=i.elements[a];if(!o)return;const s=Number.isFinite(r[a])?r[a]:1;o.value=s}),n==null||n()}})}function bs(i,t){var e;try{(e=window.localStorage)==null||e.setItem(i,JSON.stringify(t))}catch{}}function vs({id:i,name:t,value:e,labelKey:n="label.weight",isExpertMode:r=!1}){const a=document.createElement("div");a.className="preference-input-row";const o=document.createElement("label");o.htmlFor=i,o.textContent=L(n);const s=Number.isFinite(e)?e:1,l=document.createElement("input");if(l.name=t,l.id=i,l.step="0.1",r)l.type="number",l.min="0",l.value=s;else{const d=Math.min(Math.max(s,0),2);l.type="range",l.min=String(0),l.max=String(2),l.step="0.1",l.value=d.toFixed(1)}return a.append(o,l),{wrapper:a,input:l}}function ni({topicId:i,openHelpTopic:t}){const e=document.createElement("button");return e.type="button",e.className="btn btn-text btn-muted",e.textContent=L("button.help"),e.addEventListener("click",()=>{typeof t=="function"&&i&&t(i)}),e}const vc=["item-disabled","item-downgraded","item-default","item-upgraded"];function yc(i){return Number.isFinite(i)?i<=0?"item-disabled":i<1?"item-downgraded":i===1?"item-default":"item-upgraded":"item-default"}function ys(i,t){if(!i||!t)return;const e=()=>{const n=Number(t.value),r=yc(n);i.classList.remove(...vc),i.classList.add(r)};return t.addEventListener("input",e),t.addEventListener("change",e),t.addEventListener("blur",e),e(),{applyState:e}}const wc="city-preferences-dialog";function _c({dialogKit:i,stadiumLookup:t,teamLookup:e,openHelpTopic:n}){function r(){const a=Object.entries(ji()).sort(([o],[s])=>o.localeCompare(s,"en-US"));i.open({title:L("dialog.cityPreferences.title"),size:"large",id:wc,build({body:o,actions:s,close:l}){const u=document.createElement("form");u.className="preference-form";const c=document.createElement("div");c.className="preference-grid city-grid",a.forEach(([w,E])=>{const y=document.createElement("div");y.className="preference-item city-item";const v=t.get(w),_=document.createElement("div");_.className="item-text";const D=document.createElement("strong");D.textContent=(v==null?void 0:v.location_name)??L("label.unknownLocation");const k=document.createElement("span");k.textContent=(v==null?void 0:v.stadium)??w;const S=document.createElement("span"),M=(Array.isArray(v==null?void 0:v.home_team)?v.home_team:[]).map(G=>{const W=e.get(String(G).toUpperCase());return(W==null?void 0:W.team_name)??String(G)}).filter(Boolean);S.textContent=M.length>0?M.join(", "):L("label.homeTeamUnknown"),_.append(D,k,S);const{wrapper:F,input:P}=vs({id:`stadium-weight-${w}`,name:w,value:E,isExpertMode:Xn()}),A=ys(y,P);y.append(_,F),c.appendChild(y),A!=null&&A.applyState&&(P._applyPreferenceState=A.applyState)}),u.appendChild(c),o.appendChild(u);const d=document.createElement("button");d.type="button",d.textContent=L("button.cancel"),d.classList.add("btn","btn-text","btn-muted"),d.addEventListener("click",l);const h=ps({form:u,entries:a,getDefaults:()=>Bt(rs),onRestore:()=>{u.querySelectorAll("input").forEach(w=>{typeof w._applyPreferenceState=="function"&&w._applyPreferenceState()})}}),f=ni({topicId:"help-dialog-city-preferences",openHelpTopic:n}),b=document.createElement("button");return b.type="button",b.textContent=L("button.save"),b.classList.add("btn","btn-text","btn-primary"),s.append(h,f,d,b),b.addEventListener("click",()=>{u.requestSubmit()}),u.addEventListener("submit",w=>{w.preventDefault();const E=new FormData(u),y=Bt(ji());a.forEach(([_])=>{const D=E.get(_),k=Number(D);y[_]=Number.isFinite(k)&&k>=0?k:0});const v=Ju(y);bs(Rt.stadiumWeights,v),l()}),{focusTarget:u.querySelector("input")??b}}})}return{openCityPreferences:r}}const kc="routing-parameters-dialog";function xc({dialogKit:i,scheduleRange:t,controls:e,onExpertModeChange:n,openHelpTopic:r}){function a(){let o=()=>{};i.open({title:L("dialog.routingParameters.title"),size:"large",id:kc,onClose:()=>{o(),o=()=>{}},build({body:s,actions:l,close:u}){var M;const c=document.createElement("form");c.className="preference-form";const d=document.createElement("div");d.className="routing-parameters-list";const h=[],f=Be(),b=Xn(),p=[],w=[];$r.forEach(F=>{if(!(F.key in f))return;const P=document.createElement("label");P.className="routing-parameter",F.expert&&(P.dataset.expertField="true",Xa(P,b),h.push(P));const A=document.createElement("span");A.textContent=L(F.labelKey);const G=Sc(F,f[F.key],t);F.type==="date"&&w.push(G),P.append(A,G),d.appendChild(P)}),w.forEach(F=>{const P=Gr(F);p.push(P)}),o=()=>{p.forEach(F=>{var P;return(P=F==null?void 0:F.destroy)==null?void 0:P.call(F)})},c.appendChild(d),s.appendChild(c);const E=gs(c.elements.dateStart,c.elements.dateEnd,t),y=(M=c.elements)==null?void 0:M.expertMode,v=()=>{const F=(y==null?void 0:y.value)==="true";h.forEach(P=>{Xa(P,F)})};y==null||y.addEventListener("change",v),v();const _=document.createElement("button");_.type="button",_.textContent=L("button.cancel"),_.classList.add("btn","btn-text","btn-muted"),_.addEventListener("click",u);const D=us({getDefaults:()=>oa(Me,t),applyDefaults:F=>{Ec(c,F),E.refresh(),v()}}),k=ni({topicId:"help-dialog-routing-parameters",openHelpTopic:r}),S=document.createElement("button");return S.type="button",S.textContent=L("button.save"),S.classList.add("btn","btn-text","btn-primary"),l.append(D,k,_,S),S.addEventListener("click",()=>{c.requestSubmit()}),c.addEventListener("submit",F=>{F.preventDefault();const P=new FormData(c),A=Be(),G=JSON.parse(JSON.stringify(A)),W=P.get("expertMode")==="true";G.expertMode=W,$r.forEach(Z=>{if(Z.key in G&&!(Z.key!=="expertMode"&&Z.expert&&!W))if(Z.type==="checkbox")G[Z.key]=P.get(Z.key)==="on";else if(Z.type==="date")G[Z.key]=P.get(Z.key)||G[Z.key];else if(Z.type==="select"){const Q=P.get(Z.key),j=la(Z,G[Z.key]),ee=typeof Q=="string"&&Q.length>0?Q:j;G[Z.key]=Cc(Z,ee)}else{const Q=P.get(Z.key),j=Number(Q);Number.isFinite(j)&&(G[Z.key]=j)}});let Y=Pr("dateStart",G.dateStart,A.dateStart,A.dateEnd,t);Y=Pr("dateEnd",G.dateEnd,Y.dateStart,Y.dateEnd,t),G.dateStart=Y.dateStart,G.dateEnd=Y.dateEnd,Xu(G),ec(W),e.syncDateInputs(),hn(Be()),n==null||n(Xn()),u()}),{focusTarget:c.querySelector("input")??S}}})}return{openRoutingParameters:a}}function Sc(i,t,e){if(i.type==="checkbox"){const r=document.createElement("input");return r.type="checkbox",r.name=i.key,r.id=i.key,r.checked=!!t,r}if(i.type==="select"){const r=document.createElement("select");r.name=i.key,r.id=i.key;const a=la(i,t);return(i.options??[]).forEach(o=>{const s=document.createElement("option"),l=ws(o.value);s.value=l,s.textContent=o.labelKey?L(o.labelKey):o.label??o.value,l===a&&(s.selected=!0),r.appendChild(s)}),r.value=a,r}const n=document.createElement("input");return n.type=i.type==="date"?"text":i.type??"number",n.name=i.key,n.id=i.key,i.min!=null&&(n.min=String(i.min)),i.step!=null&&(n.step=String(i.step)),n.value=t??"",i.type==="date"&&(n.dataset.datePicker="true",fc(n,e)),n}function Ec(i,t){$r.forEach(e=>{if(!(e.key in t))return;const n=i.elements[e.key];n&&(e.type==="checkbox"?n.checked=!!t[e.key]:e.type==="select"?n.value=la(e,t[e.key]):e.type==="date"?ei(n,t[e.key]??""):n.value=t[e.key]??"")})}function Xa(i,t){i&&(i.hidden=!t,i.style.display=t?"":"none")}function la(i,t){var n,r;if((i==null?void 0:i.valueType)==="boolean")return t?"true":"false";if(typeof t=="number")return String(t);if(typeof t=="string"&&t.length>0)return t;const e=(r=(n=i==null?void 0:i.options)==null?void 0:n[0])==null?void 0:r.value;return ws(e)}function Cc(i,t){return(i==null?void 0:i.valueType)==="boolean"?t==="true":t}function ws(i){return typeof i=="boolean"?i?"true":"false":typeof i=="number"?String(i):typeof i=="string"?i:""}const Wn="team-logo";let ln;function zr({team:i,variant:t="default",altText:e="",loading:n="lazy"}={}){var c;if(!i)return"";const r=Br(e||i.team_name||""),a=Ac(),o=(c=a==null?void 0:a.content)==null?void 0:c.firstElementChild;if(!o)return Tc({team:i,variant:t,altText:r,loading:n});const s=o.cloneNode(!0);s.classList.add("helmet",`helmet-${t}`),s.setAttribute("role","img"),s.setAttribute("focusable","false"),s.setAttribute("aria-label",r);const l=Nc(i),u=Dc(l);return`<span class="${Wn} ${Wn}-${t}"${u}>${s.outerHTML}</span>`}function Tc({team:i,variant:t,altText:e,loading:n}){if(!(i!=null&&i.team_logo_squared))return"";const r=[`src="${Br(i.team_logo_squared)}"`,`alt="${e}"`];return n&&r.push(`loading="${Br(n)}"`),`<span class="${Wn} ${Wn}-${t} ${Wn}-image"><img ${r.join(" ")} /></span>`}function Dc(i){const t=[];return i.shell&&t.push(`--helmet-shell:${i.shell}`),i.mask&&t.push(`--helmet-mask:${i.mask}`),i.logo&&t.push(`--helmet-logo:${i.logo}`),t.length?` style="${t.join("; ")}"`:""}function Ac(){return ln!==void 0?ln:typeof document>"u"?(ln=null,ln):(ln=document.getElementById("helmet-template"),ln)}function Nc(i){return{shell:vr((i==null?void 0:i.color_helmet_shell)??(i==null?void 0:i.color_helmet_logo)??(i==null?void 0:i.color_helmet_mask)),logo:vr((i==null?void 0:i.color_helmet_logo)??(i==null?void 0:i.color_helmet_shell)??(i==null?void 0:i.color_helmet_mask)),mask:vr((i==null?void 0:i.color_helmet_mask)??(i==null?void 0:i.color_helmet_shell))}}function vr(i){if(!i)return"";const t=String(i).trim();return t&&/^#?[0-9a-fA-F]{3,8}$/.test(t)?t.startsWith("#")?t:`#${t}`:""}function Br(i){return i==null?"":String(i).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}const Lc="team-preferences-dialog";function Fc({dialogKit:i,teamLookup:t,stadiumLookup:e,openHelpTopic:n}){function r(){const a=Object.entries(Wi()).sort(([o],[s])=>o.localeCompare(s,"en-US"));i.open({title:L("dialog.teamPreferences.title"),size:"large",id:Lc,build({body:o,actions:s,close:l}){const u=document.createElement("form");u.className="preference-form";const c=document.createElement("div");c.className="preference-grid team-grid",a.forEach(([w,E])=>{const y=document.createElement("div");y.className="preference-item team-item";const v=String(w).toUpperCase(),_=t.get(v),D=Hu(w,t),k=_!=null&&_.stadium_id&&e.has(_.stadium_id)?e.get(_.stadium_id):Uu(v),S=document.createElement("div");S.className="item-header";const C=zr({team:_,variant:"default",altText:L("aria.teamLogo",{team:D})});C&&S.insertAdjacentHTML("beforeend",C);const M=document.createElement("div");M.className="item-text";const F=document.createElement("strong");F.textContent=D;const P=document.createElement("span");P.textContent=(k==null?void 0:k.stadium)??L("label.unknownStadium");const A=document.createElement("span");A.className="item-city",A.textContent=(k==null?void 0:k.location_name)??L("label.unknownCity"),M.append(F,P,A),S.appendChild(M);const{wrapper:G,input:W}=vs({id:`team-weight-${w}`,name:w,value:E,isExpertMode:Xn()}),Y=ys(y,W);y.append(S,G),c.appendChild(y),Y!=null&&Y.applyState&&(W._applyPreferenceState=Y.applyState)}),u.appendChild(c),o.appendChild(u);const d=document.createElement("button");d.type="button",d.textContent=L("button.cancel"),d.classList.add("btn","btn-text","btn-muted"),d.addEventListener("click",l);const h=ps({form:u,entries:a,getDefaults:()=>Bt(as),onRestore:()=>{u.querySelectorAll("input").forEach(w=>{typeof w._applyPreferenceState=="function"&&w._applyPreferenceState()})}}),f=ni({topicId:"help-dialog-team-preferences",openHelpTopic:n}),b=document.createElement("button");return b.type="button",b.textContent=L("button.save"),b.classList.add("btn","btn-text","btn-primary"),s.append(h,f,d,b),b.addEventListener("click",()=>{u.requestSubmit()}),u.addEventListener("submit",w=>{w.preventDefault();const E=new FormData(u),y=Bt(Wi());a.forEach(([_])=>{const D=E.get(_),k=Number(D);y[_]=Number.isFinite(k)&&k>=0?k:0});const v=Zu(y);bs(Rt.teamWeights,v),l()}),{focusTarget:u.querySelector("input")??b}}})}return{openTeamPreferences:r}}function Qa(i){if(!Number.isFinite(i)||i<0)return null;const t=Math.floor(i/1e3),e=t%60,n=Math.floor(t/60)%60,r=Math.floor(t/3600)%24,a=Math.floor(t/86400);return a>0?`${a}d ${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(e).padStart(2,"0")}`:r>0?`${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(e).padStart(2,"0")}`:n>0||e>0?`${String(n).padStart(2,"0")}:${String(e).padStart(2,"0")}`:`${i.toFixed(0)} ms`}function Mc(i){if(!Number.isFinite(i)||i<=0)return null;const t=i/1e3;if(t<60)return`${Math.round(t)}s`;if(t<3600){const r=Math.floor(t/60),a=Math.round(t%60);return a>0?`${r}m ${a}s`:`${r}m`}if(t<86400){const r=Math.floor(t/3600),a=Math.round(t%3600/60);return a>0?`${r}h ${a}m`:`${r}h`}const e=Math.floor(t/86400),n=Math.round(t%86400/3600);return n>0?`${e}d ${n}h`:`${e}d`}function Rc(i){return!Number.isFinite(i)||i<=0?null:`${Math.round(i).toLocaleString()} km`}function Pc(i){return!Number.isFinite(i)||i<=0?null:Math.max(Math.round(i*100).toFixed(0),1)}function Ic(i){return!Number.isFinite(i)||i<0?null:i>=1e9?`${(i/1e9).toFixed(1)}B`:i>=1e6?`${(i/1e6).toFixed(1)}M`:i>=1e3?`${(i/1e3).toFixed(1)}K`:i.toLocaleString()}function _s(i){return!Number.isFinite(i)||i<=0?"0":String(Math.floor(i*100))}function ks(i){if(!Number.isFinite(i)||i<=0)return L("label.durationZeroHours");const t=Math.ceil(i/(60*60*1e3)/24),e=Math.max(Math.round(t),1);return L("label.durationDays",{count:e})}function xs(i,t){return i===t?L("label.routeWeekSingle",{week:i}):L("label.routeWeeksRange",{start:i,end:t})}function Oc(i){const t=(i==null?void 0:i.attributes)??{},e=t.game_id??(i==null?void 0:i.id)??`${t.away_team??"?"}-${t.home_team??"?"}`,n=t.gamedateTimestamp??t.gamedate??"";return`${e}::${n}`}function Ss(i){const t=Array.isArray(i==null?void 0:i.nodes)?i.nodes:[];return t.length===0?"":t.map(e=>Oc(e)).join(">")}function Ur(i){return(Array.isArray(i==null?void 0:i.nodes)?i.nodes:Array.isArray(i)?i:[]).map(e=>({id:(e==null?void 0:e.id)??null,attributes:{...(e==null?void 0:e.attributes)??{}}}))}function Gc(i){return Array.isArray(i)?i.map(t=>({gameId:typeof(t==null?void 0:t.nodeKey)=="string"?t.nodeKey:null,score:Number.isFinite(t==null?void 0:t.score)?t.score:null,travelDurationMs:Number.isFinite(t==null?void 0:t.travelDurationMs)?t.travelDurationMs:null,travelDistanceKm:Number.isFinite(t==null?void 0:t.travelDistanceKm)?t.travelDistanceKm:null,isFlight:(t==null?void 0:t.isFlight)===!0})):[]}function $c(i){return{nodes:Ur(i),score:Number.isFinite(i==null?void 0:i.score)?i.score:null,totalDurationMs:Number.isFinite(i==null?void 0:i.totalDurationMs)?i.totalDurationMs:null,totalDurationDays:Number.isFinite(i==null?void 0:i.totalDurationDays)?i.totalDurationDays:null,routeTitle:typeof(i==null?void 0:i.routeTitle)=="string"?i.routeTitle:null,nodeMetrics:Gc(i==null?void 0:i.nodeMetrics)}}const zc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Bc={amp:"&",lt:"<",gt:">",quot:'"',"#39":"'"},Uc=/[&<>"']/g,Hc=/&(amp|lt|gt|quot|#39);/g;function jn(i){return i==null?"":String(i).replace(Uc,t=>zc[t]??t)}function ua(i){return i==null?"":String(i).replace(Hc,(t,e)=>Bc[e]??t)}function $t(i){return typeof i!="string"?"":jn(ua(i))}function Wc(){let i=jc();const t=new Set;function e(){const f=n();t.forEach(b=>b(f))}function n(){return i.map(f=>{var w,E;const b=typeof((w=f.route)==null?void 0:w.routeTitle)=="string"&&f.route.routeTitle.trim().length>0?$t(f.route.routeTitle.trim()):null,p={...f.route??{},nodes:Ur(((E=f.route)==null?void 0:E.nodes)??f.route)};return b?p.routeTitle=b:delete p.routeTitle,{routeId:f.routeId,addedAt:f.addedAt,route:p}})}function r(f){return i.some(b=>b.routeId===f)}function a(f){const b=Ss(f);if(!b||r(b))return{added:!1,routeId:b};const p={routeId:b,addedAt:Date.now(),route:$c(f)};return i=[...i,p],un(i),e(),{added:!0,entry:p}}function o(f){const b=i.filter(w=>w.routeId!==f),p=b.length!==i.length;return p&&(i=b,un(i),e()),p}function s(f,b){const p=i.findIndex(v=>v.routeId===f);if(p===-1)return!1;const w=b==="up"?p-1:p+1;if(w<0||w>=i.length)return!1;const E=[...i],[y]=E.splice(p,1);return E.splice(w,0,y),i=E,un(i),e(),!0}function l(){i=[],un(i),e()}function u(f,b){var S;if(!f)return!1;const p=i.findIndex(C=>C.routeId===f);if(p===-1)return!1;const w=typeof b=="string"?b.trim():"",E=w.length>0?$t(w):null,y=i[p],v=typeof((S=y==null?void 0:y.route)==null?void 0:S.routeTitle)=="string"?y.route.routeTitle:null;if((v&&v.trim().length>0?$t(v):null)===E)return!1;const D={...y.route??{}};E?D.routeTitle=E:delete D.routeTitle;const k=[...i];return k[p]={...y,route:D},i=k,un(i),e(),!0}function c(){const f={version:1,generatedAt:new Date().toISOString(),favorites:i};return JSON.stringify(f,null,2)}function d(f){if(!f||typeof f!="object")throw new Error("invalidPayload");const b=Array.isArray(f.favorites)?f.favorites:[];let p=0,w=0;const E=[...i];return b.forEach(y=>{var C,M,F;const v=typeof(y==null?void 0:y.routeId)=="string"?y.routeId:null,_=Array.isArray((C=y==null?void 0:y.route)==null?void 0:C.nodes)?y.route.nodes:[];if(!v||_.length===0||E.some(P=>P.routeId===v)){w+=1;return}const D=typeof((M=y==null?void 0:y.route)==null?void 0:M.routeTitle)=="string"&&y.route.routeTitle.trim().length>0?$t(y.route.routeTitle.trim()):null,k=Ur(((F=y.route)==null?void 0:F.nodes)??y.route).map(P=>{const A={...(P==null?void 0:P.attributes)??{}};return typeof A.stadium=="string"&&A.stadium.trim().length>0&&(A.stadium=$t(A.stadium.trim())),{...P,attributes:A}}),S={...y.route??{},nodes:k};D?S.routeTitle=D:delete S.routeTitle,E.push({routeId:v,addedAt:Number.isFinite(y==null?void 0:y.addedAt)?y.addedAt:Date.now(),route:S}),p+=1}),i=E,un(i),e(),{added:p,skipped:w}}function h(f){return t.add(f),()=>{t.delete(f)}}return{addFavorite:a,removeFavorite:o,moveFavoriteUp:f=>s(f,"up"),moveFavoriteDown:f=>s(f,"down"),clearFavorites:l,updateFavoriteTitle:u,getFavorites:n,isFavorite:r,exportFavorites:c,importFavorites:d,subscribe:h}}function jc(){if(typeof window>"u"||!window.localStorage)return[];try{const i=window.localStorage.getItem(Rt.favorites);if(!i)return[];const t=JSON.parse(i);return Array.isArray(t)?t:[]}catch{return[]}}function un(i){if(!(typeof window>"u"||!window.localStorage))try{window.localStorage.setItem(Rt.favorites,JSON.stringify(i))}catch{}}function Vc(i,t,e="text/plain"){const n=new Blob([t],{type:e}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=i,a.style.display="none",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(r)}function Es({node:i,index:t,stadiumLookup:e,teamLookup:n,metric:r}={}){const a=(i==null?void 0:i.attributes)??{},o=a.stadium_id?e.get(a.stadium_id):null,s=a.stadium??(o==null?void 0:o.stadium)??a.stadium_id??L("label.stadiumTbd"),l=o!=null&&o.location_name?`  ${o.location_name}`:"",u=os(a,e),c=Number.isFinite(a.week)?L("label.weekNumber",{week:a.week}):L("label.weekUnknown"),d=a.game_label&&String(a.game_label).trim().length>0?a.game_label:"",h=a.home_team?n.get(String(a.home_team).toUpperCase()):null,f=a.away_team?n.get(String(a.away_team).toUpperCase()):null,b=(h==null?void 0:h.team_name)??a.home_team??L("label.homeTeamFallback"),p=(f==null?void 0:f.team_name)??a.away_team??L("label.awayTeamFallback"),w=zr({team:h,variant:"home",altText:L("aria.teamLogo",{team:b})}),E=zr({team:f,variant:"away",altText:L("aria.teamLogo",{team:p})}),y=Pc(r==null?void 0:r.score),v=Number.isFinite(r==null?void 0:r.travelDurationMs)&&!(r!=null&&r.isFlight)&&r.travelDurationMs>0?Mc(r.travelDurationMs):null,_=Number.isFinite(r==null?void 0:r.travelDistanceKm)&&r.travelDistanceKm>0?Rc(r.travelDistanceKm):null,D=r!=null&&r.isFlight?"":"",k=[];y&&k.push(`<span class="game-card-score">${L("label.routeScore")}: ${y}</span>`);const S=[];if(v&&S.push(`<span class="game-card-travel-time">${L("label.travelTime")}: ${v}</span>`),_){const M=`${_} ${D}`;S.push(`<span class="game-card-travel-distance">${L("label.travelDistance")}: ${M}</span>`)}S.length>0&&k.push(`<span class="game-card-travel">${S.join("  ")}</span>`);const C=k.length>0?`<div class="game-card-meta">${k.join("")}</div>`:"";return`
    <li class="game-card">
      <div class="game-card-header">
        <span class="game-card-order">${t+1}</span>
        <span class="game-card-week">${c}</span>
        ${d?`<span class="game-card-tag">${d}</span>`:""}
        <span class="game-card-kickoff">${u}</span>
      </div>
      <div class="game-card-matchup">
        <div class="route-team route-team-away">
          ${E}
          <span class="route-team-name">${p}</span>
        </div>
        <span class="game-card-at">@</span>
        <div class="route-team route-team-home">
          ${w}
          <span class="route-team-name">${b}</span>
        </div>
      </div>
      <div class="game-card-location">${s}${l}</div>
      ${C}
    </li>
  `}const yr=new Map,Hr=4;function Kc({ui:i,stadiumLookup:t,teamLookup:e,favoritesManager:n}){let r=[],a={elapsedMs:0},o=null,s=null,l=L("message.routesAwaitingSearch"),u=new Set,c=new Map,d=new Map,h=!1;const f=i.routesPanel??null;n&&(M(n.getFavorites()??[]),n.subscribe(A=>{M(A),k(r,{emptyMessage:l,force:!0})})),i.routesElement&&i.routesElement.addEventListener("click",A=>{const G=A.target.closest('button[data-action="add-favorite"]');if(!G||!n)return;const W=G.dataset.routeId;!W||!d.has(W)||u.has(W)||(A.preventDefault(),n.addFavorite(d.get(W)))}),jt(()=>{s?D({...s}):k(r,{emptyMessage:L("message.routesAwaitingSearch"),force:!0})});function b(){f&&f.classList.add("routes-panel-inactive")}function p(){f&&f.classList.remove("routes-panel-inactive")}function w(){if(h){p();return}h=!0,p()}function E(){h=!1,b(),k([],{emptyMessage:L("message.routesAwaitingSearch")}),D({evaluatedRoutes:0,bestRoutes:[],elapsedMs:0,totalStartNodes:0,startNodesProcessed:0,remainingStartNodes:0,estimatedRemainingMs:null,isComplete:!1})}function y(){w(),r=[],a={elapsedMs:0},o=null,D({evaluatedRoutes:0,bestRoutes:[],elapsedMs:0,totalStartNodes:0,startNodesProcessed:0,remainingStartNodes:0,estimatedRemainingMs:null,isComplete:!1})}function v(A,G){r=Array.isArray(A)?A:[],a={elapsedMs:(G==null?void 0:G.elapsedMs)??0}}function _(){k(r,{emptyMessage:l,force:!0})}function D({evaluatedRoutes:A,bestRoutes:G=[],elapsedMs:W=0,totalStartNodes:Y,startNodesProcessed:Z=0,remainingStartNodes:Q,estimatedRemainingMs:j,isComplete:ee=!1,aborted:ne=!1}){if(v(G,{elapsedMs:W}),s={evaluatedRoutes:A,bestRoutes:G,elapsedMs:W,totalStartNodes:Y,startNodesProcessed:Z,remainingStartNodes:Q,estimatedRemainingMs:j,isComplete:ee,aborted:ne},i.routesProgressElement){const ye=Qa(W)??"00:00",me=Ic(A)??"0",Ce=Number.isFinite(Y)&&Y>0?Y:null,Se=Number.isFinite(Z)?Z+(ee?0:1):0,Pe=Ce!=null?Math.min(Se,Ce):Se,Ie=ee?null:Qa(j);let ge=`
          <div class="log-item log-elapsed">
            <span class="log-label">${L("log.elapsed")}</span>
            <span class="log-data">${ye}</span>
          </div>
          <div class="log-item log-progress">
            <span class="log-label">${L("log.progress")}</span>
            <span class="log-data">${Pe} / ${Ce}</span>
          </div>
          <div class="log-item log-evaluated">
            <span class="log-label">${L("log.evaluated")}</span>
            <span class="log-data">${me!="0"?me:"..."}</span>
          </div>
      `;ee||(ge=`
            ${ge}
            <div class="log-item log-remaining">
              <span class="log-label">${L("log.remaining")}</span>
              <span class="log-data">${Ie||"..."}</span>
            </div>
        `),ge=`
        <div class="log-display log-${ee?"finished":"running"}">${ge}</div>
      `,i.routesProgressElement.innerHTML=ge}const ue=L(ee?"message.routesEmpty":"message.calculatingRoutes");k(r,{emptyMessage:ue,force:ee})}function k(A,{emptyMessage:G,force:W=!1}={}){if(!i.routesElement)return;if(!A||A.length===0){const j=G??L("message.routesEmpty");l=j,d=new Map,i.routesElement.innerHTML=`<p class="empty-state">${j}</p>`;return}G&&(l=G);const Y=Yc(A);if(!W&&Y===o)return;o=Y;const Z=new Map,Q=A.map((j,ee)=>{const ne=j&&typeof j=="object"?j:{},ue=(ne==null?void 0:ne.nodes)??[],ye=Ss(ne),me=P({routeData:ne,games:ue,routeId:ye}),Ce={...ne,routeTitle:me};return ye&&Z.set(ye,Ce),S(Ce,ee,ye)}).join("");d=Z,i.routesElement.innerHTML=Q}function S(A,G,W){var Ie,ge;const Y=(A==null?void 0:A.nodes)??[],Z=Array.isArray(A==null?void 0:A.nodeMetrics)?A.nodeMetrics:[],Q=((Ie=Y[0])==null?void 0:Ie.attributes)??{},j=((ge=Y[Y.length-1])==null?void 0:ge.attributes)??Q,ee=ks((A==null?void 0:A.totalDurationMs)??0),ne=Number.isFinite(Q==null?void 0:Q.week)?Q.week:"?",ue=Number.isFinite(j==null?void 0:j.week)?j.week:ne,ye=xs(ne,ue),me=L("label.routeLength",{count:Y.length}),Ce=P({routeData:A,games:Y,routeId:W}),Se=Y.map((Ne,yt)=>Es({node:Ne,index:yt,stadiumLookup:t,teamLookup:e,metric:Z[yt]})).join(""),Pe=C(W);return`
      <article class="route-card">
        <header class="route-card-header">
          <h3 class="route-title">${Ce}</h3>
          <div class="route-card-items">
            <span class="route-rank">#${G+1}</span>
            <span class="route-length">${me}</span>
            <div class="route-score">
              <span class="route-score-label">${L("label.routeScore")}</span>
              <span class="route-score-value">${_s((A==null?void 0:A.score)??0)}</span>
            </div>
            ${Pe}
          </div>
        </header>
        <div class="route-meta">${ee}  ${ye}</div>
        <ol class="game-card-list">${Se}</ol>
      </article>
    `}function C(A){if(!n||!A)return"";const G=u.has(A),W=L(G?"button.favoriteAdded":"button.addFavorite");return`
      <div class="route-favorite">
        <button
          type="button"
          class="btn btn-icon favorite-toggle ${G?"is-favorite":""}"
          data-action="add-favorite"
          data-route-id="${A}"
          ${G?"disabled":""}
          aria-label="${W}"
          title="${W}"
        >${G?"":""}</button>
      </div>
    `}function M(A=[]){u=new Set(A.map(G=>G.routeId).filter(Boolean)),c=new Map(A.filter(G=>G==null?void 0:G.routeId).map(G=>[G.routeId,G.route??{}]))}function F(A){var W;if(!A||!c.has(A))return null;const G=(W=c.get(A))==null?void 0:W.routeTitle;return typeof G=="string"&&G.trim().length>0?G:null}function P({routeData:A,games:G,routeId:W}){const Y=W?F(W):null;if(Y&&Y.trim().length>0)return $t(Y);const Z=typeof(A==null?void 0:A.routeTitle)=="string"?A.routeTitle.trim():"";return Z.length>0?$t(Z):jn(Cs({games:G,stadiumLookup:t,routeId:W}))}return{initialize:E,reset:y,setRoutes:v,showProgress:D,refresh:_,getRoutes:()=>r,getMetadata:()=>a}}function Yc(i){return!Array.isArray(i)||i.length===0?"__EMPTY__":i.map(t=>{var o,s,l,u,c;const e=((s=(o=t==null?void 0:t.nodes)==null?void 0:o[0])==null?void 0:s.id)??"",n=((u=(l=t==null?void 0:t.nodes)==null?void 0:l[t.nodes.length-1])==null?void 0:u.id)??"",r=Number.isFinite(t==null?void 0:t.score)?t.score:0,a=Number.isFinite(t==null?void 0:t.totalDurationMs)?t.totalDurationMs:0;return`${e}-${n}-${((c=t==null?void 0:t.nodes)==null?void 0:c.length)??0}-${r.toFixed(4)}-${a}`}).join("|")}function Cs({games:i=[],stadiumLookup:t,routeId:e}){const n=qc(i,t);if(n.length===0)return L("label.unknownCity");const r=n[0];if(n.length===1)return L("label.routeTitle.single",{firstCity:r});const a=n[n.length-1]??r;if(n.length===2)return L("label.routeTitle.range",{firstCity:r,lastCity:a});const o=n.slice(1,-1);if(o.length<=Hr){const h=eo(o);return L("label.routeTitle.via",{firstCity:r,lastCity:a,viaList:h})}const s=Math.max(Hr-1,1),l=Jc(o,e??`${r}-${a}-${n.length}`,s),u=eo(l,{includeConjunction:!1}),c=Math.max(o.length-l.length,0),d=L("label.routeTitle.remaining",{count:c});return L("label.routeTitle.viaOverflow",{firstCity:r,lastCity:a,viaList:u,remainingLabel:d})}function qc(i=[],t){return i.map(e=>{const n=(e==null?void 0:e.attributes)??{},r=n.stadium_id&&(t!=null&&t.get)?t.get(n.stadium_id):null,a=(r==null?void 0:r.city_name)??n.city_name??n.location_city??n.city??null,o=typeof a=="string"?a.trim():"";return o.length>0?o:L("label.unknownCity")})}function eo(i,{includeConjunction:t=!0}={}){if(!Array.isArray(i)||i.length===0)return"";const e=ht();if(t){const n=Zc(e);if(n)return n.format(i)}return i.join(", ")}function Zc(i){if(!i)return null;if(yr.has(i))return yr.get(i);if(typeof Intl>"u"||typeof Intl.ListFormat>"u")return null;const t=new Intl.ListFormat(i,{style:"long",type:"conjunction"});return yr.set(i,t),t}function Jc(i,t="",e=Hr){if(!Array.isArray(i)||i.length===0)return[];const n=Math.min(Math.max(e,1),i.length);if(i.length<=n)return[...i];const r=Xc(t),a=new Set;for(;a.size<n;){const o=Math.floor(r()*i.length);a.add(Math.min(Math.max(o,0),i.length-1))}return Array.from(a).sort((o,s)=>o-s).map(o=>i[o])}function Xc(i=""){let t=0;const e=typeof i=="string"&&i.length>0?i:"route-title";for(let n=0;n<e.length;n+=1)t=t*31+e.charCodeAt(n)>>>0;return t===0&&(t=439041101),function(){t+=1831565813;let r=t;return r=Math.imul(r^r>>>15,r|1),r^=r+Math.imul(r^r>>>7,r|61),((r^r>>>14)>>>0)/4294967296}}const Qc="favorites-dialog";function ed({dialogKit:i,favoritesManager:t,stadiumLookup:e,teamLookup:n,openHelpTopic:r,onDialogClose:a}){function o(){let c=null;return i.open({title:L("dialog.favorites.title"),size:"large",id:Qc,onClose:()=>{c==null||c(),a==null||a()},build({body:h,actions:f,close:b}){const p=document.createElement("div");p.className="favorites-list";const w=document.createElement("div");w.className="favorites-control-bar";const E=document.createElement("button");E.type="button",E.textContent=L("button.importFavorites"),E.classList.add("btn","btn-text","btn-muted");const y=document.createElement("button");y.type="button",y.textContent=L("button.exportFavorites"),y.classList.add("btn","btn-text","btn-muted"),w.append(E,y);const v=document.createElement("input");v.type="file",v.accept="application/json",v.hidden=!0,h.append(p,v);const _=document.createElement("button");_.type="button",_.textContent=L("button.close"),_.classList.add("btn","btn-text","btn-primary"),_.addEventListener("click",b);const D=ni({topicId:"help-dialog-favorites",openHelpTopic:r});f.append(w,D,_);const k=()=>{const S=t.getFavorites();if(p.innerHTML="",!S.length){const C=document.createElement("p");C.className="empty-state",C.textContent=L("message.favoritesEmpty"),p.appendChild(C);return}S.forEach((C,M)=>{var Se,Pe,Ie,ge,Ne,yt;const F=document.createElement("article");F.className="route-card favorite-card",F.dataset.routeId=C.routeId;const P=((Se=C.route)==null?void 0:Se.nodes)??[],A=Array.isArray((Pe=C.route)==null?void 0:Pe.nodeMetrics)?C.route.nodeMetrics:[],G=((Ie=P[0])==null?void 0:Ie.attributes)??{},W=((ge=P[P.length-1])==null?void 0:ge.attributes)??G,Y=ks(((Ne=C.route)==null?void 0:Ne.totalDurationMs)??0),Z=Number.isFinite(G==null?void 0:G.week)?G.week:"?",Q=Number.isFinite(W==null?void 0:W.week)?W.week:Z,j=xs(Z,Q),ee=L("label.routeLength",{count:P.length}),ne=jn(wr(C,e)),ue=P.map((Ct,Ye)=>Es({node:Ct,index:Ye,stadiumLookup:e,teamLookup:n,metric:A[Ye]})).join(""),ye=M>0?`<button type="button" class="btn btn-icon btn-muted favorite-move" data-action="favorite-move-up" data-route-id="${C.routeId}" aria-label="${L("button.moveUp")}" title="${L("button.moveUp")}"></button>`:"",me=M<S.length-1?`<button type="button" class="btn btn-icon btn-muted favorite-move" data-action="favorite-move-down" data-route-id="${C.routeId}" aria-label="${L("button.moveDown")}" title="${L("button.moveDown")}"></button>`:"";F.innerHTML=`
              <header class="route-card-header">
                <h3 class="route-title">${ne}</h3>
                <div class="route-card-items">
                  <span class="route-length">${ee}</span>
                  <div class="route-score">
                    <span class="route-score-label">${L("label.routeScore")}</span>
                    <span class="route-score-value">${_s(((yt=C.route)==null?void 0:yt.score)??0)}</span>
                  </div>
                  <div class="favorite-card-actions">
                    ${ye}
                    ${me}
                    <button type="button" class="btn btn-icon btn-danger favorite-remove" data-action="favorite-remove" data-route-id="${C.routeId}" aria-label="${L("button.removeFavorite")}" title="${L("button.removeFavorite")}"></button>
                  </div>                  
                </div>
              </header>
              <div class="route-meta">${Y}  ${j}</div>
              <ol class="game-card-list">${ue}</ol>
            `,p.appendChild(F);const Ce=F.querySelector(".route-title");u({titleElement:Ce,entry:C})})};return p.addEventListener("click",S=>{const C=S.target.closest("button[data-action]");if(!C)return;const M=C.dataset.routeId,F=C.dataset.action;M&&(F==="favorite-remove"?l(M):F==="favorite-move-up"?t.moveFavoriteUp(M):F==="favorite-move-down"&&t.moveFavoriteDown(M))}),y.addEventListener("click",()=>{const S=t.exportFavorites(),C=`pro-football-tours-${new Date().toISOString().replace(/[:.]/g,"-")}.json`;Vc(C,S,"application/json")}),E.addEventListener("click",()=>{v.value="",v.click()}),v.addEventListener("change",async S=>{var M;const C=(M=S.target.files)==null?void 0:M[0];if(C)try{const F=await C.text(),P=JSON.parse(F),A=t.importFavorites(P);s("message.favoritesImportSummary",{added:A.added,skipped:A.skipped})}catch{s("error.favoritesImportInvalid")}}),k(),c=t.subscribe(k),{focusTarget:p}}})}function s(c,d){i.open({title:L("dialog.favorites.importStatusTitle"),size:"small",build({body:h,actions:f,close:b}){const p=document.createElement("p");p.textContent=L(c,d??{}),h.appendChild(p);const w=document.createElement("button");return w.type="button",w.textContent=L("button.close"),w.classList.add("btn","btn-text","btn-primary"),w.addEventListener("click",b),f.append(w),{focusTarget:w}}})}function l(c){c&&i.open({title:L("dialog.favorites.removeConfirmTitle"),size:"small",build({body:d,actions:h,close:f}){const b=document.createElement("p");b.textContent=L("message.favoritesRemoveConfirm"),d.appendChild(b);const p=document.createElement("button");p.type="button",p.textContent=L("button.cancel"),p.classList.add("btn","btn-text","btn-muted"),p.addEventListener("click",f);const w=document.createElement("button");return w.type="button",w.textContent=L("button.remove"),w.classList.add("btn","btn-text","btn-danger"),w.addEventListener("click",()=>{t.removeFavorite(c),f()}),h.append(p,w),{focusTarget:w}}})}return{openFavorites:o};function u({titleElement:c,entry:d}){if(!c||!(d!=null&&d.routeId))return;c.classList.add("route-title-editable"),c.setAttribute("tabindex","0");const h=b=>{(b.key==="Enter"||b.key===" ")&&(b.preventDefault(),f())},f=()=>{var D;const p=(typeof((D=d==null?void 0:d.route)==null?void 0:D.routeTitle)=="string"&&d.route.routeTitle.trim().length>0?ua(d.route.routeTitle):null)??c.textContent??"",{height:w}=c.getBoundingClientRect(),E=document.createElement("textarea");E.value=p,E.className="route-title route-title-input",Number.isFinite(w)&&w>0&&E.style.setProperty("--route-title-input-height",`${w}px`),E.setAttribute("aria-label",L("label.editRouteTitle")),c.replaceWith(E),E.focus(),E.select();const y=(k,{restoreFocus:S=!0}={})=>{E.removeEventListener("blur",v),E.removeEventListener("keydown",_);const C=E.value.trim(),M=C.length>0?C:null,F=M?jn(M):null;k&&(d.route||(d.route={}),F?d.route.routeTitle=F:delete d.route.routeTitle);const P=k?M??wr(d,e):wr(d,e),A=document.createElement("h3");A.className="route-title",A.innerHTML=jn(P),E.replaceWith(A),u({titleElement:A,entry:d}),S&&A.focus(),k&&t.updateFavoriteTitle(d.routeId,F)},v=()=>y(!0,{restoreFocus:!1}),_=k=>{k.key==="Enter"?(k.preventDefault(),y(!0,{restoreFocus:!0})):k.key==="Escape"&&(k.preventDefault(),y(!1,{restoreFocus:!0}))};E.addEventListener("blur",v),E.addEventListener("keydown",_)};c.addEventListener("click",f),c.addEventListener("keydown",h)}}function wr(i,t){var r,a;const e=(r=i==null?void 0:i.route)==null?void 0:r.routeTitle;if(typeof e=="string"&&e.trim().length>0)return ua(e);const n=((a=i==null?void 0:i.route)==null?void 0:a.nodes)??[];return Cs({games:n,stadiumLookup:t,routeId:i==null?void 0:i.routeId})}function ca(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Vt=ca();function Ts(i){Vt=i}const Ds=/[&<>"']/,td=new RegExp(Ds.source,"g"),As=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,nd=new RegExp(As.source,"g"),id={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},to=i=>id[i];function Ke(i,t){if(t){if(Ds.test(i))return i.replace(td,to)}else if(As.test(i))return i.replace(nd,to);return i}const rd=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function ad(i){return i.replace(rd,(t,e)=>(e=e.toLowerCase(),e==="colon"?":":e.charAt(0)==="#"?e.charAt(1)==="x"?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""))}const od=/(^|[^\[])\^/g;function ce(i,t){let e=typeof i=="string"?i:i.source;t=t||"";const n={replace:(r,a)=>{let o=typeof a=="string"?a:a.source;return o=o.replace(od,"$1"),e=e.replace(r,o),n},getRegex:()=>new RegExp(e,t)};return n}function no(i){try{i=encodeURI(i).replace(/%25/g,"%")}catch{return null}return i}const Vn={exec:()=>null};function io(i,t){const e=i.replace(/\|/g,(a,o,s)=>{let l=!1,u=o;for(;--u>=0&&s[u]==="\\";)l=!l;return l?"|":" |"}),n=e.split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),t)if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function xi(i,t,e){const n=i.length;if(n===0)return"";let r=0;for(;r<n&&i.charAt(n-r-1)===t;)r++;return i.slice(0,n-r)}function sd(i,t){if(i.indexOf(t[1])===-1)return-1;let e=0;for(let n=0;n<i.length;n++)if(i[n]==="\\")n++;else if(i[n]===t[0])e++;else if(i[n]===t[1]&&(e--,e<0))return n;return-1}function ro(i,t,e,n){const r=t.href,a=t.title?Ke(t.title):null,o=i[1].replace(/\\([\[\]])/g,"$1");if(i[0].charAt(0)!=="!"){n.state.inLink=!0;const s={type:"link",raw:e,href:r,title:a,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,s}return{type:"image",raw:e,href:r,title:a,text:Ke(o)}}function ld(i,t){const e=i.match(/^(\s+)(?:```)/);if(e===null)return t;const n=e[1];return t.split(`
`).map(r=>{const a=r.match(/^\s+/);if(a===null)return r;const[o]=a;return o.length>=n.length?r.slice(n.length):r}).join(`
`)}class Ki{constructor(t){ve(this,"options");ve(this,"rules");ve(this,"lexer");this.options=t||Vt}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:xi(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=ld(n,e[3]||"");return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(/#$/.test(n)){const r=xi(n,"#");(this.options.pedantic||!r||/ $/.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=e[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);n=xi(n.replace(/^ *>[ \t]?/gm,""),`
`);const r=this.lexer.state.top;this.lexer.state.top=!0;const a=this.lexer.blockTokens(n);return this.lexer.state.top=r,{type:"blockquote",raw:e[0],tokens:a,text:n}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,a={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const o=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let s="",l="",u=!1;for(;t;){let c=!1;if(!(e=o.exec(t))||this.rules.block.hr.test(t))break;s=e[0],t=t.substring(s.length);let d=e[2].split(`
`,1)[0].replace(/^\t+/,E=>" ".repeat(3*E.length)),h=t.split(`
`,1)[0],f=0;this.options.pedantic?(f=2,l=d.trimStart()):(f=e[2].search(/[^ ]/),f=f>4?1:f,l=d.slice(f),f+=e[1].length);let b=!1;if(!d&&/^ *$/.test(h)&&(s+=h+`
`,t=t.substring(h.length+1),c=!0),!c){const E=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),y=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),v=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),_=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;t;){const D=t.split(`
`,1)[0];if(h=D,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),v.test(h)||_.test(h)||E.test(h)||y.test(t))break;if(h.search(/[^ ]/)>=f||!h.trim())l+=`
`+h.slice(f);else{if(b||d.search(/[^ ]/)>=4||v.test(d)||_.test(d)||y.test(d))break;l+=`
`+h}!b&&!h.trim()&&(b=!0),s+=D+`
`,t=t.substring(D.length+1),d=h.slice(f)}}a.loose||(u?a.loose=!0:/\n *\n *$/.test(s)&&(u=!0));let p=null,w;this.options.gfm&&(p=/^\[[ xX]\] /.exec(l),p&&(w=p[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),a.items.push({type:"list_item",raw:s,task:!!p,checked:w,loose:!1,text:l,tokens:[]}),a.raw+=s}a.items[a.items.length-1].raw=s.trimEnd(),a.items[a.items.length-1].text=l.trimEnd(),a.raw=a.raw.trimEnd();for(let c=0;c<a.items.length;c++)if(this.lexer.state.top=!1,a.items[c].tokens=this.lexer.blockTokens(a.items[c].text,[]),!a.loose){const d=a.items[c].tokens.filter(f=>f.type==="space"),h=d.length>0&&d.some(f=>/\n.*\n/.test(f.raw));a.loose=h}if(a.loose)for(let c=0;c<a.items.length;c++)a.items[c].loose=!0;return a}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(/\s+/g," "),r=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:a}}}table(t){const e=this.rules.block.table.exec(t);if(!e||!/[:|]/.test(e[2]))return;const n=io(e[1]),r=e[2].replace(/^\||\| *$/g,"").split("|"),a=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const s of r)/^ *-+: *$/.test(s)?o.align.push("right"):/^ *:-+: *$/.test(s)?o.align.push("center"):/^ *:-+ *$/.test(s)?o.align.push("left"):o.align.push(null);for(const s of n)o.header.push({text:s,tokens:this.lexer.inline(s)});for(const s of a)o.rows.push(io(s,o.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return o}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:Ke(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const o=xi(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{const o=sd(e[2],"()");if(o>-1){const l=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,l).trim(),e[3]=""}}let r=e[2],a="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],a=o[3])}else a=e[3]?e[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(n)?r=r.slice(1):r=r.slice(1,-1)),ro(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const r=(n[2]||n[1]).replace(/\s+/g," "),a=e[r.toLowerCase()];if(!a){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return ro(n,a,n[0],this.lexer)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const o=[...r[0]].length-1;let s,l,u=o,c=0;const d=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,e=e.slice(-1*t.length+o);(r=d.exec(e))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(l=[...s].length,r[3]||r[4]){u+=l;continue}else if((r[5]||r[6])&&o%3&&!((o+l)%3)){c+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+c);const h=[...r[0]][0].length,f=t.slice(0,o+r.index+h+l);if(Math.min(o,l)%2){const p=f.slice(1,-1);return{type:"em",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}const b=f.slice(2,-2);return{type:"strong",raw:f,text:b,tokens:this.lexer.inlineTokens(b)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(/\n/g," ");const r=/[^ ]/.test(n),a=/^ /.test(n)&&/ $/.test(n);return r&&a&&(n=n.substring(1,n.length-1)),n=Ke(n,!0),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=Ke(e[1]),r="mailto:"+n):(n=Ke(e[1]),r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let r,a;if(e[2]==="@")r=Ke(e[0]),a="mailto:"+r;else{let o;do o=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(o!==e[0]);r=Ke(e[0]),e[1]==="www."?a="http://"+e[0]:a=e[0]}return{type:"link",raw:e[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){let n;return this.lexer.state.inRawBlock?n=e[0]:n=Ke(e[0]),{type:"text",raw:e[0],text:n}}}}const ud=/^(?: *(?:\n|$))+/,cd=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,dd=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ii=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,hd=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ns=/(?:[*+-]|\d{1,9}[.)])/,Ls=ce(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ns).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),da=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,fd=/^[^\n]+/,ha=/(?!\s*\])(?:\\.|[^\[\]\\])+/,gd=ce(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ha).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),md=ce(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ns).getRegex(),Xi="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",fa=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,pd=ce("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",fa).replace("tag",Xi).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Fs=ce(da).replace("hr",ii).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Xi).getRegex(),bd=ce(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Fs).getRegex(),ga={blockquote:bd,code:cd,def:gd,fences:dd,heading:hd,hr:ii,html:pd,lheading:Ls,list:md,newline:ud,paragraph:Fs,table:Vn,text:fd},ao=ce("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ii).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Xi).getRegex(),vd={...ga,table:ao,paragraph:ce(da).replace("hr",ii).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ao).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Xi).getRegex()},yd={...ga,html:ce(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",fa).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Vn,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ce(da).replace("hr",ii).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ls).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ms=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,wd=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Rs=/^( {2,}|\\)\n(?!\s*$)/,_d=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ri="\\p{P}\\p{S}",kd=ce(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,ri).getRegex(),xd=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Sd=ce(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,ri).getRegex(),Ed=ce("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,ri).getRegex(),Cd=ce("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,ri).getRegex(),Td=ce(/\\([punct])/,"gu").replace(/punct/g,ri).getRegex(),Dd=ce(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ad=ce(fa).replace("(?:-->|$)","-->").getRegex(),Nd=ce("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ad).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Yi=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ld=ce(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Yi).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ps=ce(/^!?\[(label)\]\[(ref)\]/).replace("label",Yi).replace("ref",ha).getRegex(),Is=ce(/^!?\[(ref)\](?:\[\])?/).replace("ref",ha).getRegex(),Fd=ce("reflink|nolink(?!\\()","g").replace("reflink",Ps).replace("nolink",Is).getRegex(),ma={_backpedal:Vn,anyPunctuation:Td,autolink:Dd,blockSkip:xd,br:Rs,code:wd,del:Vn,emStrongLDelim:Sd,emStrongRDelimAst:Ed,emStrongRDelimUnd:Cd,escape:Ms,link:Ld,nolink:Is,punctuation:kd,reflink:Ps,reflinkSearch:Fd,tag:Nd,text:_d,url:Vn},Md={...ma,link:ce(/^!?\[(label)\]\((.*?)\)/).replace("label",Yi).getRegex(),reflink:ce(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Yi).getRegex()},Wr={...ma,escape:ce(Ms).replace("])","~|])").getRegex(),url:ce(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Rd={...Wr,br:ce(Rs).replace("{2,}","*").getRegex(),text:ce(Wr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Si={normal:ga,gfm:vd,pedantic:yd},Nn={normal:ma,gfm:Wr,breaks:Rd,pedantic:Md};class pt{constructor(t){ve(this,"tokens");ve(this,"options");ve(this,"state");ve(this,"tokenizer");ve(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Vt,this.options.tokenizer=this.options.tokenizer||new Ki,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:Si.normal,inline:Nn.normal};this.options.pedantic?(e.block=Si.pedantic,e.inline=Nn.pedantic):this.options.gfm&&(e.block=Si.gfm,this.options.breaks?e.inline=Nn.breaks:e.inline=Nn.gfm),this.tokenizer.rules=e}static get rules(){return{block:Si,inline:Nn}}static lex(t,e){return new pt(e).lex(t)}static lexInline(t,e){return new pt(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){const n=this.inlineQueue[e];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(s,l,u)=>l+"    ".repeat(u.length));let n,r,a,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(s=>(n=s.call({lexer:this},t,e))?(t=t.substring(n.raw.length),e.push(n),!0):!1))){if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length),n.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+n.raw,r.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),e.push(n);continue}if(a=t,this.options.extensions&&this.options.extensions.startBlock){let s=1/0;const l=t.slice(1);let u;this.options.extensions.startBlock.forEach(c=>{u=c.call({lexer:this},l),typeof u=="number"&&u>=0&&(s=Math.min(s,u))}),s<1/0&&s>=0&&(a=t.substring(0,s+1))}if(this.state.top&&(n=this.tokenizer.paragraph(a))){r=e[e.length-1],o&&r.type==="paragraph"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n),o=a.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&r.type==="text"?(r.raw+=`
`+n.raw,r.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):e.push(n);continue}if(t){const s="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let n,r,a,o=t,s,l,u;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)c.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,s.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(l||(u=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(c=>(n=c.call({lexer:this},t,e))?(t=t.substring(n.raw.length),e.push(n),!0):!1))){if(n=this.tokenizer.escape(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.tag(t)){t=t.substring(n.raw.length),r=e[e.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):e.push(n);continue}if(n=this.tokenizer.link(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(n.raw.length),r=e[e.length-1],r&&n.type==="text"&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):e.push(n);continue}if(n=this.tokenizer.emStrong(t,o,u)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.codespan(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.br(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.del(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.autolink(t)){t=t.substring(n.raw.length),e.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(t))){t=t.substring(n.raw.length),e.push(n);continue}if(a=t,this.options.extensions&&this.options.extensions.startInline){let c=1/0;const d=t.slice(1);let h;this.options.extensions.startInline.forEach(f=>{h=f.call({lexer:this},d),typeof h=="number"&&h>=0&&(c=Math.min(c,h))}),c<1/0&&c>=0&&(a=t.substring(0,c+1))}if(n=this.tokenizer.inlineText(a)){t=t.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(u=n.raw.slice(-1)),l=!0,r=e[e.length-1],r&&r.type==="text"?(r.raw+=n.raw,r.text+=n.text):e.push(n);continue}if(t){const c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return e}}class qi{constructor(t){ve(this,"options");this.options=t||Vt}code(t,e,n){var a;const r=(a=(e||"").match(/^\S*/))==null?void 0:a[0];return t=t.replace(/\n$/,"")+`
`,r?'<pre><code class="language-'+Ke(r)+'">'+(n?t:Ke(t,!0))+`</code></pre>
`:"<pre><code>"+(n?t:Ke(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,e){return t}heading(t,e,n){return`<h${e}>${t}</h${e}>
`}hr(){return`<hr>
`}list(t,e,n){const r=e?"ol":"ul",a=e&&n!==1?' start="'+n+'"':"";return"<"+r+a+`>
`+t+"</"+r+`>
`}listitem(t,e,n){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+e+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,e){const n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,e,n){const r=no(t);if(r===null)return n;t=r;let a='<a href="'+t+'"';return e&&(a+=' title="'+e+'"'),a+=">"+n+"</a>",a}image(t,e,n){const r=no(t);if(r===null)return n;t=r;let a=`<img src="${t}" alt="${n}"`;return e&&(a+=` title="${e}"`),a+=">",a}text(t){return t}}class pa{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,n){return""+n}image(t,e,n){return""+n}br(){return""}}class bt{constructor(t){ve(this,"options");ve(this,"renderer");ve(this,"textRenderer");this.options=t||Vt,this.options.renderer=this.options.renderer||new qi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new pa}static parse(t,e){return new bt(e).parse(t)}static parseInline(t,e){return new bt(e).parseInline(t)}parse(t,e=!0){let n="";for(let r=0;r<t.length;r++){const a=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const o=a,s=this.options.extensions.renderers[o.type].call({parser:this},o);if(s!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){n+=s||"";continue}}switch(a.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{const o=a;n+=this.renderer.heading(this.parseInline(o.tokens),o.depth,ad(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{const o=a;n+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{const o=a;let s="",l="";for(let c=0;c<o.header.length;c++)l+=this.renderer.tablecell(this.parseInline(o.header[c].tokens),{header:!0,align:o.align[c]});s+=this.renderer.tablerow(l);let u="";for(let c=0;c<o.rows.length;c++){const d=o.rows[c];l="";for(let h=0;h<d.length;h++)l+=this.renderer.tablecell(this.parseInline(d[h].tokens),{header:!1,align:o.align[h]});u+=this.renderer.tablerow(l)}n+=this.renderer.table(s,u);continue}case"blockquote":{const o=a,s=this.parse(o.tokens);n+=this.renderer.blockquote(s);continue}case"list":{const o=a,s=o.ordered,l=o.start,u=o.loose;let c="";for(let d=0;d<o.items.length;d++){const h=o.items[d],f=h.checked,b=h.task;let p="";if(h.task){const w=this.renderer.checkbox(!!f);u?h.tokens.length>0&&h.tokens[0].type==="paragraph"?(h.tokens[0].text=w+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&h.tokens[0].tokens[0].type==="text"&&(h.tokens[0].tokens[0].text=w+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:w+" "}):p+=w+" "}p+=this.parse(h.tokens,u),c+=this.renderer.listitem(p,b,!!f)}n+=this.renderer.list(c,s,l);continue}case"html":{const o=a;n+=this.renderer.html(o.text,o.block);continue}case"paragraph":{const o=a;n+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=a,s=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<t.length&&t[r+1].type==="text";)o=t[++r],s+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);n+=e?this.renderer.paragraph(s):s;continue}default:{const o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}parseInline(t,e){e=e||this.renderer;let n="";for(let r=0;r<t.length;r++){const a=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){n+=o||"";continue}}switch(a.type){case"escape":{const o=a;n+=e.text(o.text);break}case"html":{const o=a;n+=e.html(o.text);break}case"link":{const o=a;n+=e.link(o.href,o.title,this.parseInline(o.tokens,e));break}case"image":{const o=a;n+=e.image(o.href,o.title,o.text);break}case"strong":{const o=a;n+=e.strong(this.parseInline(o.tokens,e));break}case"em":{const o=a;n+=e.em(this.parseInline(o.tokens,e));break}case"codespan":{const o=a;n+=e.codespan(o.text);break}case"br":{n+=e.br();break}case"del":{const o=a;n+=e.del(this.parseInline(o.tokens,e));break}case"text":{const o=a;n+=e.text(o.text);break}default:{const o='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return n}}class Kn{constructor(t){ve(this,"options");this.options=t||Vt}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}ve(Kn,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Wt,jr,Os;class Pd{constructor(...t){La(this,Wt);ve(this,"defaults",ca());ve(this,"options",this.setOptions);ve(this,"parse",pi(this,Wt,jr).call(this,pt.lex,bt.parse));ve(this,"parseInline",pi(this,Wt,jr).call(this,pt.lexInline,bt.parseInline));ve(this,"Parser",bt);ve(this,"Renderer",qi);ve(this,"TextRenderer",pa);ve(this,"Lexer",pt);ve(this,"Tokenizer",Ki);ve(this,"Hooks",Kn);this.use(...t)}walkTokens(t,e){var r,a;let n=[];for(const o of t)switch(n=n.concat(e.call(this,o)),o.type){case"table":{const s=o;for(const l of s.header)n=n.concat(this.walkTokens(l.tokens,e));for(const l of s.rows)for(const u of l)n=n.concat(this.walkTokens(u.tokens,e));break}case"list":{const s=o;n=n.concat(this.walkTokens(s.items,e));break}default:{const s=o;(a=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&a[s.type]?this.defaults.extensions.childTokens[s.type].forEach(l=>{const u=s[l].flat(1/0);n=n.concat(this.walkTokens(u,e))}):s.tokens&&(n=n.concat(this.walkTokens(s.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const o=e.renderers[a.name];o?e.renderers[a.name]=function(...s){let l=a.renderer.apply(this,s);return l===!1&&(l=o.apply(this,s)),l}:e.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=e[a.level];o?o.unshift(a.tokenizer):e[a.level]=[a.tokenizer],a.start&&(a.level==="block"?e.startBlock?e.startBlock.push(a.start):e.startBlock=[a.start]:a.level==="inline"&&(e.startInline?e.startInline.push(a.start):e.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(e.childTokens[a.name]=a.childTokens)}),r.extensions=e),n.renderer){const a=this.defaults.renderer||new qi(this.defaults);for(const o in n.renderer){if(!(o in a))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;const s=o,l=n.renderer[s],u=a[s];a[s]=(...c)=>{let d=l.apply(a,c);return d===!1&&(d=u.apply(a,c)),d||""}}r.renderer=a}if(n.tokenizer){const a=this.defaults.tokenizer||new Ki(this.defaults);for(const o in n.tokenizer){if(!(o in a))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const s=o,l=n.tokenizer[s],u=a[s];a[s]=(...c)=>{let d=l.apply(a,c);return d===!1&&(d=u.apply(a,c)),d}}r.tokenizer=a}if(n.hooks){const a=this.defaults.hooks||new Kn;for(const o in n.hooks){if(!(o in a))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const s=o,l=n.hooks[s],u=a[s];Kn.passThroughHooks.has(o)?a[s]=c=>{if(this.defaults.async)return Promise.resolve(l.call(a,c)).then(h=>u.call(a,h));const d=l.call(a,c);return u.call(a,d)}:a[s]=(...c)=>{let d=l.apply(a,c);return d===!1&&(d=u.apply(a,c)),d}}r.hooks=a}if(n.walkTokens){const a=this.defaults.walkTokens,o=n.walkTokens;r.walkTokens=function(s){let l=[];return l.push(o.call(this,s)),a&&(l=l.concat(a.call(this,s))),l}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return pt.lex(t,e??this.defaults)}parser(t,e){return bt.parse(t,e??this.defaults)}}Wt=new WeakSet,jr=function(t,e){return(n,r)=>{const a={...r},o={...this.defaults,...a};this.defaults.async===!0&&a.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const s=pi(this,Wt,Os).call(this,!!o.silent,!!o.async);if(typeof n>"u"||n===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(n):n).then(l=>t(l,o)).then(l=>o.hooks?o.hooks.processAllTokens(l):l).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>e(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(s);try{o.hooks&&(n=o.hooks.preprocess(n));let l=t(n,o);o.hooks&&(l=o.hooks.processAllTokens(l)),o.walkTokens&&this.walkTokens(l,o.walkTokens);let u=e(l,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(l){return s(l)}}},Os=function(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+Ke(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}};const Ut=new Pd;function ae(i,t){return Ut.parse(i,t)}ae.options=ae.setOptions=function(i){return Ut.setOptions(i),ae.defaults=Ut.defaults,Ts(ae.defaults),ae};ae.getDefaults=ca;ae.defaults=Vt;ae.use=function(...i){return Ut.use(...i),ae.defaults=Ut.defaults,Ts(ae.defaults),ae};ae.walkTokens=function(i,t){return Ut.walkTokens(i,t)};ae.parseInline=Ut.parseInline;ae.Parser=bt;ae.parser=bt.parse;ae.Renderer=qi;ae.TextRenderer=pa;ae.Lexer=pt;ae.lexer=pt.lex;ae.Tokenizer=Ki;ae.Hooks=Kn;ae.parse=ae;ae.options;ae.setOptions;ae.use;ae.walkTokens;ae.parseInline;bt.parse;pt.lex;const ba="0.9.2",Vr=`pro-tour-shell-${ba}`,Gs=`pro-tour-data-${ba}`,$s=Wd(self.__PRO_TOUR_BASE_PATH__??"/"),Id=Hd($s),zs=self.__PRO_TOUR_APP_SHELL__??Id,Od=new Set(zs),Gd=Ft($s,"data/pro-tour-schedule.js"),$d=typeof self<"u"&&typeof self.skipWaiting=="function";$d&&(self.addEventListener("install",i=>{i.waitUntil((async()=>{await(await caches.open(Vr)).addAll(zs),self.skipWaiting()})())}),self.addEventListener("activate",i=>{i.waitUntil((async()=>{const t=await caches.keys();await Promise.all(t.map(e=>e===Vr||e===Gs||!e.startsWith("pro-tour-shell-")&&!e.startsWith("pro-tour-data-")?Promise.resolve():caches.delete(e))),await self.clients.claim()})())}),self.addEventListener("fetch",i=>{const{request:t}=i;if(t.method!=="GET")return;const e=new URL(t.url);if(e.origin===self.location.origin){if(zd(e)){i.respondWith(Ud(t));return}(t.mode==="navigate"||Od.has(e.pathname))&&i.respondWith(Bd(t))}}));function zd(i){return i.pathname===Gd}async function Bd(i){const t=await caches.open(Vr),e=await t.match(i);if(e)return e;const n=await fetch(i);return n&&n.ok&&t.put(i,n.clone()),n}async function Ud(i){const t=await caches.open(Gs);try{const e=await fetch(i);return e&&e.ok&&await t.put(i,e.clone()),e}catch(e){const n=await t.match(i);if(n)return n;throw e}}function Hd(i){return[Ft(i,""),Ft(i,"index.html"),Ft(i,"style.css"),Ft(i,"main.js"),Ft(i,"manifest.webmanifest"),Ft(i,"icons/icon-192.svg"),Ft(i,"icons/icon-512.svg")]}function Ft(i,t){const e=typeof t=="string"?t:"",n=e.startsWith("/")?e.slice(1):e;return new URL(n,new URL(i,self.location.origin)).pathname}function Wd(i){if(!i)return"/";const t=i.startsWith("/")?i:`/${i}`;return t.endsWith("/")?t:`${t}/`}const jd=`# DE

## Mit dieser App kannst du eine Pro-Football-Tour in den USA planen {#help-app-purpose}

Die Grundidee dabei ist: Du gibst ein **Zeitfenster** an, in dem du dich in den USA aufhalten kannst.
Beispielsweise Ich knnte den ganzen Oktober.
Anschlieend whlst du deine tatschliche **Reisedauer** aus, beispielsweise 14 Tage.
Falls du mchtest, kannst du auch auswhlen, ob dein **Starttag** z. B. ein Sonntag sein soll, um stressfrei am Freitag oder Samstag anzureisen.

Ziel ist es, Touren zu ermitteln, mit der man mit dem Auto mglichst viele Spiele mit mglichst wenig Fahrtzeit besuchen kann.
Du kannst aber auch **Flge erlauben**, um grere Entfernungen schneller zu berbrcken.

Die App analysiert alle Spiele innerhalb des von dir angegebenen Zeitfensters.
Sie berechnet sie besten Touren mit der von dir angegebenen Reisedauer, wobei sie die Fahrtzeiten zwischen den Stadien bercksichtigt.

Optional kannst du, abhngig von deinen persnlichen Vorlieben, die Gewichtung der [{$dialog.teamPreferences.title}](dialog:open-team-preferences), [{$dialog.cityPreferences.title}](dialog:open-city-preferences) oder [{$dialog.routingParameters.title}](dialog:open-routing-parameters) anpassen.

Als Ergebnis erhltst du eine Liste mglicher Touren, die genau zu deinen Vorlieben passen.

## Woher kommen die Daten? {#help-data-sources}

Diese App verwendet ausschlielich ffentlich verfgbare Daten, insbesondere den offiziellen Spielplan, Spielorte und Kickoff-Zeiten.
Zustzlich werden Entfernungen und Fahrzeiten ber frei zugngliche Geodatenquellen berechnet.
Alle Daten werden lokal im Browser verarbeitet, es findet keine Weitergabe an Dritte statt.
Die App speichert keine personenbezogenen Daten.

## Wie funktioniert die Bewertung eines Spiels? {#help-topic-game-rating}

Ein Spiel auf der Tour wird wie folgt bewertet:

**[Bewertung Reisezeit vom vorherigen Ort]  [Bewertung Stadion]  [Gewichtung Heimteam]  [Gewichtung Auswrtsteam]  100**

Wurden keine speziellen Einstellungen vorgenommen, ergibt sich dadurch ein Wert zwischen 1 und 100 fr ein Spiel.

- Per Vorgabe sind **[Gewichtung Heimteam]** und **[Gewichtung Auswrtsteam]** jeweils **1**.
  - Werden die *[{$dialog.teamPreferences.title}](dialog:open-team-preferences)* nicht verndert, wirken sich die Teams also nicht auf die Bewertung des Spiels aus.
- Die **[Bewertung Stadion]** setzt sich zusammen aus der *[Gewichtung des Stadions](dialog:open-city-preferences)* (per Vorgabe **1**), eventuell multipliziert mit dem Parameter *{$label.routing.revisitMultiplierFloor}* (per Vorgabe **0,1**).
  - Dadurch wird erreicht, dass bereits besuchte Stadien auf derselben Tour sehr schlecht bewertet werden. In der Regel tauchen Stadien daher nicht mehrfach in einer Tour auf.
- Die **[Bewertung der Reisezeit vom vorherigen Ort]** wird abhngig von echten Fahrtzeiten zwischen den einzelnen Stadien vorgenommen.
  - Dabei erhlt die krzeste mgliche Fahrtzeit den Wert **1** und die lngste mgliche Fahrtzeit den Wert **0,1**. Alle anderen Fahrtzeiten werden in dieser Spanne proportional eingeordnet.
  - Sind **Flge** zugelassen, wird die Bewertung zustzlich mit dem *{$label.routing.travelMultiplierCeilingFlight}* multipliziert, was per Vorgabe zu einer Abwertung von Flgen fhrt.
  - Fun Fact: Die krzeste Fahrtzeit zwischen zwei Stadien ist Baltimore nach Washington (ca. 1 Stunde), die lngste ist Miami nach Seattle (ca. 53 Stunden).

Wurden die Gewichtungen der *[{$dialog.teamPreferences.title}](dialog:open-team-preferences)*, der *[{$dialog.cityPreferences.title}](dialog:open-city-preferences)* oder der *[{$dialog.routingParameters.title}](dialog:open-routing-parameters)* verndert, knnen auch Werte ber 100 pro Spiel auftreten.

## Der Dialog ***{$dialog.favorites.title}*** {#help-dialog-favorites}

Hier die Beschreibung des Dialogs.

## Der Dialog ***{$dialog.teamPreferences.title}*** {#help-dialog-team-preferences}

Der Dialog {$dialog.teamPreferences.title} hilft dir dabei festzulegen, wie wichtig dir die einzelnen FootballTeams bei der Routenplanung sind.

Du siehst alle Teams mit Logo, Namen, Stadion und Ort in einer bersichtlichen Liste.

Fr jedes Team kannst du eine Gewichtung einstellen:
Hhere Werte bedeuten, dass dieses Team bei der Planung strker bevorzugt wird, niedrigere Werte machen es weniger wichtig.

Beachte, das fr die *[Bewertung eines Spiels](help:help-topic-game-rating)* beide Teams einbezogen werden, also Heim- und Auswrtsteam.

## Der Dialog ***{$dialog.cityPreferences.title}*** {#help-dialog-city-preferences}

Hier die Beschreibung des Dialogs.

## Der Dialog ***{$dialog.routingParameters.title}*** {#help-dialog-routing-parameters}

Hier die Beschreibung des Dialogs.

## Der Dialog ***{$dialog.routingGraph.title}*** {#help-dialog-routing-graph}

Hier die Beschreibung des Dialogs.

## Impressum und Datenschutz {#help-legal}

### Impressum

**Angaben gem  5 TMG /  18 MStV**

<div class="help-legal">
<div class="hl hl1"><span>Lorem</span><span>ipsum</span><span>dolor</span></div>
<div class="hl hl2"><span>sit</span><span>amet</span><span>ligula.</span></div>
<div class="hl hl3"><span>Aenean</span><span>commodo</span><span>eget</span></div>
<div class="hl hl4"><span>sociis</span><span>natoque</span><span>penatibus.</span></div>
<div class="hl hl5"><span></span><span></span><span></span></div>
</div>

### Datenschutzerklrung

Diese Anwendung verarbeitet personenbezogene Daten nur im technisch notwendigen Umfang.
Beim Aufruf der Anwendung werden serverseitig automatisch Daten wie die IP-Adresse sowie Datum und Uhrzeit des Zugriffs erfasst. Diese Daten dienen ausschlielich der Bereitstellung und Sicherheit des Dienstes und werden nicht zu Analyse- oder Marketingzwecken genutzt.
Die Anwendung speichert lokal Daten auf Ihrem Gert (z. B. Einstellungen). Diese lokal gespeicherten Daten werden nicht an den Betreiber bermittelt.

Es werden keine Cookies, Tracking-Tools oder externen Dienste eingesetzt.

**Bei Fragen zum Datenschutz:**

<div class="help-legal">
<div class="hl hl5"><span></span><span></span><span></span></div>
</div>

## {#footer-marker}

<div class="footer-text-details">
<span>Pro Football Tour Planner</span>
<span> 2025 A. Kandzior</span>
<div>Version {!APP_VERSION}</div>
</div>

[Impressum](help:help-legal)

# EN

## With this app, you can plan your pro football tour in the USA {#help-app-purpose}

The basic idea is this: you specify a **time window** during which you can stay in the USA.
For example, I could do the whole of October.
Then you select your actual **tour duration**, for example, 14 days.
If you want, you can also choose whether your **start day** should be a Sunday, so that you can arrive on Friday or Saturday without any stress.

The aim is to find tours that allow you to visit as many games as possible by car with as little travel time as possible.
However, you can also **allow flights** to cover longer distances more quickly.

The app analyzes all games within your specified time window.
Based on the travel duration you specify, it calculates the best tours, taking into account travel times between stadiums.

Optionally, depending on your personal preferences, you can adjust the weighting of the [{$dialog.teamPreferences.title}](dialog:open-team-preferences), [{$dialog.cityPreferences.title}](dialog:open-city-preferences), or [{$dialog.routingParameters.title}](dialog:open-routing-parameters).

As a result, you will receive a list of possible tours that exactly match your preferences.

## Where does the data come from? {#help-data-sources}

This app uses only publicly available data, including the official schedule, game locations, and kickoff times.
Distances and travel times are calculated using freely accessible geodata sources.
All data is processed locally in your browser, and nothing is shared with third parties.
The app does not store any personal data.

## The dialog ***{$dialog.favorites.title}*** {#help-dialog-favorites}

Description of the dialog.

## The dialog ***{$dialog.teamPreferences.title}*** {#help-dialog-team-preferences}

Description of the dialog.

## The dialog ***{$dialog.cityPreferences.title}*** {#help-dialog-city-preferences}

Description of the dialog.

## The dialog ***{$dialog.routingParameters.title}*** {#help-dialog-routing-parameters}

Description of the dialog.

## The dialog ***{$dialog.routingGraph.title}*** {#help-dialog-routing-graph}

Description of the dialog.

## Imprint and Privacy Policy {#help-legal}

### Imprint

**Information pursuant to  5 TMG /  18 MStV**

<div class="help-legal">
<div class="hl hl1"><span>Lorem</span><span>ipsum</span><span>dolor</span></div>
<div class="hl hl2"><span>sit</span><span>amet</span><span>ligula.</span></div>
<div class="hl hl3"><span>Aenean</span><span>commodo</span><span>eget</span></div>
<div class="hl hl4"><span>sociis</span><span>natoque</span><span>penatibus.</span></div>
<div class="hl hl5"><span></span><span></span><span></span></div>
</div>

### Privacy Policy

This application processes personal data only to the extent that is technically necessary.
When the application is accessed, server-side data such as the IP address and the date and time of access is automatically collected. This data is used solely for the provision and security of the service and is not used for analysis or marketing purposes.
The application stores data locally on your device (e.g., settings). This locally stored data is not transmitted to the operator.

No cookies, tracking tools, or external services are used.

**If you have any questions regarding data protection:**

<div class="help-legal">
<div class="hl hl5"><span></span><span></span><span></span></div>
</div>

## {#footer-marker}


<div class="footer-text-details">
<span>Pro Football Tour Planner</span>
<span> 2025 A. Kandzior</span>
</div>

[Imprint](help:help-legal)`,Bs=new Map,Kr=new Map;let oo=!1,et=null,Mi=null,Yn=null,Ri=null;const so="help-dialog";qd("APP_VERSION",ba);function Vd({dialogKit:i,onDialogClose:t}){Yn=()=>{var r;return((r=i.focusDialog)==null?void 0:r.call(i,so))??!1};function e({topicId:r}={}){if(et){if(!r){Yn();return}if(lo(r))return;const s=et.close;et=null,s==null||s()}const a=Hs(ht());let o=null;i.open({title:L("dialog.help.title"),size:"large",id:so,build({body:s,actions:l,close:u}){o=u;const c=ih(a,{initiallyOpenId:r});s.appendChild(c),et={content:c,close:u},Qi();const d=document.createElement("button");d.type="button",d.classList.add("btn","btn-text","btn-primary"),d.textContent=L("button.close"),d.addEventListener("click",u),l.appendChild(d);const h=c.querySelector("summary")??d;return r&&requestAnimationFrame(()=>{Pi(r)}),{focusTarget:h}},onClose(){(et==null?void 0:et.close)===o&&(et=null),t==null||t()}})}function n(r){if(!r){e();return}lo(r)||e({topicId:r})}return Mi=n,{openHelp:e,openHelpTopic:n}}function Kd(i,{language:t}={}){if(!i)return null;const e=th(i,t??ht());if(!e)return null;const n=Ws(e);return Qi(),n}function Yd(i,{language:t}={}){if(!i)return null;const e=nh(i,t??ht());if(!e)return null;const n=document.createElement("div");return n.className="help-content-block",n.dataset.helpContentBlockId=e.id,n.innerHTML=e.html??"",Qi(),n}function Ln(i,t){i&&(typeof t=="function"?(Kr.set(i,t),Qi()):Kr.delete(i))}function qd(i,t){{Bs.set(i,()=>t),Zd();return}}function Us(){return Ri||(Ri=Jd(jd)),Ri}function Zd(){Ri=null}function Jd(i=""){const t={},e=/^#\s+(?!#)(.+)$/gm;let n,r=null,a=0;const o=s=>{if(!r)return;const l=i.slice(a,s).trim(),u=Ht(r);t[u]=Xd(l,u)};for(;(n=e.exec(i))!==null;)r&&o(n.index),r=Ht(n[1]),a=e.lastIndex;return o(i.length),t}function Xd(i="",t){const e=/^##\s+(?!#)(.*)$/gm;let n,r=null,a=0;const o=[],s={},l=u=>{if(!r)return;const c=i.slice(a,u).trim(),d=c.length>0?ah(c,t):"";if(r.type==="content-block"){r.id&&(s[r.id]={id:r.id,html:d});return}o.push({title:r.title,titleHtml:r.titleHtml??r.title,id:r.id??null,html:d})};for(;(n=e.exec(i))!==null;)l(n.index),r=Qd(n[1]??"",t),a=e.lastIndex;return l(i.length),{sections:o,blocks:s}}function Qd(i,t){const e=(i??"").trim(),n=e.match(/\{#([A-Za-z0-9_-]+)\}\s*$/);let r=null,a=e;if(n&&(r=n[1],a=e.slice(0,e.length-n[0].length).trim()),!a&&r)return{type:"content-block",id:r};const o=rh(a,t);return{type:"section",id:r,title:o.text,titleHtml:o.html}}function Ht(i=""){const t=i.trim().toLowerCase();return t.startsWith("de")?"de":t.startsWith("en")?"en":t.length>=2?t.slice(0,2):"en"}function Hs(i){return eh(i).sections}function eh(i){const t=Us(),e=Ht(i??"en"),n=t[e];return n||(t.en??{sections:[],blocks:{}})}function th(i,t){return Hs(t).find(n=>n.id===i)??null}function nh(i,t){var a,o;if(!i)return null;const e=Us(),n=Ht(t??"en"),r=(a=e[n])==null?void 0:a.blocks;if(r!=null&&r[i])return r[i];if(n!=="en"){const s=(o=e.en)==null?void 0:o.blocks;if(s!=null&&s[i])return s[i]}return null}function Ws(i,{open:t=!1}={}){const e=document.createElement("details");e.className="help-entry",i.id&&(e.id=i.id,e.dataset.helpTopicId=i.id),e.open=t;const n=document.createElement("summary");i.titleHtml?n.innerHTML=i.titleHtml:n.textContent=i.title??"";const r=document.createElement("div");return r.className="help-entry-body",r.innerHTML=i.html,e.append(n,r),e}function ih(i=[],{initiallyOpenId:t}={}){const e=document.createElement("div");if(e.className="help-dialog-content",i.length===0){const r=document.createElement("p");return r.textContent=L("message.help.empty"),e.appendChild(r),e}const n=t?i.some(r=>r.id===t):!1;return i.forEach((r,a)=>{const o=n?r.id===t:a===0;e.appendChild(Ws(r,{open:o}))}),e}function rh(i,t){if(!i)return{text:"",html:""};const e=Ht(t),n=js(i,e);if(!n)return{text:"",html:""};const r=Vs(),o=(ae.parseInline(n,{renderer:r})??"")||$n(n);return{text:ch(o),html:o}}function ah(i,t){const e=Ht(t),n=js(i,e),r=Vs();return ae.parse(n,{renderer:r})}function oh(i,t){if(!i)return i;const e=/\{\$([a-zA-Z0-9_.-]+)\}/g;return i.replace(e,(n,r)=>{const a=uh(t,r);return typeof a=="string"?a:n})}function js(i,t){if(!i)return i;const e=oh(i,t);return sh(e)}function sh(i){if(!i)return i;const t=/\{\!([^}]+)\}/g;return i.replace(t,(e,n)=>{const r=lh(n==null?void 0:n.trim());return typeof r=="string"?r:e})}function lh(i){if(!i)return null;const t=Bs.get(i);if(typeof t=="function"){const e=t();return typeof e=="string"?e:null}return typeof t=="string"?t:null}function uh(i,t){var r;if(!t)return null;const n=[Ht(i??"en"),"en"];for(const a of n){const o=(r=ia[a])==null?void 0:r.translation;if(!o)continue;const s=o[t];if(typeof s=="string")return s;const l=t.split(".").reduce((u,c)=>u?u[c]:void 0,o);if(typeof l=="string")return l}return null}function Vs(){const i=new ae.Renderer,t=i.link?i.link.bind(i):null;return i.link=function(n,r,a){if(typeof n=="string"&&n.startsWith("dialog:")){const o=n.slice(7).trim();if(o.length>0){const s=r?` title="${$n(r)}"`:"";return`<a href="#" data-help-dialog-action="${$n(o)}"${s}>${a}</a>`}}if(typeof n=="string"&&n.startsWith("help:")){const o=n.slice(5).trim();if(o.length>0){const s=r?` title="${$n(r)}"`:"";return`<a href="#" data-help-topic-link="${$n(o)}"${s}>${a}</a>`}}return t?t(n,r,a):ae.Renderer.prototype.link.call(this,n,r,a)},i}function $n(i){return String(i).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function ch(i){if(typeof i!="string"||i.length===0)return"";if(typeof document<"u"){const t=document.createElement("div");return t.innerHTML=i,t.textContent??""}return i.replace(/<[^>]*>/g,"")}function Pi(i){if(!i||!(et!=null&&et.content))return!1;const t=`[data-help-topic-id="${dh(i)}"]`,e=et.content.querySelector(t);return e?(e.open=!0,hh(e),!0):!1}function lo(i){return Pi(i)?(Yn==null||Yn(),typeof requestAnimationFrame=="function"?requestAnimationFrame(()=>{Pi(i)}):Pi(i),!0):!1}function dh(i){return typeof CSS<"u"&&typeof CSS.escape=="function"?CSS.escape(i):String(i).replace(/["\\]/g,"\\$&")}function hh(i){if(!i)return;const t=i.closest(".modal-body");if(t){const e=t.getBoundingClientRect(),a=i.getBoundingClientRect().top-e.top+t.scrollTop-8,o=Math.max(0,Math.min(a,t.scrollHeight));if(typeof t.scrollTo=="function")try{t.scrollTo({top:o,behavior:"smooth"});return}catch{t.scrollTop=o;return}t.scrollTop=o;return}if(typeof i.scrollIntoView=="function")try{i.scrollIntoView({block:"start",behavior:"smooth"})}catch{try{i.scrollIntoView(!0)}catch{}}}function Qi(){oo||typeof document>"u"||(document.addEventListener("click",i=>{const t=i.target instanceof Element?i.target.closest("[data-help-dialog-action], [data-help-topic-link]"):null;if(!t)return;const e=t.getAttribute("data-help-dialog-action"),n=t.getAttribute("data-help-topic-link");if(!(!e&&!n)){if(i.preventDefault(),e){const r=Kr.get(e);r==null||r()}n&&(Mi==null||Mi(n))}},!0),oo=!0)}function fh(i,t){if(typeof i!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var n=e.call(i,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function qn(i){var t=fh(i,"string");return typeof t=="symbol"?t:t+""}function Ge(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function uo(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,qn(n.key),n)}}function $e(i,t,e){return t&&uo(i.prototype,t),e&&uo(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function vn(i){return vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vn(i)}function Ks(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ks=function(){return!!i})()}function gh(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function mh(i,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gh(i)}function nt(i,t,e){return t=vn(t),mh(i,Ks()?Reflect.construct(t,e||[],vn(i).constructor):t.apply(i,e))}function Yr(i,t){return Yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Yr(i,t)}function it(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&Yr(i,t)}function ph(i){if(Array.isArray(i))return i}function bh(i,t){var e=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var n,r,a,o,s=[],l=!0,u=!1;try{if(a=(e=e.call(i)).next,t===0){if(Object(e)!==e)return;l=!1}else for(;!(l=(n=a.call(e)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}function qr(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=Array(t);e<t;e++)n[e]=i[e];return n}function Ys(i,t){if(i){if(typeof i=="string")return qr(i,t);var e={}.toString.call(i).slice(8,-1);return e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set"?Array.from(i):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?qr(i,t):void 0}}function vh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yn(i,t){return ph(i)||bh(i,t)||Ys(i,t)||vh()}var _r={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},qs=new Int8Array(4),Ii=new Int32Array(qs.buffer,0,1),Zs=new Float32Array(qs.buffer,0,1),yh=/^\s*rgba?\s*\(/,wh=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function _h(i){var t=0,e=0,n=0,r=1;if(i[0]==="#")i.length===4?(t=parseInt(i.charAt(1)+i.charAt(1),16),e=parseInt(i.charAt(2)+i.charAt(2),16),n=parseInt(i.charAt(3)+i.charAt(3),16)):(t=parseInt(i.charAt(1)+i.charAt(2),16),e=parseInt(i.charAt(3)+i.charAt(4),16),n=parseInt(i.charAt(5)+i.charAt(6),16)),i.length===9&&(r=parseInt(i.charAt(7)+i.charAt(8),16)/255);else if(yh.test(i)){var a=i.match(wh);a&&(t=+a[1],e=+a[2],n=+a[3],a[4]&&(r=+a[4]))}return{r:t,g:e,b:n,a:r}}var pn={};for(var Ei in _r)pn[Ei]=Kt(_r[Ei]),pn[_r[Ei]]=pn[Ei];function Js(i,t,e,n,r){return Ii[0]=n<<24|e<<16|t<<8|i,Ii[0]=Ii[0]&4278190079,Zs[0]}function Kt(i){if(i=i.toLowerCase(),typeof pn[i]<"u")return pn[i];var t=_h(i),e=t.r,n=t.g,r=t.b,a=t.a;a=a*255|0;var o=Js(e,n,r,a);return pn[i]=o,o}function kh(i,t){Zs[0]=Kt(i);var e=Ii[0],n=e&255,r=e>>8&255,a=e>>16&255,o=e>>24&255;return[n,r,a,o]}var kr={};function Xs(i){if(typeof kr[i]<"u")return kr[i];var t=(i&16711680)>>>16,e=(i&65280)>>>8,n=i&255,r=255,a=Js(t,e,n,r);return kr[i]=a,a}function co(i,t,e,n){return e+(t<<8)+(i<<16)}function ho(i,t,e,n,r,a){var o=Math.floor(e/a*r),s=Math.floor(i.drawingBufferHeight/a-n/a*r),l=new Uint8Array(4);i.bindFramebuffer(i.FRAMEBUFFER,t),i.readPixels(o,s,1,1,i.RGBA,i.UNSIGNED_BYTE,l);var u=yn(l,4),c=u[0],d=u[1],h=u[2],f=u[3];return[c,d,h,f]}function R(i,t,e){return(t=qn(t))in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function fo(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,n)}return e}function q(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?fo(Object(e),!0).forEach(function(n){R(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):fo(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function xh(i,t){for(;!{}.hasOwnProperty.call(i,t)&&(i=vn(i))!==null;);return i}function Zr(){return Zr=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,t,e){var n=xh(i,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(arguments.length<3?i:e):r.value}},Zr.apply(null,arguments)}function Qs(i,t,e,n){var r=Zr(vn(i.prototype),t,e);return typeof r=="function"?function(a){return r.apply(e,a)}:r}function Sh(i){return i.normalized?1:i.size}function xr(i){var t=0;return i.forEach(function(e){return t+=Sh(e)}),t}function el(i,t,e){var n=i==="VERTEX"?t.VERTEX_SHADER:t.FRAGMENT_SHADER,r=t.createShader(n);if(r===null)throw new Error("loadShader: error while creating the shader");t.shaderSource(r,e),t.compileShader(r);var a=t.getShaderParameter(r,t.COMPILE_STATUS);if(!a){var o=t.getShaderInfoLog(r);throw t.deleteShader(r),new Error(`loadShader: error while compiling the shader:
`.concat(o,`
`).concat(e))}return r}function Eh(i,t){return el("VERTEX",i,t)}function Ch(i,t){return el("FRAGMENT",i,t)}function Th(i,t){var e=i.createProgram();if(e===null)throw new Error("loadProgram: error while creating the program.");var n,r;for(n=0,r=t.length;n<r;n++)i.attachShader(e,t[n]);i.linkProgram(e);var a=i.getProgramParameter(e,i.LINK_STATUS);if(!a)throw i.deleteProgram(e),new Error("loadProgram: error while linking the program.");return e}function go(i){var t=i.gl,e=i.buffer,n=i.program,r=i.vertexShader,a=i.fragmentShader;t.deleteShader(r),t.deleteShader(a),t.deleteProgram(n),t.deleteBuffer(e)}function mo(i){return i%1===0?i.toFixed(1):i.toString()}var po=`#define PICKING_MODE
`,Dh=R(R(R(R(R(R(R(R({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),tl=function(){function i(t,e,n){Ge(this,i),R(this,"array",new Float32Array),R(this,"constantArray",new Float32Array),R(this,"capacity",0),R(this,"verticesCount",0);var r=this.getDefinition();if(this.VERTICES=r.VERTICES,this.VERTEX_SHADER_SOURCE=r.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=r.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=r.UNIFORMS,this.ATTRIBUTES=r.ATTRIBUTES,this.METHOD=r.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in r?r.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in r?r.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in r,this.ATTRIBUTES_ITEMS_COUNT=xr(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=n,this.normalProgram=this.getProgramInfo("normal",t,r.VERTEX_SHADER_SOURCE,r.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=e?this.getProgramInfo("pick",t,po+r.VERTEX_SHADER_SOURCE,po+r.FRAGMENT_SHADER_SOURCE,e):null,this.isInstanced){var a=xr(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*a);for(var o=0;o<this.CONSTANT_DATA.length;o++){var s=this.CONSTANT_DATA[o];if(s.length!==a)throw new Error("Program: error while getting constant data (one vector has ".concat(s.length," items instead of ").concat(a,")"));for(var l=0;l<s.length;l++)this.constantArray[o*a+l]=s[l]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return $e(i,[{key:"kill",value:function(){go(this.normalProgram),this.pickProgram&&(go(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(e,n,r,a,o){var s=this.getDefinition(),l=n.createBuffer();if(l===null)throw new Error("Program: error while creating the WebGL buffer.");var u=Eh(n,r),c=Ch(n,a),d=Th(n,[u,c]),h={};s.UNIFORMS.forEach(function(p){var w=n.getUniformLocation(d,p);w&&(h[p]=w)});var f={};s.ATTRIBUTES.forEach(function(p){f[p.name]=n.getAttribLocation(d,p.name)});var b;if("CONSTANT_ATTRIBUTES"in s&&(s.CONSTANT_ATTRIBUTES.forEach(function(p){f[p.name]=n.getAttribLocation(d,p.name)}),b=n.createBuffer(),b===null))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:e,program:d,gl:n,frameBuffer:o,buffer:l,constantBuffer:b||{},uniformLocations:h,attributeLocations:f,isPicking:e==="pick",vertexShader:u,fragmentShader:c}}},{key:"bindProgram",value:function(e){var n=this,r=0,a=e.gl,o=e.buffer;this.isInstanced?(a.bindBuffer(a.ARRAY_BUFFER,e.constantBuffer),r=0,this.CONSTANT_ATTRIBUTES.forEach(function(s){return r+=n.bindAttribute(s,e,r,!1)}),a.bufferData(a.ARRAY_BUFFER,this.constantArray,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,e.buffer),r=0,this.ATTRIBUTES.forEach(function(s){return r+=n.bindAttribute(s,e,r,!0)}),a.bufferData(a.ARRAY_BUFFER,this.array,a.DYNAMIC_DRAW)):(a.bindBuffer(a.ARRAY_BUFFER,o),r=0,this.ATTRIBUTES.forEach(function(s){return r+=n.bindAttribute(s,e,r)}),a.bufferData(a.ARRAY_BUFFER,this.array,a.DYNAMIC_DRAW)),a.bindBuffer(a.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(e){var n=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(r){return n.unbindAttribute(r,e,!1)}),this.ATTRIBUTES.forEach(function(r){return n.unbindAttribute(r,e,!0)})):this.ATTRIBUTES.forEach(function(r){return n.unbindAttribute(r,e)})}},{key:"bindAttribute",value:function(e,n,r,a){var o=Dh[e.type];if(typeof o!="number")throw new Error('Program.bind: yet unsupported attribute type "'.concat(e.type,'"'));var s=n.attributeLocations[e.name],l=n.gl;if(s!==-1){l.enableVertexAttribArray(s);var u=this.isInstanced?(a?this.ATTRIBUTES_ITEMS_COUNT:xr(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(l.vertexAttribPointer(s,e.size,e.type,e.normalized||!1,u,r),this.isInstanced&&a)if(l instanceof WebGL2RenderingContext)l.vertexAttribDivisor(s,1);else{var c=l.getExtension("ANGLE_instanced_arrays");c&&c.vertexAttribDivisorANGLE(s,1)}}return e.size*o}},{key:"unbindAttribute",value:function(e,n,r){var a=n.attributeLocations[e.name],o=n.gl;if(a!==-1&&(o.disableVertexAttribArray(a),this.isInstanced&&r))if(o instanceof WebGL2RenderingContext)o.vertexAttribDivisor(a,0);else{var s=o.getExtension("ANGLE_instanced_arrays");s&&s.vertexAttribDivisorANGLE(a,0)}}},{key:"reallocate",value:function(e){e!==this.capacity&&(this.capacity=e,this.verticesCount=this.VERTICES*e,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return this.verticesCount===0}},{key:"renderProgram",value:function(e,n){var r=n.gl,a=n.program;r.enable(r.BLEND),r.useProgram(a),this.setUniforms(e,n),this.drawWebGL(this.METHOD,n)}},{key:"render",value:function(e){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,e.width*e.pixelRatio/e.downSizingRatio,e.height*e.pixelRatio/e.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(q(q({},e),{},{pixelRatio:e.pixelRatio/e.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,e.width*e.pixelRatio,e.height*e.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(e,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(e,n){var r=n.gl,a=n.frameBuffer;if(r.bindFramebuffer(r.FRAMEBUFFER,a),!this.isInstanced)r.drawArrays(e,0,this.verticesCount);else if(r instanceof WebGL2RenderingContext)r.drawArraysInstanced(e,0,this.VERTICES,this.capacity);else{var o=r.getExtension("ANGLE_instanced_arrays");o&&o.drawArraysInstancedANGLE(e,0,this.VERTICES,this.capacity)}}}])}(),nl=function(i){function t(){return Ge(this,t),nt(this,t,arguments)}return it(t,i),$e(t,[{key:"kill",value:function(){Qs(t,"kill",this)([])}},{key:"process",value:function(n,r,a){var o=r*this.STRIDE;if(a.hidden){for(var s=o+this.STRIDE;o<s;o++)this.array[o]=0;return}return this.processVisibleItem(Xs(n),o,a)}}])}(tl),va=function(i){function t(){var e;Ge(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=nt(this,t,[].concat(r)),R(e,"drawLabel",void 0),e}return it(t,i),$e(t,[{key:"kill",value:function(){Qs(t,"kill",this)([])}},{key:"process",value:function(n,r,a,o,s){var l=r*this.STRIDE;if(s.hidden||a.hidden||o.hidden){for(var u=l+this.STRIDE;l<u;l++)this.array[l]=0;return}return this.processVisibleItem(Xs(n),l,a,o,s)}}])}(tl);function Ah(i,t){return function(){function e(n,r,a){Ge(this,e),R(this,"drawLabel",t),this.programs=i.map(function(o){return new o(n,r,a)})}return $e(e,[{key:"reallocate",value:function(r){this.programs.forEach(function(a){return a.reallocate(r)})}},{key:"process",value:function(r,a,o,s,l){this.programs.forEach(function(u){return u.process(r,a,o,s,l)})}},{key:"render",value:function(r){this.programs.forEach(function(a){return a.render(r)})}},{key:"kill",value:function(){this.programs.forEach(function(r){return r.kill()})}}])}()}function Nh(i,t,e,n,r){var a=r.edgeLabelSize,o=r.edgeLabelFont,s=r.edgeLabelWeight,l=r.edgeLabelColor.attribute?t[r.edgeLabelColor.attribute]||r.edgeLabelColor.color||"#000":r.edgeLabelColor.color,u=t.label;if(u){i.fillStyle=l,i.font="".concat(s," ").concat(a,"px ").concat(o);var c=e.size,d=n.size,h=e.x,f=e.y,b=n.x,p=n.y,w=(h+b)/2,E=(f+p)/2,y=b-h,v=p-f,_=Math.sqrt(y*y+v*v);if(!(_<c+d)){h+=y*c/_,f+=v*c/_,b-=y*d/_,p-=v*d/_,w=(h+b)/2,E=(f+p)/2,y=b-h,v=p-f,_=Math.sqrt(y*y+v*v);var D=i.measureText(u).width;if(D>_){var k="";for(u=u+k,D=i.measureText(u).width;D>_&&u.length>1;)u=u.slice(0,-2)+k,D=i.measureText(u).width;if(u.length<4)return}var S;y>0?v>0?S=Math.acos(y/_):S=Math.asin(v/_):v>0?S=Math.acos(y/_)+Math.PI:S=Math.asin(y/_)+Math.PI/2,i.save(),i.translate(w,E),i.rotate(S),i.fillText(u,-D/2,t.size/2+a),i.restore()}}}function il(i,t,e){if(t.label){var n=e.labelSize,r=e.labelFont,a=e.labelWeight,o=e.labelColor.attribute?t[e.labelColor.attribute]||e.labelColor.color||"#000":e.labelColor.color;i.fillStyle=o,i.font="".concat(a," ").concat(n,"px ").concat(r),i.fillText(t.label,t.x+t.size+3,t.y+n/3)}}function Lh(i,t,e){var n=e.labelSize,r=e.labelFont,a=e.labelWeight;i.font="".concat(a," ").concat(n,"px ").concat(r),i.fillStyle="#FFF",i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=8,i.shadowColor="#000";var o=2;if(typeof t.label=="string"){var s=i.measureText(t.label).width,l=Math.round(s+5),u=Math.round(n+2*o),c=Math.max(t.size,n/2)+o,d=Math.asin(u/2/c),h=Math.sqrt(Math.abs(Math.pow(c,2)-Math.pow(u/2,2)));i.beginPath(),i.moveTo(t.x+h,t.y+u/2),i.lineTo(t.x+c+l,t.y+u/2),i.lineTo(t.x+c+l,t.y-u/2),i.lineTo(t.x+h,t.y-u/2),i.arc(t.x,t.y,c,d,-d),i.closePath(),i.fill()}else i.beginPath(),i.arc(t.x,t.y,t.size+o,0,Math.PI*2),i.closePath(),i.fill();i.shadowOffsetX=0,i.shadowOffsetY=0,i.shadowBlur=0,il(i,t,e)}var Fh=`
precision highp float;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;

uniform float u_correctionRatio;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float border = u_correctionRatio * 2.0;
  float dist = length(v_diffVector) - v_radius + border;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > border)
    gl_FragColor = transparent;
  else
    gl_FragColor = v_color;

  #else
  float t = 0.0;
  if (dist > border)
    t = 1.0;
  else if (dist > 0.0)
    t = dist / border;

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,Mh=Fh,Rh=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec4 v_color;
varying vec2 v_diffVector;
varying float v_radius;
varying float v_border;

const float bias = 255.0 / 254.0;

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_diffVector = diffVector;
  v_radius = size / 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Ph=Rh,rl=WebGLRenderingContext,bo=rl.UNSIGNED_BYTE,Sr=rl.FLOAT,Ih=["u_sizeRatio","u_correctionRatio","u_matrix"],er=function(i){function t(){return Ge(this,t),nt(this,t,arguments)}return it(t,i),$e(t,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:Ph,FRAGMENT_SHADER_SOURCE:Mh,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Ih,ATTRIBUTES:[{name:"a_position",size:2,type:Sr},{name:"a_size",size:1,type:Sr},{name:"a_color",size:4,type:bo,normalized:!0},{name:"a_id",size:4,type:bo,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Sr}],CONSTANT_DATA:[[t.ANGLE_1],[t.ANGLE_2],[t.ANGLE_3]]}}},{key:"processVisibleItem",value:function(n,r,a){var o=this.array,s=Kt(a.color);o[r++]=a.x,o[r++]=a.y,o[r++]=a.size,o[r++]=s,o[r++]=n}},{key:"setUniforms",value:function(n,r){var a=r.gl,o=r.uniformLocations,s=o.u_sizeRatio,l=o.u_correctionRatio,u=o.u_matrix;a.uniform1f(l,n.correctionRatio),a.uniform1f(s,n.sizeRatio),a.uniformMatrix3fv(u,!1,n.matrix)}}])}(nl);R(er,"ANGLE_1",0);R(er,"ANGLE_2",2*Math.PI/3);R(er,"ANGLE_3",4*Math.PI/3);var Oh=`
precision mediump float;

varying vec4 v_color;

void main(void) {
  gl_FragColor = v_color;
}
`,Gh=Oh,$h=`
attribute vec2 a_position;
attribute vec2 a_normal;
attribute float a_radius;
attribute vec3 a_barycentric;

#ifdef PICKING_MODE
attribute vec4 a_id;
#else
attribute vec4 a_color;
#endif

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_widenessToThicknessRatio;

varying vec4 v_color;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float normalLength = length(a_normal);
  vec2 unitNormal = a_normal / normalLength;

  // These first computations are taken from edge.vert.glsl and
  // edge.clamped.vert.glsl. Please read it to get better comments on what's
  // happening:
  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);
  float webGLThickness = pixelsThickness * u_correctionRatio;
  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;
  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;

  float da = a_barycentric.x;
  float db = a_barycentric.y;
  float dc = a_barycentric.z;

  vec2 delta = vec2(
      da * (webGLNodeRadius * unitNormal.y)
    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)
    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),

      da * (-webGLNodeRadius * unitNormal.x)
    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)
    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)
  );

  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;

  gl_Position = vec4(position, 0, 1);

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,zh=$h,al=WebGLRenderingContext,vo=al.UNSIGNED_BYTE,Ci=al.FLOAT,Bh=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],ol={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function sl(i){var t=q(q({},ol),{});return function(e){function n(){return Ge(this,n),nt(this,n,arguments)}return it(n,e),$e(n,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:zh,FRAGMENT_SHADER_SOURCE:Gh,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Bh,ATTRIBUTES:[{name:"a_position",size:2,type:Ci},{name:"a_normal",size:2,type:Ci},{name:"a_radius",size:1,type:Ci},{name:"a_color",size:4,type:vo,normalized:!0},{name:"a_id",size:4,type:vo,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:Ci}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(a,o,s,l,u){if(t.extremity==="source"){var c=[l,s];s=c[0],l=c[1]}var d=u.size||1,h=l.size||1,f=s.x,b=s.y,p=l.x,w=l.y,E=Kt(u.color),y=p-f,v=w-b,_=y*y+v*v,D=0,k=0;_&&(_=1/Math.sqrt(_),D=-v*_*d,k=y*_*d);var S=this.array;S[o++]=p,S[o++]=w,S[o++]=-D,S[o++]=-k,S[o++]=h,S[o++]=E,S[o++]=a}},{key:"setUniforms",value:function(a,o){var s=o.gl,l=o.uniformLocations,u=l.u_matrix,c=l.u_sizeRatio,d=l.u_correctionRatio,h=l.u_minEdgeThickness,f=l.u_lengthToThicknessRatio,b=l.u_widenessToThicknessRatio;s.uniformMatrix3fv(u,!1,a.matrix),s.uniform1f(c,a.sizeRatio),s.uniform1f(d,a.correctionRatio),s.uniform1f(h,a.minEdgeThickness),s.uniform1f(f,t.lengthToThicknessRatio),s.uniform1f(b,t.widenessToThicknessRatio)}}])}(va)}sl();var Uh=`
precision mediump float;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  // We only handle antialiasing for normal mode:
  #ifdef PICKING_MODE
  gl_FragColor = v_color;
  #else
  float dist = length(v_normal) * v_thickness;

  float t = smoothstep(
    v_thickness - v_feather,
    v_thickness,
    dist
  );

  gl_FragColor = mix(v_color, transparent, t);
  #endif
}
`,ll=Uh,Hh=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;
attribute float a_radius;
attribute float a_radiusCoef;

uniform mat3 u_matrix;
uniform float u_zoomRatio;
uniform float u_sizeRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_lengthToThicknessRatio;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  float radius = a_radius * a_radiusCoef;
  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // These first computations are taken from edge.vert.glsl. Please read it to
  // get better comments on what's happening:
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here, we move the point to leave space for the arrow head:
  float direction = sign(radius);
  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;
  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;

  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);

  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Wh=Hh,ul=WebGLRenderingContext,yo=ul.UNSIGNED_BYTE,Ot=ul.FLOAT,jh=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],Vh={lengthToThicknessRatio:ol.lengthToThicknessRatio};function cl(i){var t=q(q({},Vh),{});return function(e){function n(){return Ge(this,n),nt(this,n,arguments)}return it(n,e),$e(n,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:Wh,FRAGMENT_SHADER_SOURCE:ll,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:jh,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Ot},{name:"a_positionEnd",size:2,type:Ot},{name:"a_normal",size:2,type:Ot},{name:"a_color",size:4,type:yo,normalized:!0},{name:"a_id",size:4,type:yo,normalized:!0},{name:"a_radius",size:1,type:Ot}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Ot},{name:"a_normalCoef",size:1,type:Ot},{name:"a_radiusCoef",size:1,type:Ot}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(a,o,s,l,u){var c=u.size||1,d=s.x,h=s.y,f=l.x,b=l.y,p=Kt(u.color),w=f-d,E=b-h,y=l.size||1,v=w*w+E*E,_=0,D=0;v&&(v=1/Math.sqrt(v),_=-E*v*c,D=w*v*c);var k=this.array;k[o++]=d,k[o++]=h,k[o++]=f,k[o++]=b,k[o++]=_,k[o++]=D,k[o++]=p,k[o++]=a,k[o++]=y}},{key:"setUniforms",value:function(a,o){var s=o.gl,l=o.uniformLocations,u=l.u_matrix,c=l.u_zoomRatio,d=l.u_feather,h=l.u_pixelRatio,f=l.u_correctionRatio,b=l.u_sizeRatio,p=l.u_minEdgeThickness,w=l.u_lengthToThicknessRatio;s.uniformMatrix3fv(u,!1,a.matrix),s.uniform1f(c,a.zoomRatio),s.uniform1f(b,a.sizeRatio),s.uniform1f(f,a.correctionRatio),s.uniform1f(h,a.pixelRatio),s.uniform1f(d,a.antiAliasingFeather),s.uniform1f(p,a.minEdgeThickness),s.uniform1f(w,t.lengthToThicknessRatio)}}])}(va)}cl();function Kh(i){return Ah([cl(),sl()])}var Yh=Kh(),qh=Yh,Zh=`
attribute vec4 a_id;
attribute vec4 a_color;
attribute vec2 a_normal;
attribute float a_normalCoef;
attribute vec2 a_positionStart;
attribute vec2 a_positionEnd;
attribute float a_positionCoef;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_zoomRatio;
uniform float u_pixelRatio;
uniform float u_correctionRatio;
uniform float u_minEdgeThickness;
uniform float u_feather;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_thickness;
varying float v_feather;

const float bias = 255.0 / 254.0;

void main() {
  float minThickness = u_minEdgeThickness;

  vec2 normal = a_normal * a_normalCoef;
  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;

  float normalLength = length(normal);
  vec2 unitNormal = normal / normalLength;

  // We require edges to be at least "minThickness" pixels thick *on screen*
  // (so we need to compensate the size ratio):
  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);

  // Then, we need to retrieve the normalized thickness of the edge in the WebGL
  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction
  // ratio:
  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;

  // Here is the proper position of the vertex
  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);

  // For the fragment shader though, we need a thickness that takes the "magic"
  // correction ratio into account (as in webGLThickness), but so that the
  // antialiasing effect does not depend on the zoom level. So here's yet
  // another thickness version:
  v_thickness = webGLThickness / u_zoomRatio;

  v_normal = unitNormal;

  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;

  #ifdef PICKING_MODE
  // For picking mode, we use the ID as the color:
  v_color = a_id;
  #else
  // For normal mode, we use the color:
  v_color = a_color;
  #endif

  v_color.a *= bias;
}
`,Jh=Zh,dl=WebGLRenderingContext,wo=dl.UNSIGNED_BYTE,Fn=dl.FLOAT,Xh=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],Qh=function(i){function t(){return Ge(this,t),nt(this,t,arguments)}return it(t,i),$e(t,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:Jh,FRAGMENT_SHADER_SOURCE:ll,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:Xh,ATTRIBUTES:[{name:"a_positionStart",size:2,type:Fn},{name:"a_positionEnd",size:2,type:Fn},{name:"a_normal",size:2,type:Fn},{name:"a_color",size:4,type:wo,normalized:!0},{name:"a_id",size:4,type:wo,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:Fn},{name:"a_normalCoef",size:1,type:Fn}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(n,r,a,o,s){var l=s.size||1,u=a.x,c=a.y,d=o.x,h=o.y,f=Kt(s.color),b=d-u,p=h-c,w=b*b+p*p,E=0,y=0;w&&(w=1/Math.sqrt(w),E=-p*w*l,y=b*w*l);var v=this.array;v[r++]=u,v[r++]=c,v[r++]=d,v[r++]=h,v[r++]=E,v[r++]=y,v[r++]=f,v[r++]=n}},{key:"setUniforms",value:function(n,r){var a=r.gl,o=r.uniformLocations,s=o.u_matrix,l=o.u_zoomRatio,u=o.u_feather,c=o.u_pixelRatio,d=o.u_correctionRatio,h=o.u_sizeRatio,f=o.u_minEdgeThickness;a.uniformMatrix3fv(s,!1,n.matrix),a.uniform1f(l,n.zoomRatio),a.uniform1f(h,n.sizeRatio),a.uniform1f(d,n.correctionRatio),a.uniform1f(c,n.pixelRatio),a.uniform1f(u,n.antiAliasingFeather),a.uniform1f(f,n.minEdgeThickness)}}])}(va),ya={exports:{}},bn=typeof Reflect=="object"?Reflect:null,_o=bn&&typeof bn.apply=="function"?bn.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},Oi;bn&&typeof bn.ownKeys=="function"?Oi=bn.ownKeys:Object.getOwnPropertySymbols?Oi=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Oi=function(t){return Object.getOwnPropertyNames(t)};function ef(i){console&&console.warn&&console.warn(i)}var hl=Number.isNaN||function(t){return t!==t};function de(){de.init.call(this)}ya.exports=de;ya.exports.once=af;de.EventEmitter=de;de.prototype._events=void 0;de.prototype._eventsCount=0;de.prototype._maxListeners=void 0;var ko=10;function tr(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(de,"defaultMaxListeners",{enumerable:!0,get:function(){return ko},set:function(i){if(typeof i!="number"||i<0||hl(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");ko=i}});de.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};de.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||hl(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function fl(i){return i._maxListeners===void 0?de.defaultMaxListeners:i._maxListeners}de.prototype.getMaxListeners=function(){return fl(this)};de.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r=t==="error",a=this._events;if(a!==void 0)r=r&&a.error===void 0;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[t];if(l===void 0)return!1;if(typeof l=="function")_o(l,this,e);else for(var u=l.length,c=vl(l,u),n=0;n<u;++n)_o(c[n],this,e);return!0};function gl(i,t,e,n){var r,a,o;if(tr(e),a=i._events,a===void 0?(a=i._events=Object.create(null),i._eventsCount=0):(a.newListener!==void 0&&(i.emit("newListener",t,e.listener?e.listener:e),a=i._events),o=a[t]),o===void 0)o=a[t]=e,++i._eventsCount;else if(typeof o=="function"?o=a[t]=n?[e,o]:[o,e]:n?o.unshift(e):o.push(e),r=fl(i),r>0&&o.length>r&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=i,s.type=t,s.count=o.length,ef(s)}return i}de.prototype.addListener=function(t,e){return gl(this,t,e,!1)};de.prototype.on=de.prototype.addListener;de.prototype.prependListener=function(t,e){return gl(this,t,e,!0)};function tf(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ml(i,t,e){var n={fired:!1,wrapFn:void 0,target:i,type:t,listener:e},r=tf.bind(n);return r.listener=e,n.wrapFn=r,r}de.prototype.once=function(t,e){return tr(e),this.on(t,ml(this,t,e)),this};de.prototype.prependOnceListener=function(t,e){return tr(e),this.prependListener(t,ml(this,t,e)),this};de.prototype.removeListener=function(t,e){var n,r,a,o,s;if(tr(e),r=this._events,r===void 0)return this;if(n=r[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():nf(n,a),n.length===1&&(r[t]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",t,s||e)}return this};de.prototype.off=de.prototype.removeListener;de.prototype.removeAllListeners=function(t){var e,n,r;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),o;for(r=0;r<a.length;++r)o=a[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this};function pl(i,t,e){var n=i._events;if(n===void 0)return[];var r=n[t];return r===void 0?[]:typeof r=="function"?e?[r.listener||r]:[r]:e?rf(r):vl(r,r.length)}de.prototype.listeners=function(t){return pl(this,t,!0)};de.prototype.rawListeners=function(t){return pl(this,t,!1)};de.listenerCount=function(i,t){return typeof i.listenerCount=="function"?i.listenerCount(t):bl.call(i,t)};de.prototype.listenerCount=bl;function bl(i){var t=this._events;if(t!==void 0){var e=t[i];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}de.prototype.eventNames=function(){return this._eventsCount>0?Oi(this._events):[]};function vl(i,t){for(var e=new Array(t),n=0;n<t;++n)e[n]=i[n];return e}function nf(i,t){for(;t+1<i.length;t++)i[t]=i[t+1];i.pop()}function rf(i){for(var t=new Array(i.length),e=0;e<t.length;++e)t[e]=i[e].listener||i[e];return t}function af(i,t){return new Promise(function(e,n){function r(o){i.removeListener(t,a),n(o)}function a(){typeof i.removeListener=="function"&&i.removeListener("error",r),e([].slice.call(arguments))}yl(i,t,a,{once:!0}),t!=="error"&&of(i,r,{once:!0})})}function of(i,t,e){typeof i.on=="function"&&yl(i,"error",t,e)}function yl(i,t,e,n){if(typeof i.on=="function")n.once?i.once(t,e):i.on(t,e);else if(typeof i.addEventListener=="function")i.addEventListener(t,function r(a){n.once&&i.removeEventListener(t,r),e(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}var wl=ya.exports,wa=function(i){function t(){var e;return Ge(this,t),e=nt(this,t),e.rawEmitter=e,e}return it(t,i),$e(t)}(wl.EventEmitter),sf=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"};const lf=cc(sf);var uf=function(t){return t},cf=function(t){return t*t},df=function(t){return t*(2-t)},hf=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},ff=function(t){return t*t*t},gf=function(t){return--t*t*t+1},mf=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},pf={linear:uf,quadraticIn:cf,quadraticOut:df,quadraticInOut:hf,cubicIn:ff,cubicOut:gf,cubicInOut:mf},bf={easing:"quadraticInOut",duration:150};function ct(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function Ti(i,t,e){return i[0]=t,i[4]=typeof e=="number"?e:t,i}function xo(i,t){var e=Math.sin(t),n=Math.cos(t);return i[0]=n,i[1]=e,i[3]=-e,i[4]=n,i}function So(i,t,e){return i[6]=t,i[7]=e,i}function Nt(i,t){var e=i[0],n=i[1],r=i[2],a=i[3],o=i[4],s=i[5],l=i[6],u=i[7],c=i[8],d=t[0],h=t[1],f=t[2],b=t[3],p=t[4],w=t[5],E=t[6],y=t[7],v=t[8];return i[0]=d*e+h*a+f*l,i[1]=d*n+h*o+f*u,i[2]=d*r+h*s+f*c,i[3]=b*e+p*a+w*l,i[4]=b*n+p*o+w*u,i[5]=b*r+p*s+w*c,i[6]=E*e+y*a+v*l,i[7]=E*n+y*o+v*u,i[8]=E*r+y*s+v*c,i}function Jr(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=i[0],r=i[1],a=i[3],o=i[4],s=i[6],l=i[7],u=t.x,c=t.y;return{x:u*n+c*a+s*e,y:u*r+c*o+l*e}}function vf(i,t){var e=i.height/i.width,n=t.height/t.width;return e<1&&n>1||e>1&&n<1?1:Math.min(Math.max(n,1/n),Math.max(1/e,e))}function Mn(i,t,e,n,r){var a=i.angle,o=i.ratio,s=i.x,l=i.y,u=t.width,c=t.height,d=ct(),h=Math.min(u,c)-2*n,f=vf(t,e);return r?(Nt(d,So(ct(),s,l)),Nt(d,Ti(ct(),o)),Nt(d,xo(ct(),a)),Nt(d,Ti(ct(),u/h/2/f,c/h/2/f))):(Nt(d,Ti(ct(),2*(h/u)*f,2*(h/c)*f)),Nt(d,xo(ct(),-a)),Nt(d,Ti(ct(),1/o)),Nt(d,So(ct(),-s,-l))),d}function yf(i,t,e){var n=Jr(i,{x:Math.cos(t.angle),y:Math.sin(t.angle)},0),r=n.x,a=n.y;return 1/Math.sqrt(Math.pow(r,2)+Math.pow(a,2))/e.width}function wf(i){if(!i.order)return{x:[0,1],y:[0,1]};var t=1/0,e=-1/0,n=1/0,r=-1/0;return i.forEachNode(function(a,o){var s=o.x,l=o.y;s<t&&(t=s),s>e&&(e=s),l<n&&(n=l),l>r&&(r=l)}),{x:[t,e],y:[n,r]}}function _f(i){if(!lf(i))throw new Error("Sigma: invalid graph instance.");i.forEachNode(function(t,e){if(!Number.isFinite(e.x)||!Number.isFinite(e.y))throw new Error("Sigma: Coordinates of node ".concat(t," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}function kf(i,t,e){var n=document.createElement(i);if(t)for(var r in t)n.style[r]=t[r];if(e)for(var a in e)n.setAttribute(a,e[a]);return n}function Eo(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function Co(i,t,e){return e.sort(function(n,r){var a=t(n)||0,o=t(r)||0;return a<o?-1:a>o?1:0})}function To(i){var t=yn(i.x,2),e=t[0],n=t[1],r=yn(i.y,2),a=r[0],o=r[1],s=Math.max(n-e,o-a),l=(n+e)/2,u=(o+a)/2;(s===0||Math.abs(s)===1/0||isNaN(s))&&(s=1),isNaN(l)&&(l=0),isNaN(u)&&(u=0);var c=function(h){return{x:.5+(h.x-l)/s,y:.5+(h.y-u)/s}};return c.applyTo=function(d){d.x=.5+(d.x-l)/s,d.y=.5+(d.y-u)/s},c.inverse=function(d){return{x:l+s*(d.x-.5),y:u+s*(d.y-.5)}},c.ratio=s,c}function Xr(i){"@babel/helpers - typeof";return Xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xr(i)}function Do(i,t){var e=t.size;if(e!==0){var n=i.length;i.length+=e;var r=0;t.forEach(function(a){i[n+r]=a,r++})}}function Er(i){i=i||{};for(var t=0,e=arguments.length<=1?0:arguments.length-1;t<e;t++){var n=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];n&&Object.assign(i,n)}return i}var _a={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:Nh,defaultDrawNodeLabel:il,defaultDrawNodeHover:Lh,minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraZooming:!0,enableCameraPanning:!0,enableCameraRotation:!0,cameraPanBoundaries:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},xf={circle:er},Sf={arrow:qh,line:Qh};function Cr(i){if(typeof i.labelDensity!="number"||i.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var t=i.minCameraRatio,e=i.maxCameraRatio;if(typeof t=="number"&&typeof e=="number"&&e<t)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}function Ef(i){var t=Er({},_a,i);return t.nodeProgramClasses=Er({},xf,t.nodeProgramClasses),t.edgeProgramClasses=Er({},Sf,t.edgeProgramClasses),t}var Di=1.5,Ao=function(i){function t(){var e;return Ge(this,t),e=nt(this,t),R(e,"x",.5),R(e,"y",.5),R(e,"angle",0),R(e,"ratio",1),R(e,"minRatio",null),R(e,"maxRatio",null),R(e,"enabledZooming",!0),R(e,"enabledPanning",!0),R(e,"enabledRotation",!0),R(e,"clean",null),R(e,"nextFrame",null),R(e,"previousState",null),R(e,"enabled",!0),e.previousState=e.getState(),e}return it(t,i),$e(t,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(n){return this.x===n.x&&this.y===n.y&&this.ratio===n.ratio&&this.angle===n.angle}},{key:"getPreviousState",value:function(){var n=this.previousState;return n?{x:n.x,y:n.y,angle:n.angle,ratio:n.ratio}:null}},{key:"getBoundedRatio",value:function(n){var r=n;return typeof this.minRatio=="number"&&(r=Math.max(r,this.minRatio)),typeof this.maxRatio=="number"&&(r=Math.min(r,this.maxRatio)),r}},{key:"validateState",value:function(n){var r={};return this.enabledPanning&&typeof n.x=="number"&&(r.x=n.x),this.enabledPanning&&typeof n.y=="number"&&(r.y=n.y),this.enabledZooming&&typeof n.ratio=="number"&&(r.ratio=this.getBoundedRatio(n.ratio)),this.enabledRotation&&typeof n.angle=="number"&&(r.angle=n.angle),this.clean?this.clean(q(q({},this.getState()),r)):r}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(n){if(!this.enabled)return this;this.previousState=this.getState();var r=this.validateState(n);return typeof r.x=="number"&&(this.x=r.x),typeof r.y=="number"&&(this.y=r.y),typeof r.ratio=="number"&&(this.ratio=r.ratio),typeof r.angle=="number"&&(this.angle=r.angle),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(n){return this.setState(n(this.getState())),this}},{key:"animate",value:function(n){var r=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(!o)return new Promise(function(f){return r.animate(n,a,f)});if(this.enabled){var s=q(q({},bf),a),l=this.validateState(n),u=typeof s.easing=="function"?s.easing:pf[s.easing],c=Date.now(),d=this.getState(),h=function(){var b=(Date.now()-c)/s.duration;if(b>=1){r.nextFrame=null,r.setState(l),r.animationCallback&&(r.animationCallback.call(null),r.animationCallback=void 0);return}var p=u(b),w={};typeof l.x=="number"&&(w.x=d.x+(l.x-d.x)*p),typeof l.y=="number"&&(w.y=d.y+(l.y-d.y)*p),r.enabledRotation&&typeof l.angle=="number"&&(w.angle=d.angle+(l.angle-d.angle)*p),typeof l.ratio=="number"&&(w.ratio=d.ratio+(l.ratio-d.ratio)*p),r.setState(w),r.nextFrame=requestAnimationFrame(h)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(h)):h(),this.animationCallback=o}}},{key:"animatedZoom",value:function(n){return n?typeof n=="number"?this.animate({ratio:this.ratio/n}):this.animate({ratio:this.ratio/(n.factor||Di)},n):this.animate({ratio:this.ratio/Di})}},{key:"animatedUnzoom",value:function(n){return n?typeof n=="number"?this.animate({ratio:this.ratio*n}):this.animate({ratio:this.ratio*(n.factor||Di)},n):this.animate({ratio:this.ratio*Di})}},{key:"animatedReset",value:function(n){return this.animate({x:.5,y:.5,ratio:1,angle:0},n)}},{key:"copy",value:function(){return t.from(this.getState())}}],[{key:"from",value:function(n){var r=new t;return r.setState(n)}}])}(wa);function dt(i,t){var e=t.getBoundingClientRect();return{x:i.clientX-e.left,y:i.clientY-e.top}}function kt(i,t){var e=q(q({},dt(i,t)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){e.sigmaDefaultPrevented=!0},original:i});return e}function Rn(i){var t="x"in i?i:q(q({},i.touches[0]||i.previousTouches[0]),{},{original:i.original,sigmaDefaultPrevented:i.sigmaDefaultPrevented,preventSigmaDefault:function(){i.sigmaDefaultPrevented=!0,t.sigmaDefaultPrevented=!0}});return t}function Cf(i,t){return q(q({},kt(i,t)),{},{delta:_l(i)})}var Tf=2;function Gi(i){for(var t=[],e=0,n=Math.min(i.length,Tf);e<n;e++)t.push(i[e]);return t}function Pn(i,t,e){var n={touches:Gi(i.touches).map(function(r){return dt(r,e)}),previousTouches:t.map(function(r){return dt(r,e)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:i};return n}function _l(i){if(typeof i.deltaY<"u")return i.deltaY*-3/360;if(typeof i.detail<"u")return i.detail/-9;throw new Error("Captor: could not extract delta from event.")}var kl=function(i){function t(e,n){var r;return Ge(this,t),r=nt(this,t),r.container=e,r.renderer=n,r}return it(t,i),$e(t)}(wa),Df=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"],Af=Df.reduce(function(i,t){return q(q({},i),{},R({},t,_a[t]))},{}),Nf=function(i){function t(e,n){var r;return Ge(this,t),r=nt(this,t,[e,n]),R(r,"enabled",!0),R(r,"draggedEvents",0),R(r,"downStartTime",null),R(r,"lastMouseX",null),R(r,"lastMouseY",null),R(r,"isMouseDown",!1),R(r,"isMoving",!1),R(r,"movingTimeout",null),R(r,"startCameraState",null),R(r,"clicks",0),R(r,"doubleClickTimeout",null),R(r,"currentWheelDirection",0),R(r,"settings",Af),r.handleClick=r.handleClick.bind(r),r.handleRightClick=r.handleRightClick.bind(r),r.handleDown=r.handleDown.bind(r),r.handleUp=r.handleUp.bind(r),r.handleMove=r.handleMove.bind(r),r.handleWheel=r.handleWheel.bind(r),r.handleLeave=r.handleLeave.bind(r),r.handleEnter=r.handleEnter.bind(r),e.addEventListener("click",r.handleClick,{capture:!1}),e.addEventListener("contextmenu",r.handleRightClick,{capture:!1}),e.addEventListener("mousedown",r.handleDown,{capture:!1}),e.addEventListener("wheel",r.handleWheel,{capture:!1}),e.addEventListener("mouseleave",r.handleLeave,{capture:!1}),e.addEventListener("mouseenter",r.handleEnter,{capture:!1}),document.addEventListener("mousemove",r.handleMove,{capture:!1}),document.addEventListener("mouseup",r.handleUp,{capture:!1}),r}return it(t,i),$e(t,[{key:"kill",value:function(){var n=this.container;n.removeEventListener("click",this.handleClick),n.removeEventListener("contextmenu",this.handleRightClick),n.removeEventListener("mousedown",this.handleDown),n.removeEventListener("wheel",this.handleWheel),n.removeEventListener("mouseleave",this.handleLeave),n.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(n){var r=this;if(this.enabled){if(this.clicks++,this.clicks===2)return this.clicks=0,typeof this.doubleClickTimeout=="number"&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(n);setTimeout(function(){r.clicks=0,r.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",kt(n,this.container))}}},{key:"handleRightClick",value:function(n){this.enabled&&this.emit("rightClick",kt(n,this.container))}},{key:"handleDoubleClick",value:function(n){if(this.enabled){n.preventDefault(),n.stopPropagation();var r=kt(n,this.container);if(this.emit("doubleClick",r),!r.sigmaDefaultPrevented){var a=this.renderer.getCamera(),o=a.getBoundedRatio(a.getState().ratio/this.settings.doubleClickZoomingRatio);a.animate(this.renderer.getViewportZoomedState(dt(n,this.container),o),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(n){if(this.enabled){if(n.button===0){this.startCameraState=this.renderer.getCamera().getState();var r=dt(n,this.container),a=r.x,o=r.y;this.lastMouseX=a,this.lastMouseY=o,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",kt(n,this.container))}}},{key:"handleUp",value:function(n){var r=this;if(!(!this.enabled||!this.isMouseDown)){var a=this.renderer.getCamera();this.isMouseDown=!1,typeof this.movingTimeout=="number"&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var o=dt(n,this.container),s=o.x,l=o.y,u=a.getState(),c=a.getPreviousState()||{x:0,y:0};this.isMoving?a.animate({x:u.x+this.settings.inertiaRatio*(u.x-c.x),y:u.y+this.settings.inertiaRatio*(u.y-c.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==s||this.lastMouseY!==l)&&a.setState({x:u.x,y:u.y}),this.isMoving=!1,setTimeout(function(){var d=r.draggedEvents>0;r.draggedEvents=0,d&&r.renderer.getSetting("hideEdgesOnMove")&&r.renderer.refresh()},0),this.emit("mouseup",kt(n,this.container))}}},{key:"handleMove",value:function(n){var r=this;if(this.enabled){var a=kt(n,this.container);if(this.emit("mousemovebody",a),(n.target===this.container||n.composedPath()[0]===this.container)&&this.emit("mousemove",a),!a.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,typeof this.movingTimeout=="number"&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.movingTimeout=null,r.isMoving=!1},this.settings.dragTimeout);var o=this.renderer.getCamera(),s=dt(n,this.container),l=s.x,u=s.y,c=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),d=this.renderer.viewportToFramedGraph({x:l,y:u}),h=c.x-d.x,f=c.y-d.y,b=o.getState(),p=b.x+h,w=b.y+f;o.setState({x:p,y:w}),this.lastMouseX=l,this.lastMouseY=u,n.preventDefault(),n.stopPropagation()}}}},{key:"handleLeave",value:function(n){this.emit("mouseleave",kt(n,this.container))}},{key:"handleEnter",value:function(n){this.emit("mouseenter",kt(n,this.container))}},{key:"handleWheel",value:function(n){var r=this,a=this.renderer.getCamera();if(!(!this.enabled||!a.enabledZooming)){var o=_l(n);if(o){var s=Cf(n,this.container);if(this.emit("wheel",s),s.sigmaDefaultPrevented){n.preventDefault(),n.stopPropagation();return}var l=a.getState().ratio,u=o>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio,c=a.getBoundedRatio(l*u),d=o>0?1:-1,h=Date.now();l!==c&&(n.preventDefault(),n.stopPropagation(),!(this.currentWheelDirection===d&&this.lastWheelTriggerTime&&h-this.lastWheelTriggerTime<this.settings.zoomDuration/5)&&(a.animate(this.renderer.getViewportZoomedState(dt(n,this.container),c),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){r.currentWheelDirection=0}),this.currentWheelDirection=d,this.lastWheelTriggerTime=h))}}}},{key:"setSettings",value:function(n){this.settings=n}}])}(kl),Lf=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"],Ff=Lf.reduce(function(i,t){return q(q({},i),{},R({},t,_a[t]))},{}),Mf=function(i){function t(e,n){var r;return Ge(this,t),r=nt(this,t,[e,n]),R(r,"enabled",!0),R(r,"isMoving",!1),R(r,"hasMoved",!1),R(r,"touchMode",0),R(r,"startTouchesPositions",[]),R(r,"lastTouches",[]),R(r,"lastTap",null),R(r,"settings",Ff),r.handleStart=r.handleStart.bind(r),r.handleLeave=r.handleLeave.bind(r),r.handleMove=r.handleMove.bind(r),e.addEventListener("touchstart",r.handleStart,{capture:!1}),e.addEventListener("touchcancel",r.handleLeave,{capture:!1}),document.addEventListener("touchend",r.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",r.handleMove,{capture:!1,passive:!1}),r}return it(t,i),$e(t,[{key:"kill",value:function(){var n=this.container;n.removeEventListener("touchstart",this.handleStart),n.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(n){var r=this;if(this.enabled){n.preventDefault();var a=Gi(n.touches);if(this.touchMode=a.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=a.map(function(f){return dt(f,r.container)}),this.touchMode===2){var o=yn(this.startTouchesPositions,2),s=o[0],l=s.x,u=s.y,c=o[1],d=c.x,h=c.y;this.startTouchesAngle=Math.atan2(h-u,d-l),this.startTouchesDistance=Math.sqrt(Math.pow(d-l,2)+Math.pow(h-u,2))}this.emit("touchdown",Pn(n,this.lastTouches,this.container)),this.lastTouches=a,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(n){if(!(!this.enabled||!this.startTouchesPositions.length)){switch(n.cancelable&&n.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(n.touches.length===1){this.handleStart(n),n.preventDefault();break}case 1:if(this.isMoving){var r=this.renderer.getCamera(),a=r.getState(),o=r.getPreviousState()||{x:0,y:0};r.animate({x:a.x+this.settings.inertiaRatio*(a.x-o.x),y:a.y+this.settings.inertiaRatio*(a.y-o.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0;break}if(this.emit("touchup",Pn(n,this.lastTouches,this.container)),!n.touches.length){var s=dt(this.lastTouches[0],this.container),l=this.startTouchesPositions[0],u=Math.pow(s.x-l.x,2)+Math.pow(s.y-l.y,2);if(!n.touches.length&&u<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var c=Pn(n,this.lastTouches,this.container);if(this.emit("doubletap",c),this.lastTap=null,!c.sigmaDefaultPrevented){var d=this.renderer.getCamera(),h=d.getBoundedRatio(d.getState().ratio/this.settings.doubleClickZoomingRatio);d.animate(this.renderer.getViewportZoomedState(s,h),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var f=Pn(n,this.lastTouches,this.container);this.emit("tap",f),this.lastTap={time:Date.now(),position:f.touches[0]||f.previousTouches[0]}}}this.lastTouches=Gi(n.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(n){var r=this;if(!(!this.enabled||!this.startTouchesPositions.length)){n.preventDefault();var a=Gi(n.touches),o=a.map(function(ue){return dt(ue,r.container)}),s=this.lastTouches;this.lastTouches=a,this.lastTouchesPositions=o;var l=Pn(n,s,this.container);if(this.emit("touchmove",l),!l.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=o.some(function(ue,ye){var me=r.startTouchesPositions[ye];return me&&(ue.x!==me.x||ue.y!==me.y)})),!!this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){r.isMoving=!1},this.settings.dragTimeout);var u=this.renderer.getCamera(),c=this.startCameraState,d=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:{var h=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),f=h.x,b=h.y,p=this.renderer.viewportToFramedGraph(o[0]),w=p.x,E=p.y;u.setState({x:c.x+f-w,y:c.y+b-E});break}case 2:{var y={x:.5,y:.5,angle:0,ratio:1},v=o[0],_=v.x,D=v.y,k=o[1],S=k.x,C=k.y,M=Math.atan2(C-D,S-_)-this.startTouchesAngle,F=Math.hypot(C-D,S-_)/this.startTouchesDistance,P=u.getBoundedRatio(c.ratio/F);y.ratio=P,y.angle=c.angle+M;var A=this.getDimensions(),G=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:c}),W=Math.min(A.width,A.height)-2*d,Y=W/A.width,Z=W/A.height,Q=P/W,j=_-W/2/Y,ee=D-W/2/Z,ne=[j*Math.cos(-y.angle)-ee*Math.sin(-y.angle),ee*Math.cos(-y.angle)+j*Math.sin(-y.angle)];j=ne[0],ee=ne[1],y.x=G.x-j*Q,y.y=G.y+ee*Q,u.setState(y);break}}}}}},{key:"setSettings",value:function(n){this.settings=n}}])}(kl);function Rf(i){if(Array.isArray(i))return qr(i)}function Pf(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function If(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function No(i){return Rf(i)||Pf(i)||Ys(i)||If()}function Of(i,t){if(i==null)return{};var e={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(t.indexOf(n)!==-1)continue;e[n]=i[n]}return e}function Tr(i,t){if(i==null)return{};var e,n,r=Of(i,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(n=0;n<a.length;n++)e=a[n],t.indexOf(e)===-1&&{}.propertyIsEnumerable.call(i,e)&&(r[e]=i[e])}return r}var Lo=function(){function i(t,e){Ge(this,i),this.key=t,this.size=e}return $e(i,null,[{key:"compare",value:function(e,n){return e.size>n.size?-1:e.size<n.size||e.key>n.key?1:-1}}])}(),Fo=function(){function i(){Ge(this,i),R(this,"width",0),R(this,"height",0),R(this,"cellSize",0),R(this,"columns",0),R(this,"rows",0),R(this,"cells",{})}return $e(i,[{key:"resizeAndClear",value:function(e,n){this.width=e.width,this.height=e.height,this.cellSize=n,this.columns=Math.ceil(e.width/n),this.rows=Math.ceil(e.height/n),this.cells={}}},{key:"getIndex",value:function(e){var n=Math.floor(e.x/this.cellSize),r=Math.floor(e.y/this.cellSize);return r*this.columns+n}},{key:"add",value:function(e,n,r){var a=new Lo(e,n),o=this.getIndex(r),s=this.cells[o];s||(s=[],this.cells[o]=s),s.push(a)}},{key:"organize",value:function(){for(var e in this.cells){var n=this.cells[e];n.sort(Lo.compare)}}},{key:"getLabelsToDisplay",value:function(e,n){var r=this.cellSize*this.cellSize,a=r/e/e,o=a*n/r,s=Math.ceil(o),l=[];for(var u in this.cells)for(var c=this.cells[u],d=0;d<Math.min(s,c.length);d++)l.push(c[d].key);return l}}])}();function Gf(i){var t=i.graph,e=i.hoveredNode,n=i.highlightedNodes,r=i.displayedNodeLabels,a=[];return t.forEachEdge(function(o,s,l,u){(l===e||u===e||n.has(l)||n.has(u)||r.has(l)&&r.has(u))&&a.push(o)}),a}var Mo=150,Ro=50,xt=Object.prototype.hasOwnProperty;function $f(i,t,e){if(!xt.call(e,"x")||!xt.call(e,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return e.color||(e.color=i.defaultNodeColor),!e.label&&e.label!==""&&(e.label=null),e.label!==void 0&&e.label!==null?e.label=""+e.label:e.label=null,e.size||(e.size=2),xt.call(e,"hidden")||(e.hidden=!1),xt.call(e,"highlighted")||(e.highlighted=!1),xt.call(e,"forceLabel")||(e.forceLabel=!1),(!e.type||e.type==="")&&(e.type=i.defaultNodeType),e.zIndex||(e.zIndex=0),e}function zf(i,t,e){return e.color||(e.color=i.defaultEdgeColor),e.label||(e.label=""),e.size||(e.size=.5),xt.call(e,"hidden")||(e.hidden=!1),xt.call(e,"forceLabel")||(e.forceLabel=!1),(!e.type||e.type==="")&&(e.type=i.defaultEdgeType),e.zIndex||(e.zIndex=0),e}var Bf=function(i){function t(e,n){var r,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Ge(this,t),r=nt(this,t),R(r,"elements",{}),R(r,"canvasContexts",{}),R(r,"webGLContexts",{}),R(r,"pickingLayers",new Set),R(r,"textures",{}),R(r,"frameBuffers",{}),R(r,"activeListeners",{}),R(r,"labelGrid",new Fo),R(r,"nodeDataCache",{}),R(r,"edgeDataCache",{}),R(r,"nodeProgramIndex",{}),R(r,"edgeProgramIndex",{}),R(r,"nodesWithForcedLabels",new Set),R(r,"edgesWithForcedLabels",new Set),R(r,"nodeExtent",{x:[0,1],y:[0,1]}),R(r,"nodeZExtent",[1/0,-1/0]),R(r,"edgeZExtent",[1/0,-1/0]),R(r,"matrix",ct()),R(r,"invMatrix",ct()),R(r,"correctionRatio",1),R(r,"customBBox",null),R(r,"normalizationFunction",To({x:[0,1],y:[0,1]})),R(r,"graphToViewportRatio",1),R(r,"itemIDsIndex",{}),R(r,"nodeIndices",{}),R(r,"edgeIndices",{}),R(r,"width",0),R(r,"height",0),R(r,"pixelRatio",Eo()),R(r,"pickingDownSizingRatio",2*r.pixelRatio),R(r,"displayedNodeLabels",new Set),R(r,"displayedEdgeLabels",new Set),R(r,"highlightedNodes",new Set),R(r,"hoveredNode",null),R(r,"hoveredEdge",null),R(r,"renderFrame",null),R(r,"renderHighlightedNodesFrame",null),R(r,"needToProcess",!1),R(r,"checkEdgesEventsFrame",null),R(r,"nodePrograms",{}),R(r,"nodeHoverPrograms",{}),R(r,"edgePrograms",{}),r.settings=Ef(a),Cr(r.settings),_f(e),!(n instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");r.graph=e,r.container=n,r.createWebGLContext("edges",{picking:a.enableEdgeEvents}),r.createCanvasContext("edgeLabels"),r.createWebGLContext("nodes",{picking:!0}),r.createCanvasContext("labels"),r.createCanvasContext("hovers"),r.createWebGLContext("hoverNodes"),r.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),r.resize();for(var o in r.settings.nodeProgramClasses)r.registerNodeProgram(o,r.settings.nodeProgramClasses[o],r.settings.nodeHoverProgramClasses[o]);for(var s in r.settings.edgeProgramClasses)r.registerEdgeProgram(s,r.settings.edgeProgramClasses[s]);return r.camera=new Ao,r.bindCameraHandlers(),r.mouseCaptor=new Nf(r.elements.mouse,r),r.mouseCaptor.setSettings(r.settings),r.touchCaptor=new Mf(r.elements.mouse,r),r.touchCaptor.setSettings(r.settings),r.bindEventHandlers(),r.bindGraphHandlers(),r.handleSettingsUpdate(),r.refresh(),r}return it(t,i),$e(t,[{key:"registerNodeProgram",value:function(n,r,a){return this.nodePrograms[n]&&this.nodePrograms[n].kill(),this.nodeHoverPrograms[n]&&this.nodeHoverPrograms[n].kill(),this.nodePrograms[n]=new r(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[n]=new(a||r)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(n,r){return this.edgePrograms[n]&&this.edgePrograms[n].kill(),this.edgePrograms[n]=new r(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(n){if(this.nodePrograms[n]){var r=this.nodePrograms,a=r[n],o=Tr(r,[n].map(qn));a.kill(),this.nodePrograms=o}if(this.nodeHoverPrograms[n]){var s=this.nodeHoverPrograms,l=s[n],u=Tr(s,[n].map(qn));l.kill(),this.nodePrograms=u}return this}},{key:"unregisterEdgeProgram",value:function(n){if(this.edgePrograms[n]){var r=this.edgePrograms,a=r[n],o=Tr(r,[n].map(qn));a.kill(),this.edgePrograms=o}return this}},{key:"resetWebGLTexture",value:function(n){var r=this.webGLContexts[n],a=this.frameBuffers[n],o=this.textures[n];o&&r.deleteTexture(o);var s=r.createTexture();return r.bindFramebuffer(r.FRAMEBUFFER,a),r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s,0),this.textures[n]=s,this}},{key:"bindCameraHandlers",value:function(){var n=this;return this.activeListeners.camera=function(){n.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(n){var r=n.x,a=n.y,o=ho(this.webGLContexts.nodes,this.frameBuffers.nodes,r,a,this.pixelRatio,this.pickingDownSizingRatio),s=co.apply(void 0,No(o)),l=this.itemIDsIndex[s];return l&&l.type==="node"?l.id:null}},{key:"bindEventHandlers",value:function(){var n=this;this.activeListeners.handleResize=function(){n.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(a){var o=Rn(a),s={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}},l=n.getNodeAtPosition(o);if(l&&n.hoveredNode!==l&&!n.nodeDataCache[l].hidden){n.hoveredNode&&n.emit("leaveNode",q(q({},s),{},{node:n.hoveredNode})),n.hoveredNode=l,n.emit("enterNode",q(q({},s),{},{node:l})),n.scheduleHighlightedNodesRender();return}if(n.hoveredNode&&n.getNodeAtPosition(o)!==n.hoveredNode){var u=n.hoveredNode;n.hoveredNode=null,n.emit("leaveNode",q(q({},s),{},{node:u})),n.scheduleHighlightedNodesRender();return}if(n.settings.enableEdgeEvents){var c=n.hoveredNode?null:n.getEdgeAtPoint(s.event.x,s.event.y);c!==n.hoveredEdge&&(n.hoveredEdge&&n.emit("leaveEdge",q(q({},s),{},{edge:n.hoveredEdge})),c&&n.emit("enterEdge",q(q({},s),{},{edge:c})),n.hoveredEdge=c)}},this.activeListeners.handleMoveBody=function(a){var o=Rn(a);n.emit("moveBody",{event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(a){var o=Rn(a),s={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};n.hoveredNode&&(n.emit("leaveNode",q(q({},s),{},{node:n.hoveredNode})),n.scheduleHighlightedNodesRender()),n.settings.enableEdgeEvents&&n.hoveredEdge&&(n.emit("leaveEdge",q(q({},s),{},{edge:n.hoveredEdge})),n.scheduleHighlightedNodesRender()),n.emit("leaveStage",q({},s))},this.activeListeners.handleEnter=function(a){var o=Rn(a),s={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};n.emit("enterStage",q({},s))};var r=function(o){return function(s){var l=Rn(s),u={event:l,preventSigmaDefault:function(){l.preventSigmaDefault()}},c=n.getNodeAtPosition(l);if(c)return n.emit("".concat(o,"Node"),q(q({},u),{},{node:c}));if(n.settings.enableEdgeEvents){var d=n.getEdgeAtPoint(l.x,l.y);if(d)return n.emit("".concat(o,"Edge"),q(q({},u),{},{edge:d}))}return n.emit("".concat(o,"Stage"),u)}};return this.activeListeners.handleClick=r("click"),this.activeListeners.handleRightClick=r("rightClick"),this.activeListeners.handleDoubleClick=r("doubleClick"),this.activeListeners.handleWheel=r("wheel"),this.activeListeners.handleDown=r("down"),this.activeListeners.handleUp=r("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var n=this,r=this.graph,a=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(o){var s,l=(s=o.hints)===null||s===void 0?void 0:s.attributes;n.graph.forEachNode(function(c){return n.updateNode(c)});var u=!l||l.some(function(c){return a.has(c)});n.refresh({partialGraph:{nodes:r.nodes()},skipIndexation:!u,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(o){var s,l=(s=o.hints)===null||s===void 0?void 0:s.attributes;n.graph.forEachEdge(function(c){return n.updateEdge(c)});var u=l&&["zIndex","type"].some(function(c){return l==null?void 0:l.includes(c)});n.refresh({partialGraph:{edges:r.edges()},skipIndexation:!u,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(o){var s=o.key;n.addNode(s),n.refresh({partialGraph:{nodes:[s]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(o){var s=o.key;n.refresh({partialGraph:{nodes:[s]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(o){var s=o.key;n.removeNode(s),n.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(o){var s=o.key;n.addEdge(s),n.refresh({partialGraph:{edges:[s]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(o){var s=o.key;n.refresh({partialGraph:{edges:[s]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(o){var s=o.key;n.removeEdge(s),n.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){n.clearEdgeState(),n.clearEdgeIndices(),n.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){n.clearEdgeState(),n.clearNodeState(),n.clearEdgeIndices(),n.clearNodeIndices(),n.refresh({schedule:!0})},r.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var n=this.graph;n.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),n.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),n.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),n.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),n.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),n.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),n.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),n.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),n.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),n.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(n,r){var a=ho(this.webGLContexts.edges,this.frameBuffers.edges,n,r,this.pixelRatio,this.pickingDownSizingRatio),o=co.apply(void 0,No(a)),s=this.itemIDsIndex[o];return s&&s.type==="edge"?s.id:null}},{key:"process",value:function(){var n=this;this.emit("beforeProcess");var r=this.graph,a=this.settings,o=this.getDimensions();if(this.nodeExtent=wf(this.graph),!this.settings.autoRescale){var s=o.width,l=o.height,u=this.nodeExtent,c=u.x,d=u.y;this.nodeExtent={x:[(c[0]+c[1])/2-s/2,(c[0]+c[1])/2+s/2],y:[(d[0]+d[1])/2-l/2,(d[0]+d[1])/2+l/2]}}this.normalizationFunction=To(this.customBBox||this.nodeExtent);var h=new Ao,f=Mn(h.getState(),o,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(o,a.labelGridCellSize);for(var b={},p={},w={},E={},y=1,v=r.nodes(),_=0,D=v.length;_<D;_++){var k=v[_],S=this.nodeDataCache[k],C=r.getNodeAttributes(k);S.x=C.x,S.y=C.y,this.normalizationFunction.applyTo(S),typeof S.label=="string"&&!S.hidden&&this.labelGrid.add(k,S.size,this.framedGraphToViewport(S,{matrix:f})),b[S.type]=(b[S.type]||0)+1}this.labelGrid.organize();for(var M in this.nodePrograms){if(!xt.call(this.nodePrograms,M))throw new Error('Sigma: could not find a suitable program for node type "'.concat(M,'"!'));this.nodePrograms[M].reallocate(b[M]||0),b[M]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(v=Co(this.nodeZExtent,function(Se){return n.nodeDataCache[Se].zIndex},v));for(var F=0,P=v.length;F<P;F++){var A=v[F];p[A]=y,E[p[A]]={type:"node",id:A},y++;var G=this.nodeDataCache[A];this.addNodeToProgram(A,p[A],b[G.type]++)}for(var W={},Y=r.edges(),Z=0,Q=Y.length;Z<Q;Z++){var j=Y[Z],ee=this.edgeDataCache[j];W[ee.type]=(W[ee.type]||0)+1}this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(Y=Co(this.edgeZExtent,function(Se){return n.edgeDataCache[Se].zIndex},Y));for(var ne in this.edgePrograms){if(!xt.call(this.edgePrograms,ne))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(ne,'"!'));this.edgePrograms[ne].reallocate(W[ne]||0),W[ne]=0}for(var ue=0,ye=Y.length;ue<ye;ue++){var me=Y[ue];w[me]=y,E[w[me]]={type:"edge",id:me},y++;var Ce=this.edgeDataCache[me];this.addEdgeToProgram(me,w[me],W[Ce.type]++)}return this.itemIDsIndex=E,this.nodeIndices=p,this.edgeIndices=w,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(n){var r=this,a=this.settings;if(this.camera.minRatio=a.minCameraRatio,this.camera.maxRatio=a.maxCameraRatio,this.camera.enabledZooming=a.enableCameraZooming,this.camera.enabledPanning=a.enableCameraPanning,this.camera.enabledRotation=a.enableCameraRotation,a.cameraPanBoundaries?this.camera.clean=function(c){return r.cleanCameraState(c,a.cameraPanBoundaries&&Xr(a.cameraPanBoundaries)==="object"?a.cameraPanBoundaries:{})}:this.camera.clean=null,this.camera.setState(this.camera.validateState(this.camera.getState())),n){if(n.edgeProgramClasses!==a.edgeProgramClasses){for(var o in a.edgeProgramClasses)a.edgeProgramClasses[o]!==n.edgeProgramClasses[o]&&this.registerEdgeProgram(o,a.edgeProgramClasses[o]);for(var s in n.edgeProgramClasses)a.edgeProgramClasses[s]||this.unregisterEdgeProgram(s)}if(n.nodeProgramClasses!==a.nodeProgramClasses||n.nodeHoverProgramClasses!==a.nodeHoverProgramClasses){for(var l in a.nodeProgramClasses)(a.nodeProgramClasses[l]!==n.nodeProgramClasses[l]||a.nodeHoverProgramClasses[l]!==n.nodeHoverProgramClasses[l])&&this.registerNodeProgram(l,a.nodeProgramClasses[l],a.nodeHoverProgramClasses[l]);for(var u in n.nodeProgramClasses)a.nodeProgramClasses[u]||this.unregisterNodeProgram(u)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"cleanCameraState",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.tolerance,o=a===void 0?0:a,s=r.boundaries,l=q({},n),u=s||this.nodeExtent,c=yn(u.x,2),d=c[0],h=c[1],f=yn(u.y,2),b=f[0],p=f[1],w=[this.graphToViewport({x:d,y:b},{cameraState:n}),this.graphToViewport({x:h,y:b},{cameraState:n}),this.graphToViewport({x:d,y:p},{cameraState:n}),this.graphToViewport({x:h,y:p},{cameraState:n})],E=1/0,y=-1/0,v=1/0,_=-1/0;w.forEach(function(W){var Y=W.x,Z=W.y;E=Math.min(E,Y),y=Math.max(y,Y),v=Math.min(v,Z),_=Math.max(_,Z)});var D=y-E,k=_-v,S=this.getDimensions(),C=S.width,M=S.height,F=0,P=0;if(D>=C?y<C-o?F=y-(C-o):E>o&&(F=E-o):y>C+o?F=y-(C+o):E<-o&&(F=E+o),k>=M?_<M-o?P=_-(M-o):v>o&&(P=v-o):_>M+o?P=_-(M+o):v<-o&&(P=v+o),F||P){var A=this.viewportToFramedGraph({x:0,y:0},{cameraState:n}),G=this.viewportToFramedGraph({x:F,y:P},{cameraState:n});F=G.x-A.x,P=G.y-A.y,l.x+=F,l.y+=P}return l}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var n=this.camera.getState(),r=this.labelGrid.getLabelsToDisplay(n.ratio,this.settings.labelDensity);Do(r,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var a=this.canvasContexts.labels,o=0,s=r.length;o<s;o++){var l=r[o],u=this.nodeDataCache[l];if(!this.displayedNodeLabels.has(l)&&!u.hidden){var c=this.framedGraphToViewport(u),d=c.x,h=c.y,f=this.scaleSize(u.size);if(!(!u.forceLabel&&f<this.settings.labelRenderedSizeThreshold)&&!(d<-Mo||d>this.width+Mo||h<-Ro||h>this.height+Ro)){this.displayedNodeLabels.add(l);var b=this.settings.defaultDrawNodeLabel,p=this.nodePrograms[u.type],w=(p==null?void 0:p.drawLabel)||b;w(a,q(q({key:l},u),{},{size:f,x:d,y:h}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var n=this.canvasContexts.edgeLabels;n.clearRect(0,0,this.width,this.height);var r=Gf({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});Do(r,this.edgesWithForcedLabels);for(var a=new Set,o=0,s=r.length;o<s;o++){var l=r[o],u=this.graph.extremities(l),c=this.nodeDataCache[u[0]],d=this.nodeDataCache[u[1]],h=this.edgeDataCache[l];if(!a.has(l)&&!(h.hidden||c.hidden||d.hidden)){var f=this.settings.defaultDrawEdgeLabel,b=this.edgePrograms[h.type],p=(b==null?void 0:b.drawLabel)||f;p(n,q(q({key:l},h),{},{size:this.scaleSize(h.size)}),q(q(q({key:u[0]},c),this.framedGraphToViewport(c)),{},{size:this.scaleSize(c.size)}),q(q(q({key:u[1]},d),this.framedGraphToViewport(d)),{},{size:this.scaleSize(d.size)}),this.settings),a.add(l)}}return this.displayedEdgeLabels=a,this}},{key:"renderHighlightedNodes",value:function(){var n=this,r=this.canvasContexts.hovers;r.clearRect(0,0,this.width,this.height);var a=function(f){var b=n.nodeDataCache[f],p=n.framedGraphToViewport(b),w=p.x,E=p.y,y=n.scaleSize(b.size),v=n.settings.defaultDrawNodeHover,_=n.nodePrograms[b.type],D=(_==null?void 0:_.drawHover)||v;D(r,q(q({key:f},b),{},{size:y,x:w,y:E}),n.settings)},o=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&o.push(this.hoveredNode),this.highlightedNodes.forEach(function(h){h!==n.hoveredNode&&o.push(h)}),o.forEach(function(h){return a(h)});var s={};o.forEach(function(h){var f=n.nodeDataCache[h].type;s[f]=(s[f]||0)+1});for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].reallocate(s[l]||0),s[l]=0;o.forEach(function(h){var f=n.nodeDataCache[h];n.nodeHoverPrograms[f.type].process(0,s[f.type]++,f)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var u=this.getRenderParams();for(var c in this.nodeHoverPrograms){var d=this.nodeHoverPrograms[c];d.render(u)}}},{key:"scheduleHighlightedNodesRender",value:function(){var n=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){n.renderHighlightedNodesFrame=null,n.renderHighlightedNodes(),n.renderEdgeLabels()}))}},{key:"render",value:function(){var n=this;this.emit("beforeRender");var r=function(){return n.emit("afterRender"),n};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(w){return n.resetWebGLTexture(w)}),!this.graph.order)return r();var a=this.mouseCaptor,o=this.camera.isAnimated()||a.isMoving||a.draggedEvents||a.currentWheelDirection,s=this.camera.getState(),l=this.getDimensions(),u=this.getGraphDimensions(),c=this.getStagePadding();this.matrix=Mn(s,l,u,c),this.invMatrix=Mn(s,l,u,c,!0),this.correctionRatio=yf(this.matrix,s,l),this.graphToViewportRatio=this.getGraphToViewportRatio();var d=this.getRenderParams();for(var h in this.nodePrograms){var f=this.nodePrograms[h];f.render(d)}if(!this.settings.hideEdgesOnMove||!o)for(var b in this.edgePrograms){var p=this.edgePrograms[b];p.render(d)}return this.settings.hideLabelsOnMove&&o||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),r()}},{key:"addNode",value:function(n){var r=Object.assign({},this.graph.getNodeAttributes(n));this.settings.nodeReducer&&(r=this.settings.nodeReducer(n,r));var a=$f(this.settings,n,r);this.nodeDataCache[n]=a,this.nodesWithForcedLabels.delete(n),a.forceLabel&&!a.hidden&&this.nodesWithForcedLabels.add(n),this.highlightedNodes.delete(n),a.highlighted&&!a.hidden&&this.highlightedNodes.add(n),this.settings.zIndex&&(a.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=a.zIndex),a.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=a.zIndex))}},{key:"updateNode",value:function(n){this.addNode(n);var r=this.nodeDataCache[n];this.normalizationFunction.applyTo(r)}},{key:"removeNode",value:function(n){delete this.nodeDataCache[n],delete this.nodeProgramIndex[n],this.highlightedNodes.delete(n),this.hoveredNode===n&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(n)}},{key:"addEdge",value:function(n){var r=Object.assign({},this.graph.getEdgeAttributes(n));this.settings.edgeReducer&&(r=this.settings.edgeReducer(n,r));var a=zf(this.settings,n,r);this.edgeDataCache[n]=a,this.edgesWithForcedLabels.delete(n),a.forceLabel&&!a.hidden&&this.edgesWithForcedLabels.add(n),this.settings.zIndex&&(a.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=a.zIndex),a.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=a.zIndex))}},{key:"updateEdge",value:function(n){this.addEdge(n)}},{key:"removeEdge",value:function(n){delete this.edgeDataCache[n],delete this.edgeProgramIndex[n],this.hoveredEdge===n&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(n)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new Fo,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0],this.highlightedNodes=new Set}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(n,r,a){var o=this.nodeDataCache[n],s=this.nodePrograms[o.type];if(!s)throw new Error('Sigma: could not find a suitable program for node type "'.concat(o.type,'"!'));s.process(r,a,o),this.nodeProgramIndex[n]=a}},{key:"addEdgeToProgram",value:function(n,r,a){var o=this.edgeDataCache[n],s=this.edgePrograms[o.type];if(!s)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(o.type,'"!'));var l=this.graph.extremities(n),u=this.nodeDataCache[l[0]],c=this.nodeDataCache[l[1]];s.process(r,a,u,c,o),this.edgeProgramIndex[n]=a}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var n=this.settings,r=n.stagePadding,a=n.autoRescale;return a&&r||0}},{key:"createLayer",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.elements[n])throw new Error('Sigma: a layer named "'.concat(n,'" already exists'));var o=kf(r,{position:"absolute"},{class:"sigma-".concat(n)});return a.style&&Object.assign(o.style,a.style),this.elements[n]=o,"beforeLayer"in a&&a.beforeLayer?this.elements[a.beforeLayer].before(o):"afterLayer"in a&&a.afterLayer?this.elements[a.afterLayer].after(o):this.container.appendChild(o),o}},{key:"createCanvas",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.createLayer(n,"canvas",r)}},{key:"createCanvasContext",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.createCanvas(n,r),o={preserveDrawingBuffer:!1,antialias:!1};return this.canvasContexts[n]=a.getContext("2d",o),this}},{key:"createWebGLContext",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(r==null?void 0:r.canvas)||this.createCanvas(n,r);r.hidden&&a.remove();var o=q({preserveDrawingBuffer:!1,antialias:!1},r),s;s=a.getContext("webgl2",o),s||(s=a.getContext("webgl",o)),s||(s=a.getContext("experimental-webgl",o));var l=s;if(this.webGLContexts[n]=l,l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),r.picking){this.pickingLayers.add(n);var u=l.createFramebuffer();if(!u)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(n));this.frameBuffers[n]=u}return l}},{key:"killLayer",value:function(n){var r=this.elements[n];if(!r)throw new Error("Sigma: cannot kill layer ".concat(n,", which does not exist"));if(this.webGLContexts[n]){var a,o=this.webGLContexts[n];(a=o.getExtension("WEBGL_lose_context"))===null||a===void 0||a.loseContext(),delete this.webGLContexts[n]}else this.canvasContexts[n]&&delete this.canvasContexts[n];return r.remove(),delete this.elements[n],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(n){this.unbindCameraHandlers(),this.camera=n,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(n){n!==this.graph&&(this.hoveredNode&&!n.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!n.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),this.checkEdgesEventsFrame!==null&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=n,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var n=this.customBBox||this.nodeExtent;return{width:n.x[1]-n.x[0]||1,height:n.y[1]-n.y[0]||1}}},{key:"getNodeDisplayData",value:function(n){var r=this.nodeDataCache[n];return r?Object.assign({},r):void 0}},{key:"getEdgeDisplayData",value:function(n){var r=this.edgeDataCache[n];return r?Object.assign({},r):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return q({},this.settings)}},{key:"getSetting",value:function(n){return this.settings[n]}},{key:"setSetting",value:function(n,r){var a=q({},this.settings);return this.settings[n]=r,Cr(this.settings),this.handleSettingsUpdate(a),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(n,r){return this.setSetting(n,r(this.settings[n])),this}},{key:"setSettings",value:function(n){var r=q({},this.settings);return this.settings=q(q({},this.settings),n),Cr(this.settings),this.handleSettingsUpdate(r),this.scheduleRefresh(),this}},{key:"resize",value:function(n){var r=this.width,a=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=Eo(),this.width===0)if(this.settings.allowInvalidContainer)this.width=1;else throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(this.height===0)if(this.settings.allowInvalidContainer)this.height=1;else throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");if(!n&&r===this.width&&a===this.height)return this;for(var o in this.elements){var s=this.elements[o];s.style.width=this.width+"px",s.style.height=this.height+"px"}for(var l in this.canvasContexts)this.elements[l].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[l].setAttribute("height",this.height*this.pixelRatio+"px"),this.pixelRatio!==1&&this.canvasContexts[l].scale(this.pixelRatio,this.pixelRatio);for(var u in this.webGLContexts){this.elements[u].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[u].setAttribute("height",this.height*this.pixelRatio+"px");var c=this.webGLContexts[u];if(c.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(u)){var d=this.textures[u];d&&c.deleteTexture(d)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(n){var r=this,a=(n==null?void 0:n.skipIndexation)!==void 0?n==null?void 0:n.skipIndexation:!1,o=(n==null?void 0:n.schedule)!==void 0?n.schedule:!1,s=!n||!n.partialGraph;if(s)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(_){return r.addNode(_)}),this.graph.forEachEdge(function(_){return r.addEdge(_)});else{for(var l,u,c=((l=n.partialGraph)===null||l===void 0?void 0:l.nodes)||[],d=0,h=(c==null?void 0:c.length)||0;d<h;d++){var f=c[d];if(this.updateNode(f),a){var b=this.nodeProgramIndex[f];if(b===void 0)throw new Error('Sigma: node "'.concat(f,`" can't be repaint`));this.addNodeToProgram(f,this.nodeIndices[f],b)}}for(var p=(n==null||(u=n.partialGraph)===null||u===void 0?void 0:u.edges)||[],w=0,E=p.length;w<E;w++){var y=p[w];if(this.updateEdge(y),a){var v=this.edgeProgramIndex[y];if(v===void 0)throw new Error('Sigma: edge "'.concat(y,`" can't be repaint`));this.addEdgeToProgram(y,this.edgeIndices[y],v)}}}return(s||!a)&&(this.needToProcess=!0),o?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var n=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){n.render()})),this}},{key:"scheduleRefresh",value:function(n){return this.refresh(q(q({},n),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(n,r){var a=this.camera.getState(),o=a.ratio,s=a.angle,l=a.x,u=a.y,c=this.settings,d=c.minCameraRatio,h=c.maxCameraRatio;typeof h=="number"&&(r=Math.min(r,h)),typeof d=="number"&&(r=Math.max(r,d));var f=r/o,b={x:this.width/2,y:this.height/2},p=this.viewportToFramedGraph(n),w=this.viewportToFramedGraph(b);return{angle:s,x:(p.x-w.x)*(1-f)+l,y:(p.y-w.y)*(1-f)+u,ratio:r}}},{key:"viewRectangle",value:function(){var n=this.viewportToFramedGraph({x:0,y:0}),r=this.viewportToFramedGraph({x:this.width,y:0}),a=this.viewportToFramedGraph({x:0,y:this.height});return{x1:n.x,y1:n.y,x2:r.x,y2:r.y,height:r.y-a.y}}},{key:"framedGraphToViewport",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=!!r.cameraState||!!r.viewportDimensions||!!r.graphDimensions,o=r.matrix?r.matrix:a?Mn(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding()):this.matrix,s=Jr(o,n);return{x:(1+s.x)*this.width/2,y:(1-s.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=!!r.cameraState||!!r.viewportDimensions||!r.graphDimensions,o=r.matrix?r.matrix:a?Mn(r.cameraState||this.camera.getState(),r.viewportDimensions||this.getDimensions(),r.graphDimensions||this.getGraphDimensions(),r.padding||this.getStagePadding(),!0):this.invMatrix,s=Jr(o,{x:n.x/this.width*2-1,y:1-n.y/this.height*2});return isNaN(s.x)&&(s.x=0),isNaN(s.y)&&(s.y=0),s}},{key:"viewportToGraph",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.normalizationFunction.inverse(this.viewportToFramedGraph(n,r))}},{key:"graphToViewport",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(n),r)}},{key:"getGraphToViewportRatio",value:function(){var n={x:0,y:0},r={x:1,y:1},a=Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2)),o=this.graphToViewport(n),s=this.graphToViewport(r),l=Math.sqrt(Math.pow(o.x-s.x,2)+Math.pow(o.y-s.y,2));return l/a}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(n){return this.customBBox=n,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var n=this.container;n.firstChild;)n.removeChild(n.firstChild);for(var r in this.nodePrograms)this.nodePrograms[r].kill();for(var a in this.nodeHoverPrograms)this.nodeHoverPrograms[a].kill();for(var o in this.edgePrograms)this.edgePrograms[o].kill();this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={};for(var s in this.elements)this.killLayer(s);this.canvasContexts={},this.webGLContexts={},this.elements={}}},{key:"scaleSize",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.camera.ratio;return n/this.settings.zoomToSizeRatioFunction(r)*(this.getSetting("itemSizesReference")==="positions"?r*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var n={};for(var r in this.elements)this.elements[r]instanceof HTMLCanvasElement&&(n[r]=this.elements[r]);return n}}])}(wa),Uf=Bf;function Hf(i){if(Array.isArray(i))return i}function Wf(i,t){var e=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var n,r,a,o,s=[],l=!0,u=!1;try{if(a=(e=e.call(i)).next,t!==0)for(;!(l=(n=a.call(e)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}function Qr(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,n=Array(t);e<t;e++)n[e]=i[e];return n}function xl(i,t){if(i){if(typeof i=="string")return Qr(i,t);var e={}.toString.call(i).slice(8,-1);return e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set"?Array.from(i):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Qr(i,t):void 0}}function jf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vf(i,t){return Hf(i)||Wf(i,t)||xl(i,t)||jf()}function Kf(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Yf(i,t){if(typeof i!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var n=e.call(i,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function Sl(i){var t=Yf(i,"string");return typeof t=="symbol"?t:t+""}function qf(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,Sl(n.key),n)}}function Zf(i,t,e){return t&&qf(i.prototype,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function Zi(i){return Zi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zi(i)}function El(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(El=function(){return!!i})()}function ea(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Jf(i,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ea(i)}function Xf(i,t,e){return t=Zi(t),Jf(i,El()?Reflect.construct(t,e||[],Zi(i).constructor):t.apply(i,e))}function ta(i,t){return ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},ta(i,t)}function Qf(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),t&&ta(i,t)}function dn(i,t,e){return(t=Sl(t))in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function eg(i){if(Array.isArray(i))return Qr(i)}function tg(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function ng(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dr(i){return eg(i)||tg(i)||xl(i)||ng()}function Po(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,n)}return e}function Io(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Po(Object(e),!0).forEach(function(n){dn(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):Po(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}var ig="relative",rg={drawLabel:void 0,drawHover:void 0,borders:[{size:{value:.1},color:{attribute:"borderColor"}},{size:{fill:!0},color:{attribute:"color"}}]},ag="#000000";function og(i){var t=i.borders,e=mo(t.filter(function(r){var a=r.size;return"fill"in a}).length),n=`
precision highp float;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
varying vec4 v_color;
#else
// For normal mode, we use the border colors defined in the program:
`.concat(t.flatMap(function(r,a){var o=r.size;return"attribute"in o?["varying float v_borderSize_".concat(a+1,";")]:[]}).join(`
`),`
`).concat(t.flatMap(function(r,a){var o=r.color;return"attribute"in o?["varying vec4 v_borderColor_".concat(a+1,";")]:"value"in o?["uniform vec4 u_borderColor_".concat(a+1,";")]:[]}).join(`
`),`
#endif

uniform float u_correctionRatio;

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main(void) {
  float dist = length(v_diffVector);
  float aaBorder = 2.0 * u_correctionRatio;
  float v_borderSize_0 = v_radius;
  vec4 v_borderColor_0 = transparent;

  // No antialiasing for picking mode:
  #ifdef PICKING_MODE
  if (dist > v_radius)
    gl_FragColor = transparent;
  else {
    gl_FragColor = v_color;
    gl_FragColor.a *= bias;
  }
  #else
  // Sizes:
`).concat(t.flatMap(function(r,a){var o=r.size;if("fill"in o)return[];o=o;var s="attribute"in o?"v_borderSize_".concat(a+1):mo(o.value),l=(o.mode||ig)==="pixels"?"u_correctionRatio":"v_radius";return["  float borderSize_".concat(a+1," = ").concat(l," * ").concat(s,";")]}).join(`
`),`
  // Now, let's split the remaining space between "fill" borders:
  float fillBorderSize = (v_radius - (`).concat(t.flatMap(function(r,a){var o=r.size;return"fill"in o?[]:["borderSize_".concat(a+1)]}).join(" + "),") ) / ").concat(e,`;
`).concat(t.flatMap(function(r,a){var o=r.size;return"fill"in o?["  float borderSize_".concat(a+1," = fillBorderSize;")]:[]}).join(`
`),`

  // Finally, normalize all border sizes, to start from the full size and to end with the smallest:
  float adjustedBorderSize_0 = v_radius;
`).concat(t.map(function(r,a){return"  float adjustedBorderSize_".concat(a+1," = adjustedBorderSize_").concat(a," - borderSize_").concat(a+1,";")}).join(`
`),`

  // Colors:
  vec4 borderColor_0 = transparent;
`).concat(t.map(function(r,a){var o=r.color,s=[];return"attribute"in o?s.push("  vec4 borderColor_".concat(a+1," = v_borderColor_").concat(a+1,";")):"transparent"in o?s.push("  vec4 borderColor_".concat(a+1," = vec4(0.0, 0.0, 0.0, 0.0);")):s.push("  vec4 borderColor_".concat(a+1," = u_borderColor_").concat(a+1,";")),s.push("  borderColor_".concat(a+1,".a *= bias;")),s.push("  if (borderSize_".concat(a+1," <= 1.0 * u_correctionRatio) { borderColor_").concat(a+1," = borderColor_").concat(a,"; }")),s.join(`
`)}).join(`
`),`
  if (dist > adjustedBorderSize_0) {
    gl_FragColor = borderColor_0;
  } else `).concat(t.map(function(r,a){return"if (dist > adjustedBorderSize_".concat(a,` - aaBorder) {
    gl_FragColor = mix(borderColor_`).concat(a+1,", borderColor_").concat(a,", (dist - adjustedBorderSize_").concat(a,` + aaBorder) / aaBorder);
  } else if (dist > adjustedBorderSize_`).concat(a+1,`) {
    gl_FragColor = borderColor_`).concat(a+1,`;
  } else `)}).join(""),` { /* Nothing to add here */ }
  #endif
}
`);return n}function sg(i){var t=i.borders,e=`
attribute vec2 a_position;
attribute float a_size;
attribute float a_angle;

uniform mat3 u_matrix;
uniform float u_sizeRatio;
uniform float u_correctionRatio;

varying vec2 v_diffVector;
varying float v_radius;

#ifdef PICKING_MODE
attribute vec4 a_id;
varying vec4 v_color;
#else
`.concat(t.flatMap(function(n,r){var a=n.size;return"attribute"in a?["attribute float a_borderSize_".concat(r+1,";"),"varying float v_borderSize_".concat(r+1,";")]:[]}).join(`
`),`
`).concat(t.flatMap(function(n,r){var a=n.color;return"attribute"in a?["attribute vec4 a_borderColor_".concat(r+1,";"),"varying vec4 v_borderColor_".concat(r+1,";")]:[]}).join(`
`),`
#endif

const float bias = 255.0 / 254.0;
const vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);

void main() {
  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;
  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));
  vec2 position = a_position + diffVector;
  gl_Position = vec4(
    (u_matrix * vec3(position, 1)).xy,
    0,
    1
  );

  v_radius = size / 2.0;
  v_diffVector = diffVector;

  #ifdef PICKING_MODE
  v_color = a_id;
  #else
`).concat(t.flatMap(function(n,r){var a=n.size;return"attribute"in a?["  v_borderSize_".concat(r+1," = a_borderSize_").concat(r+1,";")]:[]}).join(`
`),`
`).concat(t.flatMap(function(n,r){var a=n.color;return"attribute"in a?["  v_borderColor_".concat(r+1," = a_borderColor_").concat(r+1,";")]:[]}).join(`
`),`
  #endif
}
`);return e}var Cl=WebGLRenderingContext,Oo=Cl.UNSIGNED_BYTE,Ai=Cl.FLOAT;function Tl(i){var t,e=Io(Io({},rg),i||{}),n=e.borders,r=e.drawLabel,a=e.drawHover,o=["u_sizeRatio","u_correctionRatio","u_matrix"].concat(Dr(n.flatMap(function(s,l){var u=s.color;return"value"in u?["u_borderColor_".concat(l+1)]:[]})));return t=function(s){Qf(l,s);function l(){var u;Kf(this,l);for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];return u=Xf(this,l,[].concat(d)),dn(ea(u),"drawLabel",r),dn(ea(u),"drawHover",a),u}return Zf(l,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:sg(e),FRAGMENT_SHADER_SOURCE:og(e),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:o,ATTRIBUTES:[{name:"a_position",size:2,type:Ai},{name:"a_id",size:4,type:Oo,normalized:!0},{name:"a_size",size:1,type:Ai}].concat(Dr(n.flatMap(function(c,d){var h=c.color;return"attribute"in h?[{name:"a_borderColor_".concat(d+1),size:4,type:Oo,normalized:!0}]:[]})),Dr(n.flatMap(function(c,d){var h=c.size;return"attribute"in h?[{name:"a_borderSize_".concat(d+1),size:1,type:Ai}]:[]}))),CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Ai}],CONSTANT_DATA:[[l.ANGLE_1],[l.ANGLE_2],[l.ANGLE_3]]}}},{key:"processVisibleItem",value:function(c,d,h){var f=this.array;f[d++]=h.x,f[d++]=h.y,f[d++]=c,f[d++]=h.size,n.forEach(function(b){var p=b.color;"attribute"in p&&(f[d++]=Kt(h[p.attribute]||p.defaultValue||ag))}),n.forEach(function(b){var p=b.size;"attribute"in p&&(f[d++]=h[p.attribute]||p.defaultValue)})}},{key:"setUniforms",value:function(c,d){var h=d.gl,f=d.uniformLocations,b=f.u_sizeRatio,p=f.u_correctionRatio,w=f.u_matrix;h.uniform1f(p,c.correctionRatio),h.uniform1f(b,c.sizeRatio),h.uniformMatrix3fv(w,!1,c.matrix),n.forEach(function(E,y){var v=E.color;if("value"in v){var _=f["u_borderColor_".concat(y+1)],D=kh(v.value),k=Vf(D,4),S=k[0],C=k[1],M=k[2],F=k[3];h.uniform4f(_,S/255,C/255,M/255,F/255)}})}}]),l}(nl),dn(t,"ANGLE_1",0),dn(t,"ANGLE_2",2*Math.PI/3),dn(t,"ANGLE_3",4*Math.PI/3),t}Tl();function lg(){const i=arguments[0];for(let t=1,e=arguments.length;t<e;t++)if(arguments[t])for(const n in arguments[t])i[n]=arguments[t][n];return i}let Ee=lg;typeof Object.assign=="function"&&(Ee=Object.assign);function tt(i,t,e,n){const r=i._nodes.get(t);let a=null;return r&&(n==="mixed"?a=r.out&&r.out[e]||r.undirected&&r.undirected[e]:n==="directed"?a=r.out&&r.out[e]:a=r.undirected&&r.undirected[e]),a}function Re(i){return typeof i=="object"&&i!==null}function Dl(i){let t;for(t in i)return!1;return!0}function Xe(i,t,e){Object.defineProperty(i,t,{enumerable:!1,configurable:!1,writable:!0,value:e})}function ut(i,t,e){const n={enumerable:!0,configurable:!0};typeof e=="function"?n.get=e:(n.value=e,n.writable=!1),Object.defineProperty(i,t,n)}function Go(i){return!(!Re(i)||i.attributes&&!Array.isArray(i.attributes))}function ug(){let i=Math.floor(Math.random()*256)&255;return()=>i++}function St(){const i=arguments;let t=null,e=-1;return{[Symbol.iterator](){return this},next(){let n=null;do{if(t===null){if(e++,e>=i.length)return{done:!0};t=i[e][Symbol.iterator]()}if(n=t.next(),n.done){t=null;continue}break}while(!0);return n}}}function wn(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class ka extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class V extends ka{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,V.prototype.constructor)}}class B extends ka{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,B.prototype.constructor)}}class J extends ka{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,J.prototype.constructor)}}function Al(i,t){this.key=i,this.attributes=t,this.clear()}Al.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Nl(i,t){this.key=i,this.attributes=t,this.clear()}Nl.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Ll(i,t){this.key=i,this.attributes=t,this.clear()}Ll.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function _n(i,t,e,n,r){this.key=t,this.attributes=r,this.undirected=i,this.source=e,this.target=n}_n.prototype.attach=function(){let i="out",t="in";this.undirected&&(i=t="undirected");const e=this.source.key,n=this.target.key;this.source[i][n]=this,!(this.undirected&&e===n)&&(this.target[t][e]=this)};_n.prototype.attachMulti=function(){let i="out",t="in";const e=this.source.key,n=this.target.key;this.undirected&&(i=t="undirected");const r=this.source[i],a=r[n];if(typeof a>"u"){r[n]=this,this.undirected&&e===n||(this.target[t][e]=this);return}a.previous=this,this.next=a,r[n]=this,this.target[t][e]=this};_n.prototype.detach=function(){const i=this.source.key,t=this.target.key;let e="out",n="in";this.undirected&&(e=n="undirected"),delete this.source[e][t],delete this.target[n][i]};_n.prototype.detachMulti=function(){const i=this.source.key,t=this.target.key;let e="out",n="in";this.undirected&&(e=n="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[e][t],delete this.target[n][i]):(this.next.previous=void 0,this.source[e][t]=this.next,this.target[n][i]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Fl=0,Ml=1,cg=2,Rl=3;function Et(i,t,e,n,r,a,o){let s,l,u,c;if(n=""+n,e===Fl){if(s=i._nodes.get(n),!s)throw new B(`Graph.${t}: could not find the "${n}" node in the graph.`);u=r,c=a}else if(e===Rl){if(r=""+r,l=i._edges.get(r),!l)throw new B(`Graph.${t}: could not find the "${r}" edge in the graph.`);const d=l.source.key,h=l.target.key;if(n===d)s=l.target;else if(n===h)s=l.source;else throw new B(`Graph.${t}: the "${n}" node is not attached to the "${r}" edge (${d}, ${h}).`);u=a,c=o}else{if(l=i._edges.get(n),!l)throw new B(`Graph.${t}: could not find the "${n}" edge in the graph.`);e===Ml?s=l.source:s=l.target,u=r,c=a}return[s,u,c]}function dg(i,t,e){i.prototype[t]=function(n,r,a){const[o,s]=Et(this,t,e,n,r,a);return o.attributes[s]}}function hg(i,t,e){i.prototype[t]=function(n,r){const[a]=Et(this,t,e,n,r);return a.attributes}}function fg(i,t,e){i.prototype[t]=function(n,r,a){const[o,s]=Et(this,t,e,n,r,a);return o.attributes.hasOwnProperty(s)}}function gg(i,t,e){i.prototype[t]=function(n,r,a,o){const[s,l,u]=Et(this,t,e,n,r,a,o);return s.attributes[l]=u,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:l}),this}}function mg(i,t,e){i.prototype[t]=function(n,r,a,o){const[s,l,u]=Et(this,t,e,n,r,a,o);if(typeof u!="function")throw new V(`Graph.${t}: updater should be a function.`);const c=s.attributes,d=u(c[l]);return c[l]=d,this.emit("nodeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:l}),this}}function pg(i,t,e){i.prototype[t]=function(n,r,a){const[o,s]=Et(this,t,e,n,r,a);return delete o.attributes[s],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:s}),this}}function bg(i,t,e){i.prototype[t]=function(n,r,a){const[o,s]=Et(this,t,e,n,r,a);if(!Re(s))throw new V(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=s,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function vg(i,t,e){i.prototype[t]=function(n,r,a){const[o,s]=Et(this,t,e,n,r,a);if(!Re(s))throw new V(`Graph.${t}: provided attributes are not a plain object.`);return Ee(o.attributes,s),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:s}),this}}function yg(i,t,e){i.prototype[t]=function(n,r,a){const[o,s]=Et(this,t,e,n,r,a);if(typeof s!="function")throw new V(`Graph.${t}: provided updater is not a function.`);return o.attributes=s(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const wg=[{name:i=>`get${i}Attribute`,attacher:dg},{name:i=>`get${i}Attributes`,attacher:hg},{name:i=>`has${i}Attribute`,attacher:fg},{name:i=>`set${i}Attribute`,attacher:gg},{name:i=>`update${i}Attribute`,attacher:mg},{name:i=>`remove${i}Attribute`,attacher:pg},{name:i=>`replace${i}Attributes`,attacher:bg},{name:i=>`merge${i}Attributes`,attacher:vg},{name:i=>`update${i}Attributes`,attacher:yg}];function _g(i){wg.forEach(function({name:t,attacher:e}){e(i,t("Node"),Fl),e(i,t("Source"),Ml),e(i,t("Target"),cg),e(i,t("Opposite"),Rl)})}function kg(i,t,e){i.prototype[t]=function(n,r){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,s=""+r;if(r=arguments[2],a=tt(this,o,s,e),!a)throw new B(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(e!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new B(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return a.attributes[r]}}function xg(i,t,e){i.prototype[t]=function(n){let r;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+n,o=""+arguments[1];if(r=tt(this,a,o,e),!r)throw new B(`Graph.${t}: could not find an edge for the given path ("${a}" - "${o}").`)}else{if(e!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,r=this._edges.get(n),!r)throw new B(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return r.attributes}}function Sg(i,t,e){i.prototype[t]=function(n,r){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,s=""+r;if(r=arguments[2],a=tt(this,o,s,e),!a)throw new B(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(e!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new B(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return a.attributes.hasOwnProperty(r)}}function Eg(i,t,e){i.prototype[t]=function(n,r,a){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+n,l=""+r;if(r=arguments[2],a=arguments[3],o=tt(this,s,l,e),!o)throw new B(`Graph.${t}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(e!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new B(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return o.attributes[r]=a,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Cg(i,t,e){i.prototype[t]=function(n,r,a){let o;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+n,l=""+r;if(r=arguments[2],a=arguments[3],o=tt(this,s,l,e),!o)throw new B(`Graph.${t}: could not find an edge for the given path ("${s}" - "${l}").`)}else{if(e!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,o=this._edges.get(n),!o)throw new B(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(typeof a!="function")throw new V(`Graph.${t}: updater should be a function.`);return o.attributes[r]=a(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function Tg(i,t,e){i.prototype[t]=function(n,r){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,s=""+r;if(r=arguments[2],a=tt(this,o,s,e),!a)throw new B(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(e!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new B(`Graph.${t}: could not find the "${n}" edge in the graph.`)}return delete a.attributes[r],this.emit("edgeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:r}),this}}function Dg(i,t,e){i.prototype[t]=function(n,r){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,s=""+r;if(r=arguments[2],a=tt(this,o,s,e),!a)throw new B(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(e!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new B(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(!Re(r))throw new V(`Graph.${t}: provided attributes are not a plain object.`);return a.attributes=r,this.emit("edgeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function Ag(i,t,e){i.prototype[t]=function(n,r){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,s=""+r;if(r=arguments[2],a=tt(this,o,s,e),!a)throw new B(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(e!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new B(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(!Re(r))throw new V(`Graph.${t}: provided attributes are not a plain object.`);return Ee(a.attributes,r),this.emit("edgeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:r}),this}}function Ng(i,t,e){i.prototype[t]=function(n,r){let a;if(this.type!=="mixed"&&e!=="mixed"&&e!==this.type)throw new J(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new J(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+n,s=""+r;if(r=arguments[2],a=tt(this,o,s,e),!a)throw new B(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if(e!=="mixed")throw new J(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(n=""+n,a=this._edges.get(n),!a)throw new B(`Graph.${t}: could not find the "${n}" edge in the graph.`)}if(typeof r!="function")throw new V(`Graph.${t}: provided updater is not a function.`);return a.attributes=r(a.attributes),this.emit("edgeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const Lg=[{name:i=>`get${i}Attribute`,attacher:kg},{name:i=>`get${i}Attributes`,attacher:xg},{name:i=>`has${i}Attribute`,attacher:Sg},{name:i=>`set${i}Attribute`,attacher:Eg},{name:i=>`update${i}Attribute`,attacher:Cg},{name:i=>`remove${i}Attribute`,attacher:Tg},{name:i=>`replace${i}Attributes`,attacher:Dg},{name:i=>`merge${i}Attributes`,attacher:Ag},{name:i=>`update${i}Attributes`,attacher:Ng}];function Fg(i){Lg.forEach(function({name:t,attacher:e}){e(i,t("Edge"),"mixed"),e(i,t("DirectedEdge"),"directed"),e(i,t("UndirectedEdge"),"undirected")})}const Mg=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function Rg(i,t,e,n){let r=!1;for(const a in t){if(a===n)continue;const o=t[a];if(r=e(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),i&&r)return o.key}}function Pg(i,t,e,n){let r,a,o,s=!1;for(const l in t)if(l!==n){r=t[l];do{if(a=r.source,o=r.target,s=e(r.key,r.attributes,a.key,o.key,a.attributes,o.attributes,r.undirected),i&&s)return r.key;r=r.next}while(r!==void 0)}}function Ar(i,t){const e=Object.keys(i),n=e.length;let r,a=0;return{[Symbol.iterator](){return this},next(){do if(r)r=r.next;else{if(a>=n)return{done:!0};const o=e[a++];if(o===t){r=void 0;continue}r=i[o]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}}}}function Ig(i,t,e,n){const r=t[e];if(!r)return;const a=r.source,o=r.target;if(n(r.key,r.attributes,a.key,o.key,a.attributes,o.attributes,r.undirected)&&i)return r.key}function Og(i,t,e,n){let r=t[e];if(!r)return;let a=!1;do{if(a=n(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),i&&a)return r.key;r=r.next}while(r!==void 0)}function Nr(i,t){let e=i[t];if(e.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!e)return{done:!0};const r={edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected};return e=e.next,{done:!1,value:r}}};let n=!1;return{[Symbol.iterator](){return this},next(){return n===!0?{done:!0}:(n=!0,{done:!1,value:{edge:e.key,attributes:e.attributes,source:e.source.key,target:e.target.key,sourceAttributes:e.source.attributes,targetAttributes:e.target.attributes,undirected:e.undirected}})}}}function Gg(i,t){if(i.size===0)return[];if(t==="mixed"||t===i.type)return Array.from(i._edges.keys());const e=t==="undirected"?i.undirectedSize:i.directedSize,n=new Array(e),r=t==="undirected",a=i._edges.values();let o=0,s,l;for(;s=a.next(),s.done!==!0;)l=s.value,l.undirected===r&&(n[o++]=l.key);return n}function Pl(i,t,e,n){if(t.size===0)return;const r=e!=="mixed"&&e!==t.type,a=e==="undirected";let o,s,l=!1;const u=t._edges.values();for(;o=u.next(),o.done!==!0;){if(s=o.value,r&&s.undirected!==a)continue;const{key:c,attributes:d,source:h,target:f}=s;if(l=n(c,d,h.key,f.key,h.attributes,f.attributes,s.undirected),i&&l)return c}}function $g(i,t){if(i.size===0)return wn();const e=t!=="mixed"&&t!==i.type,n=t==="undirected",r=i._edges.values();return{[Symbol.iterator](){return this},next(){let a,o;for(;;){if(a=r.next(),a.done)return a;if(o=a.value,!(e&&o.undirected!==n))break}return{value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected},done:!1}}}}function xa(i,t,e,n,r,a){const o=t?Pg:Rg;let s;if(e!=="undirected"&&(n!=="out"&&(s=o(i,r.in,a),i&&s)||n!=="in"&&(s=o(i,r.out,a,n?void 0:r.key),i&&s))||e!=="directed"&&(s=o(i,r.undirected,a),i&&s))return s}function zg(i,t,e,n){const r=[];return xa(!1,i,t,e,n,function(a){r.push(a)}),r}function Bg(i,t,e){let n=wn();return i!=="undirected"&&(t!=="out"&&typeof e.in<"u"&&(n=St(n,Ar(e.in))),t!=="in"&&typeof e.out<"u"&&(n=St(n,Ar(e.out,t?void 0:e.key)))),i!=="directed"&&typeof e.undirected<"u"&&(n=St(n,Ar(e.undirected))),n}function Sa(i,t,e,n,r,a,o){const s=e?Og:Ig;let l;if(t!=="undirected"&&(typeof r.in<"u"&&n!=="out"&&(l=s(i,r.in,a,o),i&&l)||typeof r.out<"u"&&n!=="in"&&(n||r.key!==a)&&(l=s(i,r.out,a,o),i&&l))||t!=="directed"&&typeof r.undirected<"u"&&(l=s(i,r.undirected,a,o),i&&l))return l}function Ug(i,t,e,n,r){const a=[];return Sa(!1,i,t,e,n,r,function(o){a.push(o)}),a}function Hg(i,t,e,n){let r=wn();return i!=="undirected"&&(typeof e.in<"u"&&t!=="out"&&n in e.in&&(r=St(r,Nr(e.in,n))),typeof e.out<"u"&&t!=="in"&&n in e.out&&(t||e.key!==n)&&(r=St(r,Nr(e.out,n)))),i!=="directed"&&typeof e.undirected<"u"&&n in e.undirected&&(r=St(r,Nr(e.undirected,n))),r}function Wg(i,t){const{name:e,type:n,direction:r}=t;i.prototype[e]=function(a,o){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];if(!arguments.length)return Gg(this,n);if(arguments.length===1){a=""+a;const s=this._nodes.get(a);if(typeof s>"u")throw new B(`Graph.${e}: could not find the "${a}" node in the graph.`);return zg(this.multi,n==="mixed"?this.type:n,r,s)}if(arguments.length===2){a=""+a,o=""+o;const s=this._nodes.get(a);if(!s)throw new B(`Graph.${e}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(o))throw new B(`Graph.${e}:  could not find the "${o}" target node in the graph.`);return Ug(n,this.multi,r,s,o)}throw new V(`Graph.${e}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function jg(i,t){const{name:e,type:n,direction:r}=t,a="forEach"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[a]=function(u,c,d){if(!(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)){if(arguments.length===1)return d=u,Pl(!1,this,n,d);if(arguments.length===2){u=""+u,d=c;const h=this._nodes.get(u);if(typeof h>"u")throw new B(`Graph.${a}: could not find the "${u}" node in the graph.`);return xa(!1,this.multi,n==="mixed"?this.type:n,r,h,d)}if(arguments.length===3){u=""+u,c=""+c;const h=this._nodes.get(u);if(!h)throw new B(`Graph.${a}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new B(`Graph.${a}:  could not find the "${c}" target node in the graph.`);return Sa(!1,n,this.multi,r,h,c,d)}throw new V(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+e[0].toUpperCase()+e.slice(1);i.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();let d;if(u.length===0){let h=0;n!=="directed"&&(h+=this.undirectedSize),n!=="undirected"&&(h+=this.directedSize),d=new Array(h);let f=0;u.push((b,p,w,E,y,v,_)=>{d[f++]=c(b,p,w,E,y,v,_)})}else d=[],u.push((h,f,b,p,w,E,y)=>{d.push(c(h,f,b,p,w,E,y))});return this[a].apply(this,u),d};const s="filter"+e[0].toUpperCase()+e.slice(1);i.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop(),d=[];return u.push((h,f,b,p,w,E,y)=>{c(h,f,b,p,w,E,y)&&d.push(h)}),this[a].apply(this,u),d};const l="reduce"+e[0].toUpperCase()+e.slice(1);i.prototype[l]=function(){let u=Array.prototype.slice.call(arguments);if(u.length<2||u.length>4)throw new V(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${u.length}).`);if(typeof u[u.length-1]=="function"&&typeof u[u.length-2]!="function")throw new V(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let c,d;u.length===2?(c=u[0],d=u[1],u=[]):u.length===3?(c=u[1],d=u[2],u=[u[0]]):u.length===4&&(c=u[2],d=u[3],u=[u[0],u[1]]);let h=d;return u.push((f,b,p,w,E,y,v)=>{h=c(h,f,b,p,w,E,y,v)}),this[a].apply(this,u),h}}function Vg(i,t){const{name:e,type:n,direction:r}=t,a="find"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[a]=function(l,u,c){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return!1;if(arguments.length===1)return c=l,Pl(!0,this,n,c);if(arguments.length===2){l=""+l,c=u;const d=this._nodes.get(l);if(typeof d>"u")throw new B(`Graph.${a}: could not find the "${l}" node in the graph.`);return xa(!0,this.multi,n==="mixed"?this.type:n,r,d,c)}if(arguments.length===3){l=""+l,u=""+u;const d=this._nodes.get(l);if(!d)throw new B(`Graph.${a}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(u))throw new B(`Graph.${a}:  could not find the "${u}" target node in the graph.`);return Sa(!0,n,this.multi,r,d,u,c)}throw new V(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,b,p,w,E)=>u(d,h,f,b,p,w,E)),!!this[a].apply(this,l)};const s="every"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[s]=function(){const l=Array.prototype.slice.call(arguments),u=l.pop();return l.push((d,h,f,b,p,w,E)=>!u(d,h,f,b,p,w,E)),!this[a].apply(this,l)}}function Kg(i,t){const{name:e,type:n,direction:r}=t,a=e.slice(0,-1)+"Entries";i.prototype[a]=function(o,s){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return wn();if(!arguments.length)return $g(this,n);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new B(`Graph.${a}: could not find the "${o}" node in the graph.`);return Bg(n,r,l)}if(arguments.length===2){o=""+o,s=""+s;const l=this._nodes.get(o);if(!l)throw new B(`Graph.${a}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new B(`Graph.${a}:  could not find the "${s}" target node in the graph.`);return Hg(n,r,l,s)}throw new V(`Graph.${a}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Yg(i){Mg.forEach(t=>{Wg(i,t),jg(i,t),Vg(i,t),Kg(i,t)})}const qg=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function nr(){this.A=null,this.B=null}nr.prototype.wrap=function(i){this.A===null?this.A=i:this.B===null&&(this.B=i)};nr.prototype.has=function(i){return this.A!==null&&i in this.A||this.B!==null&&i in this.B};function In(i,t,e,n,r){for(const a in n){const o=n[a],s=o.source,l=o.target,u=s===e?l:s;if(t&&t.has(u.key))continue;const c=r(u.key,u.attributes);if(i&&c)return u.key}}function Ea(i,t,e,n,r){if(t!=="mixed"){if(t==="undirected")return In(i,null,n,n.undirected,r);if(typeof e=="string")return In(i,null,n,n[e],r)}const a=new nr;let o;if(t!=="undirected"){if(e!=="out"){if(o=In(i,null,n,n.in,r),i&&o)return o;a.wrap(n.in)}if(e!=="in"){if(o=In(i,a,n,n.out,r),i&&o)return o;a.wrap(n.out)}}if(t!=="directed"&&(o=In(i,a,n,n.undirected,r),i&&o))return o}function Zg(i,t,e){if(i!=="mixed"){if(i==="undirected")return Object.keys(e.undirected);if(typeof t=="string")return Object.keys(e[t])}const n=[];return Ea(!1,i,t,e,function(r){n.push(r)}),n}function On(i,t,e){const n=Object.keys(e),r=n.length;let a=0;return{[Symbol.iterator](){return this},next(){let o=null;do{if(a>=r)return i&&i.wrap(e),{done:!0};const s=e[n[a++]],l=s.source,u=s.target;if(o=l===t?u:l,i&&i.has(o.key)){o=null;continue}}while(o===null);return{done:!1,value:{neighbor:o.key,attributes:o.attributes}}}}}function Jg(i,t,e){if(i!=="mixed"){if(i==="undirected")return On(null,e,e.undirected);if(typeof t=="string")return On(null,e,e[t])}let n=wn();const r=new nr;return i!=="undirected"&&(t!=="out"&&(n=St(n,On(r,e,e.in))),t!=="in"&&(n=St(n,On(r,e,e.out)))),i!=="directed"&&(n=St(n,On(r,e,e.undirected))),n}function Xg(i,t){const{name:e,type:n,direction:r}=t;i.prototype[e]=function(a){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return[];a=""+a;const o=this._nodes.get(a);if(typeof o>"u")throw new B(`Graph.${e}: could not find the "${a}" node in the graph.`);return Zg(n==="mixed"?this.type:n,r,o)}}function Qg(i,t){const{name:e,type:n,direction:r}=t,a="forEach"+e[0].toUpperCase()+e.slice(1,-1);i.prototype[a]=function(u,c){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new B(`Graph.${a}: could not find the "${u}" node in the graph.`);Ea(!1,n==="mixed"?this.type:n,r,d,c)};const o="map"+e[0].toUpperCase()+e.slice(1);i.prototype[o]=function(u,c){const d=[];return this[a](u,(h,f)=>{d.push(c(h,f))}),d};const s="filter"+e[0].toUpperCase()+e.slice(1);i.prototype[s]=function(u,c){const d=[];return this[a](u,(h,f)=>{c(h,f)&&d.push(h)}),d};const l="reduce"+e[0].toUpperCase()+e.slice(1);i.prototype[l]=function(u,c,d){if(arguments.length<3)throw new V(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let h=d;return this[a](u,(f,b)=>{h=c(h,f,b)}),h}}function em(i,t){const{name:e,type:n,direction:r}=t,a=e[0].toUpperCase()+e.slice(1,-1),o="find"+a;i.prototype[o]=function(u,c){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return;u=""+u;const d=this._nodes.get(u);if(typeof d>"u")throw new B(`Graph.${o}: could not find the "${u}" node in the graph.`);return Ea(!0,n==="mixed"?this.type:n,r,d,c)};const s="some"+a;i.prototype[s]=function(u,c){return!!this[o](u,c)};const l="every"+a;i.prototype[l]=function(u,c){return!this[o](u,(h,f)=>!c(h,f))}}function tm(i,t){const{name:e,type:n,direction:r}=t,a=e.slice(0,-1)+"Entries";i.prototype[a]=function(o){if(n!=="mixed"&&this.type!=="mixed"&&n!==this.type)return wn();o=""+o;const s=this._nodes.get(o);if(typeof s>"u")throw new B(`Graph.${a}: could not find the "${o}" node in the graph.`);return Jg(n==="mixed"?this.type:n,r,s)}}function nm(i){qg.forEach(t=>{Xg(i,t),Qg(i,t),em(i,t),tm(i,t)})}function Ni(i,t,e,n,r){const a=n._nodes.values(),o=n.type;let s,l,u,c,d,h;for(;s=a.next(),s.done!==!0;){let f=!1;if(l=s.value,o!=="undirected"){c=l.out;for(u in c){d=c[u];do h=d.target,f=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){c=l.undirected;for(u in c)if(!(t&&l.key>u)){d=c[u];do h=d.target,h.key!==u&&(h=d.source),f=!0,r(l.key,h.key,l.attributes,h.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}e&&!f&&r(l.key,null,l.attributes,null,null,null,null)}}function im(i,t){const e={key:i};return Dl(t.attributes)||(e.attributes=Ee({},t.attributes)),e}function rm(i,t,e){const n={key:t,source:e.source.key,target:e.target.key};return Dl(e.attributes)||(n.attributes=Ee({},e.attributes)),i==="mixed"&&e.undirected&&(n.undirected=!0),n}function am(i){if(!Re(i))throw new V('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in i))throw new V("Graph.import: serialized node is missing its key.");if("attributes"in i&&(!Re(i.attributes)||i.attributes===null))throw new V("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function om(i){if(!Re(i))throw new V('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in i))throw new V("Graph.import: serialized edge is missing its source.");if(!("target"in i))throw new V("Graph.import: serialized edge is missing its target.");if("attributes"in i&&(!Re(i.attributes)||i.attributes===null))throw new V("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in i&&typeof i.undirected!="boolean")throw new V("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const sm=ug(),lm=new Set(["directed","undirected","mixed"]),$o=new Set(["domain","_events","_eventsCount","_maxListeners"]),um=[{name:i=>`${i}Edge`,generateKey:!0},{name:i=>`${i}DirectedEdge`,generateKey:!0,type:"directed"},{name:i=>`${i}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:i=>`${i}EdgeWithKey`},{name:i=>`${i}DirectedEdgeWithKey`,type:"directed"},{name:i=>`${i}UndirectedEdgeWithKey`,type:"undirected"}],cm={allowSelfLoops:!0,multi:!1,type:"mixed"};function dm(i,t,e){if(e&&!Re(e))throw new V(`Graph.addNode: invalid attributes. Expecting an object but got "${e}"`);if(t=""+t,e=e||{},i._nodes.has(t))throw new J(`Graph.addNode: the "${t}" node already exist in the graph.`);const n=new i.NodeDataClass(t,e);return i._nodes.set(t,n),i.emit("nodeAdded",{key:t,attributes:e}),n}function zo(i,t,e){const n=new i.NodeDataClass(t,e);return i._nodes.set(t,n),i.emit("nodeAdded",{key:t,attributes:e}),n}function Il(i,t,e,n,r,a,o,s){if(!n&&i.type==="undirected")throw new J(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(n&&i.type==="directed")throw new J(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(s&&!Re(s))throw new V(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`);if(a=""+a,o=""+o,s=s||{},!i.allowSelfLoops&&a===o)throw new J(`Graph.${t}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=i._nodes.get(a),u=i._nodes.get(o);if(!l)throw new B(`Graph.${t}: source node "${a}" not found.`);if(!u)throw new B(`Graph.${t}: target node "${o}" not found.`);const c={key:null,undirected:n,source:a,target:o,attributes:s};if(e)r=i._edgeKeyGenerator();else if(r=""+r,i._edges.has(r))throw new J(`Graph.${t}: the "${r}" edge already exists in the graph.`);if(!i.multi&&(n?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new J(`Graph.${t}: an edge linking "${a}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new _n(n,r,l,u,s);i._edges.set(r,d);const h=a===o;return n?(l.undirectedDegree++,u.undirectedDegree++,h&&(l.undirectedLoops++,i._undirectedSelfLoopCount++)):(l.outDegree++,u.inDegree++,h&&(l.directedLoops++,i._directedSelfLoopCount++)),i.multi?d.attachMulti():d.attach(),n?i._undirectedSize++:i._directedSize++,c.key=r,i.emit("edgeAdded",c),r}function hm(i,t,e,n,r,a,o,s,l){if(!n&&i.type==="undirected")throw new J(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(n&&i.type==="directed")throw new J(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(s){if(l){if(typeof s!="function")throw new V(`Graph.${t}: invalid updater function. Expecting a function but got "${s}"`)}else if(!Re(s))throw new V(`Graph.${t}: invalid attributes. Expecting an object but got "${s}"`)}a=""+a,o=""+o;let u;if(l&&(u=s,s=void 0),!i.allowSelfLoops&&a===o)throw new J(`Graph.${t}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let c=i._nodes.get(a),d=i._nodes.get(o),h,f;if(!e&&(h=i._edges.get(r),h)){if((h.source.key!==a||h.target.key!==o)&&(!n||h.source.key!==o||h.target.key!==a))throw new J(`Graph.${t}: inconsistency detected when attempting to merge the "${r}" edge with "${a}" source & "${o}" target vs. ("${h.source.key}", "${h.target.key}").`);f=h}if(!f&&!i.multi&&c&&(f=n?c.undirected[o]:c.out[o]),f){const y=[f.key,!1,!1,!1];if(l?!u:!s)return y;if(l){const v=f.attributes;f.attributes=u(v),i.emit("edgeAttributesUpdated",{type:"replace",key:f.key,attributes:f.attributes})}else Ee(f.attributes,s),i.emit("edgeAttributesUpdated",{type:"merge",key:f.key,attributes:f.attributes,data:s});return y}s=s||{},l&&u&&(s=u(s));const b={key:null,undirected:n,source:a,target:o,attributes:s};if(e)r=i._edgeKeyGenerator();else if(r=""+r,i._edges.has(r))throw new J(`Graph.${t}: the "${r}" edge already exists in the graph.`);let p=!1,w=!1;c||(c=zo(i,a,{}),p=!0,a===o&&(d=c,w=!0)),d||(d=zo(i,o,{}),w=!0),h=new _n(n,r,c,d,s),i._edges.set(r,h);const E=a===o;return n?(c.undirectedDegree++,d.undirectedDegree++,E&&(c.undirectedLoops++,i._undirectedSelfLoopCount++)):(c.outDegree++,d.inDegree++,E&&(c.directedLoops++,i._directedSelfLoopCount++)),i.multi?h.attachMulti():h.attach(),n?i._undirectedSize++:i._directedSize++,b.key=r,i.emit("edgeAdded",b),[r,!0,p,w]}function cn(i,t){i._edges.delete(t.key);const{source:e,target:n,attributes:r}=t,a=t.undirected,o=e===n;a?(e.undirectedDegree--,n.undirectedDegree--,o&&(e.undirectedLoops--,i._undirectedSelfLoopCount--)):(e.outDegree--,n.inDegree--,o&&(e.directedLoops--,i._directedSelfLoopCount--)),i.multi?t.detachMulti():t.detach(),a?i._undirectedSize--:i._directedSize--,i.emit("edgeDropped",{key:t.key,attributes:r,source:e.key,target:n.key,undirected:a})}class he extends wl.EventEmitter{constructor(t){if(super(),t=Ee({},cm,t),typeof t.multi!="boolean")throw new V(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!lm.has(t.type))throw new V(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new V(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const e=t.type==="mixed"?Al:t.type==="directed"?Nl:Ll;Xe(this,"NodeDataClass",e);const n="geid_"+sm()+"_";let r=0;const a=()=>{let o;do o=n+r++;while(this._edges.has(o));return o};Xe(this,"_attributes",{}),Xe(this,"_nodes",new Map),Xe(this,"_edges",new Map),Xe(this,"_directedSize",0),Xe(this,"_undirectedSize",0),Xe(this,"_directedSelfLoopCount",0),Xe(this,"_undirectedSelfLoopCount",0),Xe(this,"_edgeKeyGenerator",a),Xe(this,"_options",t),$o.forEach(o=>Xe(this,o,this[o])),ut(this,"order",()=>this._nodes.size),ut(this,"size",()=>this._edges.size),ut(this,"directedSize",()=>this._directedSize),ut(this,"undirectedSize",()=>this._undirectedSize),ut(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ut(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ut(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ut(this,"multi",this._options.multi),ut(this,"type",this._options.type),ut(this,"allowSelfLoops",this._options.allowSelfLoops),ut(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,e){if(this.type==="undirected")return!1;if(arguments.length===1){const n=""+t,r=this._edges.get(n);return!!r&&!r.undirected}else if(arguments.length===2){t=""+t,e=""+e;const n=this._nodes.get(t);return n?n.out.hasOwnProperty(e):!1}throw new V(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,e){if(this.type==="directed")return!1;if(arguments.length===1){const n=""+t,r=this._edges.get(n);return!!r&&r.undirected}else if(arguments.length===2){t=""+t,e=""+e;const n=this._nodes.get(t);return n?n.undirected.hasOwnProperty(e):!1}throw new V(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,e){if(arguments.length===1){const n=""+t;return this._edges.has(n)}else if(arguments.length===2){t=""+t,e=""+e;const n=this._nodes.get(t);return n?typeof n.out<"u"&&n.out.hasOwnProperty(e)||typeof n.undirected<"u"&&n.undirected.hasOwnProperty(e):!1}throw new V(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,e){if(this.type==="undirected")return;if(t=""+t,e=""+e,this.multi)throw new J("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const n=this._nodes.get(t);if(!n)throw new B(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new B(`Graph.directedEdge: could not find the "${e}" target node in the graph.`);const r=n.out&&n.out[e]||void 0;if(r)return r.key}undirectedEdge(t,e){if(this.type==="directed")return;if(t=""+t,e=""+e,this.multi)throw new J("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const n=this._nodes.get(t);if(!n)throw new B(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new B(`Graph.undirectedEdge: could not find the "${e}" target node in the graph.`);const r=n.undirected&&n.undirected[e]||void 0;if(r)return r.key}edge(t,e){if(this.multi)throw new J("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new B(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(e))throw new B(`Graph.edge: could not find the "${e}" target node in the graph.`);const r=n.out&&n.out[e]||n.undirected&&n.undirected[e]||void 0;if(r)return r.key}areDirectedNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new B(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in n.in||e in n.out}areOutNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new B(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in n.out}areInNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new B(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:e in n.in}areUndirectedNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new B(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:e in n.undirected}areNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new B(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(e in n.in||e in n.out)||this.type!=="directed"&&e in n.undirected}areInboundNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new B(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&e in n.in||this.type!=="directed"&&e in n.undirected}areOutboundNeighbors(t,e){t=""+t,e=""+e;const n=this._nodes.get(t);if(!n)throw new B(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&e in n.out||this.type!=="directed"&&e in n.undirected}inDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree}outDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.outDegree}directedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree+e.outDegree}undirectedDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:e.undirectedDegree}inboundDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=e.undirectedDegree),this.type!=="undirected"&&(n+=e.inDegree),n}outboundDegree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=e.undirectedDegree),this.type!=="undirected"&&(n+=e.outDegree),n}degree(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.degree: could not find the "${t}" node in the graph.`);let n=0;return this.type!=="directed"&&(n+=e.undirectedDegree),this.type!=="undirected"&&(n+=e.inDegree+e.outDegree),n}inDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree-e.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.outDegree-e.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:e.inDegree+e.outDegree-e.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:e.undirectedDegree-e.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,r=0;return this.type!=="directed"&&(n+=e.undirectedDegree,r+=e.undirectedLoops*2),this.type!=="undirected"&&(n+=e.inDegree,r+=e.directedLoops),n-r}outboundDegreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,r=0;return this.type!=="directed"&&(n+=e.undirectedDegree,r+=e.undirectedLoops*2),this.type!=="undirected"&&(n+=e.outDegree,r+=e.directedLoops),n-r}degreeWithoutSelfLoops(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let n=0,r=0;return this.type!=="directed"&&(n+=e.undirectedDegree,r+=e.undirectedLoops*2),this.type!=="undirected"&&(n+=e.inDegree+e.outDegree,r+=e.directedLoops*2),n-r}source(t){t=""+t;const e=this._edges.get(t);if(!e)throw new B(`Graph.source: could not find the "${t}" edge in the graph.`);return e.source.key}target(t){t=""+t;const e=this._edges.get(t);if(!e)throw new B(`Graph.target: could not find the "${t}" edge in the graph.`);return e.target.key}extremities(t){t=""+t;const e=this._edges.get(t);if(!e)throw new B(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[e.source.key,e.target.key]}opposite(t,e){t=""+t,e=""+e;const n=this._edges.get(e);if(!n)throw new B(`Graph.opposite: could not find the "${e}" edge in the graph.`);const r=n.source.key,a=n.target.key;if(t===r)return a;if(t===a)return r;throw new B(`Graph.opposite: the "${t}" node is not attached to the "${e}" edge (${r}, ${a}).`)}hasExtremity(t,e){t=""+t,e=""+e;const n=this._edges.get(t);if(!n)throw new B(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return n.source.key===e||n.target.key===e}isUndirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new B(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return e.undirected}isDirected(t){t=""+t;const e=this._edges.get(t);if(!e)throw new B(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!e.undirected}isSelfLoop(t){t=""+t;const e=this._edges.get(t);if(!e)throw new B(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return e.source===e.target}addNode(t,e){return dm(this,t,e).key}mergeNode(t,e){if(e&&!Re(e))throw new V(`Graph.mergeNode: invalid attributes. Expecting an object but got "${e}"`);t=""+t,e=e||{};let n=this._nodes.get(t);return n?(e&&(Ee(n.attributes,e),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:n.attributes,data:e})),[t,!1]):(n=new this.NodeDataClass(t,e),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:e}),[t,!0])}updateNode(t,e){if(e&&typeof e!="function")throw new V(`Graph.updateNode: invalid updater function. Expecting a function but got "${e}"`);t=""+t;let n=this._nodes.get(t);if(n){if(e){const a=n.attributes;n.attributes=e(a),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:n.attributes})}return[t,!1]}const r=e?e({}):{};return n=new this.NodeDataClass(t,r),this._nodes.set(t,n),this.emit("nodeAdded",{key:t,attributes:r}),[t,!0]}dropNode(t){t=""+t;const e=this._nodes.get(t);if(!e)throw new B(`Graph.dropNode: could not find the "${t}" node in the graph.`);let n;if(this.type!=="undirected"){for(const r in e.out){n=e.out[r];do cn(this,n),n=n.next;while(n)}for(const r in e.in){n=e.in[r];do cn(this,n),n=n.next;while(n)}}if(this.type!=="directed")for(const r in e.undirected){n=e.undirected[r];do cn(this,n),n=n.next;while(n)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:e.attributes})}dropEdge(t){let e;if(arguments.length>1){const n=""+arguments[0],r=""+arguments[1];if(e=tt(this,n,r,this.type),!e)throw new B(`Graph.dropEdge: could not find the "${n}" -> "${r}" edge in the graph.`)}else if(t=""+t,e=this._edges.get(t),!e)throw new B(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return cn(this,e),this}dropDirectedEdge(t,e){if(arguments.length<2)throw new J("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new J("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,e=""+e;const n=tt(this,t,e,"directed");if(!n)throw new B(`Graph.dropDirectedEdge: could not find a "${t}" -> "${e}" edge in the graph.`);return cn(this,n),this}dropUndirectedEdge(t,e){if(arguments.length<2)throw new J("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new J("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const n=tt(this,t,e,"undirected");if(!n)throw new B(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${e}" edge in the graph.`);return cn(this,n),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let e;for(;e=t.next(),e.done!==!0;)e.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,e){return this._attributes[t]=e,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,e){if(typeof e!="function")throw new V("Graph.updateAttribute: updater should be a function.");const n=this._attributes[t];return this._attributes[t]=e(n),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!Re(t))throw new V("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!Re(t))throw new V("Graph.mergeAttributes: provided attributes are not a plain object.");return Ee(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new V("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,e){if(typeof t!="function")throw new V("Graph.updateEachNodeAttributes: expecting an updater function.");if(e&&!Go(e))throw new V("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._nodes.values();let r,a;for(;r=n.next(),r.done!==!0;)a=r.value,a.attributes=t(a.key,a.attributes);this.emit("eachNodeAttributesUpdated",{hints:e||null})}updateEachEdgeAttributes(t,e){if(typeof t!="function")throw new V("Graph.updateEachEdgeAttributes: expecting an updater function.");if(e&&!Go(e))throw new V("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const n=this._edges.values();let r,a,o,s;for(;r=n.next(),r.done!==!0;)a=r.value,o=a.source,s=a.target,a.attributes=t(a.key,a.attributes,o.key,s.key,o.attributes,s.attributes,a.undirected);this.emit("eachEdgeAttributesUpdated",{hints:e||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new V("Graph.forEachAdjacencyEntry: expecting a callback.");Ni(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new V("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Ni(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new V("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Ni(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new V("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Ni(!1,!0,!0,this,t)}nodes(){return Array.from(this._nodes.keys())}forEachNode(t){if(typeof t!="function")throw new V("Graph.forEachNode: expecting a callback.");const e=this._nodes.values();let n,r;for(;n=e.next(),n.done!==!0;)r=n.value,t(r.key,r.attributes)}findNode(t){if(typeof t!="function")throw new V("Graph.findNode: expecting a callback.");const e=this._nodes.values();let n,r;for(;n=e.next(),n.done!==!0;)if(r=n.value,t(r.key,r.attributes))return r.key}mapNodes(t){if(typeof t!="function")throw new V("Graph.mapNode: expecting a callback.");const e=this._nodes.values();let n,r;const a=new Array(this.order);let o=0;for(;n=e.next(),n.done!==!0;)r=n.value,a[o++]=t(r.key,r.attributes);return a}someNode(t){if(typeof t!="function")throw new V("Graph.someNode: expecting a callback.");const e=this._nodes.values();let n,r;for(;n=e.next(),n.done!==!0;)if(r=n.value,t(r.key,r.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new V("Graph.everyNode: expecting a callback.");const e=this._nodes.values();let n,r;for(;n=e.next(),n.done!==!0;)if(r=n.value,!t(r.key,r.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new V("Graph.filterNodes: expecting a callback.");const e=this._nodes.values();let n,r;const a=[];for(;n=e.next(),n.done!==!0;)r=n.value,t(r.key,r.attributes)&&a.push(r.key);return a}reduceNodes(t,e){if(typeof t!="function")throw new V("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new V("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let n=e;const r=this._nodes.values();let a,o;for(;a=r.next(),a.done!==!0;)o=a.value,n=t(n,o.key,o.attributes);return n}nodeEntries(){const t=this._nodes.values();return{[Symbol.iterator](){return this},next(){const e=t.next();if(e.done)return e;const n=e.value;return{value:{node:n.key,attributes:n.attributes},done:!1}}}}export(){const t=new Array(this._nodes.size);let e=0;this._nodes.forEach((r,a)=>{t[e++]=im(a,r)});const n=new Array(this._edges.size);return e=0,this._edges.forEach((r,a)=>{n[e++]=rm(this.type,a,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:n}}import(t,e=!1){if(t instanceof he)return t.forEachNode((l,u)=>{e?this.mergeNode(l,u):this.addNode(l,u)}),t.forEachEdge((l,u,c,d,h,f,b)=>{e?b?this.mergeUndirectedEdgeWithKey(l,c,d,u):this.mergeDirectedEdgeWithKey(l,c,d,u):b?this.addUndirectedEdgeWithKey(l,c,d,u):this.addDirectedEdgeWithKey(l,c,d,u)}),this;if(!Re(t))throw new V("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!Re(t.attributes))throw new V("Graph.import: invalid attributes. Expecting a plain object.");e?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let n,r,a,o,s;if(t.nodes){if(a=t.nodes,!Array.isArray(a))throw new V("Graph.import: invalid nodes. Expecting an array.");for(n=0,r=a.length;n<r;n++){o=a[n],am(o);const{key:l,attributes:u}=o;e?this.mergeNode(l,u):this.addNode(l,u)}}if(t.edges){let l=!1;if(this.type==="undirected"&&(l=!0),a=t.edges,!Array.isArray(a))throw new V("Graph.import: invalid edges. Expecting an array.");for(n=0,r=a.length;n<r;n++){s=a[n],om(s);const{source:u,target:c,attributes:d,undirected:h=l}=s;let f;"key"in s?(f=e?h?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:h?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,f.call(this,s.key,u,c,d)):(f=e?h?this.mergeUndirectedEdge:this.mergeDirectedEdge:h?this.addUndirectedEdge:this.addDirectedEdge,f.call(this,u,c,d))}}return this}nullCopy(t){const e=new he(Ee({},this._options,t));return e.replaceAttributes(Ee({},this.getAttributes())),e}emptyCopy(t){const e=this.nullCopy(t);return this._nodes.forEach((n,r)=>{const a=Ee({},n.attributes);n=new e.NodeDataClass(r,a),e._nodes.set(r,n)}),e}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new J(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new J("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new J("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const e=this.emptyCopy(t),n=this._edges.values();let r,a;for(;r=n.next(),r.done!==!0;)a=r.value,Il(e,"copy",!1,a.undirected,a.key,a.source.key,a.target.key,Ee({},a.attributes));return e}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((a,o)=>{t[o]=a.attributes});const e={},n={};this._edges.forEach((a,o)=>{const s=a.undirected?"--":"->";let l="",u=a.source.key,c=a.target.key,d;a.undirected&&u>c&&(d=u,u=c,c=d);const h=`(${u})${s}(${c})`;o.startsWith("geid_")?this.multi&&(typeof n[h]>"u"?n[h]=0:n[h]++,l+=`${n[h]}. `):l+=`[${o}]: `,l+=h,e[l]=a.attributes});const r={};for(const a in this)this.hasOwnProperty(a)&&!$o.has(a)&&typeof this[a]!="function"&&typeof a!="symbol"&&(r[a]=this[a]);return r.attributes=this._attributes,r.nodes=t,r.edges=e,Xe(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(he.prototype[Symbol.for("nodejs.util.inspect.custom")]=he.prototype.inspect);um.forEach(i=>{["add","merge","update"].forEach(t=>{const e=i.name(t),n=t==="add"?Il:hm;i.generateKey?he.prototype[e]=function(r,a,o){return n(this,e,!0,(i.type||this.type)==="undirected",null,r,a,o,t==="update")}:he.prototype[e]=function(r,a,o,s){return n(this,e,!1,(i.type||this.type)==="undirected",r,a,o,s,t==="update")}})});_g(he);Fg(he);Yg(he);nm(he);class Ol extends he{constructor(t){const e=Ee({type:"directed"},t);if("multi"in e&&e.multi!==!1)throw new V("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(e.type!=="directed")throw new V('DirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class Gl extends he{constructor(t){const e=Ee({type:"undirected"},t);if("multi"in e&&e.multi!==!1)throw new V("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(e.type!=="undirected")throw new V('UndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class $l extends he{constructor(t){const e=Ee({multi:!0},t);if("multi"in e&&e.multi!==!0)throw new V("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(e)}}class zl extends he{constructor(t){const e=Ee({type:"directed",multi:!0},t);if("multi"in e&&e.multi!==!0)throw new V("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(e.type!=="directed")throw new V('MultiDirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}class Bl extends he{constructor(t){const e=Ee({type:"undirected",multi:!0},t);if("multi"in e&&e.multi!==!0)throw new V("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(e.type!=="undirected")throw new V('MultiUndirectedGraph.from: inconsistent "'+e.type+'" type in given options!');super(e)}}function kn(i){i.from=function(t,e){const n=Ee({},t.options,e),r=new i(n);return r.import(t),r}}kn(he);kn(Ol);kn(Gl);kn($l);kn(zl);kn(Bl);he.Graph=he;he.DirectedGraph=Ol;he.UndirectedGraph=Gl;he.MultiGraph=$l;he.MultiDirectedGraph=zl;he.MultiUndirectedGraph=Bl;he.InvalidArgumentsGraphError=V;he.NotFoundGraphError=B;he.UsageGraphError=J;const zn={stadiums:[{location:[-112.264582,33.527812],snapped_distance:148.12,stadium:"State Farm Stadium",location_name:"Glendale, Arizona",stadium_id:"PHO00"},{location:[-84.399046,33.755357],snapped_distance:90.88,stadium:"Mercedes-Benz Stadium",location_name:"Atlanta, Georgia",stadium_id:"ATL97"},{location:[-76.62411,39.278456],snapped_distance:123,stadium:"M&T Bank Stadium",location_name:"Baltimore, Maryland",stadium_id:"BAL00"},{location:[-78.785693,42.774789],snapped_distance:138.08,stadium:"Highmark Stadium",location_name:"Orchard Park, New York",stadium_id:"BUF00"},{location:[-80.851204,35.226491],snapped_distance:160.58,stadium:"Bank of America Stadium",location_name:"Charlotte, NC",stadium_id:"CAR00"},{location:[-87.61828,41.861992],snapped_distance:135.28,stadium:"Soldier Field",location_name:"Chicago, Illinois",stadium_id:"CHI98"},{location:[-84.51597,39.093953],snapped_distance:116.45,stadium:"Paycor Stadium",location_name:"Cincinnati, Ohio",stadium_id:"CIN00"},{location:[-81.698462,41.50526],snapped_distance:125.03,stadium:"Huntington Bank Field",location_name:"Cleveland, Ohio",stadium_id:"CLE00"},{location:[-97.092141,32.746628],snapped_distance:141.09,stadium:"AT&T Stadium",location_name:"Arlington, Texas",stadium_id:"DAL00"},{location:[-104.985474,39.739146],snapped_distance:49.42,stadium:"Empower Field at Mile High",location_name:"Denver, Colorado",stadium_id:"DEN00"},{location:[-83.04419,42.340475],snapped_distance:124.06,stadium:"Ford Field",location_name:"Detroit, Michigan",stadium_id:"DET00"},{location:[-88.064076,44.501549],snapped_distance:148.06,stadium:"Lambeau Field",location_name:"Green Bay, Wisconsin",stadium_id:"GNB00"},{location:[-95.412328,29.684709],snapped_distance:144.44,stadium:"NRG Stadium",location_name:"Houston, Texas",stadium_id:"HOU00"},{location:[-86.164751,39.761029],snapped_distance:135.07,stadium:"Lucas Oil Stadium",location_name:"Indianapolis, Indiana",stadium_id:"IND00"},{location:[-81.638737,30.324787],snapped_distance:155.09,stadium:"EverBank Stadium",location_name:"Jacksonville, Florida",stadium_id:"JAX00"},{location:[-94.482762,39.047949],snapped_distance:142.79,stadium:"GEHA Field at Arrowhead Stadium",location_name:"Kansas City, Missouri",stadium_id:"KAN00"},{location:[-118.337024,33.953639],snapped_distance:195.64,stadium:"SoFi Stadium",location_name:"Inglewood, CA",stadium_id:"LAX01"},{location:[-115.18531,36.09044],snapped_distance:128.36,stadium:"Allegiant Stadium",location_name:"Paradise, Nevada",stadium_id:"VEG00"},{location:[-80.240122,25.958487],snapped_distance:132.29,stadium:"Hard Rock Stadium",location_name:"Coral Gables, Florida",stadium_id:"MIA00"},{location:[-93.257268,44.974936],snapped_distance:118.94,stadium:"U.S. Bank Stadium",location_name:"Minneapolis, Minnesota",stadium_id:"MIN01"},{location:[-71.262575,42.091505],snapped_distance:130.34,stadium:"Gillette Stadium",location_name:"Foxborough, Massachusetts",stadium_id:"BOS00"},{location:[-90.081659,29.949726],snapped_distance:133.94,stadium:"Caesars Superdome",location_name:"New Orleans, Louisiana",stadium_id:"NOR00"},{location:[-74.072549,40.814068],snapped_distance:167.4,stadium:"MetLife Stadium",location_name:"East Rutherford, New Jersey",stadium_id:"NYC01"},{location:[-75.166302,39.901614],snapped_distance:134.09,stadium:"Lincoln Financial Field",location_name:"Philadelphia, Pennsylvania",stadium_id:"PHI00"},{location:[-80.016791,40.445865],snapped_distance:120.54,stadium:"Acrisure Stadium",location_name:"Pittsburgh, Pennsylvania",stadium_id:"PIT00"},{location:[-122.333253,47.595189],snapped_distance:123.99,stadium:"Lumen Field",location_name:"Seattle, WA",stadium_id:"SEA00"},{location:[-121.970788,37.404153],snapped_distance:145.87,stadium:"Levi's Stadium",location_name:"Santa Clara, California",stadium_id:"SFO01"},{location:[-82.501915,27.975695],snapped_distance:140.13,stadium:"Raymond James Stadium",location_name:"Tampa Bay, Florida",stadium_id:"TAM00"},{location:[-86.772878,36.166285],snapped_distance:134.22,stadium:"Nissan Stadium",location_name:"Nashville, Tennessee",stadium_id:"NAS00"},{location:[-76.863612,38.909135],snapped_distance:167.18,stadium:"Northwest Stadium",location_name:"Landover, Maryland",stadium_id:"WAS00"}],durations:[[0,103558.92,134950.06,128994.7,119000.02,101657.23,104691.92,117693.69,57861.56,49975.77,116052.91,112069.27,64507,97905.28,115991.16,73761.72,22334.26,19151.34,133336.38,99485.82,157014.34,84960.38,143348.61,140078.95,121485.95,86732.64,42106.27,122303.88,93326.83,133937.61],[103428.08,0,43050.93,55331.77,15739.38,45592.15,28174.49,44030.77,47169.07,82977.98,45049.94,59659.94,48006.11,33266.57,21223.49,49528.4,122771.13,110148.13,38565.23,68203.1,71186.78,28281.22,55623.75,50071.56,43433.33,152426.7,137948.38,27532.73,15903.67,40745.07],[135048.23,42944.44,0,26720.95,28086.55,42964.21,32822.48,23616.62,81474.28,99090.43,32446.18,57372.52,87227.55,37406.94,45764.11,66638.52,154391.3,139925.41,65316.81,68187.8,29689.71,67496.01,13199.04,7390.6,16729.06,158659.17,161338.03,58825.78,42323.36,3125.09],[128897.3,55156.16,27060.55,0,41617.82,33318.23,27350.02,12123.3,82985.63,89444.45,18723.22,47726.54,91186.09,31102.51,64851.48,60334.09,146925.69,130279.43,84404.17,58541.81,29394.99,75402.63,25800.86,26656.19,13955.68,149013.19,151692.05,77913.14,43808.25,28143.17],[118834.67,15811.29,28185.83,41602.77,0,48032.3,30225.56,32028.96,62575.66,93469.52,40431.61,62100.09,63127.64,36335.32,23724.15,60019.93,138177.72,125554.72,43276.84,72970.64,56320.96,43402.77,40757.93,35206.46,28567.52,162918.23,153354.97,36785.81,26395.2,25879.98],[101890.19,45968.85,43402.08,33600.31,48198.25,0,19897.58,21695.81,57368.9,57527.6,18102.18,14737.28,65569.36,12729.58,66930.34,31956.91,115008.84,98362.59,84272.08,25552.55,61619.97,55619.94,48429.01,47239.45,28667.82,116023.93,119775.2,73239.58,30472.15,44484.7],[104805.25,28128.3,32669.92,27486.93,30139.44,19721.1,0,16185.93,55957.77,69996.16,17143.34,33788.89,64158.23,7447.8,48838.3,36546.59,124148.3,111117.62,66431.53,44659.45,55506.59,48374.77,41840.85,37798.8,19205.8,134306.89,134944.13,55399.04,16780.39,33752.54],[117598.15,43857.02,23908.41,12252.94,32039.43,21432.88,16050.87,0,71686.48,77559.09,10914.84,35841.18,79886.94,19803.36,55273.09,49034.94,135040.33,118394.07,74825.78,46656.46,40272.59,64103.48,28935.34,27745.78,9174.15,137127.84,139806.69,68334.75,32509.1,24991.03],[57956.5,47084.66,81633.28,83124.02,62525.76,57410.96,55966.73,71823.01,0,47230.56,71190.36,69371.21,15384.56,53042.73,61297.04,31063.66,79363.93,68850.05,78642.25,56787.76,109443.65,30849.68,93880.62,88653.91,74842.88,119913.2,96650.29,67609.75,39759.25,80370.02],[49946.48,82564.78,99599.16,89797.4,93058.73,57823.41,69907.25,77892.9,47423.31,0,74027.15,64442.48,62022.03,62840.35,103526.27,33802.51,58636.82,41990.56,120868.01,51859.03,117817.05,77309.29,104626.09,103436.53,84864.91,73181.55,71058.27,109835.51,67015.09,100681.78],[116211.98,45007.23,32708.19,18774.18,40475.69,17676.85,17220.96,11001.92,71133.91,73593.3,0,32085.16,79334.38,18328.7,63709.34,47244.01,131074.53,114428.28,83262.03,42900.43,45590.55,65253.7,37735.12,36545.55,17973.93,133371.81,135840.91,72277.96,33659.32,33790.81],[111859.54,59354.48,57461.57,47659.8,62090.55,14761.4,33789.88,35755.3,69179.95,64320.25,32161.67,0,77706.76,26621.88,80315.98,38960.36,121801.49,105155.23,97657.72,17652.69,74741.18,68789.82,62488.5,61298.94,42727.31,108124.07,126567.86,86625.21,43804.79,58544.19],[64532.62,48098.6,87176.57,91484.12,63120.75,65771.07,64326.84,80183.12,15466.21,61686.84,79550.47,78062.06,0,61402.84,52639.51,44877.7,85940.05,83030.77,69984.72,70601.8,114986.94,21608.73,99423.91,94197.2,83202.99,133727.23,105712.05,58952.22,48119.36,85913.31],[98012.1,33564.1,37215.24,31259.87,36302.13,12496.13,7485.72,19958.87,52934.03,62898.48,18280.54,26563.93,61134.49,0,54525.59,29448.89,117355.16,104019.93,71867.33,37434.48,59279.53,49661.77,45613.79,42344.13,23751.13,127097.37,127734.6,60834.82,18067.39,38297.86],[115877.84,21180.23,45809.93,64973.52,23744.2,66582.55,48772.18,55399.71,61360.77,103968.38,63802.36,80650.34,52518.18,54256.97,0,70518.8,137285.27,129182.76,20465.09,89193.51,75129.67,32793.3,58639,52830.57,51938.27,173417.11,156983,14368.99,36894.07,43504.08],[73751.89,49108.55,66428.89,60473.52,59602.5,31704.72,36451.02,49172.52,31072.3,33868.46,47371.32,38953.91,45027.64,29384.12,70070.04,0,91636.17,74989.91,87411.78,26370.46,88493.18,51696.18,74827.45,71557.77,52964.78,103328.08,101204.78,76379.27,33558.85,67511.52],[22284.76,122888.27,154279.41,147217.53,138329.38,115243.55,124021.27,135313.03,79213.95,58655.1,131447.28,121862.62,85859.39,117234.63,137343.55,91515.01,0,17033.94,154688.77,109279.17,175237.19,106312.78,162046.23,159408.3,140815.3,70770.14,21810.19,143656.27,112656.17,153266.95],[19347.97,110288.33,140470.92,130669.16,125729.44,98695.16,111071.37,118764.65,68966.53,42106.72,114898.9,105314.23,83073.88,104004.46,129299.87,74966.63,16949.06,0,146645.08,92730.78,158688.81,98852.51,145497.84,144308.28,125736.66,68245.98,32126.3,135612.58,100056.24,140667.02],[133353.14,38643.61,65388.43,84552.02,43322.7,84045.93,66628.27,74978.22,78836.07,121431.76,83380.87,98113.72,69993.48,71720.35,20450.67,87982.18,154760.56,146658.06,0,106656.88,94708.17,50268.6,78217.5,72409.06,71516.77,190880.48,174458.31,16656.12,54357.45,63082.58],[99286.36,67779.41,68405.96,58604.2,72978.42,25705.79,44677.75,46699.69,56606.77,51747.08,43106.06,17753.55,70562.1,37509.74,88740.91,26387.18,109228.32,92582.06,106082.64,0,86623.85,74533.37,73432.89,72243.33,53671.7,91351.73,113799.05,95050.14,52229.72,69488.58],[156976.25,71190.69,29448.94,29550.85,56368.2,61514.46,55428.97,40319.53,109193.2,117640.67,45770.56,74897.47,114946.47,59181.46,74831.68,88413.05,175121.91,158475.66,94384.38,86738.04,0,95214.93,16495.7,23439.65,39584.32,177209.42,179888.28,87893.34,70042.27,32192.65],[84999.74,28382.54,67394.45,75469.97,43404.69,55508.39,48312.69,64168.97,30885.18,77087.68,65188.14,68820.68,21640.08,49643.65,32923.45,51834.39,106407.17,98707.17,50268.66,74476.83,95204.82,0,79641.79,74415.09,66478.94,148732.83,126179.17,39236.16,31860.43,66131.2],[143112.42,55669.09,13388.55,25660.54,40846.6,48020.78,41565.14,28673.18,93671.6,104146.99,37502.75,62429.09,99424.88,45317.63,58771.29,74549.21,161628.23,144981.97,78323.98,73244.36,17003.02,79693.34,0,7379.26,25237.95,163715.75,166394.59,71832.95,54520.68,16132.26],[140288.59,50055.44,7492.37,26572.4,35197.55,47131.02,37909.35,27783.42,88585.27,103257.23,36612.99,61539.33,94338.55,42493.81,52875.11,71725.39,159631.66,144092.22,72427.8,72354.6,23854.22,74607.01,7363.55,0,20895.87,162825.98,165504.84,65936.77,49434.35,10236.08],[121784.7,43471.09,16871.64,13888.02,28648.61,28403.48,19405.44,9055.88,75041.05,84529.69,17885.44,42811.79,83241.52,23989.9,51882.27,53221.48,141127.75,125364.67,71434.96,53627.06,39576.89,66559.59,25248.01,20709.01,0,144098.44,146777.3,64943.93,35863.67,17954.26],[86899.66,152028.06,159044.33,149242.56,162522.02,116344.16,134894.5,137338.06,119780.99,73161.37,133744.44,108391.93,133736.33,127669.13,172989.55,103287.72,70810.92,68150.95,190331.28,91519.5,177262.22,148684.36,164071.27,162881.7,144310.08,0,52931.69,179298.78,136478.36,160126.95],[42113.01,138038.39,161948.59,152146.83,153479.48,120172.84,135064.25,140242.33,96716.59,71158.07,136376.58,126791.91,105687.64,127838.88,157049.92,101284.42,21897.37,32184.06,174395.13,113997.32,180166.48,126141.03,166975.52,165785.95,147214.33,53082.86,0,163362.63,127806.3,163031.2],[122258,27548.47,58919.46,78083.04,36853.72,72950.8,55533.13,68509.23,67740.94,110336.63,72408.59,87018.59,58898.34,60625.21,14296.66,76887.04,143665.44,135562.92,16613.61,95561.75,88239.2,39173.46,71748.52,65940.09,65047.79,179785.34,163363.17,0,43262.31,56613.61],[93311.76,15747.6,42305.5,43911.23,26241.55,30410.49,16753.95,32610.23,39737.8,67404.99,33629.4,44224.73,47938.26,18084.91,36709.09,33955.41,112654.81,100031.8,54050.83,52630.12,70115.87,31829.49,54552.84,49326.13,35630.11,136853.72,127832.05,43018.32,0,41042.24],[133929.98,40835.45,3201.47,27883.07,25977.56,44126.34,33984.61,24778.75,80356.03,100252.55,33608.31,58534.65,86109.3,38569.07,43655.13,67800.66,153273.05,140650.03,63207.82,69349.93,32521.21,66377.77,16030.54,10222.1,17891.19,159821.31,162500.16,56716.79,41205.11,0]],distances:[[0,2979.84,3769.13,3609.68,3374.17,2901.5,2998.29,3324.82,1713.83,1464.05,3263.95,3001.79,1923.44,2813.7,3316.94,2021.19,609.01,449.16,3805.49,2719.54,4340.65,2473.56,3991.48,3864.67,3398.57,2236.4,1144.65,3494.27,2708.59,3795.21],[2982.35,0,1111.08,1443.08,389.9,1104,739.96,1158.21,1289.31,2257.67,1161.06,1449.15,1288.72,809.34,559.07,1279.25,3522.04,3159.5,1047.53,1816.79,1805.64,756.3,1414.99,1268.22,1098.8,4284.59,3923.79,736.31,398.99,1054.78],[3836.16,1109.4,0,600.53,725.81,1122.88,829.38,599.3,2226.23,2714.54,844.36,1457.79,2335.29,951.62,1218.16,1714.86,4375.85,3922.98,1750.94,1781.12,641.83,1803.45,304.67,160.01,397.84,4445.51,4574.68,1532.3,1127.13,60.21],[3599.55,1426.24,599.36,0,1046.97,844.17,687.66,294.96,2228.43,2435.83,431.94,1179.08,2394.77,794.77,1669.42,1558.01,4087.53,3644.27,2202.2,1502.41,741.35,1986.14,582.41,613.19,337.54,4166.8,4295.97,1983.56,1130.18,606.2],[3375.42,390.4,726.6,1045.72,0,1206.08,753.46,818.67,1682.38,2518,1016.82,1551.23,1683.4,938.34,619.29,1539.59,3915.11,3552.56,1152.07,1873.37,1424.73,1150.98,1034.08,883.74,717.89,4544.93,4316.86,933.43,659.33,670.3],[2893.57,1101.45,1124.63,849.91,1202.94,0,462.67,549.33,1570.08,1614.44,450.07,335.55,1736.43,287.8,1667.34,825.01,3266.14,2822.88,2155.8,658.89,1580.88,1488.17,1260.38,1224.66,738.38,3323.28,3474.57,1844.58,753.72,1131.48],[2992.73,740.24,833.73,688.04,751.88,464.31,0,403.18,1542.42,1916.51,422.79,809.45,1708.77,175.9,1283.12,938.09,3532.42,3128.75,1794.58,1131.6,1419.02,1300.13,1069.84,929.26,463.17,3773.19,3883.32,1483.36,444.18,840.58],[3314.36,1141.05,602.09,295.1,818.55,548.59,402.47,0,1943.24,2140.26,270.07,883.5,2109.59,509.58,1441,1272.82,3791.96,3348.7,1973.77,1206.84,1026.08,1700.95,737.84,702.12,215.84,3871.23,4000.4,1755.14,845,608.94],[1713.07,1285.79,2225.76,2242.99,1680.12,1569.72,1539.88,1958.13,0,1259.04,1910.26,1882.32,427.43,1460.01,1625.78,901.72,2306,1944.42,2114.33,1600.06,2910.19,841.3,2519.54,2382.89,2018.12,3525.24,2708.72,1803.11,1097.66,2184.28],[1463.06,2254.92,2717.07,2442.34,2512.28,1616.98,1916.03,2141.77,1260.14,0,2040.53,1752.43,1679.32,1742.39,2820.81,980.32,1657.75,1214.48,3309.27,1470.18,3173.32,2089.56,2852.82,2817.1,2330.82,2119.44,2084.78,2998.05,1859.83,2723.92],[3252.03,1160.54,845.67,430.44,1020.54,449.72,423.17,270.37,1906.68,2039.92,0,784.63,2073.03,446.4,1642.99,1232.71,3691.63,3248.36,2175.77,1107.97,1135.77,1720.44,981.42,945.7,459.42,3772.36,3900.06,1903.67,864.48,852.52],[2998.88,1539.49,1459.74,1185.01,1550.26,337.21,810,884.43,1880.73,1751.02,785.17,0,2044.36,635.12,2105.39,987.87,3402.72,2959.46,2593.84,445.19,1935.27,1818.08,1595.49,1559.76,1073.48,3109.58,3611.16,2282.62,1144.41,1466.58],[1919.49,1288.52,2339.09,2411.09,1682.43,1737.82,1707.98,2126.23,427.38,1678.47,2078.36,2047.77,0,1628.11,1413.35,1293.72,2512.42,2304.34,1901.9,1992.07,3023.52,569.98,2632.87,2496.22,2186.22,3917.25,3048.06,1590.68,1265.76,2297.61],[2805.06,809.38,955.64,796.19,922.18,289.62,176.38,511.33,1459.71,1741.94,449.66,634.76,1626.05,0,1375.27,763.52,3344.75,2954.18,1863.73,956.91,1527.16,1317.61,1177.99,1051.18,585.08,3590.75,3700.88,1552.51,461.65,962.49],[3313.21,559.08,1217.72,1669.38,617.89,1671.25,1282.08,1442.33,1630.47,2824.92,1640.47,2016.4,1413.86,1376.6,0,1846.5,3906.15,3559.89,537.18,2384.05,1856.67,881.43,1519.51,1374.86,1341.55,4851.84,4324.18,323.93,966.25,1161.41],[2020.13,1276.4,1719.3,1559.85,1533.75,822.51,937.51,1274.98,901.98,980.46,1229.76,987.89,1294.09,763.87,1842.29,0,2635.96,2192.7,2330.75,705.64,2290.82,1383.99,1941.65,1814.83,1348.74,3007.91,2973.26,2019.52,881.31,1726.15],[608.89,3518.85,4308.14,4093.71,3913.18,3268.34,3537.3,3793.13,2306.36,1657.16,3691.9,3403.79,2515.97,3352.71,3909.47,2635.01,0,445.18,4398.02,3121.54,4824.68,3066.1,4504.18,4403.67,3937.58,1846.59,568.06,4086.8,3247.6,4334.22],[449.99,3156.77,3924.54,3649.82,3551.11,2824.45,3126.83,3349.24,1944.98,1213.27,3248.01,2959.9,2379.14,2953.19,3558.88,2191.12,444.87,0,4047.43,2677.65,4380.79,2774.4,4060.29,4024.57,3538.29,1796.26,846.62,3736.21,2885.52,3972.14],[3800.84,1046.62,1750.08,2201.74,1150.25,2158.8,1794.76,1974.69,2118.09,3312.46,2172.83,2503.94,1901.48,1864.14,536.43,2334.05,4393.77,4047.51,0,2871.59,2389.03,1369.06,2051.87,1907.22,1873.91,5339.38,4811.81,439.36,1453.79,1693.78],[2717.72,1812.58,1782.59,1507.87,1866.47,660.06,1126.21,1207.29,1599.57,1469.87,1108.03,446.02,1991.69,951.33,2378.47,706.72,3121.57,2678.31,2866.92,0,2238.84,1969.48,1918.34,1882.62,1396.34,2666.07,3210.19,2555.7,1417.49,1789.44],[4310.56,1800.44,644.15,741.57,1421.4,1575.35,1398.67,1026.15,2905.81,3167.02,1135.78,1933.91,3014.87,1505.78,1859.23,2269.02,4818.72,4375.46,2392.01,2233.6,0,2483.03,340.27,494.52,940.65,4897.99,5027.16,2173.38,1806.71,701.28],[2469.49,756.35,1806.74,2000.21,1150.25,1486.58,1297.1,1715.35,843.51,2087.55,1718.2,1817.24,570.14,1316.92,881.18,1398.22,3062.43,2772.94,1369.73,1963.4,2491.17,0,2100.52,1963.88,1756.29,4326.43,3598.06,1058.51,857.69,1765.26],[3979.07,1414.09,305.19,580.94,1035.05,1257.8,1067.18,734.23,2519.46,2849.47,979.28,1592.71,2628.52,1174.29,1520.27,1937.53,4501.17,4057.91,2053.05,1916.05,339.99,2096.68,0,155.55,595.75,4580.44,4709.61,1834.41,1420.36,362.32],[3857.49,1266.42,160.1,612.45,882.83,1225.16,930.48,701.58,2383.25,2816.82,946.64,1560.07,2492.31,1052.71,1375.18,1815.96,4397.18,4025.26,1907.96,1883.4,492.42,1960.47,155.26,0,500.12,4547.79,4676.96,1689.32,1284.15,217.23],[3391.57,1098.2,399.51,336.95,719.16,738.16,464.55,214.59,2005.32,2329.83,459.65,1073.07,2171.67,586.79,1341.61,1350.03,3931.26,3538.27,1874.38,1396.41,945.44,1753.39,625,499.54,0,4060.8,4189.97,1655.75,907.08,406.36],[2237.4,4283.2,4447.31,4172.59,4540.56,3324.78,3773.92,3872.01,3525.25,2119.7,3772.75,3110.74,3917.37,3591.67,4849.09,3009.45,1845.74,1796.64,5337.55,2665.84,4903.56,4327.55,4583.06,4547.34,4061.06,0,1353.43,5026.33,3888.11,4454.16],[1144.21,3920.85,4578.71,4303.98,4315.19,3478.62,3853.49,4003.41,2709.06,2084.91,3902.17,3614.07,3051.29,3671.24,4322.96,2974.66,567.03,847.19,4811.52,3213.48,5034.96,3601.41,4714.46,4678.74,4192.46,1354.8,0,4500.29,3649.61,4585.56],[3490.51,736.29,1532.35,1984.01,932.52,1848.47,1484.43,1756.96,1807.76,3002.13,1905.53,2193.61,1591.15,1553.81,322.42,2023.72,4083.44,3737.18,437.33,2561.26,2171.3,1058.73,1834.14,1689.49,1656.18,5029.06,4501.48,0,1143.46,1476.04],[2708.48,396.29,1127.56,1144.52,653.64,755.89,441.4,859.66,1098.55,1860.66,862.51,1144.92,1264.9,461.23,962.18,882.24,3248.17,2885.63,1450.63,1419.78,1812,857.57,1421.35,1284.7,919.65,3887.58,3649.92,1139.41,0,1086.09],[3795.19,1053.75,60.74,608.92,670.16,1131.26,837.77,607.69,2185.26,2722.93,852.75,1466.17,2294.32,960.01,1162.51,1723.25,4334.88,3972.34,1695.28,1789.51,699.69,1762.48,362.53,217.88,406.23,4453.9,4583.07,1476.65,1086.16,0]],metadata:{id:"pro-tour",attribution:"openrouteservice.org | OpenStreetMap contributors",service:"matrix",timestamp:1763588149360,query:{locations:[[-112.263,33.528],[-84.4,33.75555555555555],[-76.62277777777777,39.278055555555554],[-78.787,42.774],[-80.85277777777777,35.225833333333334],[-87.6167,41.8623],[-84.516,39.095],[-81.699444,41.506111],[-97.09277777777777,32.74777777777778],[-104.9849,39.7392],[-83.04555555555555,42.34],[-88.06222222222222,44.50138888888889],[-95.41083333333334,29.684722222222224],[-86.16380555555556,39.76005555555555],[-81.6375,30.323888888888888],[-94.483889,39.048889],[-118.339,33.953],[-115.18388888888889,36.09055555555556],[-80.2388888888889,25.958055555555553],[-93.258,44.974],[-71.264,42.091],[-90.08111111111111,29.950833333333332],[-74.074444,40.813611],[-75.1675,39.90083333333333],[-80.015833,40.446667],[-122.3316,47.5952],[-121.97,37.403],[-82.50333333333333,27.97583333333333],[-86.7713888888889,36.16638888888889],[-76.864444,38.907778]],profile:"driving-car",profileName:"driving-car",responseType:"json",id:"pro-tour",metrics:["distance","duration"],units:"km"},engine:{version:"9.5.0",build_date:"2025-10-31T12:33:09Z",graph_date:"2025-11-16T10:59:23Z",osm_date:"2025-11-10T00:59:58Z"}}},fm=1e3,zt=60*60*1e3;function Bo(i,{endOfDay:t=!1}={}){return Iu(i,{endOfDay:t})}function gm(i,{dateStart:t,dateEnd:e}={}){if(!Array.isArray(i))throw new TypeError("Schedule must be an array of games.");const n=Bo(t,{endOfDay:!1}),r=Bo(e,{endOfDay:!0});if(n!==null&&r!==null&&r<n)throw new Error("Date end must be greater than or equal to date start.");return i.filter(a=>!!(a!=null&&a.game_id)&&!!(a!=null&&a.gamedate)&&(a==null?void 0:a.game_type)==="REG"&&Number.isFinite(a==null?void 0:a.week)).map(a=>{const o=Date.parse(a.gamedate);return Number.isFinite(o)?{...a,gamedateTimestamp:o}:null}).filter(a=>!(!a||n!==null&&a.gamedateTimestamp<n||r!==null&&a.gamedateTimestamp>r)).sort((a,o)=>a.gamedateTimestamp-o.gamedateTimestamp)}function mm(i){const t=()=>null;if(!i||!Array.isArray(i.stadiums)||!Array.isArray(i.durations))return t;const e=Array.isArray(i.distances)?i.distances:null,n=new Map;return i.stadiums.forEach((r,a)=>{r!=null&&r.stadium_id&&!n.has(r.stadium_id)&&n.set(r.stadium_id,a)}),(r,a)=>{const o=n.get(r),s=n.get(a);if(o===void 0||s===void 0)return null;const l=i.durations[o];if(!Array.isArray(l))return null;const u=l[s];if(!Number.isFinite(u))return null;let c=null;const d=e==null?void 0:e[o],h=Array.isArray(d)?d[s]:null;return Number.isFinite(h)&&(c=h),{travelDurationMs:u*fm,travelDistanceKm:c}}}function pm(i){const t=Number.isFinite(i==null?void 0:i.maxTimeToNextGameMs)?i.maxTimeToNextGameMs:((i==null?void 0:i.maxTimeToNextGameHours)??0)*zt;if(!Number.isFinite(t)||t<=0)throw new Error("Restrictions must define a positive maximum time.");const e=[["oneDayGap","maxDriveOneDayGap"],["twoDayGap","maxDriveTwoDayGap"],["threeDayGap","maxDriveThreeDayGap"],["fourDayGap","maxDriveFourDayGap"]].map(([u,c])=>{const d=i==null?void 0:i[u],h=i==null?void 0:i[c];return!Number.isFinite(d)||d<=0||!Number.isFinite(h)||h<0?null:{gapMs:d*zt,maxDriveMs:h*zt}}).filter(Boolean).sort((u,c)=>u.gapMs-c.gapMs);if(e.length===0)throw new Error("Restrictions must include at least one valid gap rule.");const n=e[0].gapMs;if(t<=n)throw new Error("Maximum time between games must be greater than the minimum time.");const r=Number(Me==null?void 0:Me.minTimeToNextGameHoursFlight),a=Number(i==null?void 0:i.minTimeToNextGameHoursFlight),o=Number.isFinite(a)&&a>=0?a:Number.isFinite(r)&&r>=0?r:36,s=Math.max(0,o*zt),l=!!((i==null?void 0:i.allowFlights)??(Me==null?void 0:Me.allowFlights)??!1);return{minMs:n,maxMs:t,gapRules:e,allowFlights:l,minFlightMs:s}}function bm(i,t){t.forEach(e=>{i.hasNode(e.game_id)||i.addNode(e.game_id,{...e})})}function vm(i,t,e){if(!Number.isFinite(e)||!Array.isArray(i)||i.length===0)return!0;if(e>=t)return!1;let n=null;for(const r of i)if(t>=r.gapMs)n=r;else break;return n?e<=n.maxDriveMs:!0}function ym(i,t){return!(i!=null&&i.allowFlights)||!Number.isFinite(i.minFlightMs)?!1:t>=i.minFlightMs}function wm(i,t,e,n){for(let r=0;r<t.length;r+=1){const a=t[r];for(let o=r+1;o<t.length;o+=1){const s=t[o],l=s.gamedateTimestamp-a.gamedateTimestamp;if(l<e.minMs)continue;if(l>e.maxMs)break;const u=`${a.game_id}->${s.game_id}`;if(i.hasEdge(u))continue;const c=n(a.stadium_id,s.stadium_id),d=c==null?void 0:c.travelDurationMs;if(!Number.isFinite(d))continue;const h=Number.isFinite(c==null?void 0:c.travelDistanceKm)?c.travelDistanceKm:null;let f=!1;if(!vm(e.gapRules,l,d)){if(!ym(e,l))continue;f=!0}const p={timeBetweenGamesMs:l,timeBetweenGamesHours:l/zt,travelDurationMs:d,travelDurationHours:d/zt,travelBufferMs:l-d,travelBufferHours:(l-d)/zt,travelDistanceKm:h,isFlight:f};i.addDirectedEdgeWithKey(u,a.game_id,s.game_id,p)}}}function Ul({schedule:i,routeCosts:t=zn,restrictions:e=Me,stadiumWeights:n,teamWeights:r}={}){const a=gm(i,{dateStart:e==null?void 0:e.dateStart,dateEnd:e==null?void 0:e.dateEnd}),o=pm(e),s=mm(t),l=new he({type:"directed",multi:!1,allowSelfLoops:!1}),u=n??ji(),c=r??Wi(),d=a.filter(h=>_m(h,u,c));return bm(l,d),wm(l,d,o,s),l}function _m(i,t,e){return!i||km(i.stadium_id,t)<=0||Uo(i.home_team,e)<=0?!1:Uo(i.away_team,e)>0}function km(i,t){const e=typeof i=="string"||typeof i=="number"?String(i).trim():"";if(!e)return 1;const n=Number(t==null?void 0:t[e]);return Number.isFinite(n)?n:1}function Uo(i,t){const e=typeof i=="string"||typeof i=="number"?String(i).trim().toUpperCase():"";if(!e)return 1;const n=Number(t==null?void 0:t[e]);return Number.isFinite(n)?n:1}const xm="route-graph-dialog",ti={outerBorder:"#999",borderFallback:"#999",nodeFallback:"#f00",labelEdge:"#999",labelSelected:"#0f172a",labelConnected:"#ccc",edgeDefault:"#aaa",edgeMuted:"#999",edgeReachable:"#7f7",edgeFlightIncoming:"#faa",edgeFlightOutgoing:"#f44"},Sm={outerBorder:"--color-graph-node-outer-border",borderFallback:"--color-graph-node-border-fallback",nodeFallback:"--color-graph-node-fallback",labelEdge:"--color-graph-edge-label",labelSelected:"--color-graph-label-selected",labelConnected:"--color-graph-label-connected",edgeDefault:"--color-graph-edge-default",edgeMuted:"--color-graph-edge-muted",edgeReachable:"--color-graph-edge-reachable",edgeFlightIncoming:"--color-graph-edge-flight-incoming",edgeFlightOutgoing:"--color-graph-edge-flight-outgoing"};let Ae=Wl();const Hl=.5,Em=Tl({borders:[{size:{value:.1},color:{attribute:"outerBorderColor"}},{size:{attribute:"borderSize",defaultValue:Hl},color:{attribute:"borderColor",defaultValue:Ae.borderFallback}},{size:{fill:!0},color:{attribute:"color",defaultValue:Ae.nodeFallback}}]});function Cm({dialogKit:i,stadiumLookup:t,openHelpTopic:e,onDialogClose:n}){let r=null;function a(){r&&(r.kill(),r=null)}function o(){Ae=Wl(),i.open({title:L("dialog.routingGraph.title"),size:"graph",id:xm,onClose:()=>{a(),n==null||n()},build({body:l,actions:u,close:c}){const d=document.createElement("div");d.className="graph-modal-layout";const h=document.createElement("div");h.className="graph-canvas",h.setAttribute("role","application");const f=document.createElement("aside");f.className="graph-details-panel";const b=document.createElement("div");b.id="game-details",b.className="details-body",Li(b),f.append(b),d.append(h,f),l.appendChild(d);const p=ni({topicId:"help-dialog-routing-graph",openHelpTopic:e}),w=document.createElement("button");return w.type="button",w.textContent=L("button.close"),w.classList.add("btn","btn-text","btn-primary"),w.addEventListener("click",c),u.append(p,w),s(h,b),{focusTarget:h}}})}async function s(l,u){a();const c=Be(),d=await ra(),h=Tm(c,d);r=new Uf(h,l,{renderLabels:!0,renderEdgeLabels:!0,labelColor:{attribute:"labelColor",color:Ae.labelEdge},edgeLabelColor:{color:Ae.labelEdge},defaultNodeType:"border",nodeProgramClasses:{border:Em},defaultEdgeType:"arrow",enableEdgeHoverEvents:!0});let f=null,b=null;const p=new Set,w=new Set,E=new Set,y=new Set;function v(_){p.clear(),w.clear(),E.clear(),y.clear(),!(!_||!h.hasNode(_))&&(p.add(_),h.forEachOutNeighbor(_,D=>{p.add(D)}),h.forEachOutEdge(_,D=>{w.add(D)}),h.forEachInNeighbor(_,D=>{p.add(D),E.add(D)}),h.forEachInEdge(_,D=>{w.add(D),y.add(D)}))}r.setSetting("nodeReducer",(_,D)=>{const k=f??b,S=b===_,C=D.label??"",M=S?{...D,label:C,forceLabel:!0,labelColor:Ae.labelSelected,highlighted:!0,class:"selected-node"}:{...D,label:"",forceLabel:!1};if(!k)return M;if(_===k||p.has(_)){const P={...M,label:C,forceLabel:!0,labelColor:_===k||_===b?Ae.labelSelected:Ae.labelConnected};if(E.has(_)&&_!==k){const A=Wo(P,.4);return{...A,size:Math.max((A.size??5.5)*.9,2.5)}}return P}if(S)return M;const F=Wo(M,.25);return{...F,size:Math.max((F.size??5.5)*.75,2.5),label:"",forceLabel:!1}}),r.setSetting("edgeReducer",(_,D)=>{const k=f??b,S=Dm(D.travelDurationHours),C=k?S:"";if(!k)return{...D,color:Ae.edgeDefault,label:C};if(w.has(_)){const M=y.has(_),F=!!D.isFlight,P=M?Ae.edgeMuted:Ae.edgeReachable,A=F?M?Ae.edgeFlightIncoming:Ae.edgeFlightOutgoing:P;return{...D,color:A,label:C}}return{...D,hidden:!0,label:""}}),r.on("enterNode",({node:_})=>{f=_,v(_),r.refresh();const D=h.getNodeAttributes(_);Lr(u,D,t)}),r.on("leaveNode",()=>{if(f=null,v(b),r.refresh(),b!=null){const _=h.getNodeAttributes(b);Lr(u,_,t)}else Li(u)}),r.on("downNode",({node:_})=>{b=_,f=null,v(_),r.refresh();const D=h.getNodeAttributes(_);Lr(u,D,t)}),r.on("clickStage",()=>{f=null,b=null,v(null),r.refresh(),Li(u)}),Li(u)}return{openGraphModal:o,dispose:a}}function Lr(i,t,e){const n=Number.isFinite(t.week)?t.week:L("label.unknown"),r=t.game_label&&String(t.game_label).trim().length>0?`${n} - ${t.game_label}`:`${n}`,a=t.stadium_id?e.get(t.stadium_id):null,o=(a==null?void 0:a.location_name)??L("label.unknown"),s=t.stadium??t.stadium_id??L("label.unknown"),l=t.away_team??L("label.unknown"),u=t.home_team??L("label.unknown");i.innerHTML=`
    <div>${L("label.week")} ${r}</div>  
    <h3>${l} @ ${u}</h3>
    <dl>
      <dt>${L("label.kickoff")}</dt>
      <dd>${os(t,e)}</dd>
      <dt>${L("label.stadium")}</dt>
      <dd>${s}</dd>
      <dt>${L("label.location")}</dt>
      <dd>${o}</dd>
    </dl>
  `}function Li(i){i.innerHTML=`<h3>${L("label.gameDetailsHeading")}</h3><p>${L("message.graphSelectPrompt")}</p>`}function Tm(i,t){const e=Ul({restrictions:i,routeCosts:zn,schedule:t}),n=new Map;(ns??[]).forEach(v=>{if(v!=null&&v.team){const _=v.color_city_dot||v.color_helmet_shell||v.color_helmet_logo||Ae.borderFallback,D=v.color_city_border||v.color_helmet_logo||_||Ae.borderFallback;n.set(v.team.toUpperCase(),{fill:_,border:D})}});const r=new Map,a=[],o=[];((zn==null?void 0:zn.stadiums)??[]).forEach(v=>{const _=Array.isArray(v==null?void 0:v.location)?v.location:null;v!=null&&v.stadium_id&&_&&_.length===2&&Number.isFinite(_[0])&&Number.isFinite(_[1])&&(r.set(v.stadium_id,_),a.push(_[0]),o.push(_[1]))});const s=a.length>0&&o.length>0,l=s?Math.min(...a):-130,u=s?Math.max(...a):-60,c=s?Math.min(...o):24,d=s?Math.max(...o):50,h=Math.max(u-l,1e-6),f=Math.max(d-c,1e-6),b=100/Math.max(h,f),p=h*b,w=f*b,E=p*1.5;function y(v){if(!v)return[0,0];let _=0;for(let C=0;C<v.length;C+=1)_=_*31+v.charCodeAt(C)|0;const D=.6,k=((_&4095)/4095-.5)*D,S=((_>>12&4095)/4095-.5)*D;return[k,S]}return e.forEachNode((v,_,D)=>{const k=r.get(_.stadium_id),S=k?k[0]:l+h/2,C=k?k[1]:c+f/2,M=(S-l)/h,F=(C-c)/f*3,P=Number.isFinite(_.week)?_.week:1,A=_.game_label&&String(_.game_label).trim().length>0?L("label.graphNodeTagSuffix",{tag:_.game_label}):"",G=Number.isFinite(_.week)?_.week:L("label.unknown"),W=_.away_team??L("label.unknown"),Y=_.home_team??L("label.unknown"),Z=L("label.graphNode",{week:G,away:W,home:Y,tagSuffix:A}),Q=typeof _.home_team=="string"?_.home_team.toUpperCase():"",j=Q&&n.has(Q)?n.get(Q):null,ee=(j==null?void 0:j.fill)??ti.nodeFallback,ne=(j==null?void 0:j.border)??ee??ti.borderFallback,[ue,ye]=y(_.game_id??String(D)),me=M*p+(P-1)*E+ue,Ce=F*w+ye;e.setNodeAttribute(v,"x",me),e.setNodeAttribute(v,"y",Ce),e.setNodeAttribute(v,"size",4),e.setNodeAttribute(v,"label",Z),e.setNodeAttribute(v,"color",ee),e.setNodeAttribute(v,"borderColor",ne),e.setNodeAttribute(v,"outerBorderColor",Ae.outerBorder),e.setNodeAttribute(v,"borderSize",Hl),e.setNodeAttribute(v,"type","border")}),e.forEachEdge(v=>{e.setEdgeAttribute(v,"color",Ae.edgeDefault)}),e}function Ho(i,t){return jo(i,t)??jo(ti.borderFallback,t)}function Wo(i,t){const e=Ho(i.color,t),n=i.borderColor??i.color??Ae.borderFallback,r=Ho(n,t);return{...i,color:e,borderColor:r}}function Wl(){if(typeof window>"u"||typeof document>"u")return{...ti};const i=getComputedStyle(document.documentElement);return Object.fromEntries(Object.entries(ti).map(([t,e])=>{var a;const n=Sm[t];if(!n)return[t,e];const r=(a=i.getPropertyValue(n))==null?void 0:a.trim();return[t,r||e]}))}function jo(i,t){if(!i)return null;const e=i.trim();if(!e)return null;if(e.startsWith("#")){const r=e.slice(1);if(r.length===6){const a=parseInt(r.slice(0,2),16),o=parseInt(r.slice(2,4),16),s=parseInt(r.slice(4,6),16);return`rgba(${a}, ${o}, ${s}, ${t})`}return null}const n=e.match(/\d+(\.\d+)?/g);if(n&&n.length>=3){const[r,a,o]=n.map(Number);return`rgba(${r}, ${a}, ${o}, ${t})`}return null}function Dm(i){return Number.isFinite(i)?(Math.ceil(i*10-1e-9)/10).toFixed(1):""}const Am=typeof globalThis<"u"&&typeof globalThis.requestAnimationFrame=="function"?()=>new Promise(i=>globalThis.requestAnimationFrame(()=>i())):()=>new Promise(i=>setTimeout(i,0)),Fr=24,Nm=60*1e3,Lt=60*60*1e3,Vo=5e3,Ko=2e3,Lm=6,Fm=32,Mm=new Set(["sunday","monday","thursday"]),Rm=new Set(["mnf","tnf","snf","friday"]);function Pm(i){if(typeof i!="string")return null;const t=i.trim().toLowerCase();return!t||t==="any day"?null:Mm.has(t)?t:null}function Im(i){if(!i)return!1;const t=typeof i.game_label=="string"?i.game_label.trim():"";if(!t)return!1;const e=t.toLowerCase();return!Rm.has(e)}function Om(i,t){return i?t[String(i)]??1:1}function Gm(i,t,e){const n=i?e[String(i).toUpperCase()]??1:1,r=t?e[String(t).toUpperCase()]??1:1;return Math.max(n,r)}function Zn(i,t=.1){return Number.isFinite(i)?i<=0?0:i>=1?1:i:t}function $m(i,t,e,n=!1){if(!Number.isFinite(i)||i<=0)return 1;const r=n?t==null?void 0:t.flight:t==null?void 0:t.drive,a=r==null?void 0:r.min,o=r==null?void 0:r.max;if(!Number.isFinite(a)||!Number.isFinite(o)||o<=a)return 1;const s=Math.min(Math.max(i,a),o),l=(o-s)/(o-a),u=Zn(e);return u+(1-u)*l}function zm(i,t,e){return!i||((t==null?void 0:t.get(i))??0)<=0?1:Zn(e)}function Bm(i,t,e,n){const r=Om(i.stadium_id,t);if(r<=0)return 0;const a=Gm(i.home_team,i.away_team,e);if(a<=0)return 0;const o=Im(i)?n:1;return o<=0?0:r*a*o}function na({baseScore:i,travelDurationMs:t,travelStats:e,travelMultiplierFloor:n,travelMultiplierCeilingFlight:r,revisitMultiplierFloor:a,visitedStadiumCounts:o,stadiumId:s,isFlight:l=!1}){if(i<=0)return 0;const u=$m(t,e,n,l);if(u<=0)return 0;const c=l?u*r:u;if(c<=0)return 0;const d=zm(s,o,a);return d<=0?0:i*c*d}function Yo(i){if(!i||i.size===0)return"__none__";const t=[];return i.forEach((e,n)=>{e>0&&t.push(String(n))}),t.length===0?"__none__":(t.sort(),t.join("|"))}function Bn(i,t){if(!i||!t)return;const e=(i.get(t)??0)+1;i.set(t,e)}function Gn(i,t){if(!i||!t)return;const e=i.get(t)??0;e<=1?i.delete(t):i.set(t,e-1)}function Um(i,t,e){i.push(e),i.sort((n,r)=>r.score-n.score),i.length>t&&(i.length=t)}function Hm(i,t){return t.map(e=>({id:e,attributes:{...i.getNodeAttributes(e)}}))}function Wm(i,t,e,n,r){if(!Array.isArray(t)||t.length===0)return[];const a=[],o=new Map;let s=null;for(const l of t){const u=i.getNodeAttributes(l),c=s?`${s}->${l}`:null,d=c?i.getEdgeAttributes(c):null,h=Number.isFinite(d==null?void 0:d.travelDurationMs)?d.travelDurationMs:null,f=Number.isFinite(d==null?void 0:d.travelDistanceKm)?d.travelDistanceKm:null,b=n.get(l)??0,p=na({baseScore:b,travelDurationMs:h??0,travelStats:e,travelMultiplierFloor:r.travel,travelMultiplierCeilingFlight:r.travelFlight,revisitMultiplierFloor:r.revisit,visitedStadiumCounts:o,stadiumId:u.stadium_id,isFlight:!!(d!=null&&d.isFlight)});a.push({nodeKey:l,score:Number.isFinite(p)?p:null,travelDurationMs:s&&Number.isFinite(h)?h:null,travelDistanceKm:s&&Number.isFinite(f)?f:null,isFlight:s?!!(d!=null&&d.isFlight):null}),Bn(o,u.stadium_id),s=l}return a}async function jm({progressInterval:i=Vo,yieldInterval:t=Ko,onProgress:e,shouldAbort:n,restrictions:r,schedule:a,routeCosts:o,stadiumWeights:s,teamWeights:l}={}){const u=r??Be(),c=Math.trunc(u.maxRoutesToFind),d=u.maxTourLengthDays,h=s??ji(),f=l??Wi(),b=Ul({schedule:a,routeCosts:o,restrictions:u,stadiumWeights:h,teamWeights:f}),p=Math.max(1,i??Vo),w=Math.max(1,t??Ko),E=d*Fr*Lt,y=[],v=new Set,_=b.nodes();let k=_.length;const S=Number(u==null?void 0:u.estimatedMaxGamesPerWeek),C=Number.isFinite(S)&&S>0,M=Number(u==null?void 0:u.estimatedMinGamesPerWeek),F=Number.isFinite(M)&&M>0;let P=-1,A=0,G=0,W=0,Y=0;const Z=Date.now();let Q=Z;const j=u==null?void 0:u.enableRouteCache,ne=(u==null?void 0:u.cacheBucketHours)*Lt,ue=j&&ne>0,ye=new Map,me=9,Ce=24,Se=64,Pe=new Map;let Ie=!1,ge=1/0,Ne=-1/0;b.forEachNode((z,N)=>{const U=Number(N.week);Number.isFinite(U)&&(U<ge&&(ge=U),U>Ne&&(Ne=U))}),Number.isFinite(ge)||(ge=1),(!Number.isFinite(Ne)||Ne<ge)&&(Ne=ge);const yt=Math.max((u==null?void 0:u.oneDayGap)*Lt,Lt),Ct=Number(u==null?void 0:u.maxSearchMinutesPerStartGame),Ye=Number.isFinite(Ct)&&Ct>0?Ct*Nm:null,xn=Number(u==null?void 0:u.beamWidthPerStartGame),ai=Number.isFinite(xn)&&xn>0?Math.min(Math.trunc(xn),Fm):Lm,Yt=Number(u==null?void 0:u.maxDriveFourDayGap),oi=Number.isFinite(Yt)&&Yt>0?Yt*Lt:null,qt=Number(u==null?void 0:u.maxDriveTwoDayGap),Sn=Number.isFinite(qt)&&qt>0?qt*Lt:null,rt={drive:{min:1/0,max:-1/0},flight:{min:1/0,max:-1/0}},si={drive:{min:1/0,max:-1/0},flight:{min:1/0,max:-1/0}},Zt=(z,N)=>{N<z.min&&(z.min=N),N>z.max&&(z.max=N)};b.forEachEdge((z,N)=>{const U=N==null?void 0:N.travelDurationMs;if(!(!Number.isFinite(U)||U<=0)){if(N!=null&&N.isFlight){if(Zt(si.flight,U),Sn!==null&&U<Sn)return;Zt(rt.flight,U);return}Zt(si.drive,U),!(oi!==null&&U>oi)&&Zt(rt.drive,U)}});const li=Zn((u==null?void 0:u.revisitMultiplierFloor)??0),En=Zn((u==null?void 0:u.travelMultiplierFloor)??0),Cn=Zn((u==null?void 0:u.travelMultiplierCeilingFlight)??0,.4),Jt=(u==null?void 0:u.specialGameDayPenalty)??1,at={revisit:li,travel:En,travelFlight:Cn>0?Cn:1,specialGameDay:Jt},Pt=new Map;let Xt=0;b.forEachNode((z,N)=>{const U=Bm(N,h,f,at.specialGameDay);Pt.set(z,U),U>Xt&&(Xt=U)});const ui=Xt>0?Xt:1;function ci(z){return!ue||!Number.isFinite(z)||z<0?null:Math.floor(z/ne)}function ir(z,N,U){if(!ue||N===null)return null;const I=ye.get(z);if(!I)return null;const O=I.get(N);return O?O.get(U)??null:null}function di(z,N,U,I){if(!ue||N===null||!I)return;let O=ye.get(z);if(!O)O=new Map,ye.set(z,O);else if(!O.has(N)&&O.size>=Ce){const re=O.keys().next().value;re!==void 0&&O.delete(re)}let K=O.get(N);if(!K)K=new Map,O.set(N,K);else if(!K.has(U)&&K.size>=Se){const re=K.keys().next().value;re!==void 0&&K.delete(re)}K.set(U,I)}async function wt(z=!1){if(!e||!z&&G%p!==0)return;const N=y.map(te=>({...te,nodes:te.nodes})),U=Date.now(),I=A+(P>=0?1:0),O=Math.max(k-I,0),K=U-Z;let re=null;if(O>0)if(!Ie&&I<=1)re=K/Math.max(I,1)*O;else{const te=(Q-Z)/Math.max(I,1),oe=Math.min(Ye,te)*O,ie=U-Q;re=Math.max(oe-ie,0)}await e({evaluatedRoutes:G,bestRoutes:N,elapsedMs:K,totalStartNodes:k,startNodesProcessed:A,currentStartIndex:P,remainingStartNodes:O,estimatedRemainingMs:re})}async function Qt(z,N,U,I){if(N<=0)return!1;const O=I-U;z.length;const K=Wm(b,z,rt,Pt,at),re={score:N,totalDurationMs:O,totalDurationDays:O/(Fr*Lt),nodes:Hm(b,z),nodeMetrics:K};return Um(y,c,re),Y=y.reduce((te,oe)=>{const ie=Array.isArray(oe.nodes)?oe.nodes.length:0;return ie>te?ie:te},0),G+=1,W+=1,e&&await wt(G===1),W>=w&&(W=0,await Am()),!!(n!=null&&n())}function fe(z,N){return z!=null&&Date.now()>=z?(Ie=!0,{aborted:!1,budgetExceeded:!0,bestSuffixScore:0,bestSuffixNodes:[],bestSuffixEndTimestamp:N,suffixes:[]}):null}function en({nodeKey:z,currentTimestamp:N,startTimestamp:U,visitedNodes:I,visitedStadiumCounts:O,pathLength:K}){const re=b.outEdges(z),te=[];for(const oe of re){const ie=b.target(oe);if(I.has(ie))continue;const pe=b.getEdgeAttributes(oe),se=b.getNodeAttributes(ie),be=Number.isFinite(se.gamedateTimestamp)?se.gamedateTimestamp:Date.parse(se.gamedate);if(!Number.isFinite(be))continue;const Le=be-U;if(!Number.isFinite(Le)||Le>E)continue;const qe=be-N;if(!Number.isFinite(qe)||qe<0)continue;const ot=(pe==null?void 0:pe.travelDurationMs)??0,Tt=Pt.get(ie)??0,Dt=na({baseScore:Tt,travelDurationMs:ot,travelStats:rt,travelMultiplierFloor:at.travel,travelMultiplierCeilingFlight:at.travelFlight,revisitMultiplierFloor:at.revisit,visitedStadiumCounts:O,stadiumId:se.stadium_id,isFlight:!!(pe!=null&&pe.isFlight)});if(Dt<=0)continue;const tn=Number.isFinite(pe==null?void 0:pe.travelBufferMs)?pe.travelBufferMs:qe-ot,Dn=1/(1+(O.get(se.stadium_id)??0)),gi=Number.isFinite(se.week)?se.week/18:.5,mi=1/(K+1),Te=Math.random()*.01,He=Dt*1e3*Dn+tn/1e3+gi*10+mi+Te;te.push({edgeKey:oe,targetNodeKey:ie,targetAttributes:se,targetTimestamp:be,edgeAttributes:pe,edgeTravelDurationMs:ot,nodeScore:Dt,priority:He})}return te.sort((oe,ie)=>ie.priority-oe.priority),te}async function Tn({startNodeKey:z,startTimestamp:N,startAttributes:U,initialScore:I,beamWidth:O}){const K=new Map;Bn(K,U.stadium_id);let te=[{path:[z],score:I,currentNodeKey:z,currentTimestamp:N,visitedNodes:new Set([z]),visitedStadiumCounts:K}];for(;te.length>0;){if(n!=null&&n())return!0;const oe=[];for(const ie of te){const pe=en({nodeKey:ie.currentNodeKey,currentTimestamp:ie.currentTimestamp,startTimestamp:N,visitedNodes:ie.visitedNodes,visitedStadiumCounts:ie.visitedStadiumCounts,pathLength:ie.path.length});if(pe.length===0)continue;const se=pe.slice(0,O);for(const be of se){const Le=new Set(ie.visitedNodes);Le.add(be.targetNodeKey);const qe=new Map(ie.visitedStadiumCounts);Bn(qe,be.targetAttributes.stadium_id);const ot=ie.score+be.nodeScore,Tt=[...ie.path,be.targetNodeKey];if(await Qt(Tt,ot,N,be.targetTimestamp))return!0;oe.push({path:Tt,score:ot,currentNodeKey:be.targetNodeKey,currentTimestamp:be.targetTimestamp,visitedNodes:Le,visitedStadiumCounts:qe})}}if(oe.length===0)break;oe.sort((ie,pe)=>pe.score-ie.score),te=oe.slice(0,O)}return!1}async function hi(z,N,U,I,O,K,re,te,oe){var mi;if(n!=null&&n())return{aborted:!0,bestSuffixScore:0,bestSuffixNodes:[],bestSuffixEndTimestamp:O,suffixes:[]};if(await Qt(N,U,I,O))return{aborted:!0,bestSuffixScore:0,bestSuffixNodes:[],bestSuffixEndTimestamp:O,suffixes:[]};const pe=fe(oe,O);if(pe)return pe;let se=0,be=[],Le=O;const qe=[],ot=Math.max(0,E-(O-I)),Tt=ci(ot);if(y.length>=c){const Te=((mi=y[y.length-1])==null?void 0:mi.score)??0;let He=Math.max(0,Math.floor(ot/yt));if(Y>N.length){const Ze=Y-N.length;Ze>=0&&(He=Math.min(He,Ze))}if(U+He*ui<=Te)return{aborted:!1,bestSuffixScore:0,bestSuffixNodes:[],bestSuffixEndTimestamp:O,suffixes:[]}}const Dt=Yo(K),tn=fe(oe,O);if(tn)return tn;const fi=en({nodeKey:z,currentTimestamp:O,startTimestamp:I,visitedNodes:v,visitedStadiumCounts:K,pathLength:N.length});for(const Te of fi){const He=fe(oe,O);if(He)return He;if(n!=null&&n())return{aborted:!0,bestSuffixScore:se,bestSuffixNodes:be,bestSuffixEndTimestamp:Le,suffixes:[]};const{targetNodeKey:De,targetAttributes:Ze,targetTimestamp:st,edgeAttributes:tp,edgeTravelDurationMs:np,nodeScore:nn}=Te,or=st-O,Zl=st-I,Ta={nodes:[De],totalScore:nn,endTimestamp:st,totalDurationMs:or},Jl=Math.max(0,E-Zl),Xl=ci(Jl);Bn(K,Ze.stadium_id);const Ql=Yo(K),Je=ir(De,Xl,Ql),sr=U+nn;if(Je&&Array.isArray(Je.suffixes)){const ke=[...N,De];let At=await Qt(ke,sr,I,st);if(At)return Gn(K,Ze.stadium_id),{aborted:!0,bestSuffixScore:se,bestSuffixNodes:be,bestSuffixEndTimestamp:Le,suffixes:[]};const ur=[Ta];for(const Fe of Je.suffixes){if(!Fe||!Array.isArray(Fe.nodes))continue;const rn=Fe.nodes,Da=Number.isFinite(Fe.totalScore)?Fe.totalScore:0,tu=Number.isFinite(Fe.totalDurationMs)?Fe.totalDurationMs:0,Aa=Number.isFinite(Fe.endTimestamp)?Fe.endTimestamp:st;if(rn.length>0&&(At=await Qt([...ke,...rn],sr+Da,I,Aa),At))return Gn(K,Ze.stadium_id),{aborted:!0,bestSuffixScore:se,bestSuffixNodes:be,bestSuffixEndTimestamp:Le,suffixes:[]};ur.push({nodes:[De,...rn],totalScore:nn+Da,endTimestamp:Aa,totalDurationMs:or+tu})}for(const Fe of ur){const rn=Number.isFinite(Fe.totalScore)?Fe.totalScore:0;rn>se&&(se=rn,be=[...Fe.nodes],Le=Fe.endTimestamp??st)}if(Number.isFinite(Je.bestSuffixScore)&&Je.bestSuffixScore>0){const Fe=nn+Je.bestSuffixScore;Fe>se&&(se=Fe,be=Je.bestSuffixNodes&&Je.bestSuffixNodes.length>0?[De,...Je.bestSuffixNodes]:[De],Le=Je.bestSuffixNodes&&Je.bestSuffixNodes.length>0?Je.bestSuffixEndTimestamp:st)}qe.push(...ur),Gn(K,Ze.stadium_id);continue}v.add(De),N.push(De);const lt=await hi(De,N,sr,I,st,K,re,te,oe);if(N.pop(),v.delete(De),lt.aborted||lt.budgetExceeded)return Gn(K,Ze.stadium_id),lt;const eu=Array.isArray(lt.suffixes)?lt.suffixes:[],lr=[Ta];for(const ke of eu){if(!ke||!Array.isArray(ke.nodes))continue;const At=Number.isFinite(ke.totalScore)?ke.totalScore:0;lr.push({nodes:[De,...ke.nodes],totalScore:nn+At,endTimestamp:ke.nodes.length>0&&Number.isFinite(ke.endTimestamp)?ke.endTimestamp:st,totalDurationMs:or+(Number.isFinite(ke.totalDurationMs)?ke.totalDurationMs:0)})}for(const ke of lr){const At=Number.isFinite(ke.totalScore)?ke.totalScore:0;At>se&&(se=At,be=[...ke.nodes],Le=ke.endTimestamp??st)}if(lt.bestSuffixScore>0){const ke=nn+lt.bestSuffixScore;ke>se&&(se=ke,be=lt.bestSuffixNodes.length>0?[De,...lt.bestSuffixNodes]:[De],Le=lt.bestSuffixNodes.length>0?lt.bestSuffixEndTimestamp:st)}qe.push(...lr),Gn(K,Ze.stadium_id)}const Dn=new Map;for(const Te of qe){if(!Te||!Array.isArray(Te.nodes)||Te.nodes.length===0)continue;const He=Te.nodes.join("->"),De=Dn.get(He),Ze=Number.isFinite(Te.totalScore)?Te.totalScore:0;(!De||Ze>(Number.isFinite(De.totalScore)?De.totalScore:0))&&Dn.set(He,{nodes:[...Te.nodes],totalScore:Ze,endTimestamp:Te.endTimestamp,totalDurationMs:Te.totalDurationMs})}const gi=Array.from(Dn.values()).sort((Te,He)=>(Number.isFinite(He.totalScore)?He.totalScore:0)-(Number.isFinite(Te.totalScore)?Te.totalScore:0)).slice(0,me);return ue&&di(z,Tt,Dt,{suffixes:gi,bestSuffixScore:se,bestSuffixNodes:be,bestSuffixEndTimestamp:Le}),{aborted:!1,bestSuffixScore:se,bestSuffixNodes:be,bestSuffixEndTimestamp:Le,suffixes:gi}}const _t=[],It=d/7,Ue=Number.isFinite(Ne)?Ne:null,rr=F?Math.max(1,Math.ceil(It*M)):1,ar=C?Math.max(1,Math.ceil(It*S)):1/0,g=u==null?void 0:u.shortWindowDays,m=Number.isFinite(u==null?void 0:u.dateStart)?u.dateStart:Number(Date.parse(u==null?void 0:u.dateStart)),x=Number.isFinite(u==null?void 0:u.dateEnd)?u.dateEnd:Number(Date.parse(u==null?void 0:u.dateEnd)),T=Number.isFinite(m)&&Number.isFinite(x)&&x>=m?(x-m+1)/(Fr*Lt):null,$=Number.isFinite(T)&&T<=g,H=Pm(u==null?void 0:u.requiredStartDayOfWeek);for(const z of _){const N=b.getNodeAttributes(z),U=Number.isFinite(N.gamedateTimestamp)?N.gamedateTimestamp:Date.parse(N.gamedate);if(!Number.isFinite(U)||H&&(typeof N.weekday=="string"?N.weekday.trim().toLowerCase():"")!==H)continue;let I=!0;if(!$){const O=Number(N.week),K=Number.isFinite(O)&&Number.isFinite(Ue)?Math.max(Ue-O+1,0):null;if(K!==null&&K<=0)I=!1;else if(F||C){let re=1/0;if(C){const te=K!==null?Math.max(0,Math.ceil(K*S)):1/0,oe=Math.max(0,Math.ceil(It*S));re=Math.min(te,oe,ar)}I=re>=rr}}I&&_t.push({nodeKey:z,startTimestamp:U})}k=_t.length,await wt(!0);for(let z=0;z<_t.length;z+=1){const{nodeKey:N,startTimestamp:U}=_t[z];if(n!=null&&n())break;const I=b.getNodeAttributes(N);if(!$&&C&&Y>0){const pe=Number(I.week),se=Number.isFinite(pe)&&Number.isFinite(Ue)?Math.max(Ue-pe+1,0):null;if(se!==null&&Math.max(1,Math.ceil(se*S))<Y){A+=1,await wt(!0);continue}}P=z,Q=Date.now(),await wt(!0),v.clear(),v.add(N),Pe.clear();const O=Pt.get(N)??0,K=na({baseScore:O,travelDurationMs:0,travelStats:rt,travelMultiplierFloor:at.travel,travelMultiplierCeilingFlight:at.travelFlight,revisitMultiplierFloor:at.revisit,visitedStadiumCounts:Pe,stadiumId:I.stadium_id,isFlight:!1});if(K<=0){A+=1,P=-1,await wt(!0);continue}Bn(Pe,I.stadium_id);const re=[N],te=Ye!=null?Date.now()+Ye:null,oe=await hi(N,re,K,U,U,Pe,rt,at,te);let ie=oe.aborted;if(!ie&&oe.budgetExceeded&&Ye!=null&&ai>0&&await Tn({startNodeKey:N,startTimestamp:U,startAttributes:I,initialScore:K,beamWidth:ai})&&(ie=!0),A+=1,P=-1,Pe.clear(),await wt(!0),ie)break}return await wt(!0),{routes:y,evaluatedRoutes:G,elapsedMs:Date.now()-Z,totalStartNodes:k,startNodesProcessed:A}}function Vm({routesView:i,controls:t}){let e=null,n=0;function r(){if(ls()){o();return}i.reset(),a()}function a(){t.setSearchState(!0),e={aborted:!1},s(e).catch(l=>{console.error("Unable to compute routes:",l),t.setSearchState(!1),i.showProgress({evaluatedRoutes:0,bestRoutes:[],elapsedMs:0,totalStartNodes:0,startNodesProcessed:0,remainingStartNodes:0,estimatedRemainingMs:null,isComplete:!0,aborted:!0})})}function o(){e&&(e.aborted=!0)}async function s(l){const u=++n;i.showProgress({evaluatedRoutes:0,bestRoutes:[],elapsedMs:0,totalStartNodes:0,startNodesProcessed:0,remainingStartNodes:0,estimatedRemainingMs:null,isComplete:!1});try{const d=()=>typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now();let h=0,f=null,b=null;const p=C=>{l!==e||l!=null&&l.aborted||n!==u||i.showProgress({...C,isComplete:!1})},w=()=>{if(b=null,!f)return;const C=f;f=null,h=d(),p(C)},E=C=>{if(l!==e||l!=null&&l.aborted||n!==u)return;const M=d();if(M-h>=300&&!f){h=M,p(C);return}if(f=C,!b){const F=Math.max(300-(M-h),0);b=setTimeout(w,F)}},y=await ra(),v=await jm({schedule:y,onProgress:E,shouldAbort:()=>(l==null?void 0:l.aborted)||n!==u}),_=(v==null?void 0:v.routes)??[],D={elapsedMs:(v==null?void 0:v.elapsedMs)??0};i.setRoutes(_,D);const k=(v==null?void 0:v.totalStartNodes)??0,S=(v==null?void 0:v.startNodesProcessed)??k;i.showProgress({evaluatedRoutes:(v==null?void 0:v.evaluatedRoutes)??0,bestRoutes:_,elapsedMs:(v==null?void 0:v.elapsedMs)??0,totalStartNodes:k,startNodesProcessed:S,remainingStartNodes:Math.max(k-S,0),estimatedRemainingMs:null,isComplete:!0,aborted:!!(l!=null&&l.aborted)})}catch(c){if(l!=null&&l.aborted)return;console.error("Unable to compute routes:",c),i.showProgress({evaluatedRoutes:0,bestRoutes:[],elapsedMs:0,totalStartNodes:0,startNodesProcessed:0,remainingStartNodes:0,estimatedRemainingMs:null,isComplete:!0,aborted:!0})}finally{l===e&&(e=null,t.setSearchState(!1))}}return{handleSearchButtonClick:r}}function Km({toggleButton:i,panel:t,createOverlay:e}){if(!i||!t)return{close(){},dispose(){}};const n=i.closest("[data-app-menu]"),r=Array.from(t.querySelectorAll("[data-menu-close-on-change]"));let a=!1,o=null,s=null,l=null;const u=()=>{const v=L(a?"aria.appMenuClose":"aria.appMenuOpen");i.setAttribute("aria-label",v),i.setAttribute("title",v)},c=()=>{if(l||typeof window>"u")return;const y=v=>{t.contains(v.target)||i.contains(v.target)||f()};window.addEventListener("pointerdown",y,!0),l=()=>{window.removeEventListener("pointerdown",y,!0),l=null}},d=()=>{l&&l()},h=()=>{a||(a=!0,i.setAttribute("aria-expanded","true"),t.hidden=!1,n==null||n.classList.add("app-menu-open"),typeof e=="function"?s=e({className:"app-menu__overlay",onBackgroundPointerDown:()=>{f()}}):c(),window.addEventListener("keydown",p),u())},f=()=>{a&&(a=!1,i.setAttribute("aria-expanded","false"),t.hidden=!0,n==null||n.classList.remove("app-menu-open"),s==null||s.dispose(),s=null,d(),window.removeEventListener("keydown",p),u())},b=()=>{a?f():h()},p=y=>{y.key==="Escape"&&(f(),i.focus())},w=y=>{y.target.closest("[data-menu-close]")&&f()},E=()=>{f()};return i.addEventListener("click",b),t.addEventListener("click",w),r.forEach(y=>{y.addEventListener("change",E)}),o=jt(()=>{u()}),u(),t.hidden=!0,{close:f,dispose(){f(),i.removeEventListener("click",b),t.removeEventListener("click",w),r.forEach(y=>{y.removeEventListener("change",E)}),o&&o()}}}const Ym=["help-app-purpose","help-data-sources"],jl=["system","light","dark"],Vl="pro-tour-planner.theme";qm().catch(i=>{console.error("Failed to bootstrap tour planner:",i)});async function qm(){await Du();const i=await Gu();qu(i.scheduleRange);const t=Zm();Kl(Yl());const e=Wc();qo(),Zo(Xn()),Jm(t.languageSelect),Xm(t.themeSelect),jt(()=>{qo(),p(),w()});const n=pc({ui:t,scheduleRange:i.scheduleRange}),r=bc({root:t.modalRoot});Km({toggleButton:t.menuToggle,panel:t.menuPanel,createOverlay:r.createOverlay});const a=Kc({ui:t,stadiumLookup:i.stadiumLookup,teamLookup:i.teamLookup,favoritesManager:e}),o=()=>{var y;(y=a.refresh)==null||y.call(a)},s=Vd({dialogKit:r,onDialogClose:o}),{openTeamPreferences:l}=Fc({dialogKit:r,teamLookup:i.teamLookup,stadiumLookup:i.stadiumLookup,openHelpTopic:s.openHelpTopic}),{openCityPreferences:u}=_c({dialogKit:r,stadiumLookup:i.stadiumLookup,teamLookup:i.teamLookup,openHelpTopic:s.openHelpTopic}),{openRoutingParameters:c}=xc({dialogKit:r,scheduleRange:i.scheduleRange,controls:n,onExpertModeChange:y=>{Zo(y)},openHelpTopic:s.openHelpTopic}),d=ed({dialogKit:r,favoritesManager:e,stadiumLookup:i.stadiumLookup,teamLookup:i.teamLookup,openHelpTopic:s.openHelpTopic,onDialogClose:o}),h=Cm({dialogKit:r,stadiumLookup:i.stadiumLookup,openHelpTopic:s.openHelpTopic,onDialogClose:o}),f=Vm({routesView:a,controls:n});Ln("open-team-preferences",l),Ln("open-city-preferences",u),Ln("open-routing-parameters",c),Ln("open-graph",h.openGraphModal),Ln("open-help",s.openHelp);function b(){t.teamButton.addEventListener("click",l),t.cityButton.addEventListener("click",u),t.routingButton.addEventListener("click",c),t.favoritesButton.addEventListener("click",d.openFavorites),t.showGraphButton.addEventListener("click",h.openGraphModal),t.helpButton.addEventListener("click",s.openHelp),t.searchButton.addEventListener("click",f.handleSearchButtonClick),t.requiredStartDaySelect.addEventListener("change",()=>n.handleRequiredStartDayChange(t.requiredStartDaySelect.value)),t.maxTourLengthSelect.addEventListener("change",()=>n.handleMaxTourLengthChange(t.maxTourLengthSelect.value)),t.allowFlightsInput.addEventListener("change",()=>n.handleAllowFlightsChange(t.allowFlightsInput.value))}function p(){const y=t.helpTopicsContent,v=t.helpTopicsPanel;if(!y||!v)return;y.innerHTML="";let _=0;Ym.forEach(D=>{const k=Kd(D);k&&(y.appendChild(k),_+=1)}),v.hidden=_===0}function w(){document.querySelectorAll("[data-help-content-block]").forEach(v=>{const _=v.getAttribute("data-help-content-block");if(v.innerHTML="",!_){v.hidden=!0;return}const D=Yd(_);if(!D){v.hidden=!0;return}E(D),v.appendChild(D),v.hidden=!1})}function E(y){y.addEventListener("click",v=>{const _=v.target instanceof Element?v.target.closest("[data-help-topic-link]"):null;if(!_)return;const D=_.getAttribute("data-help-topic-link");D&&(v.preventDefault(),v.stopPropagation(),s.openHelpTopic(D))})}n.initializeDateInputs(),a.initialize(),b(),n.syncDateInputs(),n.setSearchState(!1),p(),w(),ep()}function Zm(){return{routesPanel:we("routes-panel"),routesElement:we("top-routes"),routesProgressElement:we("routes-progress"),routesHeading:we("routes-heading"),teamButton:we("team-preferences-button"),cityButton:we("city-preferences-button"),routingButton:we("routing-parameters-button"),favoritesButton:we("favorites-button"),showGraphButton:we("show-graph-button"),helpButton:we("help-button"),helpTopicsPanel:we("help-topics-panel"),helpTopicsContent:we("help-topics-content"),searchButton:we("search-button"),tourStartInput:we("tour-start-date"),tourEndInput:we("tour-end-date"),requiredStartDaySelect:we("required-start-day"),maxTourLengthSelect:we("max-tour-length"),allowFlightsInput:we("allow-flights"),languageSelect:we("locale-select"),themeSelect:we("theme-select"),modalRoot:document.getElementById("modal-root"),menuToggle:we("app-menu-toggle"),menuPanel:we("app-menu-panel")}}function we(i){const t=document.getElementById(i);if(!t)throw new Error(`Missing required element: ${i}`);return t}function qo(){document.documentElement.lang=ht(),document.querySelectorAll("[data-i18n]").forEach(t=>{const e=t.getAttribute("data-i18n");if(!e)return;const n=L(e),r=t.getAttribute("data-i18n-attr");r?t.setAttribute(r,n):t.textContent=n}),document.title=L("label.appTitle")}function Zo(i){const t=document.documentElement;t.classList.toggle("expert-on",!!i),t.classList.toggle("expert-off",!i)}function Jm(i){if(!i)return;const t=()=>{const e=ht();i.innerHTML="",Nu().forEach(n=>{const r=document.createElement("option");r.value=n,r.textContent=L(`option.language.${n}`),i.appendChild(r)}),i.value=e};t(),i.addEventListener("change",e=>{const n=e.target.value;n&&n!==ht()&&Au(n)}),jt(()=>{t()})}function Xm(i){if(!i)return;const t=()=>{const e=Yl();i.innerHTML="",jl.forEach(n=>{const r=document.createElement("option");r.value=n,r.textContent=L(`option.theme.${n}`),i.appendChild(r)}),i.value=e};t(),i.addEventListener("change",e=>{const n=Qm(e.target.value);Kl(n)}),jt(()=>{t()})}function Kl(i){const t=Ca(i);document.documentElement.setAttribute("data-theme",t)}function Yl(){if(typeof localStorage>"u")return"system";try{const i=localStorage.getItem(Vl);return Ca(i)}catch{return"system"}}function Qm(i){const t=Ca(i);if(typeof localStorage<"u")try{localStorage.setItem(Vl,t)}catch{}return t}function Ca(i){return typeof i=="string"&&jl.includes(i)?i:"system"}function ep(){const i=new URL(ql(),window.location.origin),t=location.href;history.pushState(null,"",t),history.pushState(null,"",t),window.addEventListener("popstate",()=>{location.replace(i.href)})}function ql(){const i="/pro-tour/",t=i.startsWith("/")?i:`/${i}`;return t.endsWith("/")?t:`${t}/`}"serviceWorker"in navigator&&window.addEventListener("load",()=>{const i=window.location.hostname,t=["localhost","127.0.0.1","[::1]"].includes(i);if(!(window.location.protocol==="https:")&&!t)return;const n=ql(),r=new URL("../service-worker.js",import.meta.url);navigator.serviceWorker.register(r,{type:"module",scope:n}).catch(a=>console.error("Service worker registration failed:",a))});
